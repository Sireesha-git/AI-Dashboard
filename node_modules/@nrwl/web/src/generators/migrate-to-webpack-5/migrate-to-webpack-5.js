"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.webMigrateToWebpack5Schematic = exports.webMigrateToWebpack5Generator = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nrwl/devkit");
const webpack5Packages = {
    'copy-webpack-plugin': '^9.0.0',
    'mini-css-extract-plugin': '^1.6.0',
    'source-map-loader': '^2.0.1',
    'terser-webpack-plugin': '^5.1.1',
    webpack: '^5.39.1',
    'webpack-dev-server': '^3.11.2',
    'webpack-merge': '^5.7.3',
    'webpack-node-externals': '^2.5.2',
    'webpack-sources': '^2.2.0',
};
function webMigrateToWebpack5Generator(tree, schema) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        devkit_1.logger.info(`NX Adding webpack 5 to workspace.`);
        // Removing the packages ensures that the versions will be updated when adding them after
        devkit_1.removeDependenciesFromPackageJson(tree, [], Object.keys(webpack5Packages));
        return devkit_1.addDependenciesToPackageJson(tree, {}, webpack5Packages);
    });
}
exports.webMigrateToWebpack5Generator = webMigrateToWebpack5Generator;
exports.default = webMigrateToWebpack5Generator;
exports.webMigrateToWebpack5Schematic = devkit_1.convertNxGenerator(webMigrateToWebpack5Generator);
//# sourceMappingURL=migrate-to-webpack-5.js.map