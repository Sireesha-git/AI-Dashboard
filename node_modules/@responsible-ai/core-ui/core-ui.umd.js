(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@responsible-ai/localization'), require('@responsible-ai/mlchartlib'), require('lodash'), require('@fluentui/react'), require('react'), require('memoize-one'), require('uuid'), require('react-dom'), require('highcharts')) :
    typeof define === 'function' && define.amd ? define(['exports', '@responsible-ai/localization', '@responsible-ai/mlchartlib', 'lodash', '@fluentui/react', 'react', 'memoize-one', 'uuid', 'react-dom', 'highcharts'], factory) :
    (global = global || self, factory(global.CoreUi = {}, global.localization, global.mlchartlib, global._, global.react, global.React, global.memoize, global.uuid, global.ReactDOM, global.Highcharts$1));
}(this, (function (exports, localization, mlchartlib, _, react, React, memoize, uuid, ReactDom, Highcharts$1) { 'use strict';

    _ = _ && _.hasOwnProperty('default') ? _['default'] : _;
    var React__default = 'default' in React ? React['default'] : React;
    memoize = memoize && memoize.hasOwnProperty('default') ? memoize['default'] : memoize;
    ReactDom = ReactDom && ReactDom.hasOwnProperty('default') ? ReactDom['default'] : ReactDom;

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var cohortKey = "Cohort";

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __rest(s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __values(o) {
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
        if (m) return m.call(o);
        if (o && typeof o.length === "number") return {
            next: function () {
                if (o && i >= o.length) o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spreadArray(to, from) {
        for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
            to[j] = from[i];
        return to;
    }

    // Copyright (c) Microsoft Corporation.

    (function (FilterMethods) {
      FilterMethods["GreaterThan"] = "greater";
      FilterMethods["GreaterThanEqualTo"] = "greater and equal";
      FilterMethods["LessThan"] = "less";
      FilterMethods["LessThanEqualTo"] = "less and equal";
      FilterMethods["Equal"] = "equal";
      FilterMethods["Includes"] = "includes";
      FilterMethods["Excludes"] = "excludes";
      FilterMethods["InTheRangeOf"] = "in the range of";
    })(exports.FilterMethods || (exports.FilterMethods = {}));

    (function (Operations) {
      Operations["And"] = "and";
      Operations["Or"] = "or";
    })(exports.Operations || (exports.Operations = {}));

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function compare(a, b) {
      if (a > b) {
        return 1;
      }

      if (a < b) {
        return -1;
      }

      return 0;
    }

    // Copyright (c) Microsoft Corporation.

    (function (ModelTypes) {
      ModelTypes["Regression"] = "regression";
      ModelTypes["Binary"] = "binary";
      ModelTypes["GenerativeText"] = "generativetext";
      ModelTypes["Multiclass"] = "multiclass";
      ModelTypes["ImageBinary"] = "imagebinary";
      ModelTypes["ImageMulticlass"] = "imagemulticlass";
      ModelTypes["ImageMultilabel"] = "imagemultilabel";
      ModelTypes["TextBinary"] = "textbinary";
      ModelTypes["TextMulticlass"] = "textmulticlass";
      ModelTypes["TextMultilabel"] = "textmultilabel";
      ModelTypes["ObjectDetection"] = "objectdetection";
      ModelTypes["QuestionAnswering"] = "questionanswering";
      ModelTypes["Forecasting"] = "forecasting";
    })(exports.ModelTypes || (exports.ModelTypes = {}));

    // Copyright (c) Microsoft Corporation.

    (function (WeightVectors) {
      WeightVectors["Equal"] = "equal";
      WeightVectors["AbsAvg"] = "absAvg";
      WeightVectors["Predicted"] = "predicted";
    })(exports.WeightVectors || (exports.WeightVectors = {}));

    // Copyright (c) Microsoft Corporation.
    function IsMulticlass(modelType) {
      return modelType === exports.ModelTypes.Multiclass || modelType === exports.ModelTypes.ImageMulticlass || modelType === exports.ModelTypes.TextMulticlass;
    }
    function IsBinary(modelType) {
      return modelType === exports.ModelTypes.Binary || modelType === exports.ModelTypes.ImageBinary || modelType === exports.ModelTypes.TextBinary;
    }
    function IsMultilabel(modelType) {
      return modelType === exports.ModelTypes.ImageMultilabel || modelType === exports.ModelTypes.TextMultilabel;
    }
    function IsObjectDetection(modelType) {
      return modelType === exports.ModelTypes.ObjectDetection;
    }
    function IsClassifier(modelType) {
      return modelType === exports.ModelTypes.Binary || modelType === exports.ModelTypes.ImageBinary || modelType === exports.ModelTypes.TextBinary || modelType === exports.ModelTypes.Multiclass || modelType === exports.ModelTypes.ImageMulticlass || modelType === exports.ModelTypes.TextMulticlass || modelType === exports.ModelTypes.ImageMultilabel || modelType === exports.ModelTypes.TextMultilabel;
    }

    // Copyright (c) Microsoft Corporation.

    (function (ChartTypes) {
      ChartTypes["Scatter"] = "scatter";
      ChartTypes["Histogram"] = "histogram";
      ChartTypes["Box"] = "box";
      ChartTypes["Bar"] = "bar";
    })(exports.ChartTypes || (exports.ChartTypes = {}));

    (function (OtherChartTypes) {
      OtherChartTypes["Bubble"] = "bubble";
    })(exports.OtherChartTypes || (exports.OtherChartTypes = {}));

    (function (AxisTypes) {
      AxisTypes["Linear"] = "linear";
      AxisTypes["Logarithmic"] = "logarithmic";
    })(exports.AxisTypes || (exports.AxisTypes = {}));

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var NoLabel = "(none)";

    (function (ColumnCategories) {
      ColumnCategories["Outcome"] = "outcome";
      ColumnCategories["Dataset"] = "dataset";
      ColumnCategories["Index"] = "index";
      ColumnCategories["Explanation"] = "explanation";
      ColumnCategories["Cohort"] = "cohort";
      ColumnCategories["None"] = "none";
    })(exports.ColumnCategories || (exports.ColumnCategories = {}));

    (function (ClassificationEnum) {
      ClassificationEnum[ClassificationEnum["TrueNegative"] = 0] = "TrueNegative";
      ClassificationEnum[ClassificationEnum["FalsePositive"] = 1] = "FalsePositive";
      ClassificationEnum[ClassificationEnum["FalseNegative"] = 2] = "FalseNegative";
      ClassificationEnum[ClassificationEnum["TruePositive"] = 3] = "TruePositive";
    })(exports.ClassificationEnum || (exports.ClassificationEnum = {}));

    (function (MulticlassClassificationEnum) {
      MulticlassClassificationEnum[MulticlassClassificationEnum["Correct"] = 0] = "Correct";
      MulticlassClassificationEnum[MulticlassClassificationEnum["Misclassified"] = 1] = "Misclassified";
    })(exports.MulticlassClassificationEnum || (exports.MulticlassClassificationEnum = {}));

    // Copyright (c) Microsoft Corporation.
    // accessed. It shall apply filters to the raw table and persist the filtered table for presenting to
    // charts and dashboards. It shall sort indexed rows by a selected column.
    // Filtering will create a copy of the underlying dataset and sorting should be in place on this copy.
    // projection should create a copy of values.
    //

    var JointDataset =
    /** @class */
    function () {
      function JointDataset(args) {
        var _this = this;

        this.metaDict = {};
        this.hasDataset = false;
        this.hasLocalExplanations = false;
        this.hasPredictedY = false;
        this.hasPredictedProbabilities = false;
        this.hasTrueY = false;
        this.hasODIncorrect = false;
        this.hasODCorrect = false;
        this.datasetFeatureCount = 0;
        this.predictionClassCount = 0;
        this.datasetRowCount = 0;
        this.localExplanationFeatureCount = 0;
        this.numLabels = 1;
        this.binDict = {}; // private readonly _localExplanationIndexesComputed: boolean[];
        // The user elected to treat numeric columns as categorical. Store the unaltered values here in case they toggle back.

        this.numericValuedColumnsCache = []; // Can add method to set dither scale in future, update charts on change.

        this.ditherScale = 0.1;

        this.getRawValue = function (v, k) {
          var meta = _this.metaDict[k];

          if (v !== undefined && (meta.isCategorical || (meta === null || meta === void 0 ? void 0 : meta.treatAsCategorical)) && meta.sortedCategoricalValues) {
            return meta.sortedCategoricalValues[v];
          }

          return v;
        };

        this._modelMeta = args.metadata;
        var modelTypeIsObjectDetection = IsObjectDetection(this._modelMeta.modelType);
        this.initializeDatasetVariables(args);
        this.initializeLabelVariables(args, modelTypeIsObjectDetection);
        this.initializeErrorVariables(args, modelTypeIsObjectDetection);

        if (args.localExplanations) {
          this.rawLocalImportance = JointDataset.buildLocalFeatureMatrix(args.localExplanations.scores, args.metadata.modelType);
          this.localExplanationFeatureCount = this.rawLocalImportance[0].length;
          this.initializeDataDictIfNeeded(this.rawLocalImportance); // this._localExplanationIndexesComputed = new Array(
          //   this.localExplanationFeatureCount
          // ).fill(false);

          this.buildLocalFlattenMatrix(exports.WeightVectors.AbsAvg);
          this.hasLocalExplanations = true;
        }

        if (this.dataDict === undefined) {
          this.initializeDataDictIfNeeded([]);
        }
      } // creating public static methods of the class instance methods.
      // This is to enable prototyping the cohort concept, where we don't have a single
      // datasource as initially envisioned but an array of them, all build off of the true datasource


      JointDataset.unwrap = function (dataset, key, binVector) {
        if (binVector) {
          return dataset.map(function (row) {
            var rowValue = row[key];
            return binVector.findIndex(function (upperLimit) {
              return upperLimit >= rowValue;
            });
          });
        }

        return dataset.map(function (row) {
          return row[key];
        });
      }; // recover the array representation of just the eval dataset values from a row
      // This includes subbing categorical values back in in place of indexes


      JointDataset.datasetSlice = function (row, metaDict, length) {
        var _a;

        var result = new Array(length);

        for (var i = 0; i < length; i++) {
          var key = JointDataset.DataLabelRoot + i.toString();

          if (metaDict[key].isCategorical || metaDict[key].treatAsCategorical) {
            result[i] = (_a = metaDict[key].sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a[row[key]];
          } else {
            result[i] = row[key];
          }
        }

        return result;
      }; // recover the array representation of just the local explanations from a row


      JointDataset.localExplanationSlice = function (row, length) {
        var result = new Array(length);

        for (var i = 0; i < length; i++) {
          result[i] = row[JointDataset.ReducedLocalImportanceRoot + i.toString()];
        }

        return result;
      };

      JointDataset.predictProbabilitySlice = function (row, length) {
        var result = new Array(length);

        for (var i = 0; i < length; i++) {
          result[i] = row[JointDataset.ProbabilityYRoot + i.toString()];
        }

        return result;
      }; // set the appropriate error value in the keyed column


      JointDataset.setErrorMetrics = function (row, modelType, numLabels) {
        if (numLabels === void 0) {
          numLabels = 0;
        }

        if (modelType === exports.ModelTypes.Regression) {
          row[JointDataset.RegressionError] = Math.abs(row[JointDataset.TrueYLabel] - row[JointDataset.PredictedYLabel]);
          return;
        }

        if (IsBinary(modelType)) {
          // sum pred and 2*true to map to ints 0 - 3,
          // 0: TN
          // 1: FP
          // 2: FN
          // 3: TP
          var predictionCategory = 2 * row[JointDataset.TrueYLabel] + row[JointDataset.PredictedYLabel];
          row[JointDataset.ClassificationError] = predictionCategory;
          return;
        }

        if (IsMulticlass(modelType)) {
          row[JointDataset.ClassificationError] = row[JointDataset.TrueYLabel] !== row[JointDataset.PredictedYLabel] ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
          return;
        }

        if (IsMultilabel(modelType)) {
          var misclassified = false; // go over each label and check if it is misclassified

          for (var i = 0; i < numLabels; i++) {
            if (row[JointDataset.TrueYLabel + i.toString()] !== row[JointDataset.PredictedYLabel + i.toString()]) {
              misclassified = true;
              break;
            }
          }

          row[JointDataset.ClassificationError] = misclassified ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
          return;
        }

        if (IsObjectDetection(modelType)) {
          row[JointDataset.ClassificationError] = row[JointDataset.ObjectDetectionIncorrect] !== NoLabel ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
          return;
        }
      };

      JointDataset.buildLocalFeatureMatrix = function (localExplanationRaw, modelType) {
        switch (modelType) {
          case exports.ModelTypes.Regression:
            {
              return localExplanationRaw.map(function (featureArray) {
                return featureArray.map(function (val) {
                  return [val];
                });
              });
            }

          case exports.ModelTypes.Binary:
          case exports.ModelTypes.Multiclass:
          default:
            {
              return JointDataset.transposeLocalImportanceMatrix(localExplanationRaw);
            }
        }
      };

      JointDataset.transposeLocalImportanceMatrix = function (input) {
        var numClasses = input.length;
        var numRows = input[0].length;
        var numFeatures = input[0][0].length;
        var result = new Array(numRows).fill(0).map(function () {
          return new Array(numFeatures).fill(0).map(function () {
            return new Array(numClasses).fill(0);
          });
        });
        input.forEach(function (rowByFeature, classIndex) {
          rowByFeature.forEach(function (featureArray, rowIndex) {
            featureArray.forEach(function (value, featureIndex) {
              result[rowIndex][featureIndex][classIndex] = value;
            });
          });
        });
        return result;
      };

      JointDataset.prototype.getModelType = function () {
        return this._modelMeta.modelType;
      };

      JointDataset.prototype.getModelClasses = function () {
        return this._modelMeta.classNames;
      };

      JointDataset.prototype.getRow = function (index) {
        var _a;

        return __assign({}, (_a = this.dataDict) === null || _a === void 0 ? void 0 : _a[index]);
      };

      JointDataset.prototype.unwrap = function (key, binVector) {
        if (this.dataDict) {
          return JointDataset.unwrap(this.dataDict, key, binVector);
        }

        return [];
      };

      JointDataset.prototype.setTreatAsCategorical = function (key, value) {
        var _this = this;

        var _a, _b, _c;

        var metadata = this.metaDict[key];
        metadata.treatAsCategorical = value;

        if (value) {
          var values = (_a = this.dataDict) === null || _a === void 0 ? void 0 : _a.map(function (row) {
            return row[key];
          });

          var sortedUniqueValues_1 = _.uniq(values).sort(function (a, b) {
            return a - b;
          });

          metadata.sortedCategoricalValues = sortedUniqueValues_1.map(function (num) {
            return num.toString();
          });
          (_b = this.dataDict) === null || _b === void 0 ? void 0 : _b.forEach(function (row, rowIndex) {
            var numVal = row[key];
            row[key] = sortedUniqueValues_1.indexOf(numVal);
            _this.numericValuedColumnsCache[rowIndex][key] = numVal;
          });
        } else {
          (_c = this.dataDict) === null || _c === void 0 ? void 0 : _c.forEach(function (row, rowIndex) {
            row[key] = _this.numericValuedColumnsCache[rowIndex][key];
          });
          this.addBin(key);
        }
      };

      JointDataset.prototype.setLogarithmicScaling = function (key, value) {
        if (value) {
          this.metaDict[key].AxisType = exports.AxisTypes.Logarithmic;
        } else {
          this.metaDict[key].AxisType = undefined;
        }
      };

      JointDataset.prototype.addBin = function (key, binCountIn) {
        var _a;

        var meta = this.metaDict[key];

        if (!meta.featureRange) {
          return;
        }

        var featureRange = meta.featureRange; // use data-dict for undefined binCount (building default bin)
        // use filtered data for user provided binCount

        var binCount = binCountIn || 5;

        if (binCountIn === undefined) {
          if (featureRange.rangeType === mlchartlib.RangeTypes.Integer) {
            var uniqueValues = _.uniq((_a = this.dataDict) === null || _a === void 0 ? void 0 : _a.map(function (row) {
              return row[key];
            }));

            binCount = Math.min(5, uniqueValues.length);
          }
        }

        var delta = featureRange.max - featureRange.min;

        if (delta === 0 || binCount === 0) {
          this.binDict[key] = [featureRange.max];
          meta.sortedCategoricalValues = [featureRange.min + " - " + featureRange.max];
          return;
        } // make uniform bins in these cases


        if (featureRange.rangeType === mlchartlib.RangeTypes.Numeric || delta < binCount - 1) {
          var binDelta_1 = delta / binCount;
          var array_1 = new Array(binCount).fill(0).map(function (_, index) {
            return index !== binCount - 1 ? featureRange.min + binDelta_1 * (1 + index) : featureRange.max;
          });
          var prevMax_1 = featureRange.min;
          var labelArray_1 = array_1.map(function (num) {
            var label = prevMax_1.toLocaleString(undefined, {
              maximumSignificantDigits: 3
            }) + " - " + (num === null || num === void 0 ? void 0 : num.toLocaleString(undefined, {
              maximumSignificantDigits: 3
            }));
            prevMax_1 = num;
            return label;
          });
          this.binDict[key] = array_1;
          meta.sortedCategoricalValues = labelArray_1;
          return;
        } // handle integer case, increment delta since we include the ends as discrete values


        var intDelta = delta / binCount;
        var array = new Array(binCount).fill(0).map(function (_, index) {
          if (index === binCount - 1) {
            return featureRange.max;
          }

          return Math.ceil(featureRange.min - 1 + intDelta * (index + 1));
        });
        var previousVal = featureRange.min;
        var labelArray = array.map(function (num) {
          var label = previousVal === num ? previousVal.toLocaleString(undefined, {
            maximumSignificantDigits: 3
          }) : previousVal.toLocaleString(undefined, {
            maximumSignificantDigits: 3
          }) + " - " + num.toLocaleString(undefined, {
            maximumSignificantDigits: 3
          });
          previousVal = num + 1;
          return label;
        });
        this.binDict[key] = array;
        meta.sortedCategoricalValues = labelArray;
      }; // project the 3d array based on the selected vector weights. Costly to do, so avoid when possible.


      JointDataset.prototype.buildLocalFlattenMatrix = function (weightVector) {
        var _this = this;

        if (!this.rawLocalImportance) {
          return;
        }

        var featuresMinArray = new Array(this.rawLocalImportance[0].length).fill(Number.MAX_SAFE_INTEGER);
        var featuresMaxArray = new Array(this.rawLocalImportance[0].length).fill(Number.MIN_SAFE_INTEGER);

        switch (this._modelMeta.modelType) {
          case exports.ModelTypes.Regression:
            {
              // no need to flatten what is already flat
              this.rawLocalImportance.forEach(function (featuresByClasses, rowIndex) {
                featuresByClasses.forEach(function (classArray, featureIndex) {
                  var val = classArray[0];

                  if (val > featuresMaxArray[featureIndex]) {
                    featuresMaxArray[featureIndex] = val;
                  }

                  if (val < featuresMinArray[featureIndex]) {
                    featuresMinArray[featureIndex] = val;
                  }

                  if (_this.dataDict) {
                    _this.dataDict[rowIndex][JointDataset.ReducedLocalImportanceRoot + featureIndex.toString()] = classArray[0];
                  } // this._localExplanationIndexesComputed[rowIndex] = false;

                });
              });
              break;
            }

          case exports.ModelTypes.Binary:
          case exports.ModelTypes.Multiclass:
            {
              this.rawLocalImportance.forEach(function (featuresByClasses, rowIndex) {
                featuresByClasses.forEach(function (classArray, featureIndex) {
                  // this._localExplanationIndexesComputed[rowIndex] = false;
                  var value;

                  switch (weightVector) {
                    case exports.WeightVectors.Equal:
                      {
                        value = classArray.reduce(function (a, b) {
                          return a + b;
                        }) / classArray.length;
                        break;
                      }
                    // case WeightVectors.predicted: {
                    //     return classArray[this.predictedY[rowIndex]];
                    // }

                    case exports.WeightVectors.AbsAvg:
                      {
                        value = classArray.reduce(function (a, b) {
                          return a + Math.abs(b);
                        }, 0) / classArray.length;
                        break;
                      }

                    default:
                      {
                        value = classArray[weightVector];
                      }
                  }

                  if (value > featuresMaxArray[featureIndex]) {
                    featuresMaxArray[featureIndex] = value;
                  }

                  if (value < featuresMinArray[featureIndex]) {
                    featuresMinArray[featureIndex] = value;
                  }

                  if (_this.dataDict) {
                    _this.dataDict[rowIndex][JointDataset.ReducedLocalImportanceRoot + featureIndex.toString()] = value;
                  }
                });
              });
              break;
            }
        }

        this.rawLocalImportance[0].forEach(function (_classArray, featureIndex) {
          var featureLabel = _this._modelMeta.featureNames[featureIndex];
          var key = JointDataset.ReducedLocalImportanceRoot + featureIndex.toString();
          _this.metaDict[key] = {
            abbridgedLabel: localization.localization.formatString(localization.localization.Interpret.featureImportanceOf, featureLabel),
            category: exports.ColumnCategories.Explanation,
            featureRange: {
              max: featuresMaxArray[featureIndex],
              min: featuresMinArray[featureIndex],
              rangeType: mlchartlib.RangeTypes.Numeric
            },
            isCategorical: false,
            label: localization.localization.formatString(localization.localization.Interpret.featureImportanceOf, featureLabel)
          };
          _this.binDict[key] = undefined;
        });
      };

      JointDataset.prototype.getJointDatasetFeatureName = function (userFeatureName) {
        // Return the joint dataset feature name for the given user feature name.
        var jointDatasetFeatureName = undefined;
        var isUserFeatureNameFound = false;

        for (jointDatasetFeatureName in this.metaDict) {
          if (this.metaDict[jointDatasetFeatureName].abbridgedLabel === userFeatureName) {
            isUserFeatureNameFound = true;
            break;
          }
        }

        if (isUserFeatureNameFound) {
          return jointDatasetFeatureName;
        }

        return undefined;
      };

      JointDataset.prototype.initializeDatasetVariables = function (args) {
        var _this = this;

        if (args.featureMetaData !== undefined) {
          this.datasetMetaData = {
            featureMetaData: args.featureMetaData
          };
        }

        if (args.dataset && args.dataset.length > 0) {
          this.initializeDataDictIfNeeded(args.dataset);
          this.datasetRowCount = args.dataset.length;
          this.datasetFeatureCount = args.dataset[0].length; // first set metadata

          args.dataset[0].forEach(function (_, colIndex) {
            var _a;

            var key = JointDataset.DataLabelRoot + colIndex.toString();

            if ((_a = args.metadata.featureIsCategorical) === null || _a === void 0 ? void 0 : _a[colIndex]) {
              var sortedUnique = args.metadata.featureRanges[colIndex].uniqueValues.concat().sort();
              _this.metaDict[key] = {
                abbridgedLabel: args.metadata.featureNamesAbridged[colIndex],
                category: exports.ColumnCategories.Dataset,
                index: colIndex,
                isCategorical: true,
                label: args.metadata.featureNames[colIndex],
                sortedCategoricalValues: sortedUnique,
                treatAsCategorical: true
              };
            } else {
              _this.metaDict[key] = {
                abbridgedLabel: args.metadata.featureNamesAbridged[colIndex],
                category: exports.ColumnCategories.Dataset,
                featureRange: args.metadata.featureRanges[colIndex],
                index: colIndex,
                isCategorical: false,
                label: args.metadata.featureNames[colIndex]
              };
            }
          });
          args.dataset.forEach(function (row, index) {
            row.forEach(function (val, colIndex) {
              var _a, _b;

              var key = JointDataset.DataLabelRoot + colIndex.toString();

              if (_this.dataDict) {
                // store the index for categorical values rather than the actual value. Makes dataset uniform numeric and enables dithering
                if ((_a = args.metadata.featureIsCategorical) === null || _a === void 0 ? void 0 : _a[colIndex]) {
                  _this.dataDict[index][key] = ((_b = _this.metaDict[key].sortedCategoricalValues) === null || _b === void 0 ? void 0 : _b.indexOf(val)) || 0;
                } else {
                  _this.dataDict[index][key] = val;
                }
              }
            });
          });
          this.hasDataset = true;
        }
      };

      JointDataset.prototype.initializeLabelVariables = function (args, modelTypeIsObjectDetection) {
        var _this = this;

        if (args.predictedY && !modelTypeIsObjectDetection) {
          this.updateMetaDataDict(args.predictedY, args.metadata, JointDataset.PredictedYLabel, localization.localization.Interpret.ExplanationScatter.predictedY, localization.localization.Interpret.ExplanationScatter.predictedY, args.targetColumn);
          this.hasPredictedY = true;
        } else if (args.objectDetectionLabels && modelTypeIsObjectDetection) {
          this.updateMetaDataDict(args.objectDetectionLabels.map(function (label) {
            return label.incorrect;
          }), args.metadata, JointDataset.ObjectDetectionIncorrect, localization.localization.Interpret.ExplanationScatter.odIncorrect, localization.localization.Interpret.ExplanationScatter.odIncorrect, args.targetColumn);
          this.hasODIncorrect = true;
        }

        if (args.predictedProbabilities) {
          var predictedProbabilities_1 = args.predictedProbabilities;

          if (args.metadata.modelType !== exports.ModelTypes.Regression) {
            args.predictedProbabilities.forEach(function (predictionArray, index) {
              predictionArray.forEach(function (val, classIndex) {
                if (_this.dataDict) {
                  _this.dataDict[index][JointDataset.ProbabilityYRoot + classIndex.toString()] = val;
                }
              });
            }); // create metadata for each class

            args.metadata.classNames.forEach(function (className, classIndex) {
              var label = localization.localization.formatString(localization.localization.Interpret.ExplanationScatter.probabilityLabel, className);
              var projection = predictedProbabilities_1.map(function (row) {
                return row[classIndex];
              });
              _this.metaDict[JointDataset.ProbabilityYRoot + classIndex.toString()] = {
                abbridgedLabel: label,
                category: exports.ColumnCategories.Outcome,
                featureRange: {
                  max: _.max(projection) || 0,
                  min: _.min(projection) || 0,
                  rangeType: mlchartlib.RangeTypes.Numeric
                },
                isCategorical: false,
                label: label,
                sortedCategoricalValues: undefined,
                treatAsCategorical: false
              };
            });
            this.hasPredictedProbabilities = true;
            this.predictionClassCount = args.metadata.classNames.length;
          }
        }

        if (args.trueY && !modelTypeIsObjectDetection) {
          this.updateMetaDataDict(args.trueY, args.metadata, JointDataset.TrueYLabel, localization.localization.Interpret.ExplanationScatter.trueY, localization.localization.Interpret.ExplanationScatter.trueY, args.targetColumn);
          this.hasTrueY = true;
        } else if (args.objectDetectionLabels && modelTypeIsObjectDetection) {
          this.updateMetaDataDict(args.objectDetectionLabels.map(function (label) {
            return label.correct;
          }), args.metadata, JointDataset.ObjectDetectionCorrect, localization.localization.Interpret.ExplanationScatter.odCorrect, localization.localization.Interpret.ExplanationScatter.odCorrect, args.targetColumn);
          this.hasODCorrect = true;
        }
      };

      JointDataset.prototype.initializeErrorVariables = function (args, modelTypeIsObjectDetection) {
        var _this = this;

        var _a, _b, _c; // include error columns if applicable


        if (this.hasPredictedY && this.hasTrueY) {
          (_a = this.dataDict) === null || _a === void 0 ? void 0 : _a.forEach(function (row) {
            JointDataset.setErrorMetrics(row, _this._modelMeta.modelType, _this.numLabels);
          }); // Set appropriate metadata

          if (args.metadata.modelType === exports.ModelTypes.Regression && this.dataDict) {
            var regressionErrorArray = this.dataDict.map(function (row) {
              return row[JointDataset.RegressionError];
            });
            this.metaDict[JointDataset.RegressionError] = {
              abbridgedLabel: localization.localization.Interpret.Columns.error,
              category: exports.ColumnCategories.Outcome,
              featureRange: {
                max: _.max(regressionErrorArray) || 0,
                min: _.min(regressionErrorArray) || 0,
                rangeType: mlchartlib.RangeTypes.Numeric
              },
              isCategorical: false,
              label: localization.localization.Interpret.Columns.regressionError,
              sortedCategoricalValues: undefined
            };
          }

          if (IsBinary(args.metadata.modelType)) {
            this.metaDict[JointDataset.ClassificationError] = {
              abbridgedLabel: localization.localization.Interpret.Columns.classificationOutcome,
              category: exports.ColumnCategories.Outcome,
              isCategorical: true,
              label: localization.localization.Interpret.Columns.classificationOutcome,
              sortedCategoricalValues: [localization.localization.Interpret.Columns.trueNegative, localization.localization.Interpret.Columns.falsePositive, localization.localization.Interpret.Columns.falseNegative, localization.localization.Interpret.Columns.truePositive],
              treatAsCategorical: true
            };
          }

          if (IsMulticlass(args.metadata.modelType) || IsMultilabel(args.metadata.modelType)) {
            this.metaDict[JointDataset.ClassificationError] = {
              abbridgedLabel: localization.localization.Interpret.Columns.classificationOutcome,
              category: exports.ColumnCategories.Outcome,
              isCategorical: true,
              label: localization.localization.Interpret.Columns.classificationOutcome,
              sortedCategoricalValues: [localization.localization.Interpret.Columns.correctlyClassified, localization.localization.Interpret.Columns.misclassified],
              treatAsCategorical: true
            };
          }
        } else if (this.hasODIncorrect && this.hasODCorrect) {
          (_b = this.strDataDict) === null || _b === void 0 ? void 0 : _b.forEach(function (row) {
            JointDataset.setErrorMetrics(row, _this._modelMeta.modelType, _this.numLabels);
          });

          if (modelTypeIsObjectDetection) {
            this.metaDict[JointDataset.ClassificationError] = {
              abbridgedLabel: localization.localization.Interpret.Columns.classificationOutcome,
              category: exports.ColumnCategories.Outcome,
              isCategorical: true,
              label: localization.localization.Interpret.Columns.classificationOutcome,
              sortedCategoricalValues: [localization.localization.Interpret.Columns.correctlyClassified, localization.localization.Interpret.Columns.misclassified],
              treatAsCategorical: true
            };
          }

          (_c = this.dataDict) === null || _c === void 0 ? void 0 : _c.forEach(function (row, rowIndex) {
            var _a;

            row[JointDataset.ClassificationError] = ((_a = _this.strDataDict) === null || _a === void 0 ? void 0 : _a[rowIndex][JointDataset.ObjectDetectionIncorrect]) !== NoLabel ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
          });
        }
      };

      JointDataset.prototype.updateMetaDataDict = function (values, metadata, labelColName, abbridgedLabel, label, targetColumn) {
        var _this = this;

        this.initializeDataDictIfNeeded(values);
        values.forEach(function (val, index) {
          if (Array.isArray(val)) {
            _this.numLabels = val.length;
            val.forEach(function (subVal, subIndex) {
              if (_this.dataDict) {
                _this.dataDict[index][labelColName + subIndex.toString()] = subVal;
              }
            });
          } else if (_this.dataDict) {
            if (typeof val !== "string") {
              _this.dataDict[index][labelColName] = val;
            } else if (_this.strDataDict) {
              _this.strDataDict[index][labelColName] = val;
            }
          }
        });

        for (var i = 0; i < this.numLabels; i++) {
          var labelColNameKey = labelColName;
          var abbridgedLabelValue = abbridgedLabel;
          var labelValue = label;
          var singleLabelValues = [];

          if (this.numLabels > 1) {
            var labelIdxStr = i.toString();
            labelColNameKey += labelIdxStr;
            abbridgedLabelValue += labelIdxStr;
            labelValue += labelIdxStr; // check if values is a 2d array

            var indexedValues = values[i];

            if (Array.isArray(indexedValues)) {
              singleLabelValues = indexedValues;
            }
          } else if (!Array.isArray(values)) {
            singleLabelValues = values;
          }

          var categoricalValues = metadata.modelType !== exports.ModelTypes.Regression ? metadata.classNames : undefined;

          if (this.numLabels > 1 && Array.isArray(targetColumn)) {
            categoricalValues = ["", targetColumn[i]];
          }

          this.metaDict[labelColNameKey] = {
            abbridgedLabel: abbridgedLabelValue,
            category: exports.ColumnCategories.Outcome,
            isCategorical: metadata.modelType !== exports.ModelTypes.Regression,
            label: labelValue,
            sortedCategoricalValues: categoricalValues,
            treatAsCategorical: metadata.modelType !== exports.ModelTypes.Regression
          };

          if (metadata.modelType === exports.ModelTypes.Regression) {
            this.metaDict[labelColNameKey].featureRange = {
              max: _.max(singleLabelValues) || 0,
              min: _.min(singleLabelValues) || 0,
              rangeType: mlchartlib.RangeTypes.Numeric
            };
          }
        }
      };

      JointDataset.prototype.initializeDataDictIfNeeded = function (arr) {
        var _this = this;

        if (arr === undefined) {
          return;
        }

        if (this.strDataDict === undefined) {
          this.strDataDict = Array.from({
            length: arr.length
          }).map(function (_, index) {
            var dict = {};
            dict[JointDataset.IndexLabel] = index;
            return dict;
          });
        }

        if (this.dataDict !== undefined) {
          if (this.dataDict.length !== arr.length) {
            throw new Error("Differing length inputs. Ensure data matches explanations and predictions.");
          }

          return;
        }

        this.dataDict = Array.from({
          length: arr.length
        }).map(function (_, index) {
          var dict = {};
          dict[JointDataset.IndexLabel] = index;
          dict[JointDataset.DitherLabel] = 2 * _this.ditherScale * Math.random() - _this.ditherScale;
          dict[JointDataset.DitherLabel2] = 2 * _this.ditherScale * Math.random() - _this.ditherScale;
          return dict;
        });
        this.numericValuedColumnsCache = Array.from({
          length: arr.length
        }).map(function () {
          return {};
        });
        this.metaDict[JointDataset.IndexLabel] = {
          abbridgedLabel: localization.localization.Interpret.ExplanationScatter.index,
          category: exports.ColumnCategories.Index,
          featureRange: {
            max: arr.length - 1,
            min: 0,
            rangeType: mlchartlib.RangeTypes.Integer
          },
          isCategorical: false,
          label: localization.localization.Interpret.ExplanationScatter.index
        };
        this.metaDict[cohortKey] = {
          abbridgedLabel: localization.localization.Interpret.Cohort.cohort,
          category: exports.ColumnCategories.Cohort,
          isCategorical: true,
          label: localization.localization.Interpret.Cohort.cohort,
          treatAsCategorical: true
        };
        this.metaDict[exports.ColumnCategories.None] = {
          abbridgedLabel: localization.localization.Interpret.Columns.none,
          category: exports.ColumnCategories.None,
          isCategorical: true,
          label: localization.localization.Interpret.Columns.none,
          treatAsCategorical: true
        };
      };

      JointDataset.IndexLabel = "Index";
      JointDataset.AbsoluteIndexLabel = "AbsoluteIndex";
      JointDataset.DataLabelRoot = "Data";
      JointDataset.PredictedYLabel = "PredictedY";
      JointDataset.ProbabilityYRoot = "ProbabilityClass";
      JointDataset.TrueYLabel = "TrueY";
      JointDataset.ObjectDetectionCorrect = "Correct";
      JointDataset.ObjectDetectionIncorrect = "Incorrect";
      JointDataset.ObjectDetectionLabels = "ObjectDetectionLabels";
      JointDataset.DitherLabel = "Dither";
      JointDataset.DitherLabel2 = "Dither2";
      JointDataset.ClassificationError = "ClassificationError";
      JointDataset.RegressionError = "RegressionError";
      JointDataset.ReducedLocalImportanceRoot = "LocalImportance";
      JointDataset.ReducedLocalImportanceIntercept = "LocalImportanceIntercept";
      JointDataset.ReducedLocalImportanceSortIndexRoot = "LocalImportanceSortIndex";
      return JointDataset;
    }();

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var ModelExplanationUtils =
    /** @class */
    function () {
      function ModelExplanationUtils() {}

      ModelExplanationUtils.getSortIndices = function (input) {
        var augmented = input.map(function (val, index) {
          return [val, index];
        });
        augmented.sort(function (a, b) {
          return a[0] - b[0];
        });
        return augmented.map(function (augmentedVal) {
          return augmentedVal[1];
        });
      };

      ModelExplanationUtils.getAbsoluteSortIndices = function (input) {
        var augmented = input.map(function (val, index) {
          return [val, index];
        });
        augmented.sort(function (a, b) {
          return Math.abs(a[0]) - Math.abs(b[0]);
        });
        return augmented.map(function (augmentedVal) {
          return augmentedVal[1];
        });
      };

      ModelExplanationUtils.buildSortedVector = function (matrix, selectedClassIndex) {
        // if no index provided, sort by absolute aggregated values
        if (selectedClassIndex === undefined) {
          return ModelExplanationUtils.getSortIndices(matrix.map(function (classArray) {
            return classArray.reduce(function (a, b) {
              return a + Math.abs(b);
            }, 0);
          }));
        }

        return ModelExplanationUtils.getSortIndices(matrix.map(function (classArray) {
          return Math.abs(classArray[selectedClassIndex]);
        }));
      };

      ModelExplanationUtils.transpose2DArray = function (matrix) {
        return matrix[0].map(function (_, index) {
          return matrix.map(function (row) {
            return row[index];
          });
        });
      }; // Take the L1 norm across the top index of a 3d array


      ModelExplanationUtils.absoluteAverageTensor = function (input) {
        var rowLength = input.length;
        var featureLength = input[0].length;
        var classLength = input[0][0].length;
        return input.reduce(function (a, b) {
          return a.map(function (aClassArray, featureIndex) {
            return aClassArray.map(function (aCell, classIndex) {
              return aCell + Math.abs(b[featureIndex][classIndex]);
            });
          });
        }, new Array(featureLength).fill(0).map(function () {
          return new Array(classLength).fill(0);
        })).map(function (classArray) {
          return classArray.map(function (value) {
            return value / rowLength;
          });
        });
      };

      return ModelExplanationUtils;
    }();

    // Copyright (c) Microsoft Corporation.

    var Cohort =
    /** @class */
    function () {
      function Cohort(name, jointDataset, filters, compositeFilters) {
        if (filters === void 0) {
          filters = [];
        }

        if (compositeFilters === void 0) {
          compositeFilters = [];
        }

        this.name = name;
        this.jointDataset = jointDataset;
        this.filters = filters;
        this.compositeFilters = compositeFilters;
        this.currentSortReversed = false;
        this.cohortIndex = Cohort._cohortIndex;
        this.name = name;
        Cohort._cohortIndex += 1;
        this.filteredData = this.applyFilters();
      }

      Cohort.getLabeledFilters = function (filters, jointDataset) {
        // return the filters relabeled from Data# to original label
        var filtersRelabeled = filters.filter(function (item) {
          return item;
        }).map(function (filter) {
          var label = jointDataset.metaDict[filter.column].label;
          return {
            arg: filter.arg,
            column: label,
            method: filter.method
          };
        });
        return filtersRelabeled;
      };

      Cohort.getLabeledCompositeFilters = function (compositeFilters, jointDataset) {
        // return the filters relabeled from Data# to original label
        var filtersRelabeled = compositeFilters.map(function (compositeFilter) {
          if (compositeFilter.method) {
            return Cohort.getLabeledFilters([compositeFilter], jointDataset)[0];
          }

          return {
            compositeFilters: Cohort.getLabeledCompositeFilters(compositeFilter.compositeFilters, jointDataset),
            operation: compositeFilter.operation
          };
        });
        return filtersRelabeled;
      };

      Cohort.prototype.updateFilter = function (filter, index) {
        if (index === undefined) {
          index = this.filters.length;
        }

        this.filters[index] = filter;
        this.filteredData = this.applyFilters();
      }; // An id to track if a change requiring re-render has occurred.


      Cohort.prototype.getCohortID = function () {
        return this.cohortIndex;
      };

      Cohort.prototype.deleteFilter = function (index) {
        this.filters.splice(index, 1);
        this.filteredData = this.applyFilters();
      };

      Cohort.prototype.getRow = function (index) {
        var _a;

        return __assign({}, (_a = this.jointDataset.dataDict) === null || _a === void 0 ? void 0 : _a[index]);
      };

      Cohort.prototype.sort = function (columnName, reverse) {
        if (columnName === void 0) {
          columnName = JointDataset.IndexLabel;
        }

        if (this.currentSortKey !== columnName) {
          this.filteredData.sort(function (a, b) {
            return compare(a[columnName], b[columnName]);
          });
          this.currentSortKey = columnName;
          this.currentSortReversed = false;
        }

        if (reverse === undefined) {
          reverse = false;
        }

        if (this.currentSortReversed !== reverse) {
          this.filteredData.reverse();
          this.currentSortReversed = true;
        }
      };

      Cohort.prototype.sortByGroup = function (columnName, groupingFunction) {
        if (columnName === void 0) {
          columnName = JointDataset.IndexLabel;
        }

        this.filteredData.sort(function (a, b) {
          var columnDifference = compare(a[columnName], b[columnName]);

          if (groupingFunction(a) === groupingFunction(b)) {
            return columnDifference;
          } // 10000 is used as a large enough constant to ensure that the
          // importance of the grouping is higher than column difference


          if (groupingFunction(a)) {
            return -10000 + columnDifference;
          }

          return 10000 + columnDifference;
        });
      }; // whether to apply bins is a decision made at the ui control level,
      // should not mutate the true dataset. Instead, bin props are preserved
      // and applied when requested.
      // Bin object stores array of upper bounds for each bin, return the index
      // of the bin of the value;


      Cohort.prototype.unwrap = function (key, applyBin) {
        var _a;

        if (applyBin && !this.jointDataset.metaDict[key].isCategorical && !((_a = this.jointDataset.metaDict[key]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical)) {
          var binVector_1 = this.jointDataset.binDict[key];

          if (binVector_1 === undefined) {
            this.jointDataset.addBin(key);
            binVector_1 = this.jointDataset.binDict[key];
          }

          return this.filteredData.map(function (row) {
            var rowValue = row[key];
            return binVector_1 === null || binVector_1 === void 0 ? void 0 : binVector_1.findIndex(function (upperLimit) {
              return upperLimit >= rowValue;
            });
          });
        }

        return this.filteredData.map(function (row) {
          return row[key];
        });
      };

      Cohort.prototype.calculateAverageImportance = function () {
        if (this.cachedAverageImportance) {
          return this.cachedAverageImportance;
        }

        this.cachedAverageImportance = this.transposedLocalFeatureImportances().map(function (featureValues) {
          if (!featureValues || featureValues.length === 0) {
            return Number.NaN;
          }

          var total = featureValues.reduce(function (prev, current) {
            return prev + Math.abs(current);
          }, 0);
          return total / featureValues.length;
        });
        return this.cachedAverageImportance;
      };

      Cohort.prototype.transposedLocalFeatureImportances = function () {
        if (this.cachedTransposedLocalFeatureImportances) {
          return this.cachedTransposedLocalFeatureImportances;
        }

        var featureLength = this.jointDataset.localExplanationFeatureCount;
        var localFeatureImportances = this.filteredData.map(function (row) {
          return JointDataset.localExplanationSlice(row, featureLength);
        });

        if (localFeatureImportances.length === 0) {
          return [];
        }

        this.cachedTransposedLocalFeatureImportances = ModelExplanationUtils.transpose2DArray(localFeatureImportances);
        return this.cachedTransposedLocalFeatureImportances;
      };

      Cohort.prototype.clearCachedImportances = function () {
        this.cachedAverageImportance = undefined;
        this.cachedTransposedLocalFeatureImportances = undefined;
      };

      Cohort.prototype.filterRow = function (row, filters) {
        return filters.filter(function (item) {
          return item;
        }).every(function (filter) {
          var rowVal = row[filter.column];

          switch (filter.method) {
            case exports.FilterMethods.Equal:
              return rowVal === filter.arg[0];

            case exports.FilterMethods.GreaterThan:
              return rowVal > filter.arg[0];

            case exports.FilterMethods.GreaterThanEqualTo:
              return rowVal >= filter.arg[0];

            case exports.FilterMethods.LessThan:
              return rowVal < filter.arg[0];

            case exports.FilterMethods.LessThanEqualTo:
              return rowVal <= filter.arg[0];

            case exports.FilterMethods.Includes:
              return filter.arg.includes(Number(rowVal));

            case exports.FilterMethods.Excludes:
              return !filter.arg.includes(Number(rowVal));

            case exports.FilterMethods.InTheRangeOf:
              return rowVal >= filter.arg[0] && rowVal <= filter.arg[1];

            default:
              return false;
          }
        });
      };

      Cohort.prototype.filterRecursively = function (row, compositeFilter) {
        if (compositeFilter.method) {
          return this.filterRow(row, [compositeFilter]);
        }

        return this.filterComposite(row, compositeFilter.compositeFilters, compositeFilter.operation);
      };

      Cohort.prototype.filterComposite = function (row, compositeFilters, operation) {
        var _this = this;

        if (operation === exports.Operations.And) {
          return compositeFilters.every(function (compositeFilter) {
            return _this.filterRecursively(row, compositeFilter);
          });
        }

        return compositeFilters.some(function (compositeFilter) {
          return _this.filterRecursively(row, compositeFilter);
        });
      };

      Cohort.prototype.applyFilters = function () {
        var _this = this;

        this.clearCachedImportances();
        var filteredData = this.jointDataset.dataDict;

        if (!filteredData) {
          return [];
        }

        var hasFilters = this.filters.length > 0;
        var hasCompositeFilters = this.compositeFilters.length > 0;

        if (hasFilters) {
          filteredData = filteredData.filter(function (row) {
            return _this.filterRow(row, _this.filters);
          });
        }

        if (hasCompositeFilters) {
          filteredData = filteredData.filter(function (row) {
            return _this.filterComposite(row, _this.compositeFilters, exports.Operations.And);
          });
        }

        if (!hasFilters && !hasCompositeFilters) {
          filteredData = __spreadArray([], __read(filteredData));
        }

        return filteredData;
      };

      Cohort._cohortIndex = 0;
      return Cohort;
    }();

    // Copyright (c) Microsoft Corporation.
    var RADIX = 10;
    var DefaultColumnMinWidth = 10;

    var AccessibleDetailsList =
    /** @class */
    function (_super) {
      __extends(AccessibleDetailsList, _super);

      function AccessibleDetailsList(props) {
        var _this = _super.call(this, props) || this;

        _this.detailsListRef = /*#__PURE__*/React.createRef();

        _this.getMinMaxErrorMessage = function (column, columnMinWidth) {
          return localization.localization.formatString(localization.localization.Core.AccessibleDetailsList.minMaxErrorMessage, columnMinWidth, column.maxWidth);
        };

        _this.getMinErrorMessage = function (columnMinWidth) {
          return localization.localization.formatString(localization.localization.Core.AccessibleDetailsList.minErrorMessage, columnMinWidth);
        };

        _this.onColumnClick = function (_, column) {
          var _a;

          var columnMinWidth = (_a = column.minWidth) !== null && _a !== void 0 ? _a : DefaultColumnMinWidth;
          var errorMessage = "";

          if (column.maxWidth) {
            errorMessage = _this.getMinMaxErrorMessage(column, columnMinWidth);
          } else {
            errorMessage = _this.getMinErrorMessage(columnMinWidth);
          }

          _this.setState({
            columnToResize: column,
            errorMessage: errorMessage,
            isDialogHidden: false
          });
        };

        _this.onTextFieldChange = function (_, newValue) {
          var _a;

          if (newValue) {
            var newWidth = Number.parseInt(newValue, RADIX);
            var column = _this.state.columnToResize;
            var columnMinWidth = (_a = column === null || column === void 0 ? void 0 : column.minWidth) !== null && _a !== void 0 ? _a : DefaultColumnMinWidth;

            if (column === null || column === void 0 ? void 0 : column.maxWidth) {
              if (newWidth > column.maxWidth || newWidth < columnMinWidth) {
                _this.setState({
                  errorMessage: _this.getMinMaxErrorMessage(column, columnMinWidth),
                  newWidth: undefined
                });

                return;
              }
            } else if (newWidth < columnMinWidth) {
              _this.setState({
                errorMessage: _this.getMinErrorMessage(columnMinWidth),
                newWidth: undefined
              });

              return;
            }

            if (newWidth) {
              _this.setState({
                errorMessage: undefined,
                newWidth: newWidth
              });
            }
          }
        };

        _this.confirmDialog = function () {
          var _a;

          if (_this.state.columnToResize && _this.state.newWidth) {
            var columnToResize = _this.state.columnToResize;
            (_a = _this.detailsListRef.current) === null || _a === void 0 ? void 0 : _a.updateColumn(columnToResize, {
              width: _this.state.newWidth
            });

            _this.closeDialog();
          }
        };

        _this.closeDialog = function () {
          _this.setState({
            columnToResize: undefined,
            isDialogHidden: true,
            newWidth: undefined
          });
        };

        _this.state = {
          columnToResize: undefined,
          errorMessage: undefined,
          isDialogHidden: true,
          newWidth: undefined
        };
        return _this;
      }

      AccessibleDetailsList.prototype.render = function () {
        var _this = this;

        var _a = this.props,
            columns = _a.columns,
            rest = __rest(_a, ["columns"]);

        var clickableColumns = columns === null || columns === void 0 ? void 0 : columns.map(function (column) {
          column.onColumnClick = _this.onColumnClick;
          column.columnActionsMode = react.ColumnActionsMode.clickable;
          return column;
        });
        return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(react.DetailsList, __assign({
          componentRef: this.detailsListRef,
          columns: clickableColumns
        }, rest)), /*#__PURE__*/React.createElement(react.Dialog, {
          hidden: this.state.isDialogHidden,
          onDismiss: this.closeDialog,
          dialogContentProps: {
            subText: localization.localization.Core.AccessibleDetailsList.ResizableDialog.subText,
            title: localization.localization.Core.AccessibleDetailsList.ResizableDialog.title,
            type: react.DialogType.normal
          }
        }, /*#__PURE__*/React.createElement(react.TextField, {
          ariaLabel: localization.localization.Core.AccessibleDetailsList.ResizableDialog.subText,
          errorMessage: this.state.errorMessage,
          onChange: this.onTextFieldChange
        }), /*#__PURE__*/React.createElement(react.DialogFooter, null, /*#__PURE__*/React.createElement(react.PrimaryButton, {
          onClick: this.confirmDialog,
          text: localization.localization.Core.AccessibleDetailsList.resize,
          ariaLabel: localization.localization.Core.AccessibleDetailsList.resize,
          disabled: this.state.errorMessage !== undefined
        }), /*#__PURE__*/React.createElement(react.DefaultButton, {
          onClick: this.closeDialog,
          text: localization.localization.Core.AccessibleDetailsList.cancel,
          ariaLabel: localization.localization.Core.AccessibleDetailsList.cancel
        }))));
      };

      return AccessibleDetailsList;
    }(React.PureComponent);

    // Copyright (c) Microsoft Corporation.
    var cohortListStyles = function cohortListStyles() {
      return react.mergeStyleSets({
        divider: {
          borderTop: "1px solid #DADADA",
          left: "50%",
          margin: "0",
          marginRight: "-50%",
          position: "absolute",
          transform: "translate(-50%, 0%)",
          width: "100%"
        },
        header: {
          fontSize: "14px",
          fontWeight: "600"
        },
        section: {
          paddingBottom: "10px !important",
          paddingLeft: "20px",
          paddingTop: "10px !important"
        },
        subsection: {}
      });
    };

    // Copyright (c) Microsoft Corporation.

    var CohortNameColumn =
    /** @class */
    function (_super) {
      __extends(CohortNameColumn, _super);

      function CohortNameColumn() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.onClick = function () {
          _this.props.onClick(_this.props.name);
        };

        return _this;
      }

      CohortNameColumn.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.Link, {
          onClick: this.onClick,
          disabled: this.props.disabled
        }, this.props.fieldContent);
      };

      return CohortNameColumn;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortList =
    /** @class */
    function (_super) {
      __extends(CohortList, _super);

      function CohortList(props) {
        var _this = _super.call(this, props) || this;

        _this.renderItemColumn = function (item, index, column) {
          if (column !== undefined && index !== undefined) {
            var fieldContent = item[column.fieldName];

            switch (column.key) {
              case "nameColumn":
                if (_this.props.enableEditing && item.name !== localization.localization.ErrorAnalysis.Cohort.defaultLabel) {
                  return /*#__PURE__*/React__default.createElement(CohortNameColumn, {
                    fieldContent: fieldContent,
                    name: item.name,
                    onClick: _this.onEditCohortClick
                  });
                }

                return /*#__PURE__*/React__default.createElement("span", null, fieldContent);

              case "detailsColumn":
                if (item.details && item.details.length === 2) {
                  return /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Text, {
                    variant: "xSmall"
                  }, item.details[0]), /*#__PURE__*/React__default.createElement(react.Text, {
                    variant: "xSmall"
                  }, item.details[1]));
                }

                return /*#__PURE__*/React__default.createElement("span", null, fieldContent);

              default:
                return /*#__PURE__*/React__default.createElement("span", null, fieldContent);
            }
          }

          return React__default.Fragment;
        };

        _this.onEditCohortClick = function (name) {
          var cohort = _this.props.errorCohorts.find(function (errorCohort) {
            return errorCohort.cohort.name === name;
          });

          if (cohort && _this.props.onEditCohortClick) {
            _this.props.onEditCohortClick(cohort);
          }
        };

        var cohortListItems = _this.getCohortListItems();

        _this.state = {
          items: cohortListItems
        };
        _this.columns = [{
          fieldName: "name",
          isResizable: true,
          key: "nameColumn",
          maxWidth: 200,
          minWidth: 50,
          name: "Name"
        }];

        if (_this.props.includeDetails) {
          _this.columns.push({
            fieldName: "details",
            isResizable: true,
            key: "detailsColumn",
            maxWidth: 100,
            minWidth: 75,
            name: "Details"
          });
        }

        _this.columns.push({
          fieldName: "coverage",
          isResizable: true,
          key: "coverageColumn",
          maxWidth: 100,
          minWidth: 75,
          name: localization.localization.ErrorAnalysis.CohortList.coverage
        }, {
          fieldName: "metricName",
          isResizable: true,
          key: "metricNameColumn",
          maxWidth: 100,
          minWidth: 75,
          name: localization.localization.ErrorAnalysis.Metrics.metricName
        }, {
          fieldName: "metricValue",
          isResizable: true,
          key: "metricValueColumn",
          maxWidth: 100,
          minWidth: 75,
          name: localization.localization.ErrorAnalysis.Metrics.metricValue
        });

        return _this;
      }

      CohortList.prototype.componentDidUpdate = function (prevProps) {
        if (this.props.errorCohorts !== prevProps.errorCohorts) {
          var cohortListItems = this.getCohortListItems();
          this.setState({
            items: cohortListItems
          });
        }
      };

      CohortList.prototype.render = function () {
        var classNames = cohortListStyles();
        var items = this.state.items;
        return /*#__PURE__*/React__default.createElement("div", {
          className: classNames.section
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.subsection
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.header
        }, "Cohort List"), /*#__PURE__*/React__default.createElement(AccessibleDetailsList, {
          items: items,
          columns: this.columns,
          setKey: "set",
          layoutMode: react.DetailsListLayoutMode.justified,
          selectionPreservedOnEmptyClick: true,
          checkboxVisibility: react.CheckboxVisibility.hidden,
          onRenderItemColumn: this.renderItemColumn,
          ariaLabel: localization.localization.Core.ShiftCohort.cohortList
        })));
      };

      CohortList.prototype.getCohortListItems = function () {
        var allItems = this.props.errorCohorts.filter(function (errorCohort) {
          return !errorCohort.isTemporary;
        }).map(function (errorCohort, index) {
          var details = [localization.localization.formatString(localization.localization.Interpret.CohortBanner.datapoints, errorCohort.cohort.filteredData.length), localization.localization.formatString(localization.localization.Interpret.CohortBanner.filters, errorCohort.cohort.filters.length)];
          return {
            coverage: errorCohort.cohortStats.errorCoverage.toFixed(2),
            details: details,
            key: index,
            metricName: errorCohort.cohortStats.metricName,
            metricValue: errorCohort.cohortStats.metricValue.toFixed(2),
            name: errorCohort.cohort.name
          };
        });
        return allItems;
      };

      return CohortList;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var Metrics =
    /** @class */
    function () {
      function Metrics() {}

      Metrics.AccuracyScore = "Accuracy score";
      Metrics.ErrorRate = "Error rate";
      Metrics.SelectionRate = "Selection rate";
      Metrics.FalsePositiveRate = "False positive rate";
      Metrics.FalseNegativeRate = "False negative rate";
      Metrics.F1Score = "F1 score";
      Metrics.MacroF1Score = "Macro F1 score";
      Metrics.MacroPrecisionScore = "Macro precision score";
      Metrics.MacroRecallScore = "Macro recall score";
      Metrics.MeanPrediction = "Mean prediction";
      Metrics.MeanSquaredError = "Mean squared error";
      Metrics.MeanAbsoluteError = "Mean absolute error";
      Metrics.MedianAbsoluteError = "Median absolute error";
      Metrics.R2Score = "R2 score";
      Metrics.MicroF1Score = "Micro F1 score";
      Metrics.MicroPrecisionScore = "Micro precision score";
      Metrics.MicroRecallScore = "Micro recall score";
      Metrics.PrecisionScore = "Precision score";
      Metrics.RecallScore = "Recall score";
      Metrics.SampleSize = "Sample size";
      return Metrics;
    }();

    (function (CohortSource) {
      CohortSource["None"] = "None";
      CohortSource["TreeMap"] = "Tree map";
      CohortSource["HeatMap"] = "Heat map";
      CohortSource["ManuallyCreated"] = "Manually created";
      CohortSource["Prebuilt"] = "Prebuilt";
    })(exports.CohortSource || (exports.CohortSource = {}));

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function getFilterBoundsArgs(metaDict, filter) {
      if ((metaDict === null || metaDict === void 0 ? void 0 : metaDict.treatAsCategorical) && metaDict.sortedCategoricalValues) {
        return filter.arg.map(function (arg) {
          return metaDict.sortedCategoricalValues[arg];
        }).join(", ");
      }

      return filter.arg.map(function (arg) {
        return arg.toFixed(2);
      }).join(", ");
    }

    // Copyright (c) Microsoft Corporation.
    function getBasicFilterString(filters, jointDataset) {
      return filters.filter(function (item) {
        return item;
      }).map(function (filter) {
        var method = "";
        var metaDict = jointDataset.metaDict[filter.column];
        var label = metaDict.label;

        if (filter.method === exports.FilterMethods.InTheRangeOf) {
          var arg0 = filter.arg[0].toFixed(2);
          var arg1 = filter.arg[1].toFixed(2);
          return label + " in (" + arg0 + ", " + arg1 + "]";
        }

        if (filter.method === exports.FilterMethods.Includes) {
          var args = getFilterBoundsArgs(metaDict, filter);
          return label + " in " + args;
        }

        if (filter.method === exports.FilterMethods.Excludes) {
          var args = getFilterBoundsArgs(metaDict, filter);
          return label + " not in " + args;
        }

        if (filter.method === exports.FilterMethods.Equal) {
          method = "==";

          if ((metaDict === null || metaDict === void 0 ? void 0 : metaDict.treatAsCategorical) && metaDict.sortedCategoricalValues) {
            var catArg = metaDict.sortedCategoricalValues[filter.arg[0]];
            return label + " " + method + " " + catArg;
          }
        } else if (filter.method === exports.FilterMethods.GreaterThan) {
          method = ">";
        } else if (filter.method === exports.FilterMethods.GreaterThanEqualTo) {
          method = ">=";
        } else if (filter.method === exports.FilterMethods.LessThan) {
          method = "<";
        } else if (filter.method === exports.FilterMethods.LessThanEqualTo) {
          method = "<=";
        }

        return label + " " + method + " " + filter.arg[0].toFixed(2);
      });
    }

    // Copyright (c) Microsoft Corporation.
    function getCompositeFilterString(compositeFilters, jointDataset) {
      return compositeFilters.map(function (compositeFilter) {
        if (compositeFilter.method) {
          return getBasicFilterString([compositeFilter], jointDataset)[0];
        }

        var cohortCompositeFiltersStrings = getCompositeFilterString(compositeFilter.compositeFilters, jointDataset);

        if (cohortCompositeFiltersStrings.length === 1) {
          return cohortCompositeFiltersStrings[0];
        }

        return cohortCompositeFiltersStrings.map(function (cohortCompositeFiltersString) {
          return "(" + cohortCompositeFiltersString + ")";
        }).join(" " + compositeFilter.operation + " ");
      });
    }

    // Copyright (c) Microsoft Corporation.

    var BaseCohortStats =
    /** @class */
    function () {
      function BaseCohortStats(totalCount, baseTotalCount, errorCoverage) {
        this.totalAll = 0;
        this.totalCohort = 0;
        this.errorCoverage = 0;
        this.totalAll = baseTotalCount;
        this.totalCohort = totalCount;
        this.errorCoverage = errorCoverage;
      }

      return BaseCohortStats;
    }();
    /**
     * Contains basic cohort metric statistics.
     */

    var MetricCohortStats =
    /** @class */
    function (_super) {
      __extends(MetricCohortStats, _super);

      function MetricCohortStats(totalCount, baseTotalCount, metricValue, metricName, errorCoverage) {
        var _this = _super.call(this, totalCount, baseTotalCount, errorCoverage) || this;

        _this.metricValue = 0;
        _this.metricValue = metricValue;
        _this.metricName = metricName;
        return _this;
      }

      return MetricCohortStats;
    }(BaseCohortStats);
    /**
     * Contains additional error information for classification scenario
     * such as the number of correct or incorrect instances.
     */

    var ErrorCohortStats =
    /** @class */
    function (_super) {
      __extends(ErrorCohortStats, _super);

      function ErrorCohortStats(numError, totalCount, baseNumError, baseTotalCount, metricValue, metricName) {
        var _this = _super.call(this, totalCount, baseTotalCount, metricValue, metricName, numError / baseNumError * 100) || this;

        _this.totalCorrect = 0;
        _this.totalCohortCorrect = 0;
        _this.totalIncorrect = 0;
        _this.totalCohortIncorrect = 0;
        _this.totalCohortCorrect = totalCount - numError;
        _this.totalCohortIncorrect = numError;
        _this.totalCorrect = baseTotalCount - baseNumError;
        _this.totalIncorrect = baseNumError;
        return _this;
      }

      return ErrorCohortStats;
    }(MetricCohortStats);

    // Copyright (c) Microsoft Corporation.

    var ErrorCohort =
    /** @class */
    function () {
      function ErrorCohort(cohort, jointDataset, cells, source, isTemporary, cohortStats, isAllDataCohort) {
        if (cells === void 0) {
          cells = 0;
        }

        if (source === void 0) {
          source = exports.CohortSource.None;
        }

        if (isTemporary === void 0) {
          isTemporary = false;
        }

        if (cohortStats === void 0) {
          cohortStats = undefined;
        }

        if (isAllDataCohort === void 0) {
          isAllDataCohort = false;
        }

        this.cohort = cohort;
        this.jointDataset = jointDataset;
        this.cells = cells;
        this.source = source;
        this.isTemporary = isTemporary;
        this.isAllDataCohort = isAllDataCohort;
        this.cohort = cohort;
        this.jointDataset = jointDataset;
        this.metricValue = 0;

        if (cohortStats) {
          this.cohortStats = cohortStats;
          this.metricValue = cohortStats.metricValue;
          this.metricName = cohortStats.metricName;
        } else {
          cohort.sort();
          var filteredData = cohort.filteredData;
          this.cohortStats = this.updateStatsFromData(filteredData, jointDataset);
          this.metricValue = this.cohortStats.metricValue;
          this.metricName = this.cohortStats.metricName;
        }
      }

      ErrorCohort.getDataFilters = function (filters, features) {
        // return the filters relabeled from original label to Data#
        var filtersRelabeled = filters.filter(function (item) {
          return item;
        }).map(function (filter) {
          var index = features.indexOf(filter.column);
          var key = JointDataset.DataLabelRoot + index.toString();
          return {
            arg: filter.arg,
            column: key,
            method: filter.method
          };
        });
        return filtersRelabeled;
      };

      ErrorCohort.prototype.filtersToString = function () {
        var cohortFilters = getBasicFilterString(this.cohort.filters, this.jointDataset);
        var cohortCompositeFilters = getCompositeFilterString(this.cohort.compositeFilters, this.jointDataset);
        return cohortFilters.concat(cohortCompositeFilters);
      };

      ErrorCohort.prototype.updateStatsFromData = function (filteredData, jointDataset) {
        // Calculate various cohort and global stats
        var trueYsCohort = JointDataset.unwrap(filteredData, JointDataset.TrueYLabel);
        var predYsCohort = JointDataset.unwrap(filteredData, JointDataset.PredictedYLabel);
        var trueYs = jointDataset.unwrap(JointDataset.TrueYLabel);
        var predYs = jointDataset.unwrap(JointDataset.PredictedYLabel);
        var totalAll = 0;
        var totalCohort = 0;
        var totalCorrect = 0;
        var totalCohortCorrect = 0;
        var totalIncorrect = 0;
        var totalCohortIncorrect = 0;
        var errorRate = 0;

        if (trueYsCohort && trueYs && predYsCohort && predYs) {
          totalCohort = trueYsCohort.length;
          totalAll = trueYs.length;

          for (var i = 0; i < totalAll; i++) {
            totalCorrect += trueYs[i] === predYs[i] ? 1 : 0;
          }

          totalIncorrect = totalAll - totalCorrect;
          totalCohortCorrect = 0;

          for (var i = 0; i < totalCohort; i++) {
            totalCohortCorrect += trueYsCohort[i] === predYsCohort[i] ? 1 : 0;
          }

          totalCohortIncorrect = totalCohort - totalCohortCorrect;
        } // Calculate error rate


        if (totalCohort === 0) {
          errorRate = 0;
        } else {
          errorRate = totalCohortIncorrect / totalCohort * 100;
        }

        return new ErrorCohortStats(totalCohortIncorrect, totalCohort, totalIncorrect, totalAll, errorRate, Metrics.ErrorRate);
      };

      return ErrorCohort;
    }();

    // Copyright (c) Microsoft Corporation.

    var CompositeFilterList =
    /** @class */
    function (_super) {
      __extends(CompositeFilterList, _super);

      function CompositeFilterList() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CompositeFilterList.prototype.render = function () {
        var _this = this;

        return this.props.compositeStrings.map(function (filter, index) {
          return /*#__PURE__*/React__default.createElement("div", {
            key: index
          }, filter, _this.props.removeFilter && /*#__PURE__*/React__default.createElement(react.IconButton, {
            id: "removeFilterBtn-" + index,
            iconProps: {
              iconName: "Clear"
            },
            onClick: function onClick() {
              var _a, _b;

              return (_b = (_a = _this.props).removeFilter) === null || _b === void 0 ? void 0 : _b.call(_a, index);
            }
          }));
        });
      };

      return CompositeFilterList;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var defaultModelAssessmentContext = {
      addCohort: function addCohort() {
        return undefined;
      },
      baseErrorCohort: {},
      columnRanges: {},
      dataset: {},
      datasetCohorts: [],
      deleteCohort: function deleteCohort() {
        return undefined;
      },
      editCohort: function editCohort() {
        return undefined;
      },
      errorCohorts: [],
      jointDataset: {},
      modelExplanationData: undefined,
      modelMetadata: {},
      modelType: undefined,
      requestExp: undefined,
      requestLocalFeatureExplanations: undefined,
      requestObjectDetectionMetrics: undefined,
      requestPredictions: undefined,
      requestQuestionAnsweringMetrics: undefined,
      selectedErrorCohort: {},
      setAsCategorical: function setAsCategorical() {
        return undefined;
      },
      shiftErrorCohort: function shiftErrorCohort() {
        return undefined;
      },
      telemetryHook: function telemetryHook() {
        return undefined;
      },
      theme: {}
    };
    var modelAssessmentContext = /*#__PURE__*/React__default.createContext(defaultModelAssessmentContext);

    // Copyright (c) Microsoft Corporation.

    (function (DatasetCohortColumns) {
      DatasetCohortColumns["Index"] = "Index";
      DatasetCohortColumns["Dataset"] = "Data";
      DatasetCohortColumns["PredictedY"] = "Predicted Y";
      DatasetCohortColumns["TrueY"] = "True Y";
      DatasetCohortColumns["ObjectDetectionIncorrect"] = "Incorrect";
      DatasetCohortColumns["ObjectDetectionCorrect"] = "Correct";
      DatasetCohortColumns["ClassificationError"] = "Classification outcome";
      DatasetCohortColumns["RegressionError"] = "Regression error";
      DatasetCohortColumns["ProbabilityY"] = "Probability Y";
    })(exports.DatasetCohortColumns || (exports.DatasetCohortColumns = {}));

    // Copyright (c) Microsoft Corporation.
    var maxLength = 18;
    function getColumnItems(columnRanges, features) {
      var items = [exports.DatasetCohortColumns.Index, exports.DatasetCohortColumns.Dataset, exports.DatasetCohortColumns.PredictedY, exports.DatasetCohortColumns.TrueY, exports.DatasetCohortColumns.ClassificationError, exports.DatasetCohortColumns.RegressionError].reduce(function (previousValue, key) {
        var range = columnRanges && columnRanges[key];

        if (key === exports.DatasetCohortColumns.Dataset && features && features.length > 0) {
          previousValue.push({
            key: key,
            text: localization.localization.Interpret.CohortEditor.columns.dataset
          });
          return previousValue;
        }

        if (range === undefined) {
          return previousValue;
        }

        previousValue.push({
          key: key,
          text: getColumnText(key)
        });
        return previousValue;
      }, []);
      return items;
    }

    function getColumnText(key) {
      switch (key) {
        case exports.DatasetCohortColumns.Index:
          return localization.localization.Interpret.CohortEditor.columns.index;

        case exports.DatasetCohortColumns.Dataset:
          return localization.localization.Interpret.CohortEditor.columns.dataset;

        case exports.DatasetCohortColumns.PredictedY:
          return localization.localization.Interpret.CohortEditor.columns.predictedY;

        case exports.DatasetCohortColumns.TrueY:
          return localization.localization.Interpret.CohortEditor.columns.trueY;

        case exports.DatasetCohortColumns.ClassificationError:
          return localization.localization.Interpret.CohortEditor.columns.classificationOutcome;

        case exports.DatasetCohortColumns.RegressionError:
          return localization.localization.Interpret.CohortEditor.columns.regressionError;

        default:
          return "";
      }
    }

    // Copyright (c) Microsoft Corporation.
    function getColumnLabel(column, columnRanges) {
      var items = getColumnItems(columnRanges);
      var label;
      items.forEach(function (item) {
        if (item.key === column) {
          label = item.text;
        }
      });

      if (label === undefined) {
        return column.length <= maxLength ? column : column.slice(0, maxLength) + "...";
      }

      return label;
    }

    // Copyright (c) Microsoft Corporation.

    var FilterList =
    /** @class */
    function (_super) {
      __extends(FilterList, _super);

      function FilterList() {
        var _a;

        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.context = defaultModelAssessmentContext;
        _this.filterMethodLabels = (_a = {}, _a[exports.FilterMethods.Equal] = localization.localization.Interpret.FilterOperations.equals, _a[exports.FilterMethods.GreaterThan] = localization.localization.Interpret.FilterOperations.greaterThan, _a[exports.FilterMethods.GreaterThanEqualTo] = localization.localization.Interpret.FilterOperations.greaterThanEquals, _a[exports.FilterMethods.LessThan] = localization.localization.Interpret.FilterOperations.lessThan, _a[exports.FilterMethods.LessThanEqualTo] = localization.localization.Interpret.FilterOperations.lessThanEquals, _a[exports.FilterMethods.Includes] = localization.localization.Interpret.FilterOperations.includes, _a[exports.FilterMethods.Excludes] = localization.localization.Interpret.FilterOperations.excludes, _a[exports.FilterMethods.InTheRangeOf] = localization.localization.Interpret.FilterOperations.inTheRangeOf, _a);
        return _this;
      }

      FilterList.prototype.render = function () {
        var _this = this;

        return this.props.filters.filter(function (item) {
          return item;
        }).map(function (filter, index) {
          return /*#__PURE__*/React__default.createElement("div", {
            key: index
          }, _this.setFilterLabel(filter), _this.props.editFilter && /*#__PURE__*/React__default.createElement(react.IconButton, {
            id: "editFilerBtn-" + index,
            iconProps: {
              iconName: "Edit"
            },
            onClick: function onClick() {
              var _a, _b;

              return (_b = (_a = _this.props).editFilter) === null || _b === void 0 ? void 0 : _b.call(_a, index);
            },
            ariaLabel: localization.localization.Common.editButton
          }), _this.props.removeFilter && /*#__PURE__*/React__default.createElement(react.IconButton, {
            id: "removeFilterBtn-" + index,
            iconProps: {
              iconName: "Clear"
            },
            onClick: function onClick() {
              var _a, _b;

              return (_b = (_a = _this.props).removeFilter) === null || _b === void 0 ? void 0 : _b.call(_a, index);
            },
            ariaLabel: localization.localization.Common.close
          }));
        });
      };

      FilterList.prototype.setFilterLabel = function (filter) {
        var abbridgedLabel = getColumnLabel(filter.column, this.context.columnRanges);
        var isCategorical;
        var sortedCategoricalValues;
        var range = this.context.columnRanges ? this.context.columnRanges[filter.column] : undefined;

        if ((range === null || range === void 0 ? void 0 : range.rangeType) === mlchartlib.RangeTypes.Categorical || (range === null || range === void 0 ? void 0 : range.treatAsCategorical)) {
          isCategorical = true;
          sortedCategoricalValues = range.sortedUniqueValues.map(function (v) {
            return String(v);
          });
        }

        var stringArgs;
        var label = "";

        if (isCategorical) {
          var selectedValues_1 = [];
          var filterArgs = filter.arg;
          filterArgs.forEach(function (element) {
            var value = sortedCategoricalValues === null || sortedCategoricalValues === void 0 ? void 0 : sortedCategoricalValues[element];

            if (value) {
              selectedValues_1.push(value);
            }
          });
          stringArgs = selectedValues_1.toString();

          if (selectedValues_1.length > 3) {
            var otherValues = selectedValues_1.slice(0, 3).toString();
            var countOtherValues = selectedValues_1.length - 3;
            stringArgs = localization.localization.formatString(localization.localization.Interpret.FilterOperations.overflowFilterArgs, otherValues, countOtherValues.toString());
          }
        } else {
          for (var i = 0; i < filter.arg.length; i++) {
            filter.arg[i] = mlchartlib.roundDecimal(filter.arg[i]);
          }

          stringArgs = filter.arg.toString();
        }

        if (filter.method === exports.FilterMethods.InTheRangeOf) {
          // example: Age [30,40]
          label = abbridgedLabel + " " + localization.localization.formatString(localization.localization.Interpret.FilterOperations.inTheRangeOf, stringArgs);
        } else {
          // example: Age < 30
          label = abbridgedLabel + " " + localization.localization.formatString(this.filterMethodLabels[filter.method], stringArgs);
        }

        return /*#__PURE__*/React__default.createElement(react.TooltipHost, {
          overflowMode: react.TooltipOverflowMode.Self,
          content: label,
          onTooltipToggle: function onTooltipToggle() {
            return false;
          }
        }, label);
      };

      FilterList.contextType = modelAssessmentContext;
      return FilterList;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortEditorFilterList =
    /** @class */
    function (_super) {
      __extends(CohortEditorFilterList, _super);

      function CohortEditorFilterList() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortEditorFilterList.prototype.render = function () {
        var compositeStrings = getCompositeFilterString(this.props.compositeFilters, this.props.jointDataset);
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Label, null, localization.localization.Interpret.CohortEditor.addedFilters), /*#__PURE__*/React__default.createElement(FilterList, {
          filters: this.props.filters,
          editFilter: this.props.editFilter,
          removeFilter: this.props.removeFilter
        }), /*#__PURE__*/React__default.createElement(CompositeFilterList, {
          compositeStrings: compositeStrings,
          jointDataset: this.props.jointDataset,
          removeFilter: this.props.removeCompositeFilter
        }), this.props.filters.length + this.props.compositeFilters.length === 0 && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "smallPlus"
        }, localization.localization.Interpret.CohortEditor.noAddedFilters)));
      };

      return CohortEditorFilterList;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortBasedComponent =
    /** @class */
    function (_super) {
      __extends(CohortBasedComponent, _super);

      function CohortBasedComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.getSelectedCohort = function () {
          return _this.state.selectedCohort;
        };

        _this.updateSelectedCohort = function (filters, compositeFilters, source, cells, cohortStats) {
          if (source === void 0) {
            source = exports.CohortSource.None;
          } // Need to relabel the filter names based on index in joint dataset


          var filtersRelabeled = ErrorCohort.getDataFilters(filters, _this.props.dataset.feature_names);
          var selectedCohortName = "";
          var addTemporaryCohort = true;

          if (source === exports.CohortSource.TreeMap || source === exports.CohortSource.HeatMap) {
            selectedCohortName = localization.localization.Interpret.Cohort.temporaryCohort;
          } else {
            selectedCohortName = _this.state.baseCohort.cohort.name;
            addTemporaryCohort = false;
          }

          var baseCohortFilters = _this.state.baseCohort.cohort.filters;
          var baseCohortCompositeFilters = _this.state.baseCohort.cohort.compositeFilters;
          var selectedCohort = new ErrorCohort(new Cohort(selectedCohortName, _this.state.jointDataset, baseCohortFilters.concat(filtersRelabeled), baseCohortCompositeFilters.concat(compositeFilters)), _this.state.jointDataset, cells, source, addTemporaryCohort, cohortStats);

          var cohorts = _this.state.cohorts.filter(function (errorCohort) {
            return !addTemporaryCohort || !errorCohort.isTemporary;
          });

          if (addTemporaryCohort) {
            cohorts = __spreadArray([selectedCohort], __read(cohorts));
          }

          _this.setState({
            cohorts: cohorts,
            selectedCohort: selectedCohort
          });
        };

        return _this;
      }

      return CohortBasedComponent;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function getCohortFilterCount(cohort) {
      return cohort.filters.length + cohort.compositeFilters.length;
    }

    // Copyright (c) Microsoft Corporation.
    var predictionPathStyles = function predictionPathStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        filterCircle: {
          backgroundColor: theme.palette.blue,
          border: "1px solid #C8C8C8",
          borderRadius: "10px",
          boxSizing: "border-box",
          color: theme.palette.blue,
          height: "16px",
          width: "16px"
        },
        stepBar: {
          backgroundColor: theme.palette.neutralTertiaryAlt,
          height: "20px",
          marginBottom: "4px",
          marginLeft: "12px",
          marginTop: "4px",
          width: "2px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var alignmentStackTokens = {
      childrenGap: 10,
      padding: 5
    };

    var PredictionPath =
    /** @class */
    function (_super) {
      __extends(PredictionPath, _super);

      function PredictionPath() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      PredictionPath.prototype.render = function () {
        var errorCohort = this.props.temporaryCohort;
        var filters = errorCohort.filtersToString();
        var classNames = predictionPathStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, null, filters.reverse().map(function (filter, index) {
          return /*#__PURE__*/React__default.createElement("div", {
            key: index
          }, /*#__PURE__*/React__default.createElement(react.Stack, {
            horizontal: true,
            tokens: alignmentStackTokens
          }, /*#__PURE__*/React__default.createElement(react.Stack, {
            verticalAlign: "center"
          }, /*#__PURE__*/React__default.createElement("i", {
            className: classNames.filterCircle
          })), /*#__PURE__*/React__default.createElement(react.Stack, {
            verticalAlign: "center"
          }, filter.length <= 150 ? /*#__PURE__*/React__default.createElement(react.Text, null, filter) : /*#__PURE__*/React__default.createElement(react.TooltipHost, {
            content: filter,
            id: "Filter " + index
          }, /*#__PURE__*/React__default.createElement(react.Text, null, filter.slice(0, 150) + " "), /*#__PURE__*/React__default.createElement(react.Icon, {
            iconName: "More"
          })))), index !== filters.length - 1 && /*#__PURE__*/React__default.createElement("div", {
            className: classNames.stepBar
          }));
        }));
      };

      return PredictionPath;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var descriptionMaxWidth = "750px"; // hide when screen size is less or equal than large(1023px)

    var hideLgDown = {
      selectors: {
        "@media screen and (max-width: 1023px)": {
          display: "none"
        }
      }
    }; // hide when screen size is less or equal than extra large(1365px)

    var hideXlDown = {
      selectors: {
        "@media screen and (max-width: 1365px)": {
          display: "none"
        }
      }
    }; // hide when screen size is larger or equal than extra large(1366px)

    var hideXxlUp = {
      selectors: {
        "@media screen and (min-width: 1366px)": {
          display: "none"
        }
      }
    }; // flex when screen size is less or equal than small(639px)

    var flexSmDown = {
      selectors: {
        "@media screen and (max-width: 479px)": {
          flexFlow: "wrap"
        }
      }
    }; // flex when screen size is less or equal than medium(639px)

    var flexMdDown = {
      selectors: {
        "@media screen and (max-width: 639px)": {
          flexFlow: "wrap"
        }
      }
    }; // flex when screen size is less or equal than large(1023px)

    var flexLgDown = {
      selectors: {
        "@media screen and (max-width: 1023px)": {
          flexFlow: "wrap"
        }
      }
    }; // flex when screen size is less or equal than extra large(1365px)

    var flexXlDown = {
      selectors: {
        "@media screen and (max-width: 1365px)": {
          flexFlow: "wrap"
        }
      }
    }; // 100% width when screen size is less or equal than large(1023px)

    var fullLgDown = {
      selectors: {
        "@media screen and (max-width: 1023px)": {
          width: "100%"
        }
      }
    }; // 100% width when screen size is less or equal than extra large(1365px)

    var fullXlDown = {
      selectors: {
        "@media screen and (max-width: 1365px)": {
          width: "100%"
        }
      }
    }; // no padding when screen size is less or equal than medium(639px)

    var noPaddingMdDown = {
      selectors: {
        "@media screen and (max-width: 639px)": {
          padding: "0"
        }
      }
    };
    var tableStyles = react.mergeStyles({
      overflowX: "auto",
      width: "100%"
    });

    // Copyright (c) Microsoft Corporation.
    var cohortInfoStyles = function cohortInfoStyles() {
      return react.mergeStyleSets({
        button: {
          minWidth: "120px"
        },
        container: __assign({
          padding: "65px 0 0 20px"
        }, flexLgDown),
        left: {
          selectors: {
            "@media screen and (max-width: 1023px)": {
              margin: "25px 30px 0 0"
            }
          }
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var CohortInfo =
    /** @class */
    function (_super) {
      __extends(CohortInfo, _super);

      function CohortInfo() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortInfo.prototype.render = function () {
        var _this = this;

        var classNames = cohortInfoStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          className: classNames.container,
          tokens: {
            childrenGap: "20px"
          }
        }, /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "20px"
          },
          className: classNames.left
        }, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          className: classNames.button,
          text: localization.localization.ErrorAnalysis.CohortInfo.saveCohort,
          onClick: function onClick() {
            return _this.props.onSaveCohortClick();
          },
          disabled: this.props.disabledView || !this.props.currentCohort.isTemporary
        }), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Label, null, localization.localization.ErrorAnalysis.CohortInfo.basicInformation), !this.props.currentCohort.isAllDataCohort && /*#__PURE__*/React__default.createElement(react.Text, null, this.props.currentCohort.cohort.name), /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.Cohort.defaultLabel, " (", getCohortFilterCount(this.props.currentCohort.cohort), " ", localization.localization.ErrorAnalysis.CohortInfo.filters, ")")), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Label, null, localization.localization.ErrorAnalysis.CohortInfo.baseCohortInstances), /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.total, " ", this.props.currentCohort.cohortStats.totalAll), this.props.currentCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.correct, " ", this.props.currentCohort.cohortStats.totalCorrect), this.props.currentCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.incorrect, " ", this.props.currentCohort.cohortStats.totalIncorrect))), /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "20px"
          }
        }, /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Label, null, localization.localization.ErrorAnalysis.CohortInfo.selectedCohortInstances), /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.total, " ", this.props.currentCohort.cohortStats.totalCohort), this.props.currentCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.correct, " ", this.props.currentCohort.cohortStats.totalCohortCorrect), this.props.currentCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.ErrorAnalysis.CohortInfo.incorrect, " ", this.props.currentCohort.cohortStats.totalCohortIncorrect)), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Label, null, localization.localization.ErrorAnalysis.CohortInfo.predictionPath), /*#__PURE__*/React__default.createElement(PredictionPath, {
          temporaryCohort: this.props.currentCohort
        }))));
      };

      return CohortInfo;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    var focusTrapZoneProps = {
      forceFocusInsideTrap: false,
      isClickableOutsideFocusTrap: true
    };

    var CohortInfoPanel =
    /** @class */
    function (_super) {
      __extends(CohortInfoPanel, _super);

      function CohortInfoPanel() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortInfoPanel.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.Panel, {
          headerText: localization.localization.ErrorAnalysis.CohortInfo.cohortInformation,
          isOpen: this.props.isOpen,
          focusTrapZoneProps: focusTrapZoneProps,
          // You MUST provide this prop! Otherwise screen readers will just say "button" with no label.
          closeButtonAriaLabel: "Close",
          isBlocking: false,
          onDismiss: this.props.onDismiss
        }, /*#__PURE__*/React__default.createElement(CohortInfo, {
          currentCohort: this.props.currentCohort,
          disabledView: false,
          onSaveCohortClick: this.props.onSaveCohortClick
        }));
      };

      return CohortInfoPanel;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var CohortInfoSection =
    /** @class */
    function (_super) {
      __extends(CohortInfoSection, _super);

      function CohortInfoSection() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.context = defaultModelAssessmentContext;
        return _this;
      }

      CohortInfoSection.prototype.render = function () {
        var currentCohort = this.context.baseErrorCohort;
        var cohortName = currentCohort.cohort.name; // add (default) if it's the default cohort

        var cohortInfoTitle = localization.localization.ModelAssessment.CohortInformation.GlobalCohort + cohortName;

        if (currentCohort.isAllDataCohort) {
          cohortInfoTitle += localization.localization.ModelAssessment.CohortInformation.DefaultCohort;
        }

        var datapointsCountString = localization.localization.ModelAssessment.CohortInformation.DataPoints + " = " + currentCohort.cohortStats.totalCohort.toString();
        var filtersCountString = localization.localization.ModelAssessment.CohortInformation.Filters + " = " + currentCohort.cohort.filters.length.toString();
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          grow: true,
          tokens: {
            padding: "l1"
          }
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "xLarge"
        }, cohortInfoTitle), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Text, null, datapointsCountString), /*#__PURE__*/React__default.createElement(react.Text, null, filtersCountString)), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: {
            childrenGap: 25
          }
        }, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          text: localization.localization.ModelAssessment.CohortInformation.ShiftCohort,
          onClick: this.props.toggleShiftCohortVisibility
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          text: localization.localization.ModelAssessment.CohortInformation.NewCohort,
          onClick: this.props.toggleCreateCohortVisibility
        })));
      };

      CohortInfoSection.contextType = modelAssessmentContext;
      return CohortInfoSection;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    var focusTrapZoneProps$1 = {
      forceFocusInsideTrap: false,
      isClickableOutsideFocusTrap: true
    };

    var CohortListPanel =
    /** @class */
    function (_super) {
      __extends(CohortListPanel, _super);

      function CohortListPanel() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortListPanel.prototype.render = function () {
        var classNames = cohortListStyles();
        return /*#__PURE__*/React__default.createElement(react.Panel, {
          headerText: localization.localization.Core.ShiftCohort.cohortList,
          isOpen: this.props.isOpen,
          focusTrapZoneProps: focusTrapZoneProps$1,
          // You MUST provide this prop! Otherwise screen readers will just say "button" with no label.
          closeButtonAriaLabel: "Close",
          isBlocking: false,
          onDismiss: this.props.onDismiss
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.divider
        }), /*#__PURE__*/React__default.createElement(CohortList, {
          errorCohorts: this.props.cohorts,
          onEditCohortClick: this.props.onEditCohortClick,
          includeDetails: false,
          enableEditing: true
        }));
      };

      return CohortListPanel;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var cohortFiltersStyles = function cohortFiltersStyles() {
      return react.mergeStyleSets({
        header: {
          fontSize: "14px",
          fontWeight: "600"
        },
        section: {
          paddingBottom: "10px !important",
          paddingLeft: "20px",
          paddingTop: "10px !important"
        },
        subsection: {},
        tableData: {
          fontSize: "16px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var alignmentStackTokens$1 = {
      childrenGap: 10,
      padding: 5
    };
    var maxWidthStackStyle = {
      root: {
        width: "500px"
      }
    };

    var CohortFilters =
    /** @class */
    function (_super) {
      __extends(CohortFilters, _super);

      function CohortFilters() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortFilters.prototype.render = function () {
        var classNames = cohortFiltersStyles();
        var filters = this.props.cohort.filtersToString().join(", ");
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.section
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.subsection
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.header
        }, "Filters"), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$1,
          styles: maxWidthStackStyle
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, filters)))));
      };

      return CohortFilters;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var cohortStatsStyles = function cohortStatsStyles() {
      return react.mergeStyleSets({
        divider: {
          borderTop: "1px solid #DADADA",
          left: "50%",
          margin: "0",
          marginRight: "-50%",
          position: "absolute",
          transform: "translate(-50%, 0%)",
          width: "100%"
        },
        header: {
          fontSize: "14px",
          fontWeight: "600"
        },
        section: {
          paddingBottom: "10px !important",
          paddingLeft: "20px",
          paddingTop: "10px !important"
        },
        subsection: {},
        tableData: {
          fontSize: "16px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var alignmentStackTokens$2 = {
      childrenGap: 10,
      padding: 5
    };

    var CohortStats =
    /** @class */
    function (_super) {
      __extends(CohortStats, _super);

      function CohortStats() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortStats.prototype.render = function () {
        var classNames = cohortStatsStyles();
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.section
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.subsection
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.header
        }, localization.localization.ErrorAnalysis.cohortInfo), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true
        }, /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: alignmentStackTokens$2
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.errorCoverage), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.temporaryCohort.cohortStats.errorCoverage.toFixed(2) + "%")), /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: alignmentStackTokens$2
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.Metrics.metricName), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.temporaryCohort.cohortStats.metricName)), /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: alignmentStackTokens$2
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.Metrics.metricValue), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.temporaryCohort.cohortStats.metricName === Metrics.ErrorRate && this.props.temporaryCohort.cohortStats.metricValue.toFixed(2) + "%", this.props.temporaryCohort.cohortStats.metricName !== Metrics.ErrorRate && this.props.temporaryCohort.cohortStats.metricValue.toFixed(2))), this.props.temporaryCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: alignmentStackTokens$2
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.correctTotal), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.temporaryCohort.cohortStats.totalCohortCorrect + " / " + this.props.temporaryCohort.cohortStats.totalCohort)), this.props.temporaryCohort.cohortStats instanceof ErrorCohortStats && /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: alignmentStackTokens$2
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.incorrectTotal), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.temporaryCohort.cohortStats.totalCohortIncorrect + " / " + this.props.temporaryCohort.cohortStats.totalCohort)))));
      };

      return CohortStats;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var dragOptions = {
      closeMenuItemText: "Close",
      menu: react.ContextualMenu,
      moveMenuItemText: "Move"
    };
    var modalProps = {
      dragOptions: dragOptions,
      isBlocking: true
    };
    var textFieldStyles = {
      fieldGroup: {
        width: 200
      }
    };
    var stackTokens = {
      childrenGap: 5
    };

    var EditCohort =
    /** @class */
    function (_super) {
      __extends(EditCohort, _super);

      function EditCohort(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;

        _this.updateCohortName = function (_, newValue) {
          if (!newValue) {
            newValue = "";
          }

          _this.setState({
            cohortName: newValue
          });
        };

        _this.deleteCohort = function () {
          _this.props.onDismiss();

          _this.props.onDelete(_this.props.errorCohort);
        };

        _this.editCohort = function () {
          _this.props.onDismiss();

          var errorCohort = _this.props.errorCohort;
          var savedCohort = new ErrorCohort(new Cohort(_this.state.cohortName, _this.context.jointDataset, errorCohort.cohort.filters, errorCohort.cohort.compositeFilters), _this.context.jointDataset, errorCohort.cells, errorCohort.source, errorCohort.isTemporary, errorCohort.cohortStats);

          _this.props.onSave(errorCohort, savedCohort);
        };

        _this.state = {
          cohortName: _this.props.errorCohort.cohort.name
        };
        return _this;
      }

      EditCohort.prototype.render = function () {
        var disableDelete = this.props.errorCohort.cohort.name === this.props.selectedCohort.cohort.name;
        var dialogContentProps = {
          subText: localization.localization.ErrorAnalysis.EditCohort.subText,
          title: this.props.errorCohort.cohort.name,
          type: react.DialogType.close
        };
        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          hidden: !this.props.isOpen,
          onDismiss: this.props.onDismiss,
          dialogContentProps: dialogContentProps,
          modalProps: modalProps,
          minWidth: 740,
          maxWidth: 1000
        }, /*#__PURE__*/React__default.createElement(react.TextField, {
          label: localization.localization.ErrorAnalysis.EditCohort.cohortName,
          onChange: this.updateCohortName,
          defaultValue: this.state.cohortName,
          styles: textFieldStyles
        }), /*#__PURE__*/React__default.createElement(CohortStats, {
          temporaryCohort: this.props.errorCohort
        }), /*#__PURE__*/React__default.createElement(CohortFilters, {
          cohort: this.props.errorCohort
        }), /*#__PURE__*/React__default.createElement(react.DialogFooter, null, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          disableShrink: true,
          horizontalAlign: "space-between",
          tokens: stackTokens
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          align: "start"
        }, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.deleteCohort,
          text: localization.localization.Interpret.CohortEditor["delete"],
          ariaLabel: localization.localization.Interpret.CohortEditor.deleteAriaLabel,
          disabled: disableDelete
        })), /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          align: "end"
        }, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: stackTokens
        }, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          onClick: this.editCohort,
          text: localization.localization.Interpret.CohortEditor.save,
          ariaLabel: localization.localization.Interpret.CohortEditor.saveAriaLabel
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.props.onDismiss,
          text: localization.localization.Interpret.CohortEditor.cancel,
          ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
        }))))));
      };

      EditCohort.contextType = modelAssessmentContext;
      return EditCohort;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var ConfirmationDialog =
    /** @class */
    function (_super) {
      __extends(ConfirmationDialog, _super);

      function ConfirmationDialog() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      ConfirmationDialog.prototype.render = function () {
        var dialogContentProps = {
          subText: this.props.subText,
          title: this.props.title,
          type: react.DialogType.normal
        };
        var modalProps = {
          isBlocking: false
        };
        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          maxWidth: "480px",
          minWidth: "480px",
          hidden: false,
          dialogContentProps: dialogContentProps,
          modalProps: modalProps
        }, /*#__PURE__*/React__default.createElement(react.DialogFooter, null, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          onClick: this.props.onConfirm,
          text: this.props.confirmButtonText,
          ariaLabel: this.props.confirmButtonText
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.props.onClose,
          text: this.props.cancelButtonText,
          ariaLabel: this.props.cancelButtonText
        })));
      };

      return ConfirmationDialog;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    function getFilters(props, dataset, metadata) {
      if (props.filterList === undefined) {
        return [];
      }

      if (props.isFromExplanation) {
        return translateToNewFilters(props.filterList, metadata === null || metadata === void 0 ? void 0 : metadata.featureNames);
      }

      return translateToNewFilters(props.filterList, dataset === null || dataset === void 0 ? void 0 : dataset.feature_names);
    }
    function translateToLegacyFilterColumn(column, featureNames) {
      if (column === exports.DatasetCohortColumns.Index) {
        return JointDataset.IndexLabel;
      }

      if (column === exports.DatasetCohortColumns.PredictedY) {
        return JointDataset.PredictedYLabel;
      }

      if (column === exports.DatasetCohortColumns.TrueY) {
        return JointDataset.TrueYLabel;
      }

      if (column === exports.DatasetCohortColumns.ClassificationError) {
        return JointDataset.ClassificationError;
      }

      if (column === exports.DatasetCohortColumns.RegressionError) {
        return JointDataset.RegressionError;
      }

      var index = featureNames.findIndex(function (item) {
        return item === column;
      });

      if (index > -1) {
        return JointDataset.DataLabelRoot + index.toString();
      }

      return "";
    }
    function translateToNewFilters(legacyFilters, featureNames) {
      var filters = [];
      legacyFilters.forEach(function (legacyFilter) {
        var filter = translateToNewFilter(legacyFilter, featureNames);

        if (filter) {
          filters.push(filter);
        }
      });
      return filters;
    }
    function translateToLegacyFilters(filters, featureNames) {
      var legacyFilters = [];
      filters.forEach(function (filter) {
        var legacyFilter = translateToLegacyFilter(filter, featureNames || []);

        if (legacyFilter) {
          legacyFilters.push(legacyFilter);
        }
      });
      return legacyFilters;
    }
    function translateToNewFilter(legacyFilter, featureNames) {
      var legacyColumn = legacyFilter.column;

      if (legacyColumn.startsWith(JointDataset.DataLabelRoot) && featureNames) {
        var index = legacyColumn.slice(JointDataset.DataLabelRoot.length);
        var newColumn = featureNames[Number(index)];
        return translateFilter(legacyFilter, newColumn);
      }

      var columnMap = new Map([[JointDataset.IndexLabel, exports.DatasetCohortColumns.Index], [JointDataset.PredictedYLabel, exports.DatasetCohortColumns.PredictedY], [JointDataset.TrueYLabel, exports.DatasetCohortColumns.TrueY], [JointDataset.ClassificationError, exports.DatasetCohortColumns.ClassificationError], [JointDataset.RegressionError, exports.DatasetCohortColumns.RegressionError]]);

      if (columnMap.has(legacyColumn)) {
        var label = columnMap.get(legacyColumn);
        return label ? translateFilter(legacyFilter, label) : undefined;
      }

      return undefined;
    }

    function translateToLegacyFilter(filter, featureNames) {
      var column = filter.column;
      var columnMap = new Map([[exports.DatasetCohortColumns.Index, JointDataset.IndexLabel], [exports.DatasetCohortColumns.PredictedY, JointDataset.PredictedYLabel], [exports.DatasetCohortColumns.TrueY, JointDataset.TrueYLabel], [exports.DatasetCohortColumns.ClassificationError, JointDataset.ClassificationError], [exports.DatasetCohortColumns.RegressionError, JointDataset.RegressionError]]);

      if (columnMap.has(column)) {
        var label = columnMap.get(column);
        return label ? translateFilter(filter, label) : undefined;
      }

      var index = featureNames.findIndex(function (item) {
        return item === column;
      });

      if (index > -1) {
        return translateFilter(filter, JointDataset.DataLabelRoot + index.toString());
      }

      return undefined;
    }

    function translateFilter(filter, column) {
      return {
        arg: filter.arg,
        column: column,
        method: filter.method
      };
    }

    // Copyright (c) Microsoft Corporation.

    function getPropertyValues(indexes, property, dataset, modelType) {
      if (property === exports.DatasetCohortColumns.Index) {
        return indexes;
      }

      if (property === exports.DatasetCohortColumns.PredictedY) {
        var predictedYs_1 = dataset.predicted_y;

        if (predictedYs_1) {
          return indexes.map(function (index) {
            return predictedYs_1[index];
          });
        }
      }

      var classNames = dataset.class_names;

      if (classNames && property.startsWith(exports.DatasetCohortColumns.ProbabilityY)) {
        var probYs_1 = dataset.probability_y;
        var i_1 = Number(property.slice(exports.DatasetCohortColumns.ProbabilityY.length));

        if (probYs_1 && i_1 < classNames.length) {
          return indexes.map(function (index) {
            return probYs_1[index][i_1];
          });
        }
      }

      var featureIndex = dataset.feature_names.findIndex(function (item) {
        return item === property;
      });

      if (featureIndex >= 0) {
        return indexes.map(function (index) {
          return dataset.features[index][featureIndex];
        });
      }

      if (property === exports.DatasetCohortColumns.TrueY) {
        var trueYs_1 = dataset.true_y;

        if (trueYs_1) {
          return indexes.map(function (index) {
            return trueYs_1[index];
          });
        }
      }

      if (dataset.predicted_y && dataset.true_y) {
        return getErrors(property, indexes, dataset, modelType);
      }

      return [];
    }

    function getErrors(property, indexes, dataset, modelType) {
      if (dataset.predicted_y && dataset.true_y && !Array.isArray(dataset.true_y) && !Array.isArray(dataset.predicted_y)) {
        var trueY_1 = [];
        var predictedY_1 = [];

        for (var i = 0; i < dataset.features.length; i++) {
          trueY_1.push(dataset.true_y[i]);
          predictedY_1.push(dataset.predicted_y[i]);
        }

        if (modelType === exports.ModelTypes.Regression && property === exports.DatasetCohortColumns.RegressionError) {
          return indexes.map(function (index) {
            return Math.abs(trueY_1[index] - predictedY_1[index]);
          });
        }

        if (property === exports.DatasetCohortColumns.ClassificationError && modelType && IsBinary(modelType)) {
          return indexes.map(function (index) {
            return 2 * trueY_1[index] + predictedY_1[index];
          });
        }

        if (property === exports.DatasetCohortColumns.ClassificationError && modelType && (IsMulticlass(modelType) || IsMultilabel(modelType))) {
          return indexes.map(function (index) {
            return trueY_1[index] !== predictedY_1[index] ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
          });
        }
      }

      return [];
    }

    // Copyright (c) Microsoft Corporation.

    var DatasetCohort =
    /** @class */
    function () {
      function DatasetCohort(name, dataset, filters, compositeFilters, modelType, columnRanges, source, isTemporary, cohortStats, isAllDataCohort) {
        if (filters === void 0) {
          filters = [];
        }

        if (compositeFilters === void 0) {
          compositeFilters = [];
        }

        if (source === void 0) {
          source = exports.CohortSource.None;
        }

        if (isTemporary === void 0) {
          isTemporary = false;
        }

        if (cohortStats === void 0) {
          cohortStats = undefined;
        }

        if (isAllDataCohort === void 0) {
          isAllDataCohort = false;
        }

        this.name = name;
        this.dataset = dataset;
        this.filters = filters;
        this.compositeFilters = compositeFilters;
        this.modelType = modelType;
        this.columnRanges = columnRanges;
        this.source = source;
        this.isTemporary = isTemporary;
        this.isAllDataCohort = isAllDataCohort;
        this.selectedIndexes = [];
        this.name = name;
        this.selectedIndexes = this.applyFilters();

        if (cohortStats) {
          this.cohortStats = cohortStats;
        } else {
          this.cohortStats = this.updateStatsFromData();
        }
      }

      DatasetCohort.prototype.filterRecursively = function (row, compositeFilter) {
        if (compositeFilter.method) {
          var filter = translateToNewFilter(compositeFilter, this.dataset.feature_names);
          return !!filter && this.filterRow(row, [filter]);
        }

        return this.filterComposite(row, compositeFilter.compositeFilters, compositeFilter.operation);
      };

      DatasetCohort.prototype.filterComposite = function (row, compositeFilters, operation) {
        var _this = this;

        if (operation === exports.Operations.And) {
          return compositeFilters.every(function (compositeFilter) {
            return _this.filterRecursively(row, compositeFilter);
          });
        }

        return compositeFilters.some(function (compositeFilter) {
          return _this.filterRecursively(row, compositeFilter);
        });
      };

      DatasetCohort.prototype.applyFilters = function () {
        var e_1, _a;

        var indexes = [];
        var dataDict = this.getDataDict(this.modelType);

        try {
          for (var _b = __values(dataDict.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
            var _d = __read(_c.value, 2),
                index = _d[0],
                row = _d[1];

            if (this.filterRow(row, this.filters)) {
              if (this.compositeFilters.length > 0) {
                if (this.filterComposite(row, this.compositeFilters, exports.Operations.And)) {
                  indexes.push(index);
                }
              } else {
                indexes.push(index);
              }
            }
          }
        } catch (e_1_1) {
          e_1 = {
            error: e_1_1
          };
        } finally {
          try {
            if (_c && !_c.done && (_a = _b["return"])) _a.call(_b);
          } finally {
            if (e_1) throw e_1.error;
          }
        }

        return indexes;
      };

      DatasetCohort.prototype.getDataDict = function (modelType) {
        var e_2, _a, e_3, _b, e_4, _c, e_5, _d;

        var _this = this;

        var _e, _f, _g;

        var dataDict = Array.from({
          length: this.dataset.features.length
        }).map(function (_, index) {
          var dict = {};
          dict[exports.DatasetCohortColumns.Index] = index;
          return dict;
        });
        this.dataset.features.forEach(function (row, index) {
          row.forEach(function (val, colIndex) {
            var featureName = _this.dataset.feature_names[colIndex];
            dataDict[index][featureName] = val;
          });
        });
        (_e = this.dataset.true_y) === null || _e === void 0 ? void 0 : _e.forEach(function (val, index) {
          if (Array.isArray(val)) {
            val.forEach(function (subVal, subIndex) {
              dataDict[index][exports.DatasetCohortColumns.TrueY + subIndex.toString()] = subVal;
            });
          } else {
            dataDict[index][exports.DatasetCohortColumns.TrueY] = val;
          }
        });
        (_f = this.dataset.predicted_y) === null || _f === void 0 ? void 0 : _f.forEach(function (val, index) {
          if (Array.isArray(val)) {
            val.forEach(function (subVal, subIndex) {
              dataDict[index][exports.DatasetCohortColumns.PredictedY + subIndex.toString()] = subVal;
            });
          } else {
            dataDict[index][exports.DatasetCohortColumns.PredictedY] = val;
          }
        });
        (_g = this.dataset.object_detection_labels) === null || _g === void 0 ? void 0 : _g.forEach(function (val, index) {
          dataDict[index][exports.DatasetCohortColumns.ObjectDetectionIncorrect] = val.incorrect;
          dataDict[index][exports.DatasetCohortColumns.ObjectDetectionCorrect] = val.correct;
        }); // set up errors

        if (modelType === exports.ModelTypes.Regression) {
          try {
            for (var _h = __values(dataDict.entries()), _j = _h.next(); !_j.done; _j = _h.next()) {
              var _k = __read(_j.value, 2),
                  index = _k[0],
                  row = _k[1];

              dataDict[index][exports.DatasetCohortColumns.RegressionError] = Math.abs(row[exports.DatasetCohortColumns.TrueY] - row[exports.DatasetCohortColumns.PredictedY]);
            }
          } catch (e_2_1) {
            e_2 = {
              error: e_2_1
            };
          } finally {
            try {
              if (_j && !_j.done && (_a = _h["return"])) _a.call(_h);
            } finally {
              if (e_2) throw e_2.error;
            }
          }
        } else if (modelType && IsBinary(modelType)) {
          try {
            // sum pred and 2*true to map to ints 0 - 3,
            // 0: TN
            // 1: FP
            // 2: FN
            // 3: TP
            for (var _l = __values(dataDict.entries()), _m = _l.next(); !_m.done; _m = _l.next()) {
              var _o = __read(_m.value, 2),
                  index = _o[0],
                  row = _o[1];

              dataDict[index][exports.DatasetCohortColumns.ClassificationError] = 2 * row[exports.DatasetCohortColumns.TrueY] + row[exports.DatasetCohortColumns.PredictedY];
            }
          } catch (e_3_1) {
            e_3 = {
              error: e_3_1
            };
          } finally {
            try {
              if (_m && !_m.done && (_b = _l["return"])) _b.call(_l);
            } finally {
              if (e_3) throw e_3.error;
            }
          }
        } else if (modelType && IsMulticlass(modelType)) {
          try {
            for (var _p = __values(dataDict.entries()), _q = _p.next(); !_q.done; _q = _p.next()) {
              var _r = __read(_q.value, 2),
                  index = _r[0],
                  row = _r[1];

              dataDict[index][exports.DatasetCohortColumns.ClassificationError] = row[exports.DatasetCohortColumns.TrueY] !== row[exports.DatasetCohortColumns.PredictedY] ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
            }
          } catch (e_4_1) {
            e_4 = {
              error: e_4_1
            };
          } finally {
            try {
              if (_q && !_q.done && (_c = _p["return"])) _c.call(_p);
            } finally {
              if (e_4) throw e_4.error;
            }
          }
        } else if (modelType && IsObjectDetection(modelType)) {
          try {
            for (var _s = __values(dataDict.entries()), _t = _s.next(); !_t.done; _t = _s.next()) {
              var _u = __read(_t.value, 2),
                  index = _u[0],
                  row = _u[1];

              dataDict[index][exports.DatasetCohortColumns.ClassificationError] = row[exports.DatasetCohortColumns.ObjectDetectionIncorrect] !== NoLabel ? exports.MulticlassClassificationEnum.Misclassified : exports.MulticlassClassificationEnum.Correct;
            }
          } catch (e_5_1) {
            e_5 = {
              error: e_5_1
            };
          } finally {
            try {
              if (_t && !_t.done && (_d = _s["return"])) _d.call(_s);
            } finally {
              if (e_5) throw e_5.error;
            }
          }
        }

        return dataDict;
      };

      DatasetCohort.prototype.filterRow = function (row, filters) {
        var _this = this;

        return filters.every(function (filter) {
          var rowVal = row[filter.column];

          switch (filter.method) {
            case exports.FilterMethods.Equal:
              return rowVal === filter.arg[0];

            case exports.FilterMethods.GreaterThan:
              return typeof rowVal == "number" && rowVal > filter.arg[0];

            case exports.FilterMethods.GreaterThanEqualTo:
              return typeof rowVal == "number" && rowVal >= filter.arg[0];

            case exports.FilterMethods.LessThan:
              return typeof rowVal == "number" && rowVal < filter.arg[0];

            case exports.FilterMethods.LessThanEqualTo:
              return typeof rowVal == "number" && rowVal <= filter.arg[0];

            case exports.FilterMethods.Includes:
              return _this.includesValue(filter, rowVal);

            case exports.FilterMethods.Excludes:
              return !_this.includesValue(filter, rowVal);

            case exports.FilterMethods.InTheRangeOf:
              return typeof rowVal == "number" && rowVal >= filter.arg[0] && rowVal <= filter.arg[1];

            default:
              return false;
          }
        });
      };

      DatasetCohort.prototype.includesValue = function (filter, val) {
        var _a;

        if (this.columnRanges && (((_a = this.columnRanges[filter.column]) === null || _a === void 0 ? void 0 : _a.rangeType) === mlchartlib.RangeTypes.Categorical || this.columnRanges[filter.column].treatAsCategorical)) {
          if (filter.column === exports.DatasetCohortColumns.PredictedY || filter.column === exports.DatasetCohortColumns.TrueY || filter.column === exports.DatasetCohortColumns.ClassificationError) {
            return filter.arg.includes(val);
          }

          var uniqueValues = this.columnRanges[filter.column].sortedUniqueValues;
          var index = uniqueValues.findIndex(function (item) {
            return item === val;
          });
          return filter.arg.includes(index);
        }

        return false;
      };

      DatasetCohort.prototype.updateStatsFromData = function () {
        var totalAll = 0;
        var totalCohort = 0;
        var totalCorrect = 0;
        var totalCohortCorrect = 0;
        var totalIncorrect = 0;
        var totalCohortIncorrect = 0;
        var errorRate = 0;
        var trueYsCohort = getPropertyValues(this.selectedIndexes, exports.DatasetCohortColumns.TrueY, this.dataset);
        var predYsCohort = getPropertyValues(this.selectedIndexes, exports.DatasetCohortColumns.PredictedY, this.dataset);

        var indexes = __spreadArray([], __read(new Array(this.dataset.features.length).keys()));

        var trueYs = getPropertyValues(indexes, exports.DatasetCohortColumns.TrueY, this.dataset);
        var predYs = getPropertyValues(indexes, exports.DatasetCohortColumns.PredictedY, this.dataset);

        if (trueYsCohort && trueYs && predYsCohort && predYs) {
          totalCohort = trueYsCohort.length;
          totalAll = trueYs.length;

          for (var i = 0; i < totalAll; i++) {
            totalCorrect += trueYs[i] === predYs[i] ? 1 : 0;
          }

          totalIncorrect = totalAll - totalCorrect;

          for (var i = 0; i < totalCohort; i++) {
            totalCohortCorrect += trueYsCohort[i] === predYsCohort[i] ? 1 : 0;
          }

          totalCohortIncorrect = totalCohort - totalCohortCorrect;
        } // Calculate error rate


        if (totalCohort === 0) {
          errorRate = 0;
        } else {
          errorRate = totalCohortIncorrect / totalCohort * 100;
        }

        return new ErrorCohortStats(totalCohortIncorrect, totalCohort, totalIncorrect, totalAll, errorRate, Metrics.ErrorRate);
      };

      return DatasetCohort;
    }();

    // Copyright (c) Microsoft Corporation.
    var cohortEditorStyles = function cohortEditorStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        addedFilter: {
          color: theme.semanticColors.bodyText,
          fontWeight: react.FontWeights.semibold,
          height: "30px",
          marginLeft: "45px",
          width: "178px"
        },
        addedFilterDiv: {
          height: "80px",
          marginLeft: "45px",
          marginRight: "40px",
          marginTop: "5px",
          overflowY: "auto"
        },
        addFilterButton: {
          backgroundColor: theme.semanticColors.buttonBackground,
          border: "1px solid",
          borderColor: theme.semanticColors.buttonBorder,
          borderRadius: "2px",
          boxSizing: "border-box",
          height: "32px",
          marginLeft: "32px",
          marginTop: "53px",
          padding: "0px",
          width: "98px"
        },
        cancelFilterButton: {
          height: "32px",
          width: "68px"
        },
        clearFilter: {
          color: theme.semanticColors.severeWarningIcon
        },
        closeIcon: {
          alignSelf: "flex-end",
          color: theme.semanticColors.buttonText,
          height: "32px",
          marginRight: "1px",
          selectors: {
            ":hover": {
              color: theme.semanticColors.buttonTextHovered
            }
          },
          width: "40px"
        },
        cohortEditor: {
          borderRadius: "2px",
          ////elevation64 is used for dialogs/panels
          boxShadow: theme.effects.elevation64,
          height: "610px",
          maxHeight: "610px !important",
          overflowY: "auto",
          width: "560px"
        },
        cohortName: {
          alignSelf: "flex-start",
          height: "56px",
          marginLeft: "37px",
          width: "180px"
        },
        container: {
          display: "flex",
          flexDirection: "column",
          height: "610px",
          overflowY: "auto",
          width: "560px"
        },
        defaultFilterList: {
          color: theme.semanticColors.bodySubtext,
          marginLeft: "10px"
        },
        defaultText: {
          color: theme.semanticColors.bodySubtext,
          marginLeft: "35px",
          marginRight: "35px",
          marginTop: "105px",
          textAlign: "center"
        },
        deleteCohort: {
          borderColor: theme.palette.red,
          color: theme.palette.red,
          selectors: {
            ":active": {
              background: theme.palette.red,
              color: theme.palette.white
            },
            ":hover": {
              background: theme.palette.red,
              color: theme.palette.white
            }
          }
        },
        detailedList: {
          height: "160px",
          marginTop: "28px",
          overflowX: "visible",
          width: "197px"
        },
        existingFilter: {
          border: "1px solid",
          borderColor: theme.semanticColors.link,
          borderRadius: "3px",
          boxSizing: "border-box",
          display: "inline-flex",
          flexDirection: "row",
          height: "25px"
        },
        featureComboBox: {
          height: "56px",
          margin: "21px 45px 1px 30px",
          width: "180px"
        },
        featureText: {
          color: theme.semanticColors.bodySubtext,
          height: "20px",
          marginLeft: "30px",
          textAlign: "left",
          width: "180px"
        },
        featureTextDiv: {
          display: "flex",
          flexDirection: "column",
          marginTop: "3px"
        },
        filterHeader: {
          color: theme.semanticColors.bodyTextChecked,
          fontSize: react.FontSizes.medium,
          fontWeight: react.FontWeights.semibold
        },
        filterIcon: {
          height: "25px",
          width: "25px"
        },
        filterLabel: {
          color: theme.semanticColors.link,
          height: "25px",
          maxWidth: "90px",
          minWidth: "75px",
          overflow: "hidden",
          padding: "1px 9px 6px 11px",
          textOverflow: "ellipsis",
          whiteSpace: "nowrap"
        },
        invalidValueError: {
          color: theme.semanticColors.severeWarningIcon,
          fontSize: "12px",
          marginTop: "4px"
        },
        leftHalf: {
          height: "344px",
          marginLeft: "40px",
          width: "213px"
        },
        maxSpinBox: {
          height: "36px",
          width: "64px"
        },
        minSpinBox: {
          height: "36px",
          marginLeft: "30px",
          paddingRight: "26px",
          width: "64px"
        },
        operationComboBox: {
          height: "56px",
          margin: "9px 45px 10px 30px",
          width: "180px"
        },
        rightHalf: {
          background: theme.semanticColors.bodyBackgroundChecked,
          borderRadius: "5px",
          display: "flex",
          flexDirection: "column",
          height: "344px,",
          marginLeft: "25px",
          marginRight: "27px",
          marginTop: "0px",
          width: "255px"
        },
        saveAndCancelDiv: {
          display: "flex",
          flexDirection: "row",
          marginLeft: "32px",
          marginTop: "53px"
        },
        saveAndDeleteDiv: {
          display: "flex",
          flexDirection: "row",
          marginTop: "18px"
        },
        saveFilterButton: {
          height: "32px",
          marginRight: "15px",
          width: "68px"
        },
        treatCategorical: {
          height: "20px",
          margin: "9px 45px 1px 30px",
          width: "180px"
        },
        valueSpinButton: {
          height: "36px",
          marginLeft: "30px",
          marginRight: "45px",
          width: "180px"
        },
        valueSpinButtonDiv: {
          display: "flex",
          flexDirection: "row",
          marginTop: "10px"
        },
        wrapper: {
          display: "flex",
          height: "344px",
          marginTop: "7px"
        }
      });
    };
    var cohortEditor = cohortEditorStyles();

    // Copyright (c) Microsoft Corporation.
    var Announce = function Announce(props) {
      // CSS clipping to hide content, but still allowed to be read by modern screen readers.
      // reference: https://webaim.org/techniques/css/invisiblecontent/
      var hiddenElementStyles = {
        clip: "rect(1px, 1px, 1px, 1px)",
        clipPath: "inset(50%)",
        height: "1px",
        margin: "-1px",
        overflow: "hidden",
        padding: 0,
        position: "absolute",
        width: "1px"
      };
      var role = props.role || "status";
      var delay = props.delay || 0;
      var ariaLive = props.ariaLive || "assertive";
      return /*#__PURE__*/React__default.createElement("div", {
        role: role,
        "aria-live": ariaLive
      }, /*#__PURE__*/React__default.createElement(react.DelayedRender, {
        delay: delay
      }, /*#__PURE__*/React__default.createElement("span", {
        style: hiddenElementStyles,
        "data-automation-id": props.automationId
      }, props.message)));
    };

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function isTwoDimArray(val) {
      return Array.isArray(val) && !val.some(function (v) {
        return !Array.isArray(v);
      });
    }
    function isThreeDimArray(val) {
      return Array.isArray(val) && !val.some(function (v) {
        return !isTwoDimArray(v);
      });
    }

    // Copyright (c) Microsoft Corporation.
    function buildGlobalProperties(precomputedExplanations) {
      var result = {};

      if (precomputedExplanations && precomputedExplanations.globalFeatureImportance && precomputedExplanations.globalFeatureImportance.scores) {
        result.isGlobalImportanceDerivedFromLocal = false;

        if (isTwoDimArray(precomputedExplanations.globalFeatureImportance.scores)) {
          result.globalImportance = precomputedExplanations.globalFeatureImportance.scores;
          result.globalImportanceIntercept = precomputedExplanations.globalFeatureImportance.intercept;
        } else {
          result.globalImportance = precomputedExplanations.globalFeatureImportance.scores.map(function (value) {
            return [value];
          });
          result.globalImportanceIntercept = [precomputedExplanations.globalFeatureImportance.intercept];
        }
      }

      return result;
    }
    function buildIndexedNames(length, baseString) {
      return __spreadArray([], __read(new Array(length).keys())).map(function (i) {
        return localization.localization.formatString(baseString, i.toString());
      });
    }
    var getClassLength = memoize(function (precomputedExplanations, probabilityY) {
      if (precomputedExplanations && precomputedExplanations.localFeatureImportance && precomputedExplanations.localFeatureImportance.scores) {
        var localImportances = precomputedExplanations.localFeatureImportance.scores;

        if (isThreeDimArray(localImportances)) {
          return localImportances.length;
        } // 2d is regression (could be a non-scikit convention binary, but that is not supported)


        return 1;
      }

      if (precomputedExplanations && precomputedExplanations.globalFeatureImportance && precomputedExplanations.globalFeatureImportance.scores) {
        // determine if passed in values is 1D or 2D
        if (isTwoDimArray(precomputedExplanations.globalFeatureImportance.scores)) {
          return precomputedExplanations.globalFeatureImportance.scores.length;
        }
      }

      return getClassLengthFromProbabilityY(probabilityY);
    });
    var getClassLengthFromTextImportances = memoize(function (textFeatureImportance, probabilityY) {
      if (textFeatureImportance && textFeatureImportance.length > 0 && textFeatureImportance[0].localExplanations) {
        return textFeatureImportance[0].localExplanations.length;
      }

      return getClassLengthFromProbabilityY(probabilityY);
    });
    function getClassLengthFromProbabilityY(probabilityY) {
      if (probabilityY && Array.isArray(probabilityY) && Array.isArray(probabilityY[0]) && probabilityY[0].length > 0) {
        return probabilityY[0].length;
      } // default to regression case


      return 1;
    }
    function getModelType(method, precomputedExplanations, probabilityY) {
      // If Python provides a hint, use it!
      if (method) {
        if (method === exports.ModelTypes.Regression.valueOf()) {
          return exports.ModelTypes.Regression;
        } else if (method === exports.ModelTypes.Binary.valueOf()) {
          return exports.ModelTypes.Binary;
        } else if (method === exports.ModelTypes.Multiclass.valueOf()) {
          return exports.ModelTypes.Multiclass;
        }
      }

      return getModelTypeFromExplanation(precomputedExplanations, probabilityY);
    }
    function getModelTypeFromExplanation(precomputedExplanations, probabilityY) {
      switch (getClassLength(precomputedExplanations, probabilityY)) {
        case 1:
          return exports.ModelTypes.Regression;

        case 2:
          return exports.ModelTypes.Binary;

        default:
          return exports.ModelTypes.Multiclass;
      }
    }
    function ifEnableLargeData(dataset) {
      if ((dataset === null || dataset === void 0 ? void 0 : dataset.is_large_data_scenario) && (dataset === null || dataset === void 0 ? void 0 : dataset.use_entire_test_data)) {
        return dataset.is_large_data_scenario && dataset.use_entire_test_data;
      }

      return false;
    }
    function getModelTypeFromTextExplanation(precomputedExplanations, probabilityY) {
      switch (getClassLengthFromTextImportances(precomputedExplanations === null || precomputedExplanations === void 0 ? void 0 : precomputedExplanations.textFeatureImportance, probabilityY)) {
        case 2:
          return exports.ModelTypes.TextBinary;

        default:
          return exports.ModelTypes.TextMulticlass;
      }
    }

    // Copyright (c) Microsoft Corporation.

    var FluentUIStyles =
    /** @class */
    function () {
      function FluentUIStyles() {}

      FluentUIStyles.hex2rgb = function (hex) {
        var bigint = Number.parseInt(hex, 16);
        var rv = bigint >> 16 & 255;
        var gv = bigint >> 8 & 255;
        var bv = bigint & 255;
        return {
          b: bv,
          g: gv,
          r: rv
        };
      };

      FluentUIStyles.getFlunetUIPalette = function (theme) {
        var colorsMap = FluentUIStyles.getColorsMap(theme);
        return FluentUIStyles.orderedColorNames.map(function (colorName) {
          var _a;

          return (_a = colorsMap.get(colorName)) !== null && _a !== void 0 ? _a : FluentUIStyles.fluentUIColorPalette[0];
        });
      };

      FluentUIStyles.getScatterFluentUIPalette = function (theme) {
        var colors = [];

        for (var i = 0; i < 5; i++) {
          colors.push(theme.palette.magentaDark, theme.palette.orangeLighter, theme.palette.teal);
        }

        return colors;
      };

      FluentUIStyles.getColorsMap = function (theme) {
        var _a = theme.palette,
            black = _a.black,
            blueMid = _a.blueMid,
            magentaDark = _a.magentaDark,
            magentaLight = _a.magentaLight,
            neutralSecondaryAlt = _a.neutralSecondaryAlt,
            orangeLighter = _a.orangeLighter,
            purple = _a.purple,
            purpleLight = _a.purpleLight,
            red = _a.red,
            redDark = _a.redDark,
            teal = _a.teal,
            themeLight = _a.themeLight,
            themePrimary = _a.themePrimary;
        var nameToColor = new Map([["black", black], ["blueMid", blueMid], ["magentaDark", magentaDark], ["magentaLight", magentaLight], ["neutral", neutralSecondaryAlt], ["orangeLighter", orangeLighter], ["primary", themePrimary], ["primaryLight", themeLight], ["purple", purple], ["purpleLight", purpleLight], ["red", red], ["redDark", redDark], ["teal", teal]]);
        return nameToColor;
      };

      FluentUIStyles.limitedSizeMenuDropdown = {
        callout: {
          maxHeight: "256px",
          minWidth: "200px"
        },
        optionsContainerWrapper: {
          maxHeight: "256px",
          minWidth: "200px"
        }
      };
      FluentUIStyles.defaultDropdownStyle = react.mergeStyleSets({
        container: {
          width: "100%"
        }
      }, FluentUIStyles.limitedSizeMenuDropdown);
      FluentUIStyles.smallDropdownStyle = react.mergeStyleSets({
        callout: {
          maxHeight: "256px",
          minWidth: "200px"
        },
        container: {
          display: "inline-flex",
          flexWrap: "wrap",
          width: "150px"
        },
        label: {
          paddingRight: "10px"
        },
        optionsContainerWrapper: {
          maxHeight: "256px",
          minWidth: "200px"
        },
        root: {
          flex: 1,
          minWidth: "150px"
        }
      }, FluentUIStyles.limitedSizeMenuDropdown);
      FluentUIStyles.calloutWrapper = {
        width: "300px"
      };
      FluentUIStyles.calloutHeader = {
        padding: "18px 24px 12px"
      };
      FluentUIStyles.calloutTitle = [react.getTheme().fonts.xLarge, {
        fontWeight: react.FontWeights.semilight,
        margin: 0
      }];
      FluentUIStyles.calloutInner = {
        height: "100%",
        padding: "0 24px 20px"
      };
      FluentUIStyles.chartEditorButton = {
        backgroundColor: react.getTheme().semanticColors.accentButtonBackground,
        borderColor: react.getTheme().semanticColors.buttonBorder,
        borderStyle: "solid",
        borderWidth: "1px",
        color: react.getTheme().semanticColors.accentButtonText
      };
      FluentUIStyles.calloutContainer = {
        zIndex: 10
      };
      FluentUIStyles.calloutProps = {
        doNotLayer: true,
        styles: {
          calloutMain: {
            maxHeight: "400px"
          },
          container: react.mergeStyles([FluentUIStyles.calloutContainer, {
            position: "fixed"
          }])
        }
      };
      FluentUIStyles.placeholderItalic = {
        color: react.getTheme().semanticColors.disabledBodyText,
        fontStyle: "italic",
        padding: "0 0 5px 5px"
      };
      FluentUIStyles.orderedColorNames = ["primary", "orangeLighter", "magentaDark", "teal", "purpleLight", "neutral", "redDark", "purple", "magentaLight", "black", "red", "blueMid", "primaryLight"];
      FluentUIStyles.fluentUIColorPalette = FluentUIStyles.getFlunetUIPalette(react.getTheme());
      FluentUIStyles.scatterFluentUIColorPalette = FluentUIStyles.getScatterFluentUIPalette(react.getTheme());
      FluentUIStyles.plotlyColorHexPalette = FluentUIStyles.getFlunetUIPalette(react.getTheme());
      FluentUIStyles.plotlyColorPalette = FluentUIStyles.plotlyColorHexPalette.map(function (hex) {
        return FluentUIStyles.hex2rgb(hex);
      });
      FluentUIStyles.fabricColorInactiveSeries = "#949494";
      FluentUIStyles.chartAxisColor = "#979797";
      FluentUIStyles.fontFamilies = "Segoe UI, Segoe UI Web (West European),  Roboto, Helvetica Neue, sans-serif";
      FluentUIStyles.verticalTabsStyle = {
        link: {
          backgroundColor: "#f4f4f4",
          flex: 1,
          selectors: {
            "&:focus, &:focus:not(:last-child)": {
              border: "3px solid rgb(102, 102, 102)"
            },
            "&:not(:last-child)": {
              borderBottom: "1px solid grey"
            },
            ".ms-Button-flexContainer": {
              justifyContent: "center"
            }
          }
        },
        linkIsSelected: {
          flex: 1,
          selectors: {
            "&:focus, &:focus:not(:last-child)": {
              border: "3px solid rgb(235, 235, 235)"
            },
            "&:not(:last-child)": {
              borderBottom: "1px solid grey"
            },
            ".ms-Button-flexContainer": {
              justifyContent: "center"
            }
          }
        },
        root: {
          display: "flex",
          flexDirection: "column",
          height: "100%",
          width: "100px"
        },
        text: {
          lineHeight: "28px",
          whiteSpace: "normal"
        }
      };
      FluentUIStyles.textFieldStyle = {
        root: {
          minWidth: "150px",
          padding: "0 5px"
        },
        subComponentStyles: {
          label: {
            padding: "5px 10px 0 10px"
          }
        },
        wrapper: {
          display: "inline-flex"
        }
      };
      return FluentUIStyles;
    }();

    // Copyright (c) Microsoft Corporation.
    var comparisonOptions = [{
      key: exports.FilterMethods.Equal,
      text: localization.localization.Interpret.Filters.equalComparison
    }, {
      key: exports.FilterMethods.GreaterThan,
      text: localization.localization.Interpret.Filters.greaterThanComparison
    }, {
      key: exports.FilterMethods.GreaterThanEqualTo,
      text: localization.localization.Interpret.Filters.greaterThanEqualToComparison
    }, {
      key: exports.FilterMethods.LessThan,
      text: localization.localization.Interpret.Filters.lessThanComparison
    }, {
      key: exports.FilterMethods.LessThanEqualTo,
      text: localization.localization.Interpret.Filters.lessThanEqualToComparison
    }, {
      key: exports.FilterMethods.InTheRangeOf,
      text: localization.localization.Interpret.Filters.inTheRangeOf
    }];

    // Copyright (c) Microsoft Corporation.

    var NoneCategoricalFilterOptions =
    /** @class */
    function (_super) {
      __extends(NoneCategoricalFilterOptions, _super);

      function NoneCategoricalFilterOptions() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.comparisonOptions = comparisonOptions;
        return _this;
      }

      NoneCategoricalFilterOptions.prototype.render = function () {
        var _a = this.props,
            columnRange = _a.columnRange,
            openedFilter = _a.openedFilter,
            setComparison = _a.setComparison,
            setNumericValue = _a.setNumericValue;
        var min = (columnRange === null || columnRange === void 0 ? void 0 : columnRange.min) || 0;
        var max = (columnRange === null || columnRange === void 0 ? void 0 : columnRange.max) || 0;
        var numericDelta = (columnRange === null || columnRange === void 0 ? void 0 : columnRange.rangeType) === mlchartlib.RangeTypes.Integer || !columnRange ? 1 : (max - min) / 10;
        var styles = cohortEditorStyles();
        var minVal = columnRange ? mlchartlib.roundDecimal(min) : undefined;
        var maxVal = columnRange ? mlchartlib.roundDecimal(max) : undefined;
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Text, {
          block: true,
          nowrap: true,
          variant: "small"
        }, localization.localization.formatString(localization.localization.Interpret.Filters.min, minVal) + " " + localization.localization.formatString(localization.localization.Interpret.Filters.max, maxVal)), /*#__PURE__*/React__default.createElement(react.ComboBox, {
          label: localization.localization.Interpret.Filters.numericalComparison,
          selectedKey: openedFilter.method,
          onChange: setComparison,
          options: this.comparisonOptions,
          useComboBoxAsMenuWidth: true,
          calloutProps: FluentUIStyles.calloutProps
        }), columnRange && (openedFilter.method === exports.FilterMethods.InTheRangeOf ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.SpinButton, {
          ariaLabel: localization.localization.Common.spinButton,
          labelPosition: react.Position.top,
          value: openedFilter.arg[0].toString(),
          label: localization.localization.Interpret.Filters.minimum,
          min: columnRange.min,
          max: columnRange.max,
          onIncrement: function onIncrement(value) {
            setNumericValue(numericDelta, 0, value, columnRange);
          },
          onDecrement: function onDecrement(value) {
            setNumericValue(-numericDelta, 0, value, columnRange);
          },
          onValidate: function onValidate(value) {
            setNumericValue(0, 0, value, columnRange);
          },
          incrementButtonAriaLabel: localization.localization.Common.increaseValue,
          decrementButtonAriaLabel: localization.localization.Common.decreaseValue
        }), /*#__PURE__*/React__default.createElement(react.SpinButton, {
          ariaLabel: localization.localization.Common.spinButton,
          labelPosition: react.Position.top,
          value: openedFilter.arg[1].toString(),
          label: localization.localization.Interpret.Filters.maximum,
          min: columnRange.min,
          max: columnRange.max,
          onIncrement: function onIncrement(value) {
            setNumericValue(numericDelta, 1, value, columnRange);
          },
          onDecrement: function onDecrement(value) {
            setNumericValue(-numericDelta, 1, value, columnRange);
          },
          onValidate: function onValidate(value) {
            setNumericValue(0, 1, value, columnRange);
          },
          incrementButtonAriaLabel: localization.localization.Common.increaseValue,
          decrementButtonAriaLabel: localization.localization.Common.decreaseValue
        }), this.props.showInvalidMinMaxValueError && columnRange && /*#__PURE__*/React__default.createElement("p", {
          className: styles.invalidValueError
        }, localization.localization.formatString(localization.localization.Interpret.CohortEditor.minimumGreaterThanMaximum, columnRange.min, columnRange.max))) : /*#__PURE__*/React__default.createElement(react.SpinButton, {
          ariaLabel: localization.localization.Common.spinButton,
          labelPosition: react.Position.top,
          label: localization.localization.Interpret.Filters.numericValue,
          min: columnRange.min,
          max: columnRange.max,
          value: openedFilter.arg[0].toString(),
          onIncrement: function onIncrement(value) {
            setNumericValue(numericDelta, 0, value, columnRange);
          },
          onDecrement: function onDecrement(value) {
            setNumericValue(-numericDelta, 0, value, columnRange);
          },
          onValidate: function onValidate(value) {
            setNumericValue(0, 0, value, columnRange);
          },
          incrementButtonAriaLabel: localization.localization.Common.increaseValue,
          decrementButtonAriaLabel: localization.localization.Common.decreaseValue
        })), this.props.showInvalidValueError && columnRange && /*#__PURE__*/React__default.createElement("p", {
          className: styles.invalidValueError
        }, localization.localization.formatString(localization.localization.Interpret.CohortEditor.invalidValueError, columnRange.min, columnRange.max)));
      };

      return NoneCategoricalFilterOptions;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortEditorFilter =
    /** @class */
    function (_super) {
      __extends(CohortEditorFilter, _super);

      function CohortEditorFilter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.context = defaultModelAssessmentContext;
        _this.dataArray = _this.props.featureNames.map(function (featureName, index) {
          return {
            index: index,
            key: featureName,
            text: featureName.length <= maxLength ? featureName : featureName.slice(0, maxLength) + "..."
          };
        });

        _this.onAddFilterClick = function () {
          _this.props.saveState(_this.props.filters.length);

          _this.props.setFilterMessage(localization.localization.Interpret.CohortEditor.filterAdded);
        };

        return _this;
      }

      CohortEditorFilter.prototype.render = function () {
        var _this = this;

        var isDataColumn = this.props.featureNames.includes(this.props.openedFilter.column);
        var categoricalOptions; // filterIndex is set when the filter is editing openedFilter and reset to filters.length otherwise

        var isEditingFilter = this.props.filterIndex !== this.props.filters.length;
        var columnRange = this.props.columnRanges ? this.props.columnRanges[this.props.openedFilter.column] : undefined;
        var isCategorical = (columnRange === null || columnRange === void 0 ? void 0 : columnRange.treatAsCategorical) || (columnRange === null || columnRange === void 0 ? void 0 : columnRange.rangeType) === mlchartlib.RangeTypes.Categorical;

        if (isCategorical) {
          categoricalOptions = columnRange === null || columnRange === void 0 ? void 0 : columnRange.sortedUniqueValues.map(function (label, index) {
            return {
              key: index,
              text: String(label)
            };
          });
        }

        return /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "l1"
          }
        }, isDataColumn && /*#__PURE__*/React__default.createElement(react.ComboBox, {
          styles: FluentUIStyles.limitedSizeMenuDropdown,
          options: this.dataArray,
          onChange: this.props.setSelectedProperty,
          label: localization.localization.Interpret.CohortEditor.selectFilter,
          selectedKey: this.props.openedFilter.column,
          calloutProps: FluentUIStyles.calloutProps
        }), columnRange && columnRange.rangeType === mlchartlib.RangeTypes.Integer && !ifEnableLargeData(this.context.dataset) && /*#__PURE__*/React__default.createElement(react.Checkbox, {
          key: this.props.openedFilter.column,
          label: localization.localization.Interpret.CohortEditor.TreatAsCategorical,
          checked: isCategorical,
          onChange: this.props.setAsCategorical,
          ariaLabel: isCategorical ? localization.localization.formatString(localization.localization.Interpret.CohortEditor.TreatAsCategoricalAriaLabelChecked, categoricalOptions === null || categoricalOptions === void 0 ? void 0 : categoricalOptions.length) : localization.localization.formatString(localization.localization.Interpret.CohortEditor.TreatAsCategoricalAriaLabelUnchecked, columnRange.min, columnRange.max)
        }), isCategorical ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small"
        }, "" + localization.localization.formatString(localization.localization.Interpret.Filters.uniqueValues, categoricalOptions === null || categoricalOptions === void 0 ? void 0 : categoricalOptions.length)), /*#__PURE__*/React__default.createElement(react.ComboBox, {
          key: this.props.openedFilter.column,
          multiSelect: true,
          label: localization.localization.Interpret.Filters.categoricalIncludeValues,
          selectedKey: this.props.openedFilter.arg,
          onChange: this.props.setCategoricalValues,
          options: categoricalOptions || [],
          useComboBoxAsMenuWidth: true,
          calloutProps: FluentUIStyles.calloutProps,
          styles: FluentUIStyles.limitedSizeMenuDropdown
        })) : /*#__PURE__*/React__default.createElement(NoneCategoricalFilterOptions, {
          columnRange: columnRange,
          openedFilter: this.props.openedFilter,
          showInvalidMinMaxValueError: this.props.showInvalidMinMaxValueError,
          showInvalidValueError: this.props.showInvalidMinMaxValueError,
          setComparison: this.props.setComparison,
          setNumericValue: this.props.setNumericValue
        }), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: {
            childrenGap: "l1"
          }
        }, isEditingFilter ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          text: localization.localization.Interpret.CohortEditor.save,
          onClick: function onClick() {
            return _this.props.saveState(_this.props.filterIndex);
          },
          ariaLabel: localization.localization.Interpret.CohortEditor.saveAriaLabel
        })), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          text: localization.localization.Interpret.CohortEditor.cancel,
          onClick: function onClick() {
            return _this.props.cancelFilter();
          },
          ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
        }))) : /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          text: localization.localization.Interpret.CohortEditor.addFilter,
          onClick: this.onAddFilterClick,
          ariaLabel: localization.localization.Interpret.CohortEditor.addFilterAriaLabel
        }))));
      };

      return CohortEditorFilter;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortEditorFilterSection =
    /** @class */
    function (_super) {
      __extends(CohortEditorFilterSection, _super);

      function CohortEditorFilterSection(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;

        _this.setAsCategorical = function (_ev, checked) {
          var _a;

          if (checked === undefined || !_this.props.openedFilter) {
            return;
          }

          var openedFilter = _this.props.openedFilter;
          var legacyColumn = translateToLegacyFilterColumn(openedFilter.column, _this.context.dataset.feature_names);

          _this.props.jointDataset.setTreatAsCategorical(legacyColumn, checked);

          if (_this.context.setAsCategorical) {
            _this.context.setAsCategorical(openedFilter.column, checked);
          }

          if (checked) {
            _this.props.onOpenedFilterUpdated({
              arg: [],
              column: openedFilter.column,
              method: exports.FilterMethods.Includes
            });
          } else {
            var args = (_a = _this.context.columnRanges && _this.context.columnRanges[openedFilter.column]) === null || _a === void 0 ? void 0 : _a.max;

            _this.props.onOpenedFilterUpdated({
              arg: [args || Number.MAX_SAFE_INTEGER],
              column: openedFilter.column,
              method: exports.FilterMethods.LessThan
            });
          }
        };

        _this.setSelectedProperty = function (_, item) {
          if (typeof (item === null || item === void 0 ? void 0 : item.key) === "string") {
            var property = item.key;

            _this.props.setDefaultStateForKey(property);
          }
        };

        _this.saveState = function (index) {
          if (!_this.props.openedFilter || index === undefined) {
            return;
          }

          _this.updateFilter(_this.props.openedFilter, index);

          _this.props.onSelectedFilterCategoryUpdated(undefined);
        };

        _this.setCategoricalValues = function (_ev, item) {
          if (!_this.props.openedFilter || !(item === null || item === void 0 ? void 0 : item.key) && (item === null || item === void 0 ? void 0 : item.key) !== 0) {
            return;
          }

          var selectedVals = __spreadArray([], __read(_this.props.openedFilter.arg));

          var index = selectedVals.indexOf(item.key);

          if (item.selected && index === -1) {
            selectedVals.push(item.key);
          } else {
            selectedVals.splice(index, 1);
          }

          _this.props.onOpenedFilterUpdated({
            arg: selectedVals,
            column: _this.props.openedFilter.column,
            method: _this.props.openedFilter.method
          });
        };

        _this.setComparison = function (_ev, item) {
          if (!_this.props.openedFilter || !item) {
            return;
          }

          var openedFilter = _this.props.openedFilter;

          if (item.key === exports.FilterMethods.InTheRangeOf) {
            //default values for in the range operation
            var range = _this.context.columnRanges && _this.context.columnRanges[_this.props.openedFilter.column];

            if ((range === null || range === void 0 ? void 0 : range.min) === undefined) {
              openedFilter.arg[0] = Number.MIN_SAFE_INTEGER;
            } else {
              openedFilter.arg[0] = range.min;
            }

            if ((range === null || range === void 0 ? void 0 : range.max) === undefined) {
              openedFilter.arg[1] = Number.MAX_SAFE_INTEGER;
            } else {
              openedFilter.arg[1] = range.max;
            }
          } else {
            //handle switch from in the range to less than, equals etc
            openedFilter.arg = openedFilter.arg.slice(0, 1);
          }

          _this.props.onOpenedFilterUpdated({
            arg: openedFilter.arg,
            column: openedFilter.column,
            method: item.key
          });
        };

        _this.setNumericValue = function (delta, index, stringVal, range) {
          if (!_this.props.openedFilter) {
            return;
          }

          var openArg = _this.props.openedFilter.arg;
          var max = (range === null || range === void 0 ? void 0 : range.max) || Number.MAX_SAFE_INTEGER;
          var min = (range === null || range === void 0 ? void 0 : range.min) || Number.MIN_SAFE_INTEGER;

          if (delta === 0) {
            var numberVal = +stringVal;

            if (!Number.isInteger(numberVal) && (range === null || range === void 0 ? void 0 : range.rangeType) === mlchartlib.RangeTypes.Integer || numberVal > max || numberVal < min) {
              _this.setState({
                showInvalidMinMaxValueError: false,
                showInvalidValueError: true
              });

              return _this.props.openedFilter.arg[index].toString();
            }

            _this.setState({
              showInvalidValueError: false
            });

            openArg[index] = numberVal;
          } else {
            var prevVal = openArg[index];
            var newVal = prevVal + delta;

            if (newVal > max || newVal < min) {
              _this.setState({
                showInvalidMinMaxValueError: false,
                showInvalidValueError: true
              });

              return prevVal.toString();
            }

            _this.setState({
              showInvalidValueError: false
            });

            openArg[index] = newVal;
          } // in the range validation


          if (openArg[1] <= openArg[0]) {
            openArg[1] = max;

            _this.setState({
              showInvalidMinMaxValueError: true,
              showInvalidValueError: false
            });
          } else {
            _this.setState({
              showInvalidMinMaxValueError: false
            });
          }

          _this.props.onOpenedFilterUpdated({
            arg: openArg,
            column: _this.props.openedFilter.column,
            method: _this.props.openedFilter.method
          });
        };

        _this.cancelFilter = function () {
          _this.props.onSelectedFilterCategoryUpdated(undefined);

          _this.props.onOpenedFilterUpdated(undefined);
        };

        _this.state = {
          showInvalidMinMaxValueError: false,
          showInvalidValueError: false
        };
        return _this;
      }

      CohortEditorFilterSection.prototype.render = function () {
        var _a;

        return /*#__PURE__*/React__default.createElement(react.Stack.Item, null, !this.props.openedFilter ? /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "medium"
        }, localization.localization.Interpret.CohortEditor.defaultFilterState) : /*#__PURE__*/React__default.createElement(CohortEditorFilter, {
          featureNames: this.props.isFromExplanation ? ((_a = this.props.metadata) === null || _a === void 0 ? void 0 : _a.featureNames) || [] : this.context.dataset.feature_names,
          columnRanges: this.context.columnRanges,
          cancelFilter: this.cancelFilter,
          filters: this.props.filters,
          openedFilter: this.props.openedFilter,
          saveState: this.saveState,
          setAsCategorical: this.setAsCategorical,
          setCategoricalValues: this.setCategoricalValues,
          setComparison: this.setComparison,
          setNumericValue: this.setNumericValue,
          setSelectedProperty: this.setSelectedProperty,
          showInvalidValueError: this.state.showInvalidValueError,
          showInvalidMinMaxValueError: this.state.showInvalidMinMaxValueError,
          filterIndex: this.props.filterIndex,
          setFilterMessage: this.props.setFilterMessage
        }));
      };

      CohortEditorFilterSection.prototype.updateFilter = function (filter, index) {
        var filters = __spreadArray([], __read(this.props.filters));

        filters[index] = filter;
        this.props.onOpenedFilterUpdated(undefined);
        this.props.onFiltersUpdated(filters);
      };

      CohortEditorFilterSection.contextType = modelAssessmentContext;
      return CohortEditorFilterSection;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var CohortEditorPanelContent =
    /** @class */
    function (_super) {
      __extends(CohortEditorPanelContent, _super);

      function CohortEditorPanelContent(props) {
        var _a;

        var _this = _super.call(this, props) || this;

        _this.leftItems = getColumnItems(_this.props.columnRanges, _this.props.isFromExplanation ? _this.props.features : _this.props.dataset.features);
        _this._isInitialized = false;

        _this.isDuplicate = function () {
          var _a;

          return !!(_this.props.isNewCohort && _this.props.cohortName && ((_a = _this.props.existingCohortNames) === null || _a === void 0 ? void 0 : _a.includes(_this.props.cohortName)));
        };

        _this.clearAllFilters = function () {
          _this.props.onCompositeFiltersUpdated([]);

          _this.props.onFiltersUpdated([]);

          _this.setState({
            filterIndex: 0
          });

          _this.setFilterMessage(localization.localization.Interpret.CohortEditor.noFiltersApplied);
        };

        _this.setFilterMessage = function (filtersMessage) {
          _this.setState({
            filtersMessage: filtersMessage
          });
        };

        _this.getErrorMessage = function () {
          var _a;

          if (!((_a = _this.props.cohortName) === null || _a === void 0 ? void 0 : _a.length)) {
            return localization.localization.Interpret.CohortEditor.cohortNameError;
          }

          if (_this.isDuplicate()) {
            return localization.localization.Interpret.CohortEditor.cohortNameDupError;
          }

          return undefined;
        };

        _this.onFilterCategoryChange = function (_, option) {
          if (typeof (option === null || option === void 0 ? void 0 : option.key) === "string") {
            _this.setState({
              filterIndex: _this.props.filters.length,
              selectedFilterCategory: option.key
            });

            _this.setSelection(option.key);
          }
        };

        _this.onSelectedFilterCategoryUpdated = function (selectedFilterCategory) {
          _this.setState({
            selectedFilterCategory: selectedFilterCategory
          });
        };

        _this.setSelection = function (property) {
          var _a;

          if (!_this._isInitialized) {
            return;
          }

          if (property === exports.DatasetCohortColumns.Dataset) {
            property = _this.props.isFromExplanation ? ((_a = _this.props.metadata) === null || _a === void 0 ? void 0 : _a.featureNames[0]) || "" : _this.props.dataset.feature_names[0];
          }

          _this.setDefaultStateForKey(property);
        };

        _this.setDefaultStateForKey = function (key) {
          var filter = _this.getFilterValue(key);

          _this.setState({
            openedFilter: filter
          });
        };

        _this.removeFilter = function (index) {
          var filters = __spreadArray([], __read(_this.props.filters));

          filters.splice(index, 1);

          _this.props.onFiltersUpdated(filters);

          _this.setState({
            filterIndex: filters.length
          });
        };

        _this.removeCompositeFilter = function (index) {
          var compositeFilters = __spreadArray([], __read(_this.props.compositeFilters));

          compositeFilters.splice(index, 1);

          _this.props.onCompositeFiltersUpdated(compositeFilters);
        };

        _this.editFilter = function (index) {
          var editFilter = _this.props.filters[index];

          _this.setState({
            filterIndex: index,
            openedFilter: _.cloneDeep(editFilter)
          });
        };

        _this.onOpenedFilterUpdated = function (openedFilter) {
          _this.setState({
            openedFilter: openedFilter
          });
        };

        _this.setCohortName = function (_event, newValue) {
          _this.props.onCohortNameUpdated(newValue);
        };

        _this.state = {
          filterIndex: ((_a = _this.props.filters) === null || _a === void 0 ? void 0 : _a.length) || 0,
          filtersMessage: "",
          openedFilter: _this.getFilterValue(_this.leftItems[0] && _this.leftItems[0].key),
          selectedFilterCategory: _this.leftItems[0] && _this.leftItems[0].key
        };
        _this._isInitialized = true;
        return _this;
      }

      CohortEditorPanelContent.prototype.render = function () {
        var styles = cohortEditorStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "l1"
          }
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.TextField, {
          value: this.props.cohortName,
          label: localization.localization.Interpret.CohortEditor.cohortNameLabel,
          placeholder: localization.localization.Interpret.CohortEditor.cohortNamePlaceholder,
          onGetErrorMessage: this.getErrorMessage,
          disabled: this.props.disableEditName,
          onChange: this.setCohortName
        })), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.ChoiceGroup, {
          options: this.leftItems,
          label: localization.localization.Interpret.CohortEditor.selectFilter,
          onChange: this.onFilterCategoryChange,
          selectedKey: this.state.selectedFilterCategory
        })), /*#__PURE__*/React__default.createElement(CohortEditorFilterSection, __assign({}, this.props, {
          filterIndex: this.state.filterIndex,
          openedFilter: this.state.openedFilter,
          onOpenedFilterUpdated: this.onOpenedFilterUpdated,
          onSelectedFilterCategoryUpdated: this.onSelectedFilterCategoryUpdated,
          setFilterMessage: this.setFilterMessage,
          setDefaultStateForKey: this.setDefaultStateForKey
        })), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(CohortEditorFilterList, {
          compositeFilters: this.props.compositeFilters,
          editFilter: this.editFilter,
          removeCompositeFilter: this.removeCompositeFilter,
          removeFilter: this.removeFilter,
          filters: this.props.filters,
          jointDataset: this.props.jointDataset
        })), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Link, {
          className: styles.clearFilter,
          onClick: this.clearAllFilters
        }, localization.localization.Interpret.CohortEditor.clearAllFilters), /*#__PURE__*/React__default.createElement(Announce, {
          message: this.state.filtersMessage
        })));
      };

      CohortEditorPanelContent.prototype.getFilterValue = function (key) {
        var filter = {
          column: key
        };
        var range = this.props.columnRanges ? this.props.columnRanges[key] : undefined;
        var arg = this.getPreviousFilterArgValue(key);

        if ((range === null || range === void 0 ? void 0 : range.rangeType) === mlchartlib.RangeTypes.Categorical || (range === null || range === void 0 ? void 0 : range.treatAsCategorical)) {
          filter.method = exports.FilterMethods.Includes;
          filter.arg = arg !== null && arg !== void 0 ? arg : __spreadArray([], __read(new Array(range.sortedUniqueValues.length).keys()));
        } else {
          filter.method = exports.FilterMethods.LessThan;
          filter.arg = arg !== null && arg !== void 0 ? arg : [(range === null || range === void 0 ? void 0 : range.max) || Number.MAX_SAFE_INTEGER];
        }

        return filter;
      };

      CohortEditorPanelContent.prototype.getPreviousFilterArgValue = function (key) {
        var _a;

        var arg; // only execute this if in edit mode

        this.props.disableEditName && ((_a = this.props.filters) === null || _a === void 0 ? void 0 : _a.forEach(function (filter) {
          if (filter.column === key) {
            arg = filter.arg;
          }
        }));
        return arg;
      };

      return CohortEditorPanelContent;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var EmptyCohortDialog =
    /** @class */
    function (_super) {
      __extends(EmptyCohortDialog, _super);

      function EmptyCohortDialog() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      EmptyCohortDialog.prototype.render = function () {
        var _this = this;

        var dialogContentProps = {
          className: "emptyCohortDialog",
          subText: localization.localization.Core.EmptyCohortDialog.subText,
          title: localization.localization.Core.EmptyCohortDialog.title,
          type: react.DialogType.normal
        };
        var modalProps = {
          isBlocking: true
        };
        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          maxWidth: "480px",
          minWidth: "480px",
          hidden: false,
          dialogContentProps: dialogContentProps,
          modalProps: modalProps,
          onDismiss: function onDismiss() {
            return _this.props.onClose();
          }
        });
      };

      return EmptyCohortDialog;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortEditor =
    /** @class */
    function (_super) {
      __extends(CohortEditor, _super);

      function CohortEditor(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;

        _this.renderFooter = function () {
          var styles = cohortEditorStyles();
          return /*#__PURE__*/React__default.createElement(react.Stack, {
            horizontal: true,
            tokens: {
              childrenGap: "s1",
              padding: "s1"
            }
          }, !_this.props.isNewCohort && !_this.props.disableEditName && /*#__PURE__*/React__default.createElement(react.DefaultButton, {
            disabled: _this.props.deleteIsDisabled,
            onClick: _this.deleteCohort,
            className: styles.deleteCohort,
            ariaLabel: localization.localization.Interpret.CohortEditor.deleteAriaLabel
          }, localization.localization.Interpret.CohortEditor["delete"]), /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
            onClick: function onClick() {
              return _this.saveCohort();
            },
            disabled: _this.isSaveDisabled(),
            ariaLabel: localization.localization.Interpret.CohortEditor.saveAriaLabel
          }, localization.localization.Interpret.CohortEditor.save), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
            onClick: function onClick() {
              return _this.saveCohort(true);
            },
            disabled: _this.isSaveDisabled(),
            ariaLabel: localization.localization.Interpret.CohortEditor.saveAndSwitch
          }, localization.localization.Interpret.CohortEditor.saveAndSwitch), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
            onClick: _this.onCancelClick,
            ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
          }, localization.localization.Interpret.CohortEditor.cancel));
        };

        _this.renderCancelDialog = function () {
          if (!_this.state.showConfirmation) {
            return undefined;
          }

          return /*#__PURE__*/React__default.createElement(ConfirmationDialog, {
            title: localization.localization.Interpret.CohortEditor.cancelTitle,
            subText: _this.props.isNewCohort ? localization.localization.Interpret.CohortEditor.cancelNewCohort : localization.localization.Interpret.CohortEditor.cancelExistingCohort,
            confirmButtonText: localization.localization.Interpret.CohortEditor.cancelYes,
            cancelButtonText: localization.localization.Interpret.CohortEditor.cancelNo,
            onConfirm: _this.onCancelConfirm,
            onClose: _this.onCancelClose
          });
        };

        _this.renderEmptyCohortDialog = function () {
          if (!_this.state.showEmptyCohortError) {
            return undefined;
          }

          return /*#__PURE__*/React__default.createElement(EmptyCohortDialog, {
            onClose: _this.onEmptyCohortClose
          });
        };

        _this.isSaveDisabled = function () {
          var _a, _b;

          return _this.isDuplicate() || !((_a = _this.state.compositeFilters) === null || _a === void 0 ? void 0 : _a.length) && !((_b = _this.state.filters) === null || _b === void 0 ? void 0 : _b.length);
        };

        _this.isDuplicate = function () {
          var _a;

          return !!(_this.props.isNewCohort && _this.state.cohortName && ((_a = _this.props.existingCohortNames) === null || _a === void 0 ? void 0 : _a.includes(_this.state.cohortName)));
        };

        _this.deleteCohort = function () {
          if (_this.props.onDelete) {
            _this.props.onDelete();
          }
        };

        _this.onCancelClick = function () {
          _this.setState({
            showConfirmation: true
          });
        };

        _this.onCancelConfirm = function () {
          return __awaiter(_this, void 0, void 0, function () {
            var callback;
            return __generator(this, function (_a) {
              callback = this.props.isNewCohort ? this.props.closeCohortEditorPanel : this.props.closeCohortEditor;
              callback();
              this.setState({
                showConfirmation: false
              });
              return [2
              /*return*/
              ];
            });
          });
        };

        _this.onCancelClose = function () {
          _this.setState({
            showConfirmation: false
          });
        };

        _this.onEmptyCohortClose = function () {
          _this.setState({
            showEmptyCohortError: false
          });
        };

        _this.saveCohort = function (switchNew) {
          var _a, _b;

          if ((_a = _this.state.cohortName) === null || _a === void 0 ? void 0 : _a.length) {
            var featureNames = _this.props.isFromExplanation ? (_b = _this.props.metadata) === null || _b === void 0 ? void 0 : _b.featureNames : _this.context.dataset.feature_names;
            var legacyFilter = translateToLegacyFilters(_this.state.filters, featureNames);
            var newDatasetCohort = _this.props.isFromExplanation ? undefined : new DatasetCohort(_this.state.cohortName, _this.context.dataset, _this.state.filters, _this.state.compositeFilters, _this.context.modelType, _this.context.columnRanges, exports.CohortSource.ManuallyCreated);
            var newCohort = new Cohort(_this.state.cohortName, _this.props.jointDataset, legacyFilter, _this.state.compositeFilters);

            if (newCohort.filteredData.length === 0) {
              _this.setState({
                showEmptyCohortError: true
              });
            } else {
              _this.props.onSave(newCohort, newDatasetCohort, switchNew);
            }
          }
        };

        _this.onCohortNameUpdated = function (cohortName) {
          _this.setState({
            cohortName: cohortName
          });
        };

        _this.onCompositeFiltersUpdated = function (compositeFilters) {
          _this.setState({
            compositeFilters: compositeFilters
          });
        };

        _this.onFilterUpdated = function (filters) {
          _this.setState({
            filters: filters
          });
        };

        _this.state = {
          cohortName: _this.props.cohortName,
          compositeFilters: _this.props.compositeFilters || [],
          filters: getFilters(props, _this.props.dataset, _this.props.metadata),
          showConfirmation: false,
          showEmptyCohortError: false
        };
        return _this;
      }

      CohortEditor.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Panel, {
          onOuterClick: function onOuterClick() {
            return 0;
          },
          id: "cohortEditPanel",
          isOpen: true,
          onDismiss: this.props.closeCohortEditorPanel,
          onRenderFooter: this.renderFooter,
          isFooterAtBottom: true,
          isLightDismiss: true,
          closeButtonAriaLabel: localization.localization.Common.close
        }, /*#__PURE__*/React__default.createElement(CohortEditorPanelContent, __assign({}, this.props, {
          dataset: this.context.dataset,
          columnRanges: this.context.columnRanges,
          cohortName: this.state.cohortName,
          compositeFilters: this.state.compositeFilters,
          filters: this.state.filters,
          onCohortNameUpdated: this.onCohortNameUpdated,
          onCompositeFiltersUpdated: this.onCompositeFiltersUpdated,
          onFiltersUpdated: this.onFilterUpdated
        }))), this.renderCancelDialog(), this.renderEmptyCohortDialog());
      };

      CohortEditor.contextType = modelAssessmentContext;
      return CohortEditor;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function limitStringLength(str, length) {
      if (((str === null || str === void 0 ? void 0 : str.length) || 0) > length) {
        return (str === null || str === void 0 ? void 0 : str.slice(0, Math.max(0, length))) + "...";
      }

      return str;
    }

    // Copyright (c) Microsoft Corporation.

    var CohortList$1 =
    /** @class */
    function (_super) {
      __extends(CohortList, _super);

      function CohortList() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortList.prototype.render = function () {
        var _a, _b;

        var modelType;

        if (IsBinary(this.props.metadata.modelType)) {
          modelType = localization.localization.Interpret.CohortBanner.binaryClassifier;
        } else if (IsMulticlass(this.props.metadata.modelType)) {
          modelType = localization.localization.Interpret.CohortBanner.multiclassClassifier;
        } else {
          modelType = localization.localization.Interpret.CohortBanner.regressor;
        }

        return /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "l1",
            padding: "l1"
          }
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "s1"
          }
        }, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          disabled: !((_a = this.props.jointDataset.dataDict) === null || _a === void 0 ? void 0 : _a.length),
          onClick: this.props.addCohort,
          text: localization.localization.Interpret.CohortBanner.addCohort,
          iconProps: {
            iconName: "Add"
          },
          styles: {
            label: {
              whiteSpace: "nowrap"
            }
          },
          ariaLabel: localization.localization.Interpret.CohortBanner.addCohort
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          disabled: !((_b = this.props.jointDataset.dataDict) === null || _b === void 0 ? void 0 : _b.length),
          onClick: this.props.showEditList,
          text: localization.localization.Interpret.CohortBanner.editCohort,
          iconProps: {
            iconName: "Edit"
          },
          styles: {
            label: {
              whiteSpace: "nowrap"
            }
          },
          ariaLabel: localization.localization.Interpret.CohortBanner.editCohort
        }))), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small"
        }, localization.localization.Interpret.CohortBanner.dataStatistics.toUpperCase())), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, null, modelType)), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "xSmall"
        }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.datapoints, this.props.jointDataset.datasetRowCount))), /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "xSmall"
        }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.features, this.props.jointDataset.datasetFeatureCount)))), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small"
        }, localization.localization.Interpret.CohortBanner.datasetCohorts.toUpperCase())), this.props.cohorts.map(function (cohort, idx) {
          return /*#__PURE__*/React__default.createElement(react.Stack.Item, {
            tokens: {
              padding: "l1"
            },
            key: idx
          }, /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "mediumPlus",
            title: cohort.name
          }, limitStringLength(cohort.name, 15)), /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "xSmall"
          }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.datapoints, cohort.filteredData.length)), /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "xSmall"
          }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.filters, cohort.filters.length))));
        })));
      };

      return CohortList;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var CohortName =
    /** @class */
    function (_super) {
      __extends(CohortName, _super);

      function CohortName() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.onClickEditCohort = function () {
          _this.props.editCohort(_this.props.index);
        };

        _this.onClickCloneAndEditCohort = function () {
          _this.props.cloneAndEditCohort(_this.props.index);
        };

        return _this;
      }

      CohortName.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Text, null, this.props.cohort.name), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: {
            childrenGap: "s1"
          }
        }, this.props.index && /*#__PURE__*/React__default.createElement(react.Link, {
          onClick: this.onClickEditCohort
        }, localization.localization.Interpret.CohortBanner.editCohort), /*#__PURE__*/React__default.createElement(react.Link, {
          onClick: this.onClickCloneAndEditCohort
        }, localization.localization.Interpret.CohortBanner.duplicateCohort)));
      };

      return CohortName;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var CohortBar =
    /** @class */
    function (_super) {
      __extends(CohortBar, _super);

      function CohortBar(props) {
        var _this = _super.call(this, props) || this;

        _this.showEditList = function () {
          _this.setState({
            showEditPanel: true
          });
        };

        _this.hideEditList = function () {
          _this.setState({
            editingCohortIndex: undefined,
            showEditPanel: false
          });
        };

        _this.onCohortChange = function (newCohort) {
          if (_this.state.editingCohortIndex !== undefined) {
            var isNew = _this.state.editingCohortIndex === _this.props.cohorts.length;

            var prevCohorts = __spreadArray([], __read(_this.props.cohorts));

            prevCohorts[_this.state.editingCohortIndex] = newCohort;

            _this.props.onCohortsChange(prevCohorts);

            _this.setState({
              editingCohortIndex: undefined,
              showEditPanel: !isNew
            });
          }
        };

        _this.deleteCohort = function () {
          if (_this.state.editingCohortIndex !== undefined) {
            var prevCohorts = __spreadArray([], __read(_this.props.cohorts));

            prevCohorts.splice(_this.state.editingCohortIndex, 1);

            _this.props.onCohortsChange(prevCohorts);

            _this.setState({
              editingCohortIndex: undefined
            });
          }
        };

        _this.cloneAndEditCohort = function (index) {
          var source = _this.props.cohorts[index];

          var cohorts = __spreadArray([], __read(_this.props.cohorts));

          cohorts.push(new Cohort(source.name + localization.localization.Interpret.CohortBanner.copy, _this.props.jointDataset, __spreadArray([], __read(source.filters))));

          _this.props.onCohortsChange(cohorts);

          _this.setState({
            editingCohortIndex: cohorts.length - 1
          });
        };

        _this.closeCohortEditorPanel = function () {
          _this.setState({
            editingCohortIndex: undefined,
            showEditPanel: false
          });
        };

        _this.closeCohortEditor = function () {
          _this.setState({
            editingCohortIndex: undefined
          });
        };

        _this.addCohort = function () {
          _this.setState({
            editingCohortIndex: _this.props.cohorts.length,
            showEditPanel: true
          });
        };

        _this.editCohort = function (index) {
          _this.setState({
            editingCohortIndex: index
          });
        };

        _this.renderCohortName = function (cohort, index) {
          if (!cohort || index === undefined) {
            return /*#__PURE__*/React__default.createElement("span", null);
          }

          return /*#__PURE__*/React__default.createElement(CohortName, {
            cohort: cohort,
            index: index,
            cloneAndEditCohort: _this.cloneAndEditCohort,
            editCohort: _this.editCohort
          });
        };

        _this.renderDetails = function (cohort, index) {
          if (!cohort || index === undefined) {
            return /*#__PURE__*/React__default.createElement("span", null);
          }

          return /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "xSmall"
          }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.datapoints, cohort.filteredData.length)), /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "xSmall"
          }, localization.localization.formatString(localization.localization.Interpret.CohortBanner.filters, cohort.filters.length)));
        };

        _this.state = {
          editingCohortIndex: undefined,
          showEditPanel: false
        };
        return _this;
      }

      CohortBar.prototype.render = function () {
        var _a;

        var cohortForEdit;

        if (this.state.editingCohortIndex !== undefined) {
          if (this.state.editingCohortIndex === this.props.cohorts.length) {
            cohortForEdit = {
              cohortName: localization.localization.formatString(localization.localization.Interpret.CohortEditor.placeholderName, this.state.editingCohortIndex),
              filterList: []
            };
          } else {
            cohortForEdit = {
              cohortName: this.props.cohorts[this.state.editingCohortIndex].name,
              filterList: __spreadArray([], __read(this.props.cohorts[this.state.editingCohortIndex].filters))
            };
          }
        }

        var columns = [{
          key: "name",
          minWidth: 100,
          name: localization.localization.Interpret.CohortBanner.name,
          onRender: this.renderCohortName
        }, {
          key: "details",
          minWidth: 100,
          name: localization.localization.Interpret.CohortBanner.details,
          onRender: this.renderDetails
        }];
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(CohortList$1, {
          cohorts: this.props.cohorts,
          jointDataset: this.props.jointDataset,
          metadata: this.props.modelMetadata,
          addCohort: this.addCohort,
          showEditList: this.showEditList
        }), ((_a = this.state) === null || _a === void 0 ? void 0 : _a.showEditPanel) && (cohortForEdit ? /*#__PURE__*/React__default.createElement(CohortEditor, {
          isFromExplanation: true,
          metadata: this.props.modelMetadata,
          features: this.props.features,
          jointDataset: this.props.jointDataset,
          filterList: cohortForEdit.filterList,
          cohortName: cohortForEdit.cohortName,
          onSave: this.onCohortChange,
          closeCohortEditor: this.closeCohortEditor,
          closeCohortEditorPanel: this.closeCohortEditorPanel,
          onDelete: this.deleteCohort,
          isNewCohort: this.state.editingCohortIndex === this.props.cohorts.length,
          deleteIsDisabled: this.props.cohorts.length === 1
        }) : /*#__PURE__*/React__default.createElement(react.Panel, {
          isOpen: true,
          onDismiss: this.hideEditList,
          isLightDismiss: true
        }, /*#__PURE__*/React__default.createElement(AccessibleDetailsList, {
          items: this.props.cohorts,
          selectionMode: react.SelectionMode.none,
          columns: columns,
          ariaLabel: localization.localization.Core.ShiftCohort.cohortList
        }))));
      };

      return CohortBar;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var cohortBaseAndFiltersStyles = function cohortBaseAndFiltersStyles() {
      return react.mergeStyleSets({
        divider: {
          borderTop: "1px solid #DADADA",
          left: "50%",
          margin: "0",
          marginRight: "-50%",
          position: "absolute",
          transform: "translate(-50%, 0%)",
          width: "100%"
        },
        header: {
          fontSize: "14px",
          fontWeight: "600"
        },
        section: {
          paddingBottom: "10px !important",
          paddingLeft: "20px",
          paddingTop: "10px !important"
        },
        subsection: {},
        tableData: {
          fontSize: "16px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var alignmentStackTokens$3 = {
      childrenGap: 10,
      padding: 5
    };
    var maxWidthStackStyle$1 = {
      root: {
        width: "500px"
      }
    };

    var CohortBaseAndFilters =
    /** @class */
    function (_super) {
      __extends(CohortBaseAndFilters, _super);

      function CohortBaseAndFilters() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      CohortBaseAndFilters.prototype.render = function () {
        var classNames = cohortBaseAndFiltersStyles();
        var filters = this.props.cohort.filtersToString().join(", ");
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.section
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.subsection
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.header
        }, localization.localization.ErrorAnalysis.CohortBaseAndFilters.globalCohortAndFilters), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true
        }, /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.CohortBaseAndFilters.globalCohort)), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.CohortBaseAndFilters.errorExplorer)), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, localization.localization.ErrorAnalysis.CohortBaseAndFilters.filters))), /*#__PURE__*/React__default.createElement(react.Stack, null, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.baseCohort.cohort.name)), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, this.props.cohort.source)), /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          tokens: alignmentStackTokens$3,
          styles: maxWidthStackStyle$1
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.tableData
        }, filters))))));
      };

      return CohortBaseAndFilters;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var dialogContentProps = {
      subText: localization.localization.ErrorAnalysis.SaveCohort.subText,
      title: localization.localization.ErrorAnalysis.SaveCohort.saveTitle,
      type: react.DialogType.close
    };
    var dragOptions$1 = {
      closeMenuItemText: localization.localization.ErrorAnalysis.SaveCohort.close,
      menu: react.ContextualMenu,
      moveMenuItemText: localization.localization.ErrorAnalysis.SaveCohort.move
    };
    var modalProps$1 = {
      dragOptions: dragOptions$1,
      isBlocking: true
    };
    var allDataCopy = localization.localization.ErrorAnalysis.SaveCohort.defaultLabelCopy;
    var textFieldStyles$1 = {
      fieldGroup: {
        width: 200
      }
    };

    var SaveCohort =
    /** @class */
    function (_super) {
      __extends(SaveCohort, _super);

      function SaveCohort(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;

        _this.updateCohortName = function (_, newValue) {
          if (!newValue) {
            newValue = "";
          }

          _this.setState({
            cohortName: newValue
          });
        };

        _this.saveCohort = function (switchNew) {
          var tempCohort = _this.props.temporaryCohort;
          var savedCohort = new ErrorCohort(new Cohort(_this.state.cohortName, _this.context.jointDataset, tempCohort.cohort.filters, tempCohort.cohort.compositeFilters), _this.context.jointDataset, tempCohort.cells, tempCohort.source, false, tempCohort.cohortStats);

          _this.props.onSave(savedCohort, switchNew);
        };

        _this.state = {
          cohortName: allDataCopy
        };
        return _this;
      }

      SaveCohort.prototype.render = function () {
        var _this = this;

        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          hidden: !this.props.isOpen,
          onDismiss: this.props.onDismiss,
          dialogContentProps: dialogContentProps,
          modalProps: modalProps$1,
          minWidth: 740,
          maxWidth: 1000
        }, /*#__PURE__*/React__default.createElement(react.TextField, {
          label: localization.localization.ErrorAnalysis.SaveCohort.cohortName,
          onChange: this.updateCohortName,
          defaultValue: allDataCopy,
          styles: textFieldStyles$1
        }), /*#__PURE__*/React__default.createElement(CohortStats, {
          temporaryCohort: this.props.temporaryCohort
        }), /*#__PURE__*/React__default.createElement(CohortBaseAndFilters, {
          cohort: this.props.temporaryCohort,
          baseCohort: this.props.baseCohort
        }), /*#__PURE__*/React__default.createElement(react.DialogFooter, null, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          onClick: function onClick() {
            _this.props.onDismiss();

            _this.saveCohort();
          },
          text: localization.localization.ErrorAnalysis.SaveCohort.save,
          ariaLabel: localization.localization.Interpret.CohortEditor.saveAriaLabel
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: function onClick() {
            _this.props.onDismiss();

            _this.saveCohort(true);
          },
          ariaLabel: localization.localization.Interpret.CohortEditor.saveAndSwitch
        }, localization.localization.Interpret.CohortEditor.saveAndSwitch), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.props.onDismiss,
          text: localization.localization.ErrorAnalysis.SaveCohort.cancel,
          ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
        })));
      };

      SaveCohort.contextType = modelAssessmentContext;
      return SaveCohort;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var dialogContentProps$1 = {
      subText: localization.localization.Core.ShiftCohort.subText,
      title: localization.localization.Core.ShiftCohort.title,
      type: react.DialogType.close
    };
    var dropdownStyles = {
      dropdown: {
        width: 200
      }
    };
    var dragOptions$2 = {
      closeMenuItemText: "Close",
      menu: react.ContextualMenu,
      moveMenuItemText: "Move"
    };
    var modalProps$2 = {
      dragOptions: dragOptions$2,
      isBlocking: true
    };

    var ShiftCohort =
    /** @class */
    function (_super) {
      __extends(ShiftCohort, _super);

      function ShiftCohort(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;

        _this.onChange = function (_, item) {
          if (item) {
            _this.setState({
              selectedCohort: item.key
            });
          }
        };

        _this.onApplyClick = function () {
          _this.props.onDismiss();

          _this.shiftCohort();
        };

        _this.state = {
          options: [],
          savedCohorts: [],
          selectedCohort: 0
        };
        return _this;
      }

      ShiftCohort.prototype.componentDidMount = function () {
        var savedCohorts = this.context.errorCohorts.filter(function (errorCohort) {
          return !errorCohort.isTemporary;
        });
        var options = savedCohorts.map(function (savedCohort, index) {
          return {
            key: index,
            text: savedCohort.cohort.name
          };
        });
        var defaultCohort = 0;

        if (this.props.defaultCohort) {
          var defaultCohortName_1 = this.props.defaultCohort.cohort.name;
          var index = savedCohorts.findIndex(function (errorCohort) {
            return errorCohort.cohort.name === defaultCohortName_1;
          });

          if (index !== -1) {
            defaultCohort = index;
          }
        }

        this.setState({
          options: options,
          savedCohorts: savedCohorts,
          selectedCohort: defaultCohort
        });
      };

      ShiftCohort.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          hidden: !this.props.isOpen,
          onDismiss: this.props.onDismiss,
          dialogContentProps: dialogContentProps$1,
          modalProps: modalProps$2,
          minWidth: 740,
          maxWidth: 1000
        }, /*#__PURE__*/React__default.createElement(react.Dropdown, {
          placeholder: localization.localization.Core.ShiftCohort.selectCohort,
          label: localization.localization.Core.ShiftCohort.cohortList,
          selectedKey: this.state.selectedCohort,
          options: this.state.options,
          styles: dropdownStyles,
          onChange: this.onChange,
          ariaLabel: localization.localization.Core.ShiftCohort.cohortList
        }), /*#__PURE__*/React__default.createElement(CohortStats, {
          temporaryCohort: this.state.savedCohorts[this.state.selectedCohort]
        }), /*#__PURE__*/React__default.createElement(react.DialogFooter, null, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
          onClick: this.onApplyClick,
          text: localization.localization.Core.ShiftCohort.apply,
          ariaLabel: localization.localization.Core.ShiftCohort.applyAriaLabel
        }), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.props.onDismiss,
          text: localization.localization.Core.ShiftCohort.cancel,
          ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
        })));
      };

      ShiftCohort.prototype.shiftCohort = function () {
        this.props.onApply(this.state.savedCohorts[this.state.selectedCohort]);
      };

      ShiftCohort.contextType = modelAssessmentContext;
      return ShiftCohort;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    function areRowPredTrueLabelsEqual(row, jointDataset) {
      if (jointDataset.hasODIncorrect && jointDataset.hasODCorrect) {
        return row[JointDataset.ClassificationError] === exports.MulticlassClassificationEnum.Correct;
      }

      if (jointDataset.numLabels === 1) {
        return row[JointDataset.PredictedYLabel] === row[JointDataset.TrueYLabel];
      }

      for (var i = 0; i < jointDataset.numLabels; i++) {
        var predLabel = row[JointDataset.PredictedYLabel + i.toString()];
        var trueLabel = row[JointDataset.TrueYLabel + i.toString()];

        if (predLabel !== trueLabel) {
          return false;
        }
      }

      return true;
    }
    function constructRows(cohortData, jointDataset, viewedRows, filterFunction, indexes, colors) {
      var rows = [];

      for (var i = 0; i < viewedRows; i++) {
        var index = void 0;

        if (indexes) {
          index = indexes[i];
        } else {
          index = cohortData[i][JointDataset.IndexLabel];
        }

        var row = jointDataset.getRow(index);

        if (filterFunction && filterFunction(row)) {
          continue;
        }

        var data = JointDataset.datasetSlice(row, jointDataset.metaDict, jointDataset.datasetFeatureCount);
        var tableRow = [];
        tableRow.push(row[JointDataset.IndexLabel]);

        if (colors) {
          tableRow.push(colors[i]);
        }

        if (jointDataset.hasODCorrect) {
          pushRowData(tableRow, JointDataset.ObjectDetectionCorrect, jointDataset, row, index);
        } else if (jointDataset.hasTrueY) {
          if (jointDataset.numLabels > 1) {
            pushMultilabelRowData(tableRow, JointDataset.TrueYLabel, jointDataset, row);
          } else {
            pushRowData(tableRow, JointDataset.TrueYLabel, jointDataset, row, index);
          }
        }

        if (jointDataset.hasODIncorrect) {
          pushRowData(tableRow, JointDataset.ObjectDetectionIncorrect, jointDataset, row, index);
        } else if (jointDataset.hasPredictedY) {
          if (jointDataset.numLabels > 1) {
            pushMultilabelRowData(tableRow, JointDataset.PredictedYLabel, jointDataset, row);
          } else {
            pushRowData(tableRow, JointDataset.PredictedYLabel, jointDataset, row, index);
          }
        }

        tableRow.push.apply(tableRow, __spreadArray([], __read(data)));
        rows.push(tableRow);
      }

      return rows;
    }
    function rowsFromCustomPoints(jointDataset, customPoints, viewedRows) {
      var rows = [];

      for (var i = 0; i < viewedRows; i++) {
        var row = customPoints[i];
        var data = JointDataset.datasetSlice(row, jointDataset.metaDict, jointDataset.localExplanationFeatureCount);
        rows.push(__spreadArray([i], __read(data)));
      }

      return rows;
    }
    function constructCols(viewedCols, featureNames, jointDataset, isCustomPointsView, hasColors) {
      if (hasColors === void 0) {
        hasColors = false;
      }

      var columns = [];
      columns.push({
        columnActionsMode: react.ColumnActionsMode.disabled,
        fieldName: "0",
        isResizable: true,
        key: "column0",
        maxWidth: 100,
        minWidth: 50,
        name: "Index"
      });
      var index = 1;

      if (hasColors) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "color",
          maxWidth: 100,
          minWidth: 50,
          name: "Color"
        });
        index++;
      }

      if (jointDataset.hasODCorrect) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "column" + index,
          maxWidth: 100,
          minWidth: 50,
          name: "Correct"
        });
        index++;
      } else if (!isCustomPointsView && jointDataset.hasTrueY) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "column" + index,
          maxWidth: 100,
          minWidth: 50,
          name: "TrueY"
        });
        index++;
      }

      if (jointDataset.hasODIncorrect) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "column" + index,
          maxWidth: 100,
          minWidth: 50,
          name: "Incorrect"
        });
        index++;
      } else if (!isCustomPointsView && jointDataset.hasPredictedY) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "column" + index,
          maxWidth: 100,
          minWidth: 50,
          name: "PredictedY"
        });
        index++;
      }

      for (var i = 0; i < viewedCols; i++) {
        columns.push({
          columnActionsMode: react.ColumnActionsMode.disabled,
          fieldName: "" + index,
          isResizable: true,
          key: "column" + index,
          maxWidth: 200,
          minWidth: 100,
          name: featureNames[i]
        });
        index += 1;
      }

      return columns;
    }

    function pushRowData(tableRow, property, jointDataset, row, index) {
      var _a;

      var categories = (_a = jointDataset.metaDict[property]) === null || _a === void 0 ? void 0 : _a.sortedCategoricalValues;
      var rowValue = row[property];

      if (rowValue !== undefined) {
        if (jointDataset.metaDict[property].isCategorical && categories) {
          tableRow.push(categories[row[property]]);
        } else {
          tableRow.push(row[property]);
        }
      } else if (jointDataset.strDataDict) {
        tableRow.push(jointDataset.strDataDict[index][property]);
      }
    }

    function pushMultilabelRowData(tableRow, property, jointDataset, row) {
      var _a;

      var values = [];

      for (var i = 0; i < jointDataset.numLabels; i++) {
        var labelProp = property + i.toString();
        var categories = (_a = jointDataset.metaDict[labelProp]) === null || _a === void 0 ? void 0 : _a.sortedCategoricalValues;

        if (jointDataset.metaDict[labelProp].isCategorical && categories) {
          var value = categories[row[labelProp]];

          if (value) {
            values.push(value);
          }
        } else {
          var value = row[labelProp];

          if (value) {
            values.push(value);
          }
        }
      }

      tableRow.push(values.join(","));
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function getFeatureNamesAfterDrop(originalFeatureNames, droppedFeatures) {
      var featureNames = originalFeatureNames;

      if (droppedFeatures) {
        featureNames = originalFeatureNames.filter(function (name) {
          return !(droppedFeatures === null || droppedFeatures === void 0 ? void 0 : droppedFeatures.includes(name));
        });
      }

      return featureNames;
    }

    // Copyright (c) Microsoft Corporation.
    function stringFormat(str, mapping) {
      return _.replace(str, /{{|}}|{(\w+)}/g, function (match, key) {
        if (match === "{{") {
          return "{";
        }

        if (match === "}}") {
          return "}";
        }

        return mapping[key];
      });
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function generateRoute(params) {
      return params.map(function (p) {
        return "/:" + p + "([\\d\\s\\w-%]*)?";
      }).join("");
    }

    // Copyright (c) Microsoft Corporation.
    function getRandomId() {
      return "Id_" + uuid.v4();
    }

    // Copyright (c) Microsoft Corporation.
    function getDependencyChartOptions(data, xLabels, pointColor, logarithmicScaling, theme) {
      var colorTheme = {
        axisColor: theme === null || theme === void 0 ? void 0 : theme.palette.neutralPrimary,
        axisGridColor: theme === null || theme === void 0 ? void 0 : theme.palette.neutralLight,
        backgroundColor: theme === null || theme === void 0 ? void 0 : theme.semanticColors.bodyBackground,
        fontColor: theme === null || theme === void 0 ? void 0 : theme.semanticColors.bodyText
      };
      return {
        chart: {
          backgroundColor: colorTheme.backgroundColor,
          type: "scatter",
          zoomType: "xy"
        },
        custom: {
          disableUpdate: true
        },
        plotOptions: {
          scatter: {
            marker: {
              states: {
                hover: {
                  enabled: true,
                  lineColor: colorTheme.axisColor
                }
              }
            },
            tooltip: {
              headerFormat: "",
              pointFormat: "{point.customData.template}"
            }
          },
          series: {
            turboThreshold: 0
          }
        },
        series: [{
          color: pointColor,
          data: data,
          name: "",
          turboThreshold: 0,
          type: "scatter"
        }],
        xAxis: {
          categories: xLabels,
          type: logarithmicScaling ? exports.AxisTypes.Logarithmic : undefined
        }
      };
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var TotalCohortSamples = "samples";

    // Copyright (c) Microsoft Corporation.

    (function (BinaryClassificationMetrics) {
      BinaryClassificationMetrics["Accuracy"] = "accuracy";
      BinaryClassificationMetrics["Precision"] = "precision";
      BinaryClassificationMetrics["Recall"] = "recall";
      BinaryClassificationMetrics["FalseNegativeRate"] = "falseNegativeRate";
      BinaryClassificationMetrics["FalsePositiveRate"] = "falsePositiveRate";
      BinaryClassificationMetrics["SelectionRate"] = "selectionRate";
      BinaryClassificationMetrics["F1Score"] = "f1Score";
    })(exports.BinaryClassificationMetrics || (exports.BinaryClassificationMetrics = {}));

    (function (RegressionMetrics) {
      RegressionMetrics["MeanSquaredError"] = "meanSquaredError";
      RegressionMetrics["MeanAbsoluteError"] = "meanAbsoluteError";
      RegressionMetrics["MeanPrediction"] = "meanPrediction";
      RegressionMetrics["RSquared"] = "rSquared";
    })(exports.RegressionMetrics || (exports.RegressionMetrics = {}));

    (function (MulticlassClassificationMetrics) {
      MulticlassClassificationMetrics["Accuracy"] = "accuracy";
      MulticlassClassificationMetrics["MacroF1"] = "f1";
      MulticlassClassificationMetrics["MacroPrecision"] = "precision";
      MulticlassClassificationMetrics["MacroRecall"] = "recall";
      MulticlassClassificationMetrics["MicroF1"] = "microF1";
      MulticlassClassificationMetrics["MicroPrecision"] = "microPrecision";
      MulticlassClassificationMetrics["MicroRecall"] = "microRecall";
    })(exports.MulticlassClassificationMetrics || (exports.MulticlassClassificationMetrics = {}));

    // Copyright (c) Microsoft Corporation.
    var generateMicroMacroMetrics = function generateMicroMacroMetrics(main, secondary) {
      var mainLabels = new Set();
      main.forEach(function (val) {
        if (!mainLabels.has(val)) {
          mainLabels.add(val);
        }
      });
      var truePositivesSum = 0;
      var totalPositivesSum = 0;
      var macroScores = [];
      mainLabels.forEach(function (label) {
        var truePositives = 0;
        var totalPositives = 0;
        main.forEach(function (val, index) {
          if (val === label) {
            totalPositives += 1;
            totalPositivesSum += 1;

            if (secondary[index] === label) {
              truePositives += 1;
              truePositivesSum += 1;
            }
          }
        });
        var score = truePositives / totalPositives;
        macroScores.push(score);
      });
      var macroScore = macroScores.reduce(function (total, curr) {
        return total + curr;
      }, 0) / macroScores.length;
      var microScore = truePositivesSum / totalPositivesSum;
      return {
        macroScore: macroScore,
        microScore: microScore
      };
    };
    var generateMulticlassStats = function generateMulticlassStats(trueYs, predYs) {
      var correctCount = predYs.filter(function (pred, index) {
        return pred === trueYs[index];
      }).length;
      var accuracy = correctCount / predYs.length;
      var precision = generateMicroMacroMetrics(predYs, trueYs);
      var microP = precision.microScore;
      var macroP = precision.macroScore;
      var recall = generateMicroMacroMetrics(trueYs, predYs);
      var microR = recall.microScore;
      var macroR = recall.macroScore;
      var microF1 = 2 * (microP * microR / (microP + microR)) || 0;
      var macroF1 = 2 * (macroP * macroR / (macroP + macroR)) || 0;
      return [{
        key: TotalCohortSamples,
        label: localization.localization.Interpret.Statistics.samples,
        stat: predYs.length
      }, {
        key: exports.MulticlassClassificationMetrics.Accuracy,
        label: localization.localization.Interpret.Statistics.accuracy,
        stat: accuracy
      }, {
        key: exports.MulticlassClassificationMetrics.MicroPrecision,
        label: localization.localization.Interpret.Statistics.precision,
        stat: microP
      }, {
        key: exports.MulticlassClassificationMetrics.MicroRecall,
        label: localization.localization.Interpret.Statistics.recall,
        stat: microR
      }, {
        key: exports.MulticlassClassificationMetrics.MicroF1,
        label: localization.localization.Interpret.Statistics.f1Score,
        stat: microF1
      }, {
        key: exports.MulticlassClassificationMetrics.MacroPrecision,
        label: localization.localization.Interpret.Statistics.precision,
        stat: macroP
      }, {
        key: exports.MulticlassClassificationMetrics.MacroRecall,
        label: localization.localization.Interpret.Statistics.recall,
        stat: macroR
      }, {
        key: exports.MulticlassClassificationMetrics.MacroF1,
        label: localization.localization.Interpret.Statistics.f1Score,
        stat: macroF1
      }];
    };

    // Copyright (c) Microsoft Corporation.
    var defaultTheme = react.createTheme({
      palette: {
        black: "#000000",
        neutralDark: "#201f1e",
        neutralLight: "#edebe9",
        neutralLighter: "#f3f2f1",
        neutralLighterAlt: "#faf9f8",
        neutralPrimary: "#323130",
        neutralPrimaryAlt: "#3b3a39",
        neutralQuaternary: "#d0d0d0",
        neutralQuaternaryAlt: "#e1dfdd",
        neutralSecondary: "#605e5c",
        neutralTertiary: "#a19f9d",
        neutralTertiaryAlt: "#c8c6c4",
        themeDark: "#005a9e",
        themeDarkAlt: "#106ebe",
        themeDarker: "#004578",
        themeLight: "#c7e0f4",
        themeLighter: "#deecf9",
        themeLighterAlt: "#eff6fc",
        themePrimary: "#0078d4",
        themeSecondary: "#2b88d8",
        themeTertiary: "#71afe5",
        white: "#ffffff"
      }
    });
    function initializeOfficeFabric(props) {
      if (props.shouldInitializeIcons !== false) {
        react.initializeIcons(props.iconUrl);
      }

      react.loadTheme(props.theme || defaultTheme);
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function isNumber(value) {
      // explanation for the regex below:
      // ^\-? - optional negative sign
      // \\d* - any number of digits
      // (\\d\.?|\.?\\d) - either a digit followed by an optional decimal or a decimal followed by a digit
      // \\d*$ - any number of digits
      return new RegExp("^-?\\d*(\\d.?|.?\\d)\\d*$").test(value);
    }
    function mayBecomeNumber(value) {
      // explanation for the regex below:
      // ^\-? - optional negative sign
      // \\d* - any number of digits
      // \.? - optional floating point
      // \\d*$ - any number of digits
      // This is a more lenient version of the above regex to allow for partially written numbers
      // such as "." or "-." or ""
      return new RegExp("^-?\\d*.?\\d*$").test(value);
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var nameof = function nameof(name) {
      return name;
    };

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var rowErrorSize = 10000;

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function orderByTime(values, rowIndices) {
      return values.map(function (predictedValue, idx) {
        return [Date.parse(rowIndices[idx]), predictedValue];
      }).sort(function (objA, objB) {
        return objA[0] - objB[1];
      });
    }
    function isTimeOrTimeSeriesIDColumn(featureName, featureMetaData) {
      var _a, _b; // The if-condition below should always be true since these are all required
      // for forecasting and validated upon building the model assessment context.
      // The if statement exists merely to satisfy the compiler.


      if ((featureMetaData === null || featureMetaData === void 0 ? void 0 : featureMetaData.datetime_features) && featureMetaData.datetime_features.length > 0) {
        var isDatetimeFeature = featureMetaData.datetime_features[0] === featureName;
        var isTimeSeriesIdColumn = (_b = (_a = featureMetaData.time_series_id_features) === null || _a === void 0 ? void 0 : _a.includes(featureName)) !== null && _b !== void 0 ? _b : false;
        return isDatetimeFeature || isTimeSeriesIdColumn;
      } // If we don't have feature metadata then we can assume that there are no
      // time or time series identifying columns.


      return false;
    }
    function featureColumnsExist(featureNames, featureMetaData) {
      if (featureNames.length === 0) {
        return false;
      }

      if (featureMetaData === undefined) {
        // features exist but none of them are time or time series id columns
        return true;
      }

      return featureNames.filter(function (featureName) {
        return !isTimeOrTimeSeriesIDColumn(featureName, featureMetaData);
      }).length > 0;
    }

    // Copyright (c) Microsoft Corporation.
    function calculateBoxPlotDataFromErrorCohort(errorCohort, index, key, queryClass, requestBoxPlotDistribution, ifEnableLargeData) {
      return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!(ifEnableLargeData && requestBoxPlotDistribution)) return [3
              /*break*/
              , 2];
              return [4
              /*yield*/
              , calculateBoxPlotDataFromSDK(errorCohort, requestBoxPlotDistribution, queryClass)];

            case 1:
              return [2
              /*return*/
              , _a.sent()];

            case 2:
              // key is the identifier for the column (e.g., probability)
              // If compute instance is not connected, calculate based on the first 5k data
              return [2
              /*return*/
              , calculateBoxPlotData(errorCohort.cohort.filteredData.map(function (dict) {
                return dict[key];
              }), index)];
          }
        });
      });
    }
    function calculateBoxPlotDataFromSDK(errorCohort, requestBoxPlotDistribution, queryClass) {
      return __awaiter(this, void 0, void 0, function () {
        var filtersRelabeled, compositeFiltersRelabeled, data, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              filtersRelabeled = Cohort.getLabeledFilters(errorCohort.cohort.filters, errorCohort.jointDataset);
              compositeFiltersRelabeled = Cohort.getLabeledCompositeFilters(errorCohort.cohort.compositeFilters, errorCohort.jointDataset);
              data = [filtersRelabeled, compositeFiltersRelabeled, queryClass];
              return [4
              /*yield*/
              , requestBoxPlotDistribution === null || requestBoxPlotDistribution === void 0 ? void 0 : requestBoxPlotDistribution(data, new AbortController().signal)];

            case 1:
              result = _a.sent();
              return [2
              /*return*/
              , result];
          }
        });
      });
    }
    function calculateBoxPlotData(data, index) {
      data.sort(function (number1, number2) {
        return number1 - number2;
      });

      if (data.length === 0) {
        return undefined;
      }

      var firstQuartile = getPercentile(data, 25);
      var median = getPercentile(data, 50);
      var thirdQuartile = getPercentile(data, 75);

      if (firstQuartile !== undefined && median !== undefined && thirdQuartile !== undefined) {
        var interquartileRange = thirdQuartile - firstQuartile; // calculate fences as min and max allowed values to be inside the box

        var lowerFence_1 = firstQuartile - interquartileRange * 1.5;
        var upperFence_1 = thirdQuartile + interquartileRange * 1.5;
        var nonOutliers = data.filter(function (element) {
          return element >= lowerFence_1 && element <= upperFence_1;
        });
        var outliers = data.filter(function (element) {
          return element < lowerFence_1 || element > upperFence_1;
        });
        return {
          high: nonOutliers[nonOutliers.length - 1],
          low: nonOutliers[0],
          median: median,
          outliers: outliers,
          q1: firstQuartile,
          q3: thirdQuartile,
          x: index
        };
      }

      return undefined;
    }
    function getPercentile(sortedData, percentile) {
      if (percentile <= 0 || percentile >= 100 || sortedData.length === 0) {
        return undefined;
      }

      var index = percentile / 100 * sortedData.length;
      var result;

      if (Math.floor(index) === index) {
        // take average of the two adjacent numbers
        result = (sortedData[index - 1] + sortedData[index]) / 2;
      } else {
        result = sortedData[Math.floor(index)];
      }

      return result;
    }
    function setOutlierDataIfChanged(boxPlotData, prevBoxChartState, onBoxPlotStateUpdate) {
      return __awaiter(this, void 0, void 0, function () {
        var data, outlierData;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              return [4
              /*yield*/
              , Promise.all(boxPlotData)];

            case 1:
              data = _a.sent();
              outlierData = data.map(function (cohortBoxPlotData) {
                return cohortBoxPlotData === null || cohortBoxPlotData === void 0 ? void 0 : cohortBoxPlotData.outliers;
              }).map(function (outlierProbs, cohortIndex) {
                return outlierProbs === null || outlierProbs === void 0 ? void 0 : outlierProbs.map(function (prob) {
                  return [cohortIndex, prob];
                });
              }).filter(function (list) {
                return list !== undefined;
              }).reduce(function (list1, list2) {
                return list1 === null || list1 === void 0 ? void 0 : list1.concat(list2 || []);
              }, []);

              if (!_.isEqual(data, prevBoxChartState.boxPlotData) || !_.isEqual(prevBoxChartState.outlierData, outlierData)) {
                onBoxPlotStateUpdate({
                  boxPlotData: data,
                  outlierData: outlierData
                });
              }

              return [2
              /*return*/
              ];
          }
        });
      });
    }

    // Copyright (c) Microsoft Corporation.
    function getBoxData(x, y) {
      var dataSet = [];
      x.forEach(function (value, index) {
        if (dataSet[value] === undefined) {
          dataSet[value] = [];
        }

        dataSet[value].push(y[index]);
      });
      var result = {
        box: [],
        outlier: []
      };
      var calculatedData = dataSet.map(function (v) {
        return calculateBoxPlotData(v);
      });
      calculatedData.forEach(function (temp, index) {
        var _a;

        if (temp) {
          result.box.push({
            high: temp.high,
            low: temp.low,
            median: temp.median,
            q1: temp.q1,
            q3: temp.q3
          });
          (_a = temp.outliers) === null || _a === void 0 ? void 0 : _a.forEach(function (d) {
            result.outlier.push([index, d]);
          });
        }
      });
      return result;
    }

    // Copyright (c) Microsoft Corporation.
    function getFeatureOptions(jointDataset) {
      var featuresOption = new Array(jointDataset.datasetFeatureCount).fill(0).map(function (_, index) {
        var _a;

        var key = JointDataset.DataLabelRoot + index.toString();
        var meta = jointDataset.metaDict[key];
        var options = meta.isCategorical ? (_a = meta.sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a.filter(function (optionText) {
          return !!optionText && typeof optionText !== "boolean" && typeof optionText !== "number";
        }).map(function (optionText, index) {
          if (typeof optionText !== "string") {
            optionText = optionText.toString();
          }

          return {
            key: index,
            text: optionText
          };
        }) : undefined;
        return {
          data: {
            categoricalOptions: options,
            fullLabel: meta.label.toLocaleLowerCase()
          },
          key: key,
          text: meta.abbridgedLabel
        };
      });
      return featuresOption;
    }

    // Copyright (c) Microsoft Corporation.
    function calculateConfusionMatrixData(yTrue, yPred, allLabels, selectedLabels) {
      if (yTrue.length !== yPred.length || !yTrue.concat(yPred).every(function (el) {
        return el < allLabels.length;
      })) {
        return undefined;
      }

      var selectedLabelSet = new Set(selectedLabels !== undefined ? selectedLabels : allLabels);
      var labelMap = new Map(); // Inspired from sklearn
      // https://github.com/scikit-learn/scikit-learn/blob/8694eb00f8a3c0dede331fe60c0415bfaafef631/sklearn/metrics/_classification.py#L335

      var idx = 0;
      allLabels.forEach(function (element, index) {
        if (selectedLabelSet.has(element)) {
          labelMap.set(index, idx);
          idx += 1;
        }
      });
      var cm = new Array(labelMap.size).fill(0).map(function () {
        return new Array(labelMap.size).fill(0);
      });
      yTrue.forEach(function (element, index) {
        var trueIdx = labelMap.get(element);
        var predIdx = labelMap.get(yPred[index]);

        if (trueIdx !== undefined && predIdx !== undefined) {
          cm[trueIdx][predIdx] += 1;
        }
      });
      return {
        confusionMatrix: cm,
        selectedLabels: __spreadArray([], __read(labelMap.keys())).map(function (idx) {
          return allLabels[idx];
        })
      };
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function calculateSplinePlotDataFromErrorCohort(errorCohort, key) {
      // key is the identifier for the column (e.g., probability)
      if (!key) {
        return undefined;
      }

      return calculateLinePlotData(errorCohort.cohort.filteredData.map(function (dict) {
        return dict[key];
      }));
    }
    function calculateLinePlotData(data) {
      if (data.length === 0) {
        return undefined;
      }

      var numberOfBins = 10;
      var binCounts = new Array(numberOfBins).fill(0);
      data.forEach(function (prob) {
        var binIndex = Math.floor(prob * numberOfBins);

        if (binIndex > numberOfBins - 1) {
          // special case: map 100% to the last bin
          binIndex = binIndex - 1;
        }

        binCounts[binIndex] = binCounts[binIndex] + 1;
      });
      return binCounts.map(function (binCount, index) {
        return {
          binCount: binCount,
          binName: index * numberOfBins + "-" + (index + 1) * numberOfBins + "%"
        };
      });
    }

    // Copyright (c) Microsoft Corporation.

    (function (QuestionAnsweringMetrics) {
      QuestionAnsweringMetrics["BleuScore"] = "bleuScore";
      QuestionAnsweringMetrics["BertScore"] = "bertScore";
      QuestionAnsweringMetrics["ExactMatchRatio"] = "exactMatchRatio";
      QuestionAnsweringMetrics["F1Score"] = "f1Score";
      QuestionAnsweringMetrics["MeteorScore"] = "meteorScore";
      QuestionAnsweringMetrics["RougeScore"] = "rougeScore";
    })(exports.QuestionAnsweringMetrics || (exports.QuestionAnsweringMetrics = {}));

    var generateQuestionAnsweringStats = function generateQuestionAnsweringStats(selectionIndexes, questionAnsweringCache) {
      return selectionIndexes.map(function (selectionArray) {
        var count = selectionArray.length;
        var value = questionAnsweringCache.get(selectionArray.toString());
        var stat = value ? value : [Number.NaN, Number.NaN, Number.NaN, Number.NaN, Number.NaN, Number.NaN];
        return [{
          key: TotalCohortSamples,
          label: localization.localization.Interpret.Statistics.samples,
          stat: count
        }, {
          key: exports.QuestionAnsweringMetrics.ExactMatchRatio,
          label: localization.localization.Interpret.Statistics.exactMatchRatio,
          stat: stat[0]
        }, {
          key: exports.QuestionAnsweringMetrics.F1Score,
          label: localization.localization.Interpret.Statistics.f1Score,
          stat: stat[1]
        }, {
          key: exports.QuestionAnsweringMetrics.MeteorScore,
          label: localization.localization.Interpret.Statistics.meteorScore,
          stat: stat[2]
        }, {
          key: exports.QuestionAnsweringMetrics.BleuScore,
          label: localization.localization.Interpret.Statistics.bleuScore,
          stat: stat[3]
        }, {
          key: exports.QuestionAnsweringMetrics.BertScore,
          label: localization.localization.Interpret.Statistics.bertScore,
          stat: stat[4]
        }, {
          key: exports.QuestionAnsweringMetrics.RougeScore,
          label: localization.localization.Interpret.Statistics.rougeScore,
          stat: stat[5]
        }];
      });
    };

    // Copyright (c) Microsoft Corporation.

    (function (GenerativeTextMetrics) {
      GenerativeTextMetrics["Coherence"] = "coherence";
      GenerativeTextMetrics["Fluency"] = "fluency";
      GenerativeTextMetrics["Equivalence"] = "equivalence";
      GenerativeTextMetrics["Groundedness"] = "groundedness";
      GenerativeTextMetrics["Relevance"] = "relevance";
    })(exports.GenerativeTextMetrics || (exports.GenerativeTextMetrics = {}));

    var generateGenerativeTextStats = function generateGenerativeTextStats(selectionIndexes, generativeTextCache) {
      return selectionIndexes.map(function (selectionArray) {
        var e_1, _a;

        var count = selectionArray.length;
        var value = generativeTextCache.get(selectionArray.toString());
        var stat = value ? value : new Map();
        var stats = [{
          key: TotalCohortSamples,
          label: localization.localization.Interpret.Statistics.samples,
          stat: count
        }];

        try {
          for (var _b = __values(stat.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
            var _d = __read(_c.value, 2),
                key = _d[0],
                value_1 = _d[1];

            var label = "";

            switch (key) {
              case exports.GenerativeTextMetrics.Coherence:
                label = localization.localization.Interpret.Statistics.coherence;
                break;

              case exports.GenerativeTextMetrics.Fluency:
                label = localization.localization.Interpret.Statistics.fluency;
                break;

              case exports.GenerativeTextMetrics.Equivalence:
                label = localization.localization.Interpret.Statistics.equivalence;
                break;

              case exports.GenerativeTextMetrics.Groundedness:
                label = localization.localization.Interpret.Statistics.groundedness;
                break;

              case exports.GenerativeTextMetrics.Relevance:
                label = localization.localization.Interpret.Statistics.relevance;
                break;

              case exports.QuestionAnsweringMetrics.ExactMatchRatio:
                label = localization.localization.Interpret.Statistics.exactMatchRatio;
                break;

              case exports.QuestionAnsweringMetrics.F1Score:
                label = localization.localization.Interpret.Statistics.f1Score;
                break;

              case exports.QuestionAnsweringMetrics.MeteorScore:
                label = localization.localization.Interpret.Statistics.meteorScore;
                break;

              case exports.QuestionAnsweringMetrics.BleuScore:
                label = localization.localization.Interpret.Statistics.bleuScore;
                break;

              case exports.QuestionAnsweringMetrics.BertScore:
                label = localization.localization.Interpret.Statistics.bertScore;
                break;

              case exports.QuestionAnsweringMetrics.RougeScore:
                label = localization.localization.Interpret.Statistics.rougeScore;
                break;

              default:
                break;
            }

            stats.push({
              key: key,
              label: label,
              stat: value_1
            });
          }
        } catch (e_1_1) {
          e_1 = {
            error: e_1_1
          };
        } finally {
          try {
            if (_c && !_c.done && (_a = _b["return"])) _a.call(_b);
          } finally {
            if (e_1) throw e_1.error;
          }
        }

        return stats;
      });
    };

    // Copyright (c) Microsoft Corporation.

    (function (MultilabelMetrics) {
      MultilabelMetrics["ExactMatchRatio"] = "exactMatchRatio";
      MultilabelMetrics["HammingScore"] = "hammingScore";
    })(exports.MultilabelMetrics || (exports.MultilabelMetrics = {}));

    var generateMultilabelStats = function generateMultilabelStats(jointDataset, selectionIndexes) {
      var numLabels = jointDataset.numLabels;
      return selectionIndexes.map(function (selectionArray) {
        var matchingLabels = [];
        var hammingScore = 0;
        var count = selectionArray.length;

        var _loop_1 = function _loop_1(i) {
          var trueYs = jointDataset.unwrap(JointDataset.TrueYLabel + i);
          var predYs = jointDataset.unwrap(JointDataset.PredictedYLabel + i);
          var trueYSubset = selectionArray.map(function (i) {
            return trueYs[i];
          });
          var predYSubset = selectionArray.map(function (i) {
            return predYs[i];
          });
          matchingLabels.push(trueYSubset.filter(function (trueY, index) {
            return trueY === predYSubset[index];
          }).length);
          var sumLogicalOr = trueYSubset.map(function (trueY, index) {
            return trueY | predYSubset[index];
          }).reduce(function (prev, curr) {
            return prev + curr;
          }, 0);
          var sumLogicalAnd = trueYSubset.map(function (trueY, index) {
            return trueY & predYSubset[index];
          }).reduce(function (prev, curr) {
            return prev + curr;
          }, 0);

          if (sumLogicalOr !== 0) {
            hammingScore += sumLogicalAnd / sumLogicalOr;
          }
        };

        for (var i = 0; i < numLabels; i++) {
          _loop_1(i);
        }

        hammingScore = hammingScore / numLabels;
        var sum = matchingLabels.reduce(function (prev, curr) {
          return prev + curr;
        }, 0);
        var exactMatchRatio = sum / (numLabels * selectionArray.length);
        return [{
          key: TotalCohortSamples,
          label: localization.localization.Interpret.Statistics.samples,
          stat: count
        }, {
          key: exports.MultilabelMetrics.ExactMatchRatio,
          label: localization.localization.Interpret.Statistics.exactMatchRatio,
          stat: exactMatchRatio
        }, {
          key: exports.MultilabelMetrics.HammingScore,
          label: localization.localization.Interpret.Statistics.hammingScore,
          stat: hammingScore
        }];
      });
    };

    // Copyright (c) Microsoft Corporation.

    (function (ObjectDetectionMetrics) {
      ObjectDetectionMetrics["MeanAveragePrecision"] = "meanAveragePrecision";
      ObjectDetectionMetrics["AveragePrecision"] = "averagePrecision";
      ObjectDetectionMetrics["AverageRecall"] = "averageRecall";
    })(exports.ObjectDetectionMetrics || (exports.ObjectDetectionMetrics = {}));

    var generateObjectDetectionStats = function generateObjectDetectionStats(selectionIndexes, objectDetectionCache, objectDetectionInputs) {
      return selectionIndexes.map(function (selectionArray) {
        var count = selectionArray.length;
        var key = [selectionArray, objectDetectionInputs[0], objectDetectionInputs[1], objectDetectionInputs[2]];
        var value = objectDetectionCache.get(key.toString());
        var stat = value ? value : [Number.NaN, Number.NaN, Number.NaN];
        return [{
          key: TotalCohortSamples,
          label: localization.localization.Interpret.Statistics.samples,
          stat: count
        }, {
          key: exports.ObjectDetectionMetrics.MeanAveragePrecision,
          label: localization.localization.Interpret.Statistics.meanAveragePrecision,
          stat: stat[0]
        }, {
          key: exports.ObjectDetectionMetrics.AveragePrecision,
          label: localization.localization.Interpret.Statistics.averagePrecision,
          stat: stat[1]
        }, {
          key: exports.ObjectDetectionMetrics.AverageRecall,
          label: localization.localization.Interpret.Statistics.averageRecall,
          stat: stat[2]
        }];
      });
    };

    // Copyright (c) Microsoft Corporation.

    var generateBinaryStats = function generateBinaryStats(outcomes) {
      var falseNegCount = outcomes.filter(function (x) {
        return x === exports.ClassificationEnum.FalseNegative;
      }).length;
      var falsePosCount = outcomes.filter(function (x) {
        return x === exports.ClassificationEnum.FalsePositive;
      }).length;
      var trueNegCount = outcomes.filter(function (x) {
        return x === exports.ClassificationEnum.TrueNegative;
      }).length;
      var truePosCount = outcomes.filter(function (x) {
        return x === exports.ClassificationEnum.TruePositive;
      }).length;
      var total = outcomes.length;
      return [{
        key: TotalCohortSamples,
        label: localization.localization.Interpret.Statistics.samples,
        stat: total
      }, {
        key: exports.BinaryClassificationMetrics.Accuracy,
        label: localization.localization.Interpret.Statistics.accuracy,
        stat: (truePosCount + trueNegCount) / total
      }, {
        key: exports.BinaryClassificationMetrics.Precision,
        label: localization.localization.Interpret.Statistics.precision,
        stat: truePosCount / (truePosCount + falsePosCount)
      }, {
        key: exports.BinaryClassificationMetrics.Recall,
        label: localization.localization.Interpret.Statistics.recall,
        stat: truePosCount / (truePosCount + falseNegCount)
      }, {
        key: exports.BinaryClassificationMetrics.F1Score,
        label: localization.localization.Interpret.Statistics.f1Score,
        stat: truePosCount / (truePosCount + 0.5 * (falsePosCount + falseNegCount))
      }, {
        key: exports.BinaryClassificationMetrics.FalsePositiveRate,
        label: localization.localization.Interpret.Statistics.fpr,
        stat: falsePosCount / (trueNegCount + falsePosCount)
      }, {
        key: exports.BinaryClassificationMetrics.FalseNegativeRate,
        label: localization.localization.Interpret.Statistics.fnr,
        stat: falseNegCount / (truePosCount + falseNegCount)
      }, {
        key: exports.BinaryClassificationMetrics.SelectionRate,
        label: localization.localization.Interpret.Statistics.selectionRate,
        stat: (falsePosCount + truePosCount) / total
      }];
    };

    var generateRegressionStats = function generateRegressionStats(trueYs, predYs, errors) {
      var count = trueYs.length;
      var meanAbsoluteError = errors.reduce(function (prev, curr) {
        return Math.abs(prev) + Math.abs(curr);
      }, 0) / count;
      var residualSumOfSquares = errors.reduce(function (prev, curr) {
        return prev + curr * curr;
      }, 0);
      var avgY = trueYs.reduce(function (prev, curr) {
        return prev + curr;
      }, 0) / count;
      var totalSumOfSquares = trueYs.reduce(function (prev, curr) {
        return prev + (curr - avgY) * (curr - avgY);
      }, 0);
      return [{
        key: TotalCohortSamples,
        label: localization.localization.Interpret.Statistics.samples,
        stat: count
      }, {
        key: exports.RegressionMetrics.MeanAbsoluteError,
        label: localization.localization.Interpret.Statistics.mae,
        stat: meanAbsoluteError
      }, {
        key: exports.RegressionMetrics.MeanSquaredError,
        label: localization.localization.Interpret.Statistics.mse,
        stat: residualSumOfSquares / count
      }, {
        key: exports.RegressionMetrics.RSquared,
        label: localization.localization.Interpret.Statistics.rSquared,
        stat: 1 - residualSumOfSquares / totalSumOfSquares
      }, {
        key: exports.RegressionMetrics.MeanPrediction,
        label: localization.localization.Interpret.Statistics.meanPrediction,
        stat: predYs.reduce(function (prev, curr) {
          return prev + curr;
        }, 0) / count
      }];
    };

    var generateMetrics = function generateMetrics(jointDataset, selectionIndexes, modelType, objectDetectionCache, objectDetectionInputs, questionAnsweringCache, generativeTextCache) {
      if (modelType === exports.ModelTypes.ImageMultilabel || modelType === exports.ModelTypes.TextMultilabel) {
        return generateMultilabelStats(jointDataset, selectionIndexes);
      }

      if (modelType === exports.ModelTypes.QuestionAnswering && questionAnsweringCache) {
        return generateQuestionAnsweringStats(selectionIndexes, questionAnsweringCache);
      }

      var trueYs = jointDataset.unwrap(JointDataset.TrueYLabel);
      var predYs = jointDataset.unwrap(JointDataset.PredictedYLabel);

      if (modelType === exports.ModelTypes.Regression) {
        var errors_1 = jointDataset.unwrap(JointDataset.RegressionError);
        return selectionIndexes.map(function (selectionArray) {
          var trueYSubset = selectionArray.map(function (i) {
            return trueYs[i];
          });
          var predYSubset = selectionArray.map(function (i) {
            return predYs[i];
          });
          var errorsSubset = selectionArray.map(function (i) {
            return errors_1[i];
          });
          return generateRegressionStats(trueYSubset, predYSubset, errorsSubset);
        });
      }

      if (modelType === exports.ModelTypes.ObjectDetection && objectDetectionCache && objectDetectionInputs) {
        return generateObjectDetectionStats(selectionIndexes, objectDetectionCache, objectDetectionInputs);
      }

      if (modelType === exports.ModelTypes.GenerativeText && generativeTextCache) {
        return generateGenerativeTextStats(selectionIndexes, generativeTextCache);
      }

      var outcomes = jointDataset.unwrap(JointDataset.ClassificationError);

      if (IsBinary(modelType)) {
        return selectionIndexes.map(function (selectionArray) {
          var outcomeSubset = selectionArray.map(function (i) {
            return outcomes[i];
          });
          return generateBinaryStats(outcomeSubset);
        });
      } // modelType === ModelTypes.Multiclass


      return selectionIndexes.map(function (selectionArray) {
        var trueYSubset = selectionArray.map(function (i) {
          return trueYs[i];
        });
        var predYSubset = selectionArray.map(function (i) {
          return predYs[i];
        });
        return generateMulticlassStats(trueYSubset, predYSubset);
      });
    };

    // Copyright (c) Microsoft Corporation.
    function toScientific(item) {
      var copy = _.cloneDeep(item);

      Object.keys(copy).forEach(function (k) {
        var isFloat = typeof copy[k] === "number" && copy[k] % 1 !== 0;

        if (isFloat) {
          copy[k] = copy[k].toExponential(3);
        }
      });
      return copy;
    }

    // Copyright (c) Microsoft Corporation.

    (function (TelemetryLevels) {
      TelemetryLevels["ButtonClick"] = "ButtonClick";
      TelemetryLevels["Error"] = "Error";
      TelemetryLevels["Warning"] = "Warning";
      TelemetryLevels["Info"] = "Info";
      TelemetryLevels["Trace"] = "Trace";
    })(exports.TelemetryLevels || (exports.TelemetryLevels = {}));

    // Copyright (c) Microsoft Corporation.

    (function (TelemetryEventName) {
      // Core
      TelemetryEventName["NewAxisConfigSelected"] = "RAI_NewAxisConfigSelected"; // Cohort

      TelemetryEventName["NewCohortAdded"] = "RAI_NewCohortAdded"; // Main menu

      TelemetryEventName["MainMenuCohortSettingsClick"] = "RAI_MainMenuCohortSettingsClick";
      TelemetryEventName["MainMenuDashboardConfigurationClick"] = "RAI_MainMenuDashboardConfigurationClick";
      TelemetryEventName["MainMenuSwitchCohortClick"] = "RAI_MainMenuSwitchCohortClick";
      TelemetryEventName["MainMenuNewCohortClick"] = "RAI_MainMenuNewCohortClick"; // Error analysis

      TelemetryEventName["ErrorAnalysisTreeMapTabClick"] = "RAI_ErrorAnalysisTreeMapTabClick";
      TelemetryEventName["ErrorAnalysisTreeMapFeatureListClick"] = "RAI_ErrorAnalysisTreeMapFeatureListClick";
      TelemetryEventName["ErrorAnalysisTreeMapClearSelection"] = "RAI_ErrorAnalysisTreeMapClearSelection";
      TelemetryEventName["ErrorAnalysisTreeMapSaveAsNewCohortClick"] = "RAI_ErrorAnalysisTreeMapSaveAsNewCohortClick";
      TelemetryEventName["ErrorAnalysisTreeMapCohortSaved"] = "RAI_ErrorAnalysisTreeMapCohortSaved";
      TelemetryEventName["ErrorAnalysisHeatMapTabClick"] = "RAI_ErrorAnalysisHeatMapTabClick";
      TelemetryEventName["ErrorAnalysisHeatMapQuantileBinningClick"] = "RAI_ErrorAnalysisHeatMapQuantileBinningClick";
      TelemetryEventName["ErrorAnalysisNewMetricSelected"] = "RAI_ErrorAnalysisNewMetricSelected"; // Model overview

      TelemetryEventName["ModelOverviewDatasetCohortsTabClick"] = "RAI_ModelOverviewDatasetCohortsTabClick";
      TelemetryEventName["ModelOverviewFeatureCohortsTabClick"] = "RAI_ModelOverviewFeatureCohortsTabClick";
      TelemetryEventName["ModelOverviewMetricsConfigurationClick"] = "RAI_ModelOverviewMetricsConfigurationClick";
      TelemetryEventName["ModelOverviewFeatureConfigurationClick"] = "RAI_ModelOverviewFeatureConfigurationClick";
      TelemetryEventName["ModelOverviewMetricsSelectionUpdated"] = "RAI_ModelOverviewMetricsSelectionUpdated";
      TelemetryEventName["ModelOverviewShowHeatmapToggleUpdated"] = "RAI_ModelOverviewShowHeatmapToggleUpdated";
      TelemetryEventName["ModelOverviewSplineChartToggleUpdated"] = "RAI_ModelOverviewSplineChartToggleUpdated"; // Data analysis

      TelemetryEventName["DataBalanceTabSelected"] = "RAI_DataBalanceTabSelected";
      TelemetryEventName["DatasetExplorerTabSelected"] = "RAI_DatasetExplorerTabSelected";
      TelemetryEventName["DatasetExplorerNewCohortSelected"] = "RAI_DatasetExplorerNewCohortSelected";
      TelemetryEventName["DatasetExplorerNewChartTypeSelected"] = "RAI_DatasetExplorerNewChartTypeSelected";
      TelemetryEventName["TableViewTabSelected"] = "RAI_TableViewTabSelected"; // Feature importances

      TelemetryEventName["AggregateFeatureImportanceTabClick"] = "RAI_AggregateFeatureImportanceTabClick";
      TelemetryEventName["IndividualFeatureImportanceTabClick"] = "RAI_IndividualFeatureImportanceTabClick";
      TelemetryEventName["AggregateFeatureImportanceNewDependenceSelected"] = "RAI_AggregateFeatureImportanceNewDependenceSelected";
      TelemetryEventName["IndividualFeatureImportanceSelectedDatapointsUpdated"] = "RAI_IndividualFeatureImportanceSelectedDatapointsUpdated";
      TelemetryEventName["IndividualFeatureImportanceFeatureImportancePlotClick"] = "RAI_IndividualFeatureImportanceFeatureImportancePlotClick";
      TelemetryEventName["IndividualFeatureImportanceICEPlotClick"] = "RAI_IndividualFeatureImportanceICEPlotClick";
      TelemetryEventName["FeatureImportancesWhatDoValuesMeanCalloutClick"] = "RAI_FeatureImportancesWhatDoValuesMeanCalloutClick";
      TelemetryEventName["FeatureImportancesCrossClassWeightsCalloutClick"] = "RAI_FeatureImportancesCrossClassWeightsCalloutClick";
      TelemetryEventName["FeatureImportancesHowToReadChartCalloutClick"] = "RAI_FeatureImportancesHowToReadChartCalloutClick";
      TelemetryEventName["FeatureImportancesNewDatapointSelectedFromChart"] = "RAI_FeatureImportancesNewDatapointSelectedFromChart"; // Counterfactual

      TelemetryEventName["CounterfactualNewDatapointSelectedFromChart"] = "RAI_CounterfactualNewDatapointSelectedFromChart";
      TelemetryEventName["CounterfactualNewDatapointSelectedFromDropdown"] = "RAI_CounterfactualNewDatapointSelectedFromDropdown";
      TelemetryEventName["CounterfactualCreateWhatIfCounterfactualClick"] = "RAI_CounterfactualCreateWhatIfCounterfactualClick";
      TelemetryEventName["CounterfactualSaveAsNewDatapointClick"] = "RAI_CounterfactualSaveAsNewDatapointClick";
      TelemetryEventName["CounterfactualListSetValueClick"] = "RAI_CounterfactualListSetValueClick"; // Causal analysis

      TelemetryEventName["AggregateCausalTabClick"] = "RAI_AggregateCausalTabClick";
      TelemetryEventName["AggregateCausalWhyIncludeConfoundingFeaturesCalloutClick"] = "RAI_AggregateCausalWhyIncludeConfoundingFeaturesCalloutClick";
      TelemetryEventName["IndividualCausalTabClick"] = "RAI_IndividualCausalTabClick";
      TelemetryEventName["IndividualCausalWhyIncludeConfoundingFeaturesCalloutClick"] = "RAI_IndividualCausalWhyIncludeConfoundingFeaturesCalloutClick";
      TelemetryEventName["IndividualCausalSelectedDatapointUpdatedFromChart"] = "RAI_IndividualCausalSelectedDatapointUpdatedFromChart";
      TelemetryEventName["IndividualCausalSelectedDatapointUpdatedFromDropdown"] = "RAI_IndividualCausalSelectedDatapointUpdatedFromDropdown";
      TelemetryEventName["CausalTreatmentPolicyTabClick"] = "RAI_CausalTreatmentPolicyTabClick";
      TelemetryEventName["CausalTreatmentPolicyNewTreatmentFeatureSelected"] = "RAI_CausalTreatmentPolicyNewTreatmentFeatureSelected";
      TelemetryEventName["LocalCausalEffectsFetchError"] = "LocalCausalEffectsFetchError";
      TelemetryEventName["LocalCausalEffectsFetchSuccess"] = "LocalCausalEffectsFetchSuccess"; // Big data

      TelemetryEventName["CounterfactualsBubblePlotDataFetch"] = "CounterfactualsBubblePlotDataFetch";
      TelemetryEventName["CausalBubblePlotDataFetch"] = "CausalBubblePlotDataFetch";
      TelemetryEventName["FeatureImportanceBubblePlotDataFetch"] = "FeatureImportanceBubblePlotDataFetch";
      TelemetryEventName["DataAnalysisBubblePlotDataFetch"] = "DataAnalysisBubblePlotDataFetch";
      TelemetryEventName["BubblePlotDataFetchError"] = "BubblePlotDataFetchError";
      TelemetryEventName["BubblePlotDataFetchSuccess"] = "BubblePlotDataFetchSuccess";
      TelemetryEventName["LocalExplanationsFetchSuccess"] = "LocalExplanationsFetchSuccess";
      TelemetryEventName["LocalExplanationsFetchError"] = "LocalExplanationsFetchError";
      TelemetryEventName["LocalCounterfactualsFetchSuccess"] = "LocalCounterfactualsFetchSuccess";
      TelemetryEventName["LocalCounterfactualsFetchError"] = "LocalCounterfactualsFetchError";
      TelemetryEventName["ViewBubblePlotButtonClicked"] = "ViewBubblePlotButtonClicked";
    })(exports.TelemetryEventName || (exports.TelemetryEventName = {}));

    // Copyright (c) Microsoft Corporation.
    function generateDefaultChartAxes(jointDataset, chartType) {
      if (!jointDataset.hasDataset) {
        return;
      }

      var chartProps = {
        chartType: chartType ? chartType : exports.ChartTypes.Scatter,
        colorAxis: {
          options: {},
          property: jointDataset.hasPredictedY ? JointDataset.PredictedYLabel : JointDataset.IndexLabel
        },
        xAxis: {
          options: {},
          property: JointDataset.IndexLabel
        },
        yAxis: generateDefaultYAxis(jointDataset)
      };
      return chartProps;
    }
    function generateDefaultYAxis(jointDataset) {
      var _a;

      var yKey = JointDataset.DataLabelRoot + "0";
      var yIsDithered = (_a = jointDataset.metaDict[yKey]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical;
      return {
        options: {
          bin: false,
          dither: yIsDithered
        },
        property: yKey
      };
    }

    // Copyright (c) Microsoft Corporation.

    function getColumnRanges(dataset, modelType) {
      var ranges = {}; // get dataset features' range

      dataset.feature_names.forEach(function (feature) {
        var range = ifEnableLargeData(dataset) ? getDatasetFeatureRangeForLargeData(dataset, feature) : getDatasetFeatureRange(dataset, feature);
        ranges[feature] = range;
      });
      var indexRange = getIndexFeatureRange(dataset);
      ranges[exports.DatasetCohortColumns.Index] = indexRange; // get regression error and classification error ranges

      if (dataset.predicted_y && dataset.true_y) {
        var classificationErrorRange = getClassificationErrorFeatureRange(modelType);

        if (classificationErrorRange) {
          ranges[exports.DatasetCohortColumns.ClassificationError] = classificationErrorRange;
        }

        var regressionErrorRange = getRegressionErrorFeatureRange(dataset, modelType);

        if (regressionErrorRange) {
          ranges[exports.DatasetCohortColumns.RegressionError] = regressionErrorRange;
        } // get feature ranges for predicted Y


        getRange(dataset, modelType, dataset.predicted_y, exports.DatasetCohortColumns.PredictedY, ranges); // get feature ranges for true Y

        getRange(dataset, modelType, dataset.true_y, exports.DatasetCohortColumns.TrueY, ranges);
      }

      return ranges;
    }

    function getIndexFeatureRange(dataset) {
      var _a, _b;

      return !ifEnableLargeData(dataset) ? {
        max: dataset.features.length - 1,
        min: 0,
        rangeType: mlchartlib.RangeTypes.Integer,
        sortedUniqueValues: __spreadArray([], __read(new Array(dataset.features.length).keys()))
      } : {
        max: ((_a = dataset.tabular_dataset_metadata) === null || _a === void 0 ? void 0 : _a.num_rows) ? ((_b = dataset.tabular_dataset_metadata) === null || _b === void 0 ? void 0 : _b.num_rows) - 1 : 0,
        min: 0,
        rangeType: mlchartlib.RangeTypes.Integer
      };
    }

    function getDatasetFeatureRange(dataset, column) {
      var featureIndex = dataset.feature_names.findIndex(function (item) {
        return item === column;
      });
      var featureVector = dataset.features.map(function (row) {
        return row[featureIndex];
      });
      var isCategorical = dataset.categorical_features.includes(column);
      return isCategorical ? {
        rangeType: mlchartlib.RangeTypes.Categorical,
        sortedUniqueValues: _.uniq(featureVector).sort()
      } : {
        max: _.max(featureVector) || 0,
        min: _.min(featureVector) || 0,
        rangeType: featureVector.every(function (val) {
          return Number.isInteger(val);
        }) ? mlchartlib.RangeTypes.Integer : mlchartlib.RangeTypes.Numeric,
        sortedUniqueValues: _.uniq(featureVector).sort(function (a, b) {
          return a - b;
        })
      };
    }

    function getDatasetFeatureRangeForLargeData(dataset, column) {
      var _a;

      var featureRange = (_a = dataset.tabular_dataset_metadata) === null || _a === void 0 ? void 0 : _a.feature_ranges.find(function (obj) {
        return obj.column_name === column;
      });
      var rangeType = featureRange === null || featureRange === void 0 ? void 0 : featureRange.range_type;
      return rangeType === "categorical" ? {
        rangeType: mlchartlib.RangeTypes.Categorical,
        sortedUniqueValues: featureRange === null || featureRange === void 0 ? void 0 : featureRange.unique_values.sort()
      } : {
        max: (featureRange === null || featureRange === void 0 ? void 0 : featureRange.max_value) || 0,
        min: (featureRange === null || featureRange === void 0 ? void 0 : featureRange.min_value) || 0,
        rangeType: Number.isInteger(featureRange === null || featureRange === void 0 ? void 0 : featureRange.max_value) ? mlchartlib.RangeTypes.Integer : mlchartlib.RangeTypes.Numeric
      };
    }

    function getClassificationErrorFeatureRange(modelType) {
      if (IsBinary(modelType)) {
        return {
          rangeType: mlchartlib.RangeTypes.Categorical,
          sortedUniqueValues: [localization.localization.Interpret.Columns.trueNegative, localization.localization.Interpret.Columns.falsePositive, localization.localization.Interpret.Columns.falseNegative, localization.localization.Interpret.Columns.truePositive]
        };
      }

      if (IsMulticlass(modelType)) {
        return {
          rangeType: mlchartlib.RangeTypes.Categorical,
          sortedUniqueValues: [localization.localization.Interpret.Columns.correctlyClassified, localization.localization.Interpret.Columns.misclassified]
        };
      }

      return;
    }

    function getRegressionErrorFeatureRange(dataset, modelType) {
      if (modelType === exports.ModelTypes.Regression && dataset.predicted_y && dataset.true_y) {
        var regressionErrors = [];

        for (var index = 0; index < dataset.features.length; index++) {
          var trueY = dataset.true_y[index];
          var predictedY = dataset.predicted_y[index];

          if (Array.isArray(trueY) || Array.isArray(predictedY)) {
            return;
          }

          if (typeof trueY !== "string" && typeof predictedY !== "string") {
            regressionErrors.push(Math.abs(trueY - predictedY));
          } else {
            regressionErrors.push(0);
          }
        }

        return {
          max: _.max(regressionErrors) || 0,
          min: _.min(regressionErrors) || 0,
          rangeType: mlchartlib.RangeTypes.Numeric,
          sortedUniqueValues: _.uniq(regressionErrors).sort(function (a, b) {
            return a - b;
          })
        };
      }

      return;
    }

    function getRange(dataset, modelType, values, property, ranges) {
      var categoricalValues = dataset.class_names; // if it is 1D array

      if (!Array.isArray(values[0])) {
        if (modelType === exports.ModelTypes.Regression) {
          var numbers_1 = []; // this for loop is only to let it make sure values is a 1D array, so it can be used with _.max and _.min

          values.forEach(function (value) {
            if (!Array.isArray(value)) {
              if (typeof value !== "string") {
                numbers_1.push(value);
              } else {
                numbers_1.push(0);
              }
            }
          });
          ranges[property] = {
            max: _.max(numbers_1) || 0,
            min: _.min(numbers_1) || 0,
            rangeType: numbers_1.every(function (val) {
              return Number.isInteger(val);
            }) ? mlchartlib.RangeTypes.Integer : mlchartlib.RangeTypes.Numeric,
            sortedUniqueValues: _.uniq(numbers_1).sort(function (a, b) {
              return a - b;
            })
          };
        } else {
          ranges[property] = {
            rangeType: mlchartlib.RangeTypes.Categorical,
            sortedUniqueValues: categoricalValues || []
          };
        }
      } // if it is 2D array
      else {
        var length_1 = values[0].length;

        var _loop_1 = function _loop_1(i) {
          var subProperty = property + i.toString();

          if (modelType === exports.ModelTypes.Regression) {
            var vector = values.map(function (row) {
              return row[i];
            });
            ranges[subProperty] = {
              max: _.max(vector) || 0,
              min: _.min(vector) || 0,
              rangeType: vector.every(function (val) {
                return Number.isInteger(val);
              }) ? mlchartlib.RangeTypes.Integer : mlchartlib.RangeTypes.Numeric,
              sortedUniqueValues: _.uniq(vector).sort(function (a, b) {
                return a - b;
              })
            };
          } else if (Array.isArray(dataset.target_column)) {
            categoricalValues = ["", dataset.target_column[i]];
            ranges[subProperty] = {
              rangeType: mlchartlib.RangeTypes.Categorical,
              sortedUniqueValues: categoricalValues
            };
          }
        };

        for (var i = 0; i < length_1; i++) {
          _loop_1(i);
        }
      }
    }

    // Copyright (c) Microsoft Corporation.
    var axisConfigBinOptionsStyles = function axisConfigBinOptionsStyles() {
      return react.mergeStyleSets({
        hideMinMax: {
          height: 48
        },
        minMax: {
          padding: "8px 0"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var SpinButtonStyles = {
      labelWrapper: {
        alignSelf: "center"
      },
      root: {
        display: "inline-flex",
        "float": "right",
        selectors: {
          "> div": {
            maxWidth: "78px"
          }
        }
      },
      spinButtonWrapper: {
        maxWidth: "68px"
      }
    };

    var AxisConfigDialogSpinButton =
    /** @class */
    function (_super) {
      __extends(AxisConfigDialogSpinButton, _super);

      function AxisConfigDialogSpinButton() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.onIncrement = function (value) {
          _this.props.setNumericValue(1, value);
        };

        _this.onDecrement = function (value) {
          _this.props.setNumericValue(-1, value);
        };

        _this.onValidate = function (value) {
          _this.props.setNumericValue(0, value);
        };

        return _this;
      }

      AxisConfigDialogSpinButton.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.SpinButton, {
          labelPosition: react.Position.top,
          label: this.props.label,
          min: this.props.min,
          max: this.props.max,
          styles: this.props.styles,
          value: this.props.value,
          onIncrement: this.onIncrement,
          onDecrement: this.onDecrement,
          onValidate: this.onValidate
        });
      };

      return AxisConfigDialogSpinButton;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    function metaDescription(metaVal) {
      var _a;

      var minVal = getMinValue(metaVal);
      var maxVal = getMaxValue(metaVal);
      var minDescription = localization.localization.formatString(localization.localization.Interpret.Filters.min, minVal);
      var maxDescription = localization.localization.formatString(localization.localization.Interpret.Filters.max, maxVal);
      var categoricalDescription = localization.localization.formatString(localization.localization.Interpret.Filters.uniqueValues, (_a = metaVal === null || metaVal === void 0 ? void 0 : metaVal.sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a.length);
      return {
        categoricalDescription: categoricalDescription,
        maxDescription: maxDescription,
        minDescription: minDescription
      };
    }
    function getMinValue(selectedMeta) {
      if ((selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.treatAsCategorical) || !(selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.featureRange)) {
        return 0;
      }

      if (Number.isInteger(selectedMeta.featureRange.min)) {
        return selectedMeta.featureRange.min;
      }

      return (Math.round(selectedMeta.featureRange.min * 10000) / 10000).toFixed(4);
    }
    function getMaxValue(selectedMeta) {
      if ((selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.treatAsCategorical) || !(selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.featureRange)) {
        return 0;
      }

      if (Number.isInteger(selectedMeta.featureRange.max)) {
        return selectedMeta.featureRange.max;
      }

      return (Math.round(selectedMeta.featureRange.max * 10000) / 10000).toFixed(4);
    }
    function extractSelectionKey(key) {
      if (key === undefined) {
        return exports.ColumnCategories.None;
      }

      if (key.includes(JointDataset.DataLabelRoot)) {
        return JointDataset.DataLabelRoot;
      }

      if (key.includes(JointDataset.ProbabilityYRoot)) {
        return JointDataset.ProbabilityYRoot;
      }

      return key;
    }
    function allowUserInteract(propertyName) {
      return propertyName !== JointDataset.IndexLabel;
    }
    function getBinCountForProperty(selectedMeta, canBin, defaultBinCount) {
      var binCount = undefined;

      if (canBin && !(selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.treatAsCategorical)) {
        binCount = selectedMeta.sortedCategoricalValues !== undefined ? selectedMeta.sortedCategoricalValues.length : defaultBinCount;
      }

      return binCount;
    }
    function constructClassArray(jointDataset) {
      return new Array(jointDataset.predictionClassCount).fill(0).map(function (_, index) {
        var key = JointDataset.ProbabilityYRoot + index.toString();
        return {
          key: key,
          text: jointDataset.metaDict[key].abbridgedLabel
        };
      });
    }
    function constructDataArray(jointDataset, hideDroppedFeatures, droppedFeatureSet) {
      return new Array(jointDataset.datasetFeatureCount).fill(0).map(function (_, index) {
        var key = JointDataset.DataLabelRoot + index.toString();
        return {
          key: key,
          text: jointDataset.metaDict[key].abbridgedLabel
        };
      }).filter(function (item) {
        if (hideDroppedFeatures) {
          return !droppedFeatureSet.has(item.text);
        }

        return true;
      });
    }
    function constructMultilabelArray(jointDataset, label) {
      var multilabelPredictedYArray = [];

      if (jointDataset.numLabels > 1) {
        multilabelPredictedYArray.push.apply(multilabelPredictedYArray, __spreadArray([], __read(new Array(jointDataset.numLabels).fill(0).map(function (_, index) {
          var key = label + index.toString();
          return {
            key: key,
            text: jointDataset.metaDict[key].abbridgedLabel
          };
        }))));
      }

      return multilabelPredictedYArray;
    }

    // Copyright (c) Microsoft Corporation.

    var AxisConfigBinOptions =
    /** @class */
    function (_super) {
      __extends(AxisConfigBinOptions, _super);

      function AxisConfigBinOptions() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.getDitherToggle = function () {
          return /*#__PURE__*/React__default.createElement(react.Toggle, {
            key: "dither-toggle",
            label: localization.localization.Interpret.AxisConfigDialog.ditherLabel,
            inlineLabel: true,
            checked: _this.props.selectedColumn.options.dither,
            onChange: _this.ditherChecked
          });
        };

        _this.displayLogarithmicToggle = function (selectedMeta) {
          var _a, _b, _c;

          var allowLogarithmicScaling = (_a = _this.props.allowLogarithmicScaling) !== null && _a !== void 0 ? _a : true;
          return (((_b = selectedMeta.featureRange) === null || _b === void 0 ? void 0 : _b.rangeType) === mlchartlib.RangeTypes.Integer || ((_c = selectedMeta.featureRange) === null || _c === void 0 ? void 0 : _c.rangeType) === mlchartlib.RangeTypes.Numeric) && allowLogarithmicScaling && allowUserInteract(_this.props.selectedColumn.property);
        };

        _this.displayCategoricalToggle = function (selectedMeta) {
          var _a;

          return ((_a = selectedMeta.featureRange) === null || _a === void 0 ? void 0 : _a.rangeType) === mlchartlib.RangeTypes.Integer && _this.props.allowTreatAsCategorical && allowUserInteract(_this.props.selectedColumn.property);
        };

        _this.setAsCategorical = function (_ev, checked) {
          _this.props.onSetAsCategorical(checked);

          _this.forceUpdate();
        };

        _this.enableLogarithmicScaling = function (_ev, checked) {
          _this.props.onEnableLogarithmicScaling(checked);
        };

        _this.shouldBinClicked = function (_ev, checked) {
          var _a, _b;

          if (checked === undefined) {
            return;
          }

          var property = _this.props.selectedColumn.property;

          if (checked === false) {
            _this.props.onBinCountUpdated(undefined);

            _this.props.onSelectedColumnUpdated({
              options: {
                bin: checked
              },
              property: property,
              type: (_a = _this.props.jointDataset.metaDict[property]) === null || _a === void 0 ? void 0 : _a.AxisType
            });
          } else {
            var binCount = getBinCountForProperty(_this.props.jointDataset.metaDict[property], _this.props.canBin, _this.props.defaultBinCount);

            _this.props.onBinCountUpdated(binCount);

            _this.props.onSelectedColumnUpdated({
              options: {
                bin: checked
              },
              property: property,
              type: (_b = _this.props.jointDataset.metaDict[property]) === null || _b === void 0 ? void 0 : _b.AxisType
            });
          }
        };

        _this.ditherChecked = function (_ev, checked) {
          var _a;

          _this.props.onSelectedColumnUpdated({
            options: {
              dither: checked
            },
            property: _this.props.selectedColumn.property,
            type: (_a = _this.props.jointDataset.metaDict[_this.props.selectedColumn.property]) === null || _a === void 0 ? void 0 : _a.AxisType
          });
        };

        _this.setNumericValue = function (delta, stringVal) {
          var _a;

          if (delta === 0) {
            var number = +stringVal;

            if (!Number.isInteger(number) || number > _this.props.maxHistCols || number < _this.props.minHistCols) {
              return (_a = _this.props.selectedBinCount) === null || _a === void 0 ? void 0 : _a.toString();
            }

            _this.props.onBinCountUpdated(number);
          } else {
            var prevVal = _this.props.selectedBinCount;
            var newVal = prevVal + delta;

            if (newVal > _this.props.maxHistCols || newVal < _this.props.minHistCols) {
              return prevVal.toString();
            }

            _this.props.onBinCountUpdated(newVal);
          }
        };

        return _this;
      }

      AxisConfigBinOptions.prototype.render = function () {
        var selectedMeta = this.props.jointDataset.metaDict[this.props.selectedColumn.property];
        var selectedColumnDesc = metaDescription(selectedMeta);
        var styles = axisConfigBinOptionsStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, null, selectedMeta.treatAsCategorical ? /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: styles.hideMinMax
        }, "\xA0") : /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: styles.minMax
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small",
          nowrap: true,
          block: true
        }, selectedColumnDesc.minDescription), /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small",
          nowrap: true,
          block: true
        }, selectedColumnDesc.maxDescription)), this.displayLogarithmicToggle(selectedMeta) && /*#__PURE__*/React__default.createElement(react.Toggle, {
          key: "logarithmic-toggle",
          label: localization.localization.Interpret.AxisConfigDialog.logarithmicScaling,
          inlineLabel: true,
          checked: selectedMeta.AxisType === exports.AxisTypes.Logarithmic,
          onChange: this.enableLogarithmicScaling
        }), this.displayCategoricalToggle(selectedMeta) && /*#__PURE__*/React__default.createElement(react.Toggle, {
          key: "categorical-toggle",
          label: localization.localization.Interpret.AxisConfigDialog.TreatAsCategorical,
          inlineLabel: true,
          checked: selectedMeta.treatAsCategorical,
          onChange: this.setAsCategorical
        }), (selectedMeta === null || selectedMeta === void 0 ? void 0 : selectedMeta.treatAsCategorical) ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "small"
        }, selectedColumnDesc.categoricalDescription), this.props.canDither && this.getDitherToggle()) : /*#__PURE__*/React__default.createElement(React__default.Fragment, null, this.props.canBin && !this.props.mustBin && /*#__PURE__*/React__default.createElement(react.Toggle, {
          key: "bin-toggle",
          label: localization.localization.Interpret.AxisConfigDialog.binLabel,
          inlineLabel: true,
          checked: this.props.selectedColumn.options.bin,
          onChange: this.shouldBinClicked
        }), (this.props.mustBin || this.props.selectedColumn.options.bin) && this.props.selectedBinCount !== undefined && /*#__PURE__*/React__default.createElement(AxisConfigDialogSpinButton, {
          label: localization.localization.Interpret.AxisConfigDialog.numOfBins,
          max: this.props.maxHistCols,
          min: this.props.minHistCols,
          setNumericValue: this.setNumericValue,
          value: this.props.selectedBinCount.toString()
        }), !(this.props.mustBin || this.props.selectedColumn.options.bin) && this.props.canDither && allowUserInteract(this.props.selectedColumn.property) && this.getDitherToggle()));
      };

      return AxisConfigBinOptions;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    function getLeftItems(removeCount) {
      var leftItems = [cohortKey, JointDataset.IndexLabel, JointDataset.DataLabelRoot, JointDataset.PredictedYLabel, JointDataset.TrueYLabel, JointDataset.ClassificationError, JointDataset.RegressionError, JointDataset.ProbabilityYRoot, exports.ColumnCategories.None];

      if (removeCount) {
        leftItems.pop();
      }

      return leftItems;
    }

    var AxisConfigChoiceGroup =
    /** @class */
    function (_super) {
      __extends(AxisConfigChoiceGroup, _super);

      function AxisConfigChoiceGroup() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.leftItems = getLeftItems(_this.props.removeCount).reduce(function (previousValue, key) {
          var metaVal = _this.props.jointDataset.metaDict[key];
          var ariaLabel = metaVal === null || metaVal === void 0 ? void 0 : metaVal.abbridgedLabel;

          if (key === exports.ColumnCategories.None) {
            ariaLabel += localization.localization.Interpret.AxisConfigDialog.countHelperText;
          } else {
            var metaDesc = metaDescription(metaVal);
            ariaLabel += (metaVal === null || metaVal === void 0 ? void 0 : metaVal.treatAsCategorical) ? metaDesc.categoricalDescription : metaDesc.minDescription + metaDesc.maxDescription;
          }

          if (key === JointDataset.DataLabelRoot && _this.props.orderedGroupTitles.includes(exports.ColumnCategories.Dataset) && _this.props.jointDataset.hasDataset) {
            previousValue.push({
              key: key,
              title: localization.localization.Interpret.Columns.dataset
            });
            return previousValue;
          }

          if (key === JointDataset.ProbabilityYRoot && _this.props.orderedGroupTitles.includes(exports.ColumnCategories.Outcome) && _this.props.jointDataset.hasPredictedProbabilities) {
            previousValue.push({
              key: key,
              title: localization.localization.Interpret.Columns.predictedProbabilities
            });
            return previousValue;
          }

          if (key === JointDataset.PredictedYLabel && _this.props.jointDataset.numLabels > 1) {
            previousValue.push({
              key: key,
              title: localization.localization.Interpret.Columns.predictedLabels
            });
            return previousValue;
          }

          if (key === JointDataset.TrueYLabel && _this.props.jointDataset.numLabels > 1) {
            previousValue.push({
              key: key,
              title: localization.localization.Interpret.Columns.trueLabels
            });
            return previousValue;
          }

          if (metaVal === undefined || !_this.props.orderedGroupTitles.includes(metaVal.category)) {
            return previousValue;
          }

          previousValue.push({
            ariaLabel: ariaLabel,
            key: key,
            title: metaVal.abbridgedLabel
          });
          return previousValue;
        }, []);

        _this.setDefaultStateForKey = function (property) {
          var _a, _b;

          var dither = _this.props.canDither && ((_a = _this.props.jointDataset.metaDict[property]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical);
          var binCount = getBinCountForProperty(_this.props.jointDataset.metaDict[property], _this.props.canBin, _this.props.defaultBinCount);

          _this.props.onBinCountUpdated(binCount);

          _this.props.onSelectedColumnUpdated({
            options: {
              dither: dither
            },
            property: property,
            type: (_b = _this.props.jointDataset.metaDict[property]) === null || _b === void 0 ? void 0 : _b.AxisType
          });
        };

        _this.filterGroupChanged = function (_ev, option) {
          var _a;

          if (typeof (option === null || option === void 0 ? void 0 : option.key) !== "string") {
            return;
          }

          _this.props.onSelectedFilterGroupUpdated(option.key);

          var property = option.key;

          if (property === exports.ColumnCategories.None) {
            _this.props.onBinCountUpdated(undefined);

            _this.props.onSelectedColumnUpdated({
              options: {
                dither: false
              },
              property: property,
              type: (_a = _this.props.jointDataset.metaDict[property]) === null || _a === void 0 ? void 0 : _a.AxisType
            });

            return;
          }

          if (property === JointDataset.DataLabelRoot || property === JointDataset.ProbabilityYRoot || _this.props.jointDataset.numLabels > 1 && (property === JointDataset.TrueYLabel || property === JointDataset.PredictedYLabel)) {
            property += "0";
          }

          _this.setDefaultStateForKey(property);
        };

        return _this;
      }

      AxisConfigChoiceGroup.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(react.ChoiceGroup, {
          label: localization.localization.Interpret.AxisConfigDialog.selectFilter,
          options: this.leftItems.map(function (i) {
            return {
              ariaLabel: i.ariaLabel,
              key: i.key,
              text: i.title
            };
          }),
          onChange: this.filterGroupChanged,
          selectedKey: this.props.selectedFilterGroup
        });
      };

      return AxisConfigChoiceGroup;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    function buildAxisConfigDialogState(jointDataset, props, defaultBinCount, droppedFeatureSet) {
      return {
        binCount: getBinCountForProperty(jointDataset.metaDict[props.selectedColumn.property], props.canBin, defaultBinCount),
        classArray: constructClassArray(jointDataset),
        dataArray: constructDataArray(jointDataset, props.hideDroppedFeatures, droppedFeatureSet),
        multilabelPredictedYArray: constructMultilabelArray(jointDataset, JointDataset.PredictedYLabel),
        multilabelTrueYArray: constructMultilabelArray(jointDataset, JointDataset.TrueYLabel),
        selectedColumn: _.cloneDeep(props.selectedColumn),
        selectedFilterGroup: extractSelectionKey(props.selectedColumn.property)
      };
    }

    // Copyright (c) Microsoft Corporation.

    var AxisConfigDialog =
    /** @class */
    function (_super) {
      __extends(AxisConfigDialog, _super);

      function AxisConfigDialog() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.context = defaultModelAssessmentContext;

        _this.renderFooter = function () {
          return /*#__PURE__*/React__default.createElement(react.Stack, {
            horizontal: true,
            tokens: {
              childrenGap: "l1",
              padding: "l1"
            }
          }, /*#__PURE__*/React__default.createElement(react.PrimaryButton, {
            onClick: _this.saveState,
            ariaLabel: localization.localization.Core.ShiftCohort.applyAriaLabel
          }, localization.localization.Interpret.AxisConfigDialog.apply), /*#__PURE__*/React__default.createElement(react.DefaultButton, {
            onClick: _this.props.onCancel,
            ariaLabel: localization.localization.Interpret.CohortEditor.cancelAriaLabel
          }, localization.localization.Interpret.CohortEditor.cancel));
        };

        _this.renderComboBox = function (options, label) {
          return /*#__PURE__*/React__default.createElement(react.ComboBox, {
            options: options,
            onChange: _this.setSelectedProperty,
            label: label,
            selectedKey: _this.state.selectedColumn.property
          });
        };

        _this.renderClassComboBox = function (options) {
          return _this.renderComboBox(options, localization.localization.Interpret.AxisConfigDialog.selectClass);
        };

        _this.onSelectedColumnUpdated = function (selectedColumn) {
          _this.setState({
            selectedColumn: selectedColumn
          });
        };

        _this.onBinCountUpdated = function (binCount) {
          _this.setState({
            binCount: binCount
          });
        };

        _this.onSelectedFilterGroupUpdated = function (selectedFilterGroup) {
          _this.setState({
            selectedFilterGroup: selectedFilterGroup
          });
        };

        _this.setAsCategorical = function (checked) {
          if (checked === undefined) {
            return;
          }

          _this.context.jointDataset.setTreatAsCategorical(_this.state.selectedColumn.property, checked);

          _this.setState({
            binCount: checked ? undefined : AxisConfigDialog.MIN_HIST_COLS
          });

          _this.forceUpdate();
        };

        _this.enableLogarithmicScaling = function (checked) {
          if (checked === undefined) {
            return;
          }

          _this.context.jointDataset.setLogarithmicScaling(_this.state.selectedColumn.property, checked);

          _this.setState({
            selectedColumn: __assign(__assign({}, _this.state.selectedColumn), {
              type: checked ? exports.AxisTypes.Logarithmic : undefined
            })
          });
        };

        _this.saveState = function () {
          var _a, _b;

          if (_this.state.binCount) {
            _this.context.jointDataset.addBin(_this.state.selectedColumn.property, _this.state.binCount);
          }

          _this.props.onAccept(_this.state.selectedColumn);

          _this.props.onCancel();

          (_b = (_a = _this.context).telemetryHook) === null || _b === void 0 ? void 0 : _b.call(_a, {
            level: exports.TelemetryLevels.ButtonClick,
            type: exports.TelemetryEventName.NewAxisConfigSelected
          });
        };

        _this.setSelectedProperty = function (_event, item) {
          if (typeof (item === null || item === void 0 ? void 0 : item.key) === "string") {
            var property = item.key;

            _this.setDefaultStateForKey(property);
          }
        };

        return _this;
      }

      AxisConfigDialog.prototype.componentDidMount = function () {
        var _a, _b;

        var droppedFeatureSet = new Set((_b = (_a = this.context.jointDataset.datasetMetaData) === null || _a === void 0 ? void 0 : _a.featureMetaData) === null || _b === void 0 ? void 0 : _b.dropped_features);
        this.setState(buildAxisConfigDialogState(this.context.jointDataset, this.props, AxisConfigDialog.DEFAULT_BIN_COUNT, droppedFeatureSet));
      };

      AxisConfigDialog.prototype.render = function () {
        if (!this.state) {
          return React__default.Fragment;
        }

        var isDataColumn = this.state.selectedColumn.property.includes(JointDataset.DataLabelRoot);
        var isProbabilityColumn = this.state.selectedColumn.property.includes(JointDataset.ProbabilityYRoot);
        var isMultilabel = this.context.jointDataset.numLabels > 1;
        var isMultilablePredictedYColumn = isMultilabel && this.state.selectedColumn.property.includes(JointDataset.PredictedYLabel);
        var isMultilableTrueYColumn = isMultilabel && this.state.selectedColumn.property.includes(JointDataset.TrueYLabel);
        return /*#__PURE__*/React__default.createElement(react.Panel, {
          id: "AxisConfigPanel",
          onDismiss: this.props.onCancel,
          isOpen: true,
          onRenderFooter: this.renderFooter,
          isFooterAtBottom: true,
          isLightDismiss: true,
          closeButtonAriaLabel: localization.localization.Common.close
        }, /*#__PURE__*/React__default.createElement(react.Stack, {
          tokens: {
            childrenGap: "l1"
          }
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(AxisConfigChoiceGroup, __assign({}, this.props, {
          jointDataset: this.context.jointDataset,
          defaultBinCount: AxisConfigDialog.DEFAULT_BIN_COUNT,
          selectedFilterGroup: this.state.selectedFilterGroup,
          onBinCountUpdated: this.onBinCountUpdated,
          onSelectedColumnUpdated: this.onSelectedColumnUpdated,
          onSelectedFilterGroupUpdated: this.onSelectedFilterGroupUpdated
        }))), this.state.selectedColumn.property === cohortKey && /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.Interpret.AxisConfigDialog.groupByCohort)), this.state.selectedColumn.property === exports.ColumnCategories.None && /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, null, localization.localization.Interpret.AxisConfigDialog.countHelperText)), this.state.selectedColumn.property !== cohortKey && this.state.selectedColumn.property !== exports.ColumnCategories.None && /*#__PURE__*/React__default.createElement(react.Stack, null, isDataColumn && this.renderComboBox(this.state.dataArray, localization.localization.Interpret.AxisConfigDialog.selectFeature), isProbabilityColumn && this.renderClassComboBox(this.state.classArray), isMultilablePredictedYColumn && this.renderClassComboBox(this.state.multilabelPredictedYArray), isMultilableTrueYColumn && this.renderClassComboBox(this.state.multilabelTrueYArray), /*#__PURE__*/React__default.createElement(AxisConfigBinOptions, __assign({}, this.props, {
          jointDataset: this.context.jointDataset,
          defaultBinCount: AxisConfigDialog.DEFAULT_BIN_COUNT,
          maxHistCols: AxisConfigDialog.MAX_HIST_COLS,
          minHistCols: AxisConfigDialog.MIN_HIST_COLS,
          selectedBinCount: this.state.binCount,
          selectedColumn: this.state.selectedColumn,
          onBinCountUpdated: this.onBinCountUpdated,
          onEnableLogarithmicScaling: this.enableLogarithmicScaling,
          onSelectedColumnUpdated: this.onSelectedColumnUpdated,
          onSetAsCategorical: this.setAsCategorical
        })))));
      };

      AxisConfigDialog.prototype.setDefaultStateForKey = function (property) {
        var _a, _b;

        var dither = this.props.canDither && ((_a = this.context.jointDataset.metaDict[property]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical);
        var binCount = getBinCountForProperty(this.context.jointDataset.metaDict[property], this.props.canBin, AxisConfigDialog.DEFAULT_BIN_COUNT);
        this.setState({
          binCount: binCount,
          selectedColumn: {
            options: {
              dither: dither
            },
            property: property,
            type: (_b = this.context.jointDataset.metaDict[property]) === null || _b === void 0 ? void 0 : _b.AxisType
          }
        });
      };

      AxisConfigDialog.contextType = modelAssessmentContext;
      AxisConfigDialog.MIN_HIST_COLS = 2;
      AxisConfigDialog.MAX_HIST_COLS = 40;
      AxisConfigDialog.DEFAULT_BIN_COUNT = 5;
      return AxisConfigDialog;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    var missingParametersPlaceholderStyles = function missingParametersPlaceholderStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        faintText: {
          fontWeight: "350"
        },
        missingParametersPlaceholder: {
          height: "300px",
          textAlign: "center",
          width: "100%"
        },
        missingParametersPlaceholderSpacer: {
          color: theme.semanticColors.bodyText,
          margin: "25px auto 0 auto",
          maxWidth: "400px",
          padding: "23px",
          width: "fit-content"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var MissingParametersPlaceholder =
    /** @class */
    function (_super) {
      __extends(MissingParametersPlaceholder, _super);

      function MissingParametersPlaceholder() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      MissingParametersPlaceholder.prototype.render = function () {
        var classNames = missingParametersPlaceholderStyles();
        return /*#__PURE__*/React__default.createElement("div", {
          id: "MissingParameterPlaceHolder",
          className: classNames.missingParametersPlaceholder
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.missingParametersPlaceholderSpacer
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "large",
          className: classNames.faintText
        }, this.props.children)));
      };

      return MissingParametersPlaceholder;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var overallMetricChartStyles = function overallMetricChartStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        boldText: {
          fontWeight: "600",
          paddingBottom: "5px"
        },
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          flexGrow: "1"
        },
        chartWithAxes: {
          boxSizing: "border-box",
          display: "flex",
          flexDirection: "column",
          flexGrow: "1",
          paddingTop: "30px"
        },
        chartWithVertical: {
          display: "flex",
          flexDirection: "row",
          flexGrow: "1"
        },
        cohortPickerLabel: {
          fontWeight: "600",
          paddingRight: "8px"
        },
        cohortPickerWrapper: {
          alignItems: "center",
          display: "flex",
          flexDirection: "row",
          height: "32px",
          paddingLeft: "63px",
          paddingTop: "13px"
        },
        helperText: {
          paddingLeft: "15px",
          paddingRight: "160px"
        },
        horizontalAxis: {
          flex: 1,
          textAlign: "center"
        },
        horizontalAxisWithPadding: {
          display: "flex",
          flexDirection: "row",
          paddingBottom: "30px"
        },
        infoIcon: {
          fontSize: "23px",
          height: "23px",
          width: "23px"
        },
        paddingDiv: {
          width: "50px"
        },
        rightPanel: {
          backgroundColor: theme.semanticColors.bodyBackgroundChecked,
          boxSizing: "border-box",
          display: "flex",
          flexDirection: "column",
          height: "100%",
          justifyContent: "space-evenly",
          padding: "10px 15px 11px 30px",
          width: "255px"
        },
        rotatedVerticalBox: {
          marginLeft: "28px",
          position: "absolute",
          textAlign: "center",
          top: "50%",
          transform: "translateX(-50%) translateY(-50%) rotate(270deg)",
          width: "max-content"
        },
        scrollableWrapper: {
          flexGrow: "1",
          maxHeight: "700px",
          overflowY: "scroll"
        },
        scrollContent: {
          alignItems: "stretch",
          display: "flex",
          flexDirection: "row",
          height: "500px",
          width: "100%"
        },
        statsBox: {
          backgroundColor: theme.semanticColors.bodyBackground,
          boxShadow: theme.effects.elevation4,
          boxSizing: "border-box",
          display: "flex",
          flexDirection: "column",
          height: "150px",
          justifyContent: "center",
          padding: "0 10px 0 20px"
        },
        verticalAxis: {
          height: "auto",
          position: "relative",
          top: "0px",
          width: "64px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    function getPrimaryChartColor(theme) {
      return theme.semanticColors.link;
    }
    function getPrimaryBackgroundChartColor(theme) {
      return theme.semanticColors.bodyBackground;
    }
    function getChartColorsMap(theme) {
      return FluentUIStyles.getColorsMap(theme);
    }
    function getChartColors(theme) {
      return FluentUIStyles.getFlunetUIPalette(theme);
    }

    // Copyright (c) Microsoft Corporation.
    function generatePlotlyProps(jointData, chartProps, cohorts, selectedCohortIndex) {
      var _a; // In this view, y will always be categorical (including a binned numeric variable), and could be
      // iterations over the cohorts. We can set y and the y labels before the rest of the char properties.


      var plotlyProps = {
        config: {
          displaylogo: false,
          displayModeBar: false,
          responsive: true
        },
        data: [{}],
        layout: {
          autosize: true,
          dragmode: false,
          hovermode: "closest",
          margin: {
            b: 20,
            l: 10,
            t: 25
          },
          showlegend: false,
          xaxis: {
            color: FluentUIStyles.chartAxisColor,
            gridcolor: "#e5e5e5",
            mirror: true,
            showgrid: true,
            showline: true,
            side: "bottom",
            tickfont: {
              family: FluentUIStyles.fontFamilies,
              size: 11
            }
          },
          yaxis: {
            automargin: true,
            color: FluentUIStyles.chartAxisColor,
            showline: true,
            tickfont: {
              family: FluentUIStyles.fontFamilies,
              size: 11
            }
          }
        }
      };
      var rawX;
      var rawY;
      var yLabels;
      var yLabelIndexes;
      var yMeta = jointData.metaDict[chartProps.yAxis.property];
      var yAxisName = yMeta.label;

      if (chartProps.yAxis.property === cohortKey) {
        rawX = [];
        rawY = [];
        yLabels = [];
        yLabelIndexes = [];
        cohorts.forEach(function (cohort, cohortIndex) {
          var cohortXs = cohort.unwrap(chartProps.xAxis.property, chartProps.chartType === exports.ChartTypes.Histogram);
          var cohortY = new Array(cohortXs.length).fill(cohortIndex);
          rawX.push.apply(rawX, __spreadArray([], __read(cohortXs)));
          rawY.push.apply(rawY, __spreadArray([], __read(cohortY)));
          yLabels === null || yLabels === void 0 ? void 0 : yLabels.push(cohort.name);
          yLabelIndexes === null || yLabelIndexes === void 0 ? void 0 : yLabelIndexes.push(cohortIndex);
        });
      } else {
        var cohort = cohorts[selectedCohortIndex];
        rawY = cohort.unwrap(chartProps.yAxis.property, true);
        rawX = cohort.unwrap(chartProps.xAxis.property, chartProps.chartType === exports.ChartTypes.Histogram);
        yLabels = yMeta.sortedCategoricalValues;
        yLabelIndexes = yLabels === null || yLabels === void 0 ? void 0 : yLabels.map(function (_, index) {
          return index;
        });
      } // The bounding box for the labels on y axis are too small, add some white space as buffer


      yLabels = yLabels === null || yLabels === void 0 ? void 0 : yLabels.map(function (val) {
        var len = val.length;
        var result = " ";

        for (var i = 0; i < len; i += 5) {
          result += " ";
        }

        return result + val;
      });
      plotlyProps.data[0].hoverinfo = "all";
      plotlyProps.data[0].orientation = "h";

      switch (chartProps.chartType) {
        case exports.ChartTypes.Box:
          {
            // Uncomment to turn off tooltips on box plots
            // plotlyProps.layout.hovermode = false;
            plotlyProps.data[0].type = "box";
            plotlyProps.data[0].x = rawX;
            plotlyProps.data[0].y = rawY;
            plotlyProps.data[0].marker = {
              color: getPrimaryChartColor(react.getTheme())
            };

            _.set(plotlyProps, "layout.yaxis.ticktext", yLabels);

            _.set(plotlyProps, "layout.yaxis.tickvals", yLabelIndexes);

            break;
          }

        case exports.ChartTypes.Histogram:
          {
            // for now, treat all bar charts as histograms, the issue with plotly implemented histogram is
            // it tries to bin the data passed to it(we'd like to apply the user specified bins.)
            // We also use the selected Y property as the series prop, since all histograms will just be a count.
            plotlyProps.data[0].type = "bar";
            var x = new Array(rawY.length).fill(1);
            plotlyProps.data[0].text = rawY.map(function (index) {
              return (yLabels === null || yLabels === void 0 ? void 0 : yLabels[index]) || "";
            });
            plotlyProps.data[0].hoverinfo = "all";
            plotlyProps.data[0].hovertemplate = " " + yAxisName + ":%{y}<br> " + localization.localization.Interpret.Charts.count + ": %{x}<br>";
            plotlyProps.data[0].y = rawY;
            plotlyProps.data[0].x = x;
            plotlyProps.data[0].marker = {};

            _.set(plotlyProps, "layout.yaxis.ticktext", yLabels);

            _.set(plotlyProps, "layout.yaxis.tickvals", yLabelIndexes);

            var styles = (_a = jointData.metaDict[chartProps.xAxis.property].sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a.map(function (label, index) {
              return {
                target: index,
                value: {
                  marker: {
                    color: FluentUIStyles.fluentUIColorPalette[index]
                  },
                  name: label
                }
              };
            });
            var transforms = [{
              aggregations: [{
                func: "sum",
                target: "x"
              }],
              groups: rawY,
              type: "aggregate"
            }, {
              groups: rawX,
              styles: styles,
              type: "groupby"
            }];

            if (plotlyProps.layout) {
              plotlyProps.layout.showlegend = true;
            }

            plotlyProps.data[0].transforms = transforms;
            break;
          }
      }

      return plotlyProps;
    }
    function generateDefaultChartAxes$1(context) {
      if (!context.jointDataset.hasPredictedY) {
        return undefined;
      }

      var bestModelMetricKey;

      if (IsBinary(context.modelMetadata.modelType) && context.jointDataset.hasPredictedProbabilities) {
        bestModelMetricKey = JointDataset.ProbabilityYRoot + "0";
      } else if (context.modelMetadata.modelType === exports.ModelTypes.Regression) {
        if (context.jointDataset.hasPredictedY && context.jointDataset.hasTrueY) {
          bestModelMetricKey = JointDataset.RegressionError;
        } else {
          bestModelMetricKey = JointDataset.PredictedYLabel;
        }
      } else {
        bestModelMetricKey = JointDataset.PredictedYLabel;
      } // not handling multiclass at this time


      var chartProps = {
        chartType: context.jointDataset.metaDict[bestModelMetricKey].isCategorical ? exports.ChartTypes.Histogram : exports.ChartTypes.Box,
        xAxis: {
          options: {
            bin: false
          },
          property: bestModelMetricKey
        },
        yAxis: {
          options: {},
          property: cohortKey
        }
      };
      return chartProps;
    }
    function generateMetricsList(context, selectedCohortIndex, yAxisProperty, chartProps) {
      if (!chartProps) {
        return [];
      }

      if (chartProps.yAxis.property === cohortKey) {
        var indexes_1 = context.errorCohorts.map(function (errorCohort) {
          return errorCohort.cohort.unwrap(JointDataset.IndexLabel);
        });
        return generateMetrics(context.jointDataset, indexes_1, context.modelMetadata.modelType);
      }

      var cohort = context.errorCohorts[selectedCohortIndex].cohort;
      var yValues = cohort.unwrap(yAxisProperty, true);
      var indexArray = cohort.unwrap(JointDataset.IndexLabel);
      var sortedCategoricalValues = context.jointDataset.metaDict[yAxisProperty].sortedCategoricalValues;
      var indexes = sortedCategoricalValues === null || sortedCategoricalValues === void 0 ? void 0 : sortedCategoricalValues.map(function (_, labelIndex) {
        return indexArray.filter(function (_, index) {
          return yValues[index] === labelIndex;
        });
      });
      return generateMetrics(context.jointDataset, indexes || [], context.modelMetadata.modelType);
    }

    // Copyright (c) Microsoft Corporation.

    var OverallMetricChart =
    /** @class */
    function (_super) {
      __extends(OverallMetricChart, _super);

      function OverallMetricChart(props) {
        var _this = _super.call(this, props) || this;

        _this.context = defaultModelAssessmentContext;
        _this.chartAndConfigsId = "OverallMetricChart";

        _this.setSelectedCohort = function (_, item) {
          if (typeof (item === null || item === void 0 ? void 0 : item.key) === "number") {
            _this.setState({
              selectedCohortIndex: item.key
            });
          }
        };

        _this.setXOpen = function () {
          if (_this.state.xDialogOpen === false) {
            _this.setState({
              xDialogOpen: true
            });

            return;
          }

          _this.setState({
            xDialogOpen: false
          });
        };

        _this.setXClose = function () {
          _this.setState({
            xDialogOpen: false
          });
        };

        _this.setYOpen = function () {
          if (_this.state.yDialogOpen === false) {
            _this.setState({
              yDialogOpen: true
            });

            return;
          }

          _this.setState({
            yDialogOpen: false
          });
        };

        _this.setYClose = function () {
          _this.setState({
            yDialogOpen: false
          });
        };

        _this.onXSet = function (value) {
          var _a;

          var newProps = _.cloneDeep(_this.state.chartProps);

          if (!newProps) {
            return;
          }

          newProps.xAxis = value;
          newProps.chartType = ((_a = _this.context.jointDataset.metaDict[value.property]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical) ? exports.ChartTypes.Histogram : exports.ChartTypes.Box;

          _this.setState({
            chartProps: newProps,
            xDialogOpen: false
          });
        };

        _this.onYSet = function (value) {
          var newProps = _.cloneDeep(_this.state.chartProps);

          if (!newProps) {
            return;
          }

          newProps.yAxis = value;

          _this.setState({
            chartProps: newProps,
            yDialogOpen: false
          });
        };

        _this.state = {
          chartProps: undefined,
          selectedCohortIndex: 0,
          xDialogOpen: false,
          yDialogOpen: false
        };
        return _this;
      }

      OverallMetricChart.prototype.componentDidMount = function () {
        this.setState({
          chartProps: generateDefaultChartAxes$1(this.context)
        });
      };

      OverallMetricChart.prototype.render = function () {
        var classNames = overallMetricChartStyles();

        if (!this.context.jointDataset.hasPredictedY) {
          return /*#__PURE__*/React__default.createElement(MissingParametersPlaceholder, null, localization.localization.Interpret.ModelPerformance.missingParameters);
        }

        if (this.state.chartProps === undefined) {
          return /*#__PURE__*/React__default.createElement("div", null);
        }

        var plotlyProps = generatePlotlyProps(this.context.jointDataset, this.state.chartProps, this.context.errorCohorts.map(function (errorCohort) {
          return errorCohort.cohort;
        }), this.state.selectedCohortIndex);
        var metricsList = generateMetricsList(this.context, this.state.selectedCohortIndex, this.state.chartProps.yAxis.property, this.state.chartProps).reverse();
        var height = Math.max(400, 160 * metricsList.length) + "px";
        var cohortOptions = this.state.chartProps.yAxis.property !== cohortKey ? this.context.errorCohorts.map(function (errorCohort, index) {
          return {
            key: index,
            text: errorCohort.cohort.name
          };
        }) : undefined;
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, cohortOptions && /*#__PURE__*/React__default.createElement("div", {
          className: classNames.cohortPickerWrapper
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "mediumPlus",
          className: classNames.cohortPickerLabel
        }, localization.localization.Interpret.ModelPerformance.cohortPickerLabel), /*#__PURE__*/React__default.createElement(react.Dropdown, {
          styles: {
            dropdown: {
              width: 150
            }
          },
          options: cohortOptions,
          selectedKey: this.state.selectedCohortIndex,
          onChange: this.setSelectedCohort,
          id: "modelPerformanceCohortPicker",
          ariaLabel: localization.localization.Interpret.DatasetExplorer.datasetCohortDropdown
        })), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.chartWithAxes,
          id: this.chartAndConfigsId
        }, this.state.yDialogOpen && /*#__PURE__*/React__default.createElement(AxisConfigDialog, {
          orderedGroupTitles: [exports.ColumnCategories.Cohort, exports.ColumnCategories.Dataset],
          selectedColumn: this.state.chartProps.yAxis,
          canBin: this.state.chartProps.chartType === exports.ChartTypes.Histogram || this.state.chartProps.chartType === exports.ChartTypes.Box,
          mustBin: this.state.chartProps.chartType === exports.ChartTypes.Histogram || this.state.chartProps.chartType === exports.ChartTypes.Box,
          allowTreatAsCategorical: true,
          canDither: this.state.chartProps.chartType === exports.ChartTypes.Scatter,
          onAccept: this.onYSet,
          onCancel: this.setYClose
        }), this.state.xDialogOpen && /*#__PURE__*/React__default.createElement(AxisConfigDialog, {
          orderedGroupTitles: [exports.ColumnCategories.Outcome],
          selectedColumn: this.state.chartProps.xAxis,
          canBin: false,
          mustBin: false,
          allowTreatAsCategorical: true,
          canDither: this.state.chartProps.chartType === exports.ChartTypes.Scatter,
          onAccept: this.onXSet,
          onCancel: this.setXClose
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.chartWithVertical
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.verticalAxis
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.rotatedVerticalBox
        }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.setYOpen,
          text: this.context.jointDataset.metaDict[this.state.chartProps.yAxis.property].abbridgedLabel,
          title: this.context.jointDataset.metaDict[this.state.chartProps.yAxis.property].label
        })))), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.scrollableWrapper
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.scrollContent,
          style: {
            height: height
          }
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.chart
        }, /*#__PURE__*/React__default.createElement(mlchartlib.AccessibleChart, {
          plotlyProps: plotlyProps,
          theme: react.getTheme()
        })), this.context.modelMetadata.modelType !== exports.ModelTypes.Multiclass && /*#__PURE__*/React__default.createElement("div", {
          className: classNames.rightPanel
        }, !this.context.jointDataset.hasTrueY && /*#__PURE__*/React__default.createElement(MissingParametersPlaceholder, null, localization.localization.Interpret.ModelPerformance.missingTrueY), this.context.jointDataset.hasTrueY && metricsList.map(function (stats, index) {
          return /*#__PURE__*/React__default.createElement("div", {
            className: classNames.statsBox,
            key: index
          }, stats.map(function (labeledStat, statIndex) {
            return /*#__PURE__*/React__default.createElement(react.Text, {
              block: true,
              key: statIndex
            }, localization.localization.formatString(labeledStat.label, labeledStat.stat.toLocaleString(undefined, {
              maximumFractionDigits: 3
            })));
          }));
        }))))), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.horizontalAxisWithPadding
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.paddingDiv
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.horizontalAxis
        }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.setXOpen,
          text: this.context.jointDataset.metaDict[this.state.chartProps.xAxis.property].abbridgedLabel,
          title: this.context.jointDataset.metaDict[this.state.chartProps.xAxis.property].label
        }))))));
      };

      OverallMetricChart.contextType = modelAssessmentContext;
      return OverallMetricChart;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var AxisConfig =
    /** @class */
    function (_super) {
      __extends(AxisConfig, _super);

      function AxisConfig(props) {
        var _this = _super.call(this, props) || this;

        _this.onAccept = function (newConfig) {
          _this.setState({
            dialogOpen: false
          });

          _this.props.onAccept(newConfig);
        };

        _this.setOpen = function () {
          _this.setState({
            dialogOpen: true
          });
        };

        _this.setClose = function () {
          _this.setState({
            dialogOpen: false
          });
        };

        _this.state = {
          dialogOpen: false
        };
        return _this;
      }

      AxisConfig.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.setOpen,
          text: this.props.buttonText,
          title: this.props.buttonTitle,
          disabled: this.props.disabled
        }), this.state.dialogOpen && /*#__PURE__*/React__default.createElement(AxisConfigDialog, {
          onCancel: this.setClose,
          orderedGroupTitles: this.props.orderedGroupTitles,
          selectedColumn: this.props.selectedColumn,
          canBin: this.props.canBin,
          mustBin: this.props.mustBin,
          removeCount: this.props.removeCount,
          allowTreatAsCategorical: this.props.allowTreatAsCategorical,
          allowLogarithmicScaling: this.props.allowLogarithmicScaling,
          canDither: this.props.canDither,
          hideDroppedFeatures: this.props.hideDroppedFeatures,
          onAccept: this.onAccept
        }));
      };

      return AxisConfig;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var ErrorDialog =
    /** @class */
    function (_super) {
      __extends(ErrorDialog, _super);

      function ErrorDialog() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      ErrorDialog.prototype.render = function () {
        var dialogContentProps = {
          subText: this.props.subText,
          title: this.props.title,
          type: react.DialogType.normal
        };
        var modalProps = {
          isBlocking: false
        };
        return /*#__PURE__*/React__default.createElement(react.Dialog, {
          maxWidth: "480px",
          minWidth: "480px",
          hidden: false,
          dialogContentProps: dialogContentProps,
          modalProps: modalProps
        }, /*#__PURE__*/React__default.createElement(react.DialogFooter, null, /*#__PURE__*/React__default.createElement(react.DefaultButton, {
          onClick: this.props.onClose,
          text: this.props.cancelButtonText
        })));
      };

      return ErrorDialog;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var ExpandableText =
    /** @class */
    function (_super) {
      __extends(ExpandableText, _super);

      function ExpandableText() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.toggle = function () {
          _this.setState(function (prev) {
            return {
              expanded: !(prev === null || prev === void 0 ? void 0 : prev.expanded)
            };
          });
        };

        return _this;
      }

      ExpandableText.prototype.render = function () {
        var _a, _b;

        return /*#__PURE__*/React__default.createElement(react.Text, __assign({}, this.props), this.props.iconName && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Icon, {
          iconName: this.props.iconName
        }), "\xA0"), this.props.children, ((_a = this.state) === null || _a === void 0 ? void 0 : _a.expanded) && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, "\xA0", this.props.expandedText), this.props.expandedText && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, "\xA0", /*#__PURE__*/React__default.createElement(react.Link, {
          onClick: this.toggle
        }, ((_b = this.state) === null || _b === void 0 ? void 0 : _b.expanded) ? localization.localization.Core.ExpandableText.SeeLess : localization.localization.Core.ExpandableText.SeeMore)));
      };

      return ExpandableText;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var headerWithInfoStyles = function headerWithInfoStyles() {
      return react.mergeStyleSets({
        boldText: {
          fontWeight: "600",
          paddingBottom: "5px"
        },
        callout: {
          margin: "-18px 0 0 0"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.
    var labelWithCalloutStyles = function labelWithCalloutStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        callout: {
          backgroundColor: theme.semanticColors.bodyBackground,
          boxSizing: "border-box",
          display: "flex",
          flexDirection: "column",
          padding: "10px 20px",
          width: "200px"
        },
        calloutActions: {
          marginTop: 20,
          position: "relative",
          whiteSpace: "nowrap",
          width: "100%"
        },
        calloutContainer: {
          display: "inline-flex",
          paddingTop: "10px"
        },
        calloutHeader: [FluentUIStyles.calloutHeader],
        calloutInner: [FluentUIStyles.calloutInner],
        calloutLink: [theme.fonts.medium, {
          color: theme.semanticColors.bodyText
        }],
        calloutText: {
          fontWeight: "600",
          paddingTop: "5px"
        },
        calloutTitle: [FluentUIStyles.calloutTitle],
        calloutWrapper: [FluentUIStyles.calloutWrapper],
        infoButton: {
          margin: "5px",
          padding: "8px 10px",
          width: "fit-content"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var LabelWithCallout =
    /** @class */
    function (_super) {
      __extends(LabelWithCallout, _super);

      function LabelWithCallout(props) {
        var _this = _super.call(this, props) || this;

        _this.toggleCallout = function () {
          var _a, _b;

          if (!_this.state.showCallout) {
            (_b = (_a = _this.props).telemetryHook) === null || _b === void 0 ? void 0 : _b.call(_a, {
              level: exports.TelemetryLevels.ButtonClick,
              type: _this.props.calloutEventName
            });
          }

          _this.setState({
            showCallout: !_this.state.showCallout
          });
        };

        _this.state = {
          showCallout: false
        };
        return _this;
      }

      LabelWithCallout.prototype.render = function () {
        var classNames = labelWithCalloutStyles();
        var id = "callout-" + uuid.v4();
        var iconButtonId = this.props.iconButtonId ? this.props.iconButtonId : "label-callout-info";
        var calloutTarget = this.props.calloutTarget ? this.props.calloutTarget : "#" + id;
        return /*#__PURE__*/React__default.createElement("div", {
          className: classNames.calloutContainer
        }, this.props.type === "button" ? /*#__PURE__*/React__default.createElement(react.CommandBarButton, {
          iconProps: {
            iconName: "Info"
          },
          id: id,
          className: classNames.infoButton,
          text: this.props.label,
          onClick: this.toggleCallout
        }) : /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(react.Text, {
          id: id,
          variant: "medium",
          className: classNames.calloutText
        }, this.props.label), /*#__PURE__*/React__default.createElement(react.IconButton, {
          id: iconButtonId,
          iconProps: {
            iconName: "Info"
          },
          title: localization.localization.Interpret.calloutTitle,
          onClick: this.toggleCallout
        })), this.state.showCallout && /*#__PURE__*/React__default.createElement(react.Callout, {
          doNotLayer: !this.props.renderOnNewLayer,
          target: calloutTarget,
          setInitialFocus: true,
          onDismiss: this.toggleCallout,
          role: "alertdialog",
          directionalHint: this.props.directionalHint,
          styles: {
            container: FluentUIStyles.calloutContainer
          }
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.calloutWrapper
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.calloutHeader
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          className: classNames.calloutTitle
        }, this.props.calloutTitle)), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.calloutInner
        }, this.props.children))));
      };

      return LabelWithCallout;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var HeaderWithInfo =
    /** @class */
    function (_super) {
      __extends(HeaderWithInfo, _super);

      function HeaderWithInfo() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      HeaderWithInfo.prototype.render = function () {
        var styles = headerWithInfoStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          id: this.props.id
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, null, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "large",
          className: styles.boldText
        }, this.props.title)), /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: styles.callout
        }, /*#__PURE__*/React__default.createElement(LabelWithCallout, {
          label: "",
          calloutTitle: this.props.calloutTitle,
          type: "button"
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          block: true
        }, this.props.calloutDescription), /*#__PURE__*/React__default.createElement(react.Link, {
          href: this.props.calloutLink,
          target: "_blank"
        }, this.props.calloutLinkText))));
      };

      return HeaderWithInfo;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var interactiveLegendStyles = function interactiveLegendStyles(activated, color) {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        circleColorBox: {
          backgroundColor: color,
          borderRadius: "6px",
          cursor: "pointer",
          display: "inline-block",
          height: "12px",
          margin: "11px 4px 11px 8px",
          opacity: activated ? 1 : 0.4,
          width: "12px"
        },
        clickTarget: {
          alignItems: "center",
          cursor: "pointer",
          display: "flex",
          flex: "1",
          flexDirection: "row"
        },
        deleteButton: {
          color: theme.semanticColors.errorText,
          display: "inline-block",
          width: "16px"
        },
        diamondColorBox: {
          backgroundColor: color,
          cursor: "pointer",
          display: "inline-block",
          height: "11px",
          margin: "11px 4px 11px 8px",
          opacity: activated ? 1 : 0.4,
          transform: "rotate(45deg)",
          width: "11px"
        },
        disabledItem: {
          alignItems: "center",
          backgroundColor: theme.semanticColors.disabledBackground,
          display: "flex",
          flexDirection: "row",
          height: "34px",
          marginBottom: "1px"
        },
        editButton: {
          color: theme.semanticColors.buttonText,
          display: "inline-block",
          width: "16px"
        },
        inactiveItem: {
          alignItems: "center",
          color: theme.semanticColors.primaryButtonTextDisabled,
          display: "flex",
          flexDirection: "row",
          height: "34px",
          marginBottom: "1px"
        },
        item: {
          alignItems: "center",
          display: "flex",
          flexDirection: "row",
          height: "34px",
          marginBottom: "1px"
        },
        label: {
          cursor: "pointer",
          display: "inline-block",
          flex: "1"
        },
        root: {
          paddingBottom: "8px",
          paddingTop: "8px"
        },
        squareColorBox: {
          backgroundColor: color,
          cursor: "pointer",
          display: "inline-block",
          height: "11px",
          margin: "11px 4px 11px 8px",
          opacity: activated ? 1 : 0.4,
          width: "11px"
        },
        triangleColorBox: {
          borderBottom: "12px solid",
          borderLeft: "6px solid transparent",
          borderRight: "6px solid transparent",
          color: color,
          height: 0,
          margin: "11px 4px 11px 8px",
          opacity: activated ? 1 : 0.4,
          width: 0
        },
        triangleDownColorBox: {
          borderLeft: "6px solid transparent",
          borderRight: "6px solid transparent",
          borderTop: "12px solid",
          color: color,
          height: 0,
          margin: "11px 4px 11px 8px",
          opacity: activated ? 1 : 0.4,
          width: 0
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var InteractiveLegendClickButton =
    /** @class */
    function (_super) {
      __extends(InteractiveLegendClickButton, _super);

      function InteractiveLegendClickButton() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.classes = interactiveLegendStyles(_this.props.activated);

        _this.onClick = function () {
          var _a, _b;

          (_b = (_a = _this.props).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, _this.props.index);
        };

        return _this;
      }

      InteractiveLegendClickButton.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement("div", {
          className: this.classes.clickTarget,
          onClick: this.onClick,
          onKeyUp: undefined,
          role: "checkbox",
          "aria-checked": this.props.activated,
          tabIndex: this.props.index
        }, /*#__PURE__*/React__default.createElement("div", {
          className: this.props.colorBoxClassName || this.classes.circleColorBox
        }), /*#__PURE__*/React__default.createElement(react.Text, {
          nowrap: true,
          variant: "medium",
          className: this.classes.label
        }, this.props.name));
      };

      return InteractiveLegendClickButton;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var InteractiveLegendEditAndDeleteButton =
    /** @class */
    function (_super) {
      __extends(InteractiveLegendEditAndDeleteButton, _super);

      function InteractiveLegendEditAndDeleteButton() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.classes = interactiveLegendStyles();

        _this.onEdit = function () {
          var _a, _b;

          (_b = (_a = _this.props).onEdit) === null || _b === void 0 ? void 0 : _b.call(_a, _this.props.index);
        };

        _this.onDelete = function () {
          var _a, _b;

          (_b = (_a = _this.props).onDelete) === null || _b === void 0 ? void 0 : _b.call(_a, _this.props.index);
        };

        return _this;
      }

      InteractiveLegendEditAndDeleteButton.prototype.render = function () {
        return /*#__PURE__*/React__default.createElement("div", null, this.props.onEdit !== undefined && /*#__PURE__*/React__default.createElement(react.IconButton, {
          className: this.classes.editButton,
          iconProps: {
            iconName: "Edit",
            style: {
              fontSize: "10px"
            }
          },
          onClick: this.onEdit
        }), this.props.onDelete !== undefined && /*#__PURE__*/React__default.createElement(react.IconButton, {
          className: this.classes.deleteButton,
          iconProps: {
            iconName: "Clear",
            style: {
              fontSize: "10px"
            }
          },
          onClick: this.onDelete
        }));
      };

      return InteractiveLegendEditAndDeleteButton;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    function getColorBoxClassName(index, color, activated) {
      var classes = interactiveLegendStyles(activated, color); // this is used as data series symbol in the side panel, the sequence needs to be consist with the sequence of symbols in ScatterUtils getScatterSymbols()

      var modIndex = index % 5;

      switch (modIndex) {
        case 1:
          return classes.squareColorBox;

        case 2:
          return classes.diamondColorBox;

        case 3:
          return classes.triangleColorBox;

        case 4:
          return classes.triangleDownColorBox;

        default:
          return classes.circleColorBox;
      }
    }

    // Copyright (c) Microsoft Corporation.

    (function (SortingState) {
      SortingState["Ascending"] = "ascending";
      SortingState["Descending"] = "descending";
      SortingState["None"] = "none";
    })(exports.SortingState || (exports.SortingState = {}));

    var InteractiveLegend =
    /** @class */
    function (_super) {
      __extends(InteractiveLegend, _super);

      function InteractiveLegend() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.classes = interactiveLegendStyles();
        return _this;
      }

      InteractiveLegend.prototype.render = function () {
        var _this = this;

        return /*#__PURE__*/React__default.createElement("div", {
          id: "iterative-container",
          className: this.classes.root
        }, this.props.items.map(function (item, index) {
          return _this.buildRowElement(item, index);
        }));
      };

      InteractiveLegend.prototype.buildRowElement = function (item, index) {
        var colorBoxClassName = getColorBoxClassName(index, item.color, !item.disabled);

        if (item.disabled) {
          return /*#__PURE__*/React__default.createElement("div", {
            className: this.classes.disabledItem,
            title: item.disabledMessage || "",
            key: index
          }, /*#__PURE__*/React__default.createElement("div", {
            className: colorBoxClassName
          }), /*#__PURE__*/React__default.createElement(react.Text, {
            nowrap: true,
            variant: "medium",
            className: this.classes.label
          }, item.name), /*#__PURE__*/React__default.createElement(InteractiveLegendEditAndDeleteButton, {
            index: item.index,
            onDelete: item.onDelete,
            onEdit: item.onEdit
          }));
        }

        var rootClass = item.activated === false ? this.classes.inactiveItem : this.classes.item;
        return /*#__PURE__*/React__default.createElement("div", {
          className: rootClass,
          key: index
        }, /*#__PURE__*/React__default.createElement(InteractiveLegendClickButton, {
          activated: item.activated,
          index: index,
          name: item.name,
          colorBoxClassName: colorBoxClassName,
          onClick: item.onClick
        }), /*#__PURE__*/React__default.createElement(InteractiveLegendEditAndDeleteButton, {
          index: item.index,
          onDelete: item.onDelete,
          onEdit: item.onEdit
        }));
      };

      return InteractiveLegend;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.

    var NoData =
    /** @class */
    function (_super) {
      __extends(NoData, _super);

      function NoData() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      NoData.prototype.render = function () {
        return localization.localization.Core.NoData.Title;
      };

      return NoData;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    var SVGToolTipStyles = function SVGToolTipStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        tooltipRect: {
          outline: "1px solid ",
          outlineColor: theme.palette.themeLighterAlt
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var SVGToolTip =
    /** @class */
    function (_super) {
      __extends(SVGToolTip, _super);

      function SVGToolTip(props) {
        var _this = _super.call(this, props) || this;

        _this.onMouseEnter = function () {
          var _a;

          var element = _this.props.target.current;

          if (element === null || element === void 0 ? void 0 : element.ownerSVGElement) {
            var rect = element.getBoundingClientRect();

            var pos = _this.svgPoint(element.ownerSVGElement, rect.x + rect.width + ((_a = _this.props.spacing) !== null && _a !== void 0 ? _a : 0), rect.y);

            _this.setState({
              isMouseOver: true,
              svgElement: element.ownerSVGElement,
              x: pos.x,
              y: pos.y
            });
          }
        };

        _this.onMouseLeave = function () {
          _this.setState({
            isMouseOver: false
          });
        };

        _this.svgPoint = function (svg, x, y) {
          var ctm = svg.getScreenCTM();

          if (svg.createSVGPoint && ctm) {
            var point = svg.createSVGPoint();
            point.x = x;
            point.y = y;
            point = point.matrixTransform(ctm.inverse());
            return {
              x: point.x,
              y: point.y
            };
          }

          var rect = svg.getBoundingClientRect();
          return {
            x: x - rect.left - svg.clientLeft,
            y: y - rect.top - svg.clientTop
          };
        };

        _this.state = {
          isMouseOver: false,
          svgElement: undefined,
          x: 0,
          y: 0
        };
        return _this;
      }

      SVGToolTip.prototype.componentDidMount = function () {
        var element = this.props.target.current;

        if (element) {
          element.addEventListener("mouseenter", this.onMouseEnter);
          element.addEventListener("focus", this.onMouseEnter);
          element.addEventListener("mouseleave", this.onMouseLeave);
          element.addEventListener("focusout", this.onMouseLeave);
        }
      };

      SVGToolTip.prototype.render = function () {
        if (!this.state.svgElement || !this.state.isMouseOver) {
          return React__default.Fragment;
        }

        var classNames = SVGToolTipStyles();
        var theme = react.getTheme();
        return /*#__PURE__*/ReactDom.createPortal( /*#__PURE__*/React__default.createElement("g", {
          style: {
            transform: "translate(" + this.state.x + "px, " + this.state.y + "px)"
          },
          pointerEvents: "none" // tooltip should never grab mouse > prevent flickering

        }, /*#__PURE__*/React__default.createElement("rect", {
          className: classNames.tooltipRect,
          strokeWidth: "2",
          fill: theme.semanticColors.bodyBackground,
          height: "100",
          width: "80",
          y: "0",
          x: "0"
        }), this.props.children), this.state.svgElement);
      };

      return SVGToolTip;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var dataBalanceExperienceFlight = "dataBalanceExperience";
    var featureFlightSeparator = "&"; // add more entries for new feature flights

    var featureFlights = [dataBalanceExperienceFlight];
    function parseFeatureFlights(featureFlights) {
      if (featureFlights) {
        return featureFlights.split(featureFlightSeparator);
      }

      return [];
    }
    function isFlightActive(flight, activeFeatureFlights) {
      if (activeFeatureFlights) {
        return activeFeatureFlights.includes(flight);
      }

      return false;
    }

    // Copyright (c) Microsoft Corporation.

    (function (ComparisonTypes) {
      /**
       * (less than)
       */
      ComparisonTypes["LT"] = "lt";
      /**
       * (less than or equal to)
       */

      ComparisonTypes["LTE"] = "lte";
      /**
       * (greater than)
       */

      ComparisonTypes["GT"] = "gt";
      /**
       * (greater than or equal to)
       */

      ComparisonTypes["GTE"] = "gte";
      /**
       * (equal to)
       */

      ComparisonTypes["EQ"] = "eq";
      /**
       * (not equal to)
       */

      ComparisonTypes["NE"] = "ne";
      /**
       * (in the set)
       */

      ComparisonTypes["IN"] = "in";
      /**
       * (not in the set)
       */

      ComparisonTypes["NIN"] = "nin";
      /**
       * (int the range)
       */

      ComparisonTypes["RG"] = "rg";
      /**
       * (not in the range)
       */

      ComparisonTypes["NRG"] = "nrg";
    })(exports.ComparisonTypes || (exports.ComparisonTypes = {}));

    function flipComparisonType(type) {
      switch (type) {
        case exports.ComparisonTypes.LT:
          return exports.ComparisonTypes.GTE;

        case exports.ComparisonTypes.LTE:
          return exports.ComparisonTypes.GT;

        case exports.ComparisonTypes.GT:
          return exports.ComparisonTypes.LTE;

        case exports.ComparisonTypes.GTE:
          return exports.ComparisonTypes.LT;

        case exports.ComparisonTypes.EQ:
          return exports.ComparisonTypes.NE;

        case exports.ComparisonTypes.NE:
          return exports.ComparisonTypes.EQ;

        case exports.ComparisonTypes.IN:
          return exports.ComparisonTypes.NIN;

        case exports.ComparisonTypes.NIN:
          return exports.ComparisonTypes.IN;

        case exports.ComparisonTypes.RG:
          return exports.ComparisonTypes.NRG;

        case exports.ComparisonTypes.NRG:
          return exports.ComparisonTypes.RG;

        default:
          return undefined;
      }
    }

    // Copyright (c) Microsoft Corporation.

    (function (PredictionTypes) {
      PredictionTypes["BinaryClassification"] = "binaryClassification";
      PredictionTypes["Regression"] = "regression";
      PredictionTypes["Probability"] = "probability";
    })(exports.PredictionTypes || (exports.PredictionTypes = {}));

    // Copyright (c) Microsoft Corporation.

    (function (DatasetTaskType) {
      DatasetTaskType["Regression"] = "regression";
      DatasetTaskType["Classification"] = "classification";
      DatasetTaskType["ImageClassification"] = "image_classification";
      DatasetTaskType["TextClassification"] = "text_classification";
      DatasetTaskType["MultilabelTextClassification"] = "multilabel_text_classification";
      DatasetTaskType["MultilabelImageClassification"] = "multilabel_image_classification";
      DatasetTaskType["Forecasting"] = "forecasting";
      DatasetTaskType["ObjectDetection"] = "object_detection";
      DatasetTaskType["QuestionAnswering"] = "question_answering";
      DatasetTaskType["GenerativeText"] = "generative_text";
    })(exports.DatasetTaskType || (exports.DatasetTaskType = {}));

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    function getDefaultHighchartOptions(theme) {
      var colorTheme = {
        axisColor: theme === null || theme === void 0 ? void 0 : theme.palette.neutralPrimary,
        axisGridColor: theme === null || theme === void 0 ? void 0 : theme.palette.neutralLight,
        backgroundColor: theme === null || theme === void 0 ? void 0 : theme.semanticColors.bodyBackground,
        fontColor: theme === null || theme === void 0 ? void 0 : theme.semanticColors.bodyText
      };
      return {
        accessibility: {
          screenReaderSection: {
            beforeChartFormat: ""
          }
        },
        chart: {
          animation: false,
          backgroundColor: colorTheme.backgroundColor,
          panKey: "ctrl",
          panning: {
            enabled: true,
            type: "xy"
          },
          resetZoomButton: {
            position: {
              verticalAlign: "top",
              x: -4,
              y: 4
            },
            relativeTo: "plotBox"
          },
          spacingBottom: 16,
          spacingLeft: 16,
          spacingRight: 16,
          spacingTop: 16,
          zoomType: "xy"
        },
        credits: undefined,
        exporting: {
          menuItemDefinitions: {
            viewFullscreen: {
              onclick: function onclick() {
                this.update({
                  tooltip: {
                    outside: this.fullscreen.isOpen
                  }
                });
                this.fullscreen.toggle();
              },
              textKey: "viewFullscreen"
            }
          }
        },
        legend: {
          enabled: false
        },
        plotOptions: {
          area: {
            marker: {
              enabled: false
            }
          },
          line: {
            marker: {
              enabled: false
            }
          },
          scatter: {
            marker: {
              radius: 3
            }
          }
        },
        time: {
          useUTC: false
        },
        title: {
          style: {
            color: colorTheme.fontColor,
            fontSize: "13px"
          },
          text: undefined
        },
        tooltip: {
          outside: true,
          shared: true
        },
        xAxis: {
          gridLineWidth: 0,
          labels: {
            style: {
              color: colorTheme.fontColor,
              textOverflow: "ellipsis"
            }
          },
          title: {
            text: undefined
          }
        },
        yAxis: {
          gridLineWidth: 1,
          labels: {
            overflow: "justify",
            style: {
              color: colorTheme.fontColor
            }
          },
          title: {
            text: undefined
          }
        },
        zAxis: {
          gridLineWidth: 1,
          title: {
            text: undefined
          }
        }
      };
    }

    // Copyright (c) Microsoft Corporation.
    function getHighchartsTheme(chartOptions, theme, colorAxisMaxColor) {
      var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7;

      var white = theme.palette.white;
      var _8 = theme.semanticColors,
          bodyBackground = _8.bodyBackground,
          bodySubtext = _8.bodySubtext,
          bodyText = _8.bodyText,
          variantBorder = _8.variantBorder;
      var _9 = theme.fonts,
          mediumFont = _9.medium,
          smallFont = _9.small,
          tinyFont = _9.tiny;
      var chartColors = getChartColorsMap(theme);
      var colors = getChartColors(theme);
      var colorAxis;

      if (colorAxisMaxColor) {
        colorAxis = {
          maxColor: chartColors.get(colorAxisMaxColor),
          minColor: white
        };
      }

      return {
        chart: {
          backgroundColor: bodyBackground,
          style: {
            color: bodyText,
            fontFamily: mediumFont.fontFamily,
            fontSize: (_a = mediumFont.fontSize) === null || _a === void 0 ? void 0 : _a.toString(),
            fontWeight: (_b = mediumFont.fontWeight) === null || _b === void 0 ? void 0 : _b.toString()
          }
        },
        colorAxis: colorAxis,
        colors: colors,
        legend: {
          itemHoverStyle: {
            color: bodyText,
            fontSize: (_c = smallFont.fontSize) === null || _c === void 0 ? void 0 : _c.toString(),
            fontWeight: (_d = smallFont.fontWeight) === null || _d === void 0 ? void 0 : _d.toString()
          },
          itemStyle: {
            color: bodyText,
            fontSize: (_e = smallFont.fontSize) === null || _e === void 0 ? void 0 : _e.toString(),
            fontWeight: (_f = smallFont.fontWeight) === null || _f === void 0 ? void 0 : _f.toString()
          }
        },
        plotOptions: {
          series: {
            dataLabels: {
              style: {
                color: bodyText,
                fontSize: (_g = smallFont.fontSize) === null || _g === void 0 ? void 0 : _g.toString(),
                fontWeight: (_h = smallFont.fontWeight) === null || _h === void 0 ? void 0 : _h.toString(),
                textOutline: "none"
              }
            }
          }
        },
        subtitle: {
          style: {
            color: bodySubtext,
            fontSize: ((_k = (_j = chartOptions.subtitle) === null || _j === void 0 ? void 0 : _j.style) === null || _k === void 0 ? void 0 : _k.fontSize) || ((_l = smallFont.fontSize) === null || _l === void 0 ? void 0 : _l.toString()),
            fontWeight: ((_o = (_m = chartOptions.subtitle) === null || _m === void 0 ? void 0 : _m.style) === null || _o === void 0 ? void 0 : _o.fontWeight) || ((_p = smallFont.fontWeight) === null || _p === void 0 ? void 0 : _p.toString())
          }
        },
        title: {
          style: {
            color: bodyText,
            fontSize: ((_r = (_q = chartOptions.title) === null || _q === void 0 ? void 0 : _q.style) === null || _r === void 0 ? void 0 : _r.fontSize) || ((_s = mediumFont.fontSize) === null || _s === void 0 ? void 0 : _s.toString()),
            fontWeight: ((_u = (_t = chartOptions.title) === null || _t === void 0 ? void 0 : _t.style) === null || _u === void 0 ? void 0 : _u.fontWeight) || ((_v = mediumFont.fontWeight) === null || _v === void 0 ? void 0 : _v.toString())
          }
        },
        xAxis: {
          gridLineColor: variantBorder,
          labels: {
            style: {
              color: bodyText,
              fontSize: (_w = tinyFont.fontSize) === null || _w === void 0 ? void 0 : _w.toString(),
              fontWeight: (_x = tinyFont.fontWeight) === null || _x === void 0 ? void 0 : _x.toString()
            }
          },
          title: {
            style: {
              color: bodyText,
              fontSize: (_y = smallFont.fontSize) === null || _y === void 0 ? void 0 : _y.toString(),
              fontWeight: (_z = smallFont.fontWeight) === null || _z === void 0 ? void 0 : _z.toString()
            }
          }
        },
        yAxis: {
          gridLineColor: variantBorder,
          labels: {
            style: {
              color: bodyText,
              fontSize: (_0 = tinyFont.fontSize) === null || _0 === void 0 ? void 0 : _0.toString(),
              fontWeight: (_1 = tinyFont.fontWeight) === null || _1 === void 0 ? void 0 : _1.toString()
            }
          },
          title: {
            style: {
              color: bodyText,
              fontSize: (_2 = smallFont.fontSize) === null || _2 === void 0 ? void 0 : _2.toString(),
              fontWeight: (_3 = smallFont.fontWeight) === null || _3 === void 0 ? void 0 : _3.toString()
            }
          }
        },
        zAxis: {
          gridLineColor: variantBorder,
          labels: {
            style: {
              color: bodyText,
              fontSize: (_4 = tinyFont.fontSize) === null || _4 === void 0 ? void 0 : _4.toString(),
              fontWeight: (_5 = tinyFont.fontWeight) === null || _5 === void 0 ? void 0 : _5.toString()
            }
          },
          title: {
            style: {
              color: bodyText,
              fontSize: (_6 = smallFont.fontSize) === null || _6 === void 0 ? void 0 : _6.toString(),
              fontWeight: (_7 = smallFont.fontWeight) === null || _7 === void 0 ? void 0 : _7.toString()
            }
          }
        }
      };
    }

    function createCommonjsModule(fn, module) {
    	return module = { exports: {} }, fn(module, module.exports), module.exports;
    }

    var highchartsMore = createCommonjsModule(function (module) {
    /*
     Highcharts JS v10.1.0 (2022-04-29)

     (c) 2009-2021 Torstein Honsi

     License: www.highcharts.com/license
    */
    (function(d){module.exports?(d["default"]=d,module.exports=d):d("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(d){function A(d,e,l,a){d.hasOwnProperty(e)||(d[e]=a.apply(null,l),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:d[e]}})));}d=d?d._modules:{};A(d,
    "Extensions/Pane.js",[d["Core/Chart/Chart.js"],d["Series/CenteredUtilities.js"],d["Core/Globals.js"],d["Core/Pointer.js"],d["Core/Utilities.js"]],function(d,e,l,a,c){function t(b,m,n){return Math.sqrt(Math.pow(b-n[0],2)+Math.pow(m-n[1],2))<=n[2]/2}var p=c.addEvent,k=c.extend,x=c.merge,w=c.pick,b=c.splat;d.prototype.collectionsWithUpdate.push("pane");c=function(){function g(b,g){this.options=this.chart=this.center=this.background=void 0;this.coll="pane";this.defaultOptions={center:["50%","50%"],size:"85%",
    innerSize:"0%",startAngle:0};this.defaultBackgroundOptions={shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"};this.init(b,g);}g.prototype.init=function(b,g){this.chart=g;this.background=[];g.pane.push(this);this.setOptions(b);};g.prototype.setOptions=function(b){this.options=x(this.defaultOptions,this.chart.angular?{background:{}}:void 0,
    b);};g.prototype.render=function(){var g=this.options,n=this.options.background,q=this.chart.renderer;this.group||(this.group=q.g("pane-group").attr({zIndex:g.zIndex||0}).add());this.updateCenter();if(n)for(n=b(n),g=Math.max(n.length,this.background.length||0),q=0;q<g;q++)n[q]&&this.axis?this.renderBackground(x(this.defaultBackgroundOptions,n[q]),q):this.background[q]&&(this.background[q]=this.background[q].destroy(),this.background.splice(q,1));};g.prototype.renderBackground=function(b,g){var n="animate",
    m={"class":"highcharts-pane "+(b.className||"")};this.chart.styledMode||k(m,{fill:b.backgroundColor,stroke:b.borderColor,"stroke-width":b.borderWidth});this.background[g]||(this.background[g]=this.chart.renderer.path().add(this.group),n="attr");this.background[g][n]({d:this.axis.getPlotBandPath(b.from,b.to,b)}).attr(m);};g.prototype.updateCenter=function(b){this.center=(b||this.axis||{}).center=e.getCenter.call(this);};g.prototype.update=function(b,g){x(!0,this.options,b);this.setOptions(this.options);
    this.render();this.chart.axes.forEach(function(b){b.pane===this&&(b.pane=null,b.update({},g));},this);};return g}();d.prototype.getHoverPane=function(b){var g=this,n;b&&g.pane.forEach(function(q){var m=b.chartX-g.plotLeft,a=b.chartY-g.plotTop;t(g.inverted?a:m,g.inverted?m:a,q.center)&&(n=q);});return n};p(d,"afterIsInsidePlot",function(b){this.polar&&(b.isInsidePlot=this.pane.some(function(g){return t(b.x,b.y,g.center)}));});p(a,"beforeGetHoverData",function(b){var g=this.chart;g.polar?(g.hoverPane=g.getHoverPane(b),
    b.filter=function(n){return n.visible&&!(!b.shared&&n.directTouch)&&w(n.options.enableMouseTracking,!0)&&(!g.hoverPane||n.xAxis.pane===g.hoverPane)}):g.hoverPane=void 0;});p(a,"afterGetHoverData",function(b){var g=this.chart;b.hoverPoint&&b.hoverPoint.plotX&&b.hoverPoint.plotY&&g.hoverPane&&!t(b.hoverPoint.plotX,b.hoverPoint.plotY,g.hoverPane.center)&&(b.hoverPoint=void 0);});l.Pane=c;return l.Pane});A(d,"Core/Axis/RadialAxis.js",[d["Core/Axis/AxisDefaults.js"],d["Core/DefaultOptions.js"],d["Core/Globals.js"],
    d["Core/Utilities.js"]],function(d,e,l,a){var c=e.defaultOptions,t=l.noop,p=a.addEvent,k=a.correctFloat,x=a.defined,w=a.extend,b=a.fireEvent,g=a.merge,m=a.pick,n=a.relativeLength,q=a.wrap,H;(function(a){function e(){this.autoConnect=this.isCircular&&"undefined"===typeof m(this.userMax,this.options.max)&&k(this.endAngleRad-this.startAngleRad)===k(2*Math.PI);!this.isCircular&&this.chart.inverted&&this.max++;this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0);}
    function y(){var h=this;return function(){if(h.isRadial&&h.tickPositions&&h.options.labels&&!0!==h.options.labels.allowOverlap)return h.tickPositions.map(function(f){return h.ticks[f]&&h.ticks[f].label}).filter(function(h){return !!h})}}function z(){return t}function f(h,f,b){var r=this.pane.center,u=h.value;if(this.isCircular){if(x(u))h.point&&(g=h.point.shapeArgs||{},g.start&&(u=this.chart.inverted?this.translate(h.point.rectPlotY,!0):h.point.x));else{var g=h.chartX||0;var v=h.chartY||0;u=this.translate(Math.atan2(v-
    b,g-f)-this.startAngleRad,!0);}h=this.getPosition(u);g=h.x;v=h.y;}else x(u)||(g=h.chartX,v=h.chartY),x(g)&&x(v)&&(b=r[1]+this.chart.plotTop,u=this.translate(Math.min(Math.sqrt(Math.pow(g-f,2)+Math.pow(v-b,2)),r[2]/2)-r[3]/2,!0));return [u,g||0,v||0]}function h(h,f,b){h=this.pane.center;var r=this.chart,u=this.left||0,g=this.top||0,v=m(f,h[2]/2-this.offset);"undefined"===typeof b&&(b=this.horiz?0:this.center&&-this.center[3]/2);b&&(v+=b);this.isCircular||"undefined"!==typeof f?(f=this.chart.renderer.symbols.arc(u+
    h[0],g+h[1],v,v,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0}),f.xBounds=[u+h[0]],f.yBounds=[g+h[1]-v]):(f=this.postTranslate(this.angleRad,v),f=[["M",this.center[0]+r.plotLeft,this.center[1]+r.plotTop],["L",f.x,f.y]]);return f}function u(){this.constructor.prototype.getOffset.call(this);this.chart.axisOffset[this.side]=0;}function r(h,f,b){var r=this.chart,u=function(h){if("string"===typeof h){var f=parseInt(h,10);y.test(h)&&(f=f*B/100);return f}return h},g=this.center,v=this.startAngleRad,
    B=g[2]/2,n=Math.min(this.offset,0),q=this.left||0,a=this.top||0,y=/%$/,z=this.isCircular,c=m(u(b.outerRadius),B),k=u(b.innerRadius);u=m(u(b.thickness),10);if("polygon"===this.options.gridLineInterpolation)n=this.getPlotLinePath({value:h}).concat(this.getPlotLinePath({value:f,reverse:!0}));else{h=Math.max(h,this.min);f=Math.min(f,this.max);h=this.translate(h);f=this.translate(f);z||(c=h||0,k=f||0);if("circle"!==b.shape&&z)b=v+(h||0),v+=f||0;else{b=-Math.PI/2;v=1.5*Math.PI;var E=!0;}c-=n;n=r.renderer.symbols.arc(q+
    g[0],a+g[1],c,c,{start:Math.min(b,v),end:Math.max(b,v),innerR:m(k,c-(u-n)),open:E});z&&(z=(v+b)/2,q=q+g[0]+g[2]/2*Math.cos(z),n.xBounds=z>-Math.PI/2&&z<Math.PI/2?[q,r.plotWidth]:[0,q],n.yBounds=[a+g[1]+g[2]/2*Math.sin(z)],n.yBounds[0]+=z>-Math.PI&&0>z||z>Math.PI?-10:10);}return n}function B(h){var f=this,b=this.pane.center,r=this.chart,u=r.inverted,g=h.reverse,v=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},B=v.innerRadius||"0%",q=v.outerRadius||"100%",
    a=b[0]+r.plotLeft,z=b[1]+r.plotTop,c=this.height,y=h.isCrosshair;v=b[3]/2;var m=h.value,k;var E=this.getPosition(m);var e=E.x;E=E.y;y&&(E=this.getCrosshairPosition(h,a,z),m=E[0],e=E[1],E=E[2]);if(this.isCircular)m=Math.sqrt(Math.pow(e-a,2)+Math.pow(E-z,2)),g="string"===typeof B?n(B,1):B/m,r="string"===typeof q?n(q,1):q/m,b&&v&&(v/=m,g<v&&(g=v),r<v&&(r=v)),b=[["M",a+g*(e-a),z-g*(z-E)],["L",e-(1-r)*(e-a),E+(1-r)*(z-E)]];else if((m=this.translate(m))&&(0>m||m>c)&&(m=0),"circle"===this.options.gridLineInterpolation)b=
    this.getLinePath(0,m,v);else if(b=[],r[u?"yAxis":"xAxis"].forEach(function(h){h.pane===f.pane&&(k=h);}),k)for(a=k.tickPositions,k.autoConnect&&(a=a.concat([a[0]])),g&&(a=a.slice().reverse()),m&&(m+=v),z=0;z<a.length;z++)v=k.getPosition(a[z],m),b.push(z?["L",v.x,v.y]:["M",v.x,v.y]);return b}function v(h,f){h=this.translate(h);return this.postTranslate(this.isCircular?h:this.angleRad,m(this.isCircular?f:0>h?0:h,this.center[2]/2)-this.offset)}function E(){var h=this.center,f=this.chart,b=this.options.title;
    return {x:f.plotLeft+h[0]+(b.x||0),y:f.plotTop+h[1]-{high:.5,middle:.25,low:0}[b.align]*h[2]+(b.y||0)}}function l(b){b.beforeSetTickPositions=e;b.createLabelCollector=y;b.getCrosshairPosition=f;b.getLinePath=h;b.getOffset=u;b.getPlotBandPath=r;b.getPlotLinePath=B;b.getPosition=v;b.getTitlePosition=E;b.postTranslate=O;b.setAxisSize=A;b.setAxisTranslation=P;b.setOptions=Q;}function L(){var h=this.chart,f=this.options,b=this.pane,r=b&&b.options;h.angular&&this.isXAxis||!b||!h.angular&&!h.polar||(this.angleRad=
    (f.angle||0)*Math.PI/180,this.startAngleRad=(r.startAngle-90)*Math.PI/180,this.endAngleRad=(m(r.endAngle,r.startAngle+360)-90)*Math.PI/180,this.offset=f.offset||0);}function H(h){this.isRadial&&(h.align=void 0,h.preventDefault());}function K(){if(this.chart&&this.chart.labelCollectors){var h=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;0<=h&&this.chart.labelCollectors.splice(h,1);}}function C(h){var f=this.chart,b=f.inverted,r=f.angular,u=f.polar,v=this.isXAxis,B=this.coll,
    n=r&&v,a=f.options;h=h.userOptions.pane||0;h=this.pane=f.pane&&f.pane[h];var q;if("colorAxis"===B)this.isRadial=!1;else{if(r){if(n?(this.isHidden=!0,this.createLabelCollector=z,this.getOffset=t,this.render=this.redraw=G,this.setTitle=this.setCategories=this.setScale=t):l(this),q=!v)this.defaultPolarOptions=R;}else u&&(l(this),this.defaultPolarOptions=(q=this.horiz)?S:g("xAxis"===B?d.defaultXAxisOptions:d.defaultYAxisOptions,T),b&&"yAxis"===B&&(this.defaultPolarOptions.stackLabels=d.defaultYAxisOptions.stackLabels,
    this.defaultPolarOptions.reversedStacks=!0));r||u?(this.isRadial=!0,a.chart.zoomType=null,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&f.labelCollectors.push(this.labelCollector)):this.isRadial=!1;h&&q&&(h.axis=this);this.isCircular=q;}}function U(){this.isRadial&&this.beforeSetTickPositions();}function J(h){var f=this.label;if(f){var b=this.axis,r=f.getBBox(),u=b.options.labels,v=(b.translate(this.pos)+b.startAngleRad+Math.PI/2)/Math.PI*180%360,g=Math.round(v),
    B=x(u.y)?0:.3*-r.height,a=u.y,q=20,z=u.align,c="end",y=0>g?g+360:g,E=y,k=0,e=0;if(b.isRadial){var l=b.getPosition(this.pos,b.center[2]/2+n(m(u.distance,-25),b.center[2]/2,-b.center[2]/2));"auto"===u.rotation?f.attr({rotation:v}):x(a)||(a=b.chart.renderer.fontMetrics(f.styles&&f.styles.fontSize).b-r.height/2);x(z)||(b.isCircular?(r.width>b.len*b.tickInterval/(b.max-b.min)&&(q=0),z=v>q&&v<180-q?"left":v>180+q&&v<360-q?"right":"center"):z="center",f.attr({align:z}));if("auto"===z&&2===b.tickPositions.length&&
    b.isCircular){90<y&&180>y?y=180-y:270<y&&360>=y&&(y=540-y);180<E&&360>=E&&(E=360-E);if(b.pane.options.startAngle===g||b.pane.options.startAngle===g+360||b.pane.options.startAngle===g-360)c="start";z=-90<=g&&90>=g||-360<=g&&-270>=g||270<=g&&360>=g?"start"===c?"right":"left":"start"===c?"left":"right";70<E&&110>E&&(z="center");15>y||180<=y&&195>y?k=.3*r.height:15<=y&&35>=y?k="start"===c?0:.75*r.height:195<=y&&215>=y?k="start"===c?.75*r.height:0:35<y&&90>=y?k="start"===c?.25*-r.height:r.height:215<y&&
    270>=y&&(k="start"===c?r.height:.25*-r.height);15>E?e="start"===c?.15*-r.height:.15*r.height:165<E&&180>=E&&(e="start"===c?.15*r.height:.15*-r.height);f.attr({align:z});f.translate(e,k+B);}h.pos.x=l.x+(u.x||0);h.pos.y=l.y+(a||0);}}}function V(h){this.axis.getPosition&&w(h.pos,this.axis.getPosition(this.pos));}function O(h,f){var b=this.chart,r=this.center;h=this.startAngleRad+h;return {x:b.plotLeft+r[0]+Math.cos(h)*f,y:b.plotTop+r[1]+Math.sin(h)*f}}function G(){this.isDirty=!1;}function A(){this.constructor.prototype.setAxisSize.call(this);
    if(this.isRadial){this.pane.updateCenter(this);var h=this.center=this.pane.center.slice();if(this.isCircular)this.sector=this.endAngleRad-this.startAngleRad;else{var f=this.postTranslate(this.angleRad,h[3]/2);h[0]=f.x-this.chart.plotLeft;h[1]=f.y-this.chart.plotTop;}this.len=this.width=this.height=(h[2]-h[3])*m(this.sector,1)/2;}}function P(){this.constructor.prototype.setAxisTranslation.call(this);this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):
    (this.center[2]-this.center[3])/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0);}function Q(h){h=this.options=g(this.constructor.defaultOptions,this.defaultPolarOptions,c[this.coll],h);h.plotBands||(h.plotBands=[]);b(this,"afterSetOptions");}function W(h,f,b,r,u,g,v){var B=this.axis;B.isRadial?(h=B.getPosition(this.pos,B.center[2]/2+r),f=["M",f,b,"L",h.x,h.y]):f=h.call(this,f,b,r,u,g,v);return f}var N=[],S={gridLineWidth:1,labels:{align:void 0,distance:15,
    x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},R={labels:{align:"center",x:0,y:void 0},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},T={gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}};a.compose=function(h,f){-1===N.indexOf(h)&&
    (N.push(h),p(h,"afterInit",L),p(h,"autoLabelAlign",H),p(h,"destroy",K),p(h,"init",C),p(h,"initialAxisTranslation",U));-1===N.indexOf(f)&&(N.push(f),p(f,"afterGetLabelPosition",J),p(f,"afterGetPosition",V),q(f.prototype,"getMarkPath",W));return h};})(H||(H={}));return H});A(d,"Series/AreaRange/AreaRangePoint.js",[d["Series/Area/AreaSeries.js"],d["Core/Series/Point.js"],d["Core/Utilities.js"]],function(d,e,l){var a=this&&this.__extends||function(){var a=function(c,k){a=Object.setPrototypeOf||{__proto__:[]}instanceof
    Array&&function(b,g){b.__proto__=g;}||function(b,g){for(var a in g)g.hasOwnProperty(a)&&(b[a]=g[a]);};return a(c,k)};return function(c,k){function b(){this.constructor=c;}a(c,k);c.prototype=null===k?Object.create(k):(b.prototype=k.prototype,new b);}}(),c=e.prototype,t=l.defined,p=l.isNumber;return function(k){function e(){var a=null!==k&&k.apply(this,arguments)||this;a.high=void 0;a.low=void 0;a.options=void 0;a.plotHigh=void 0;a.plotLow=void 0;a.plotHighX=void 0;a.plotLowX=void 0;a.plotX=void 0;a.series=
    void 0;return a}a(e,k);e.prototype.setState=function(){var a=this.state,b=this.series,g=b.chart.polar;t(this.plotHigh)||(this.plotHigh=b.yAxis.toPixels(this.high,!0));t(this.plotLow)||(this.plotLow=this.plotY=b.yAxis.toPixels(this.low,!0));b.stateMarkerGraphic&&(b.lowerStateMarkerGraphic=b.stateMarkerGraphic,b.stateMarkerGraphic=b.upperStateMarkerGraphic);this.graphic=this.upperGraphic;this.plotY=this.plotHigh;g&&(this.plotX=this.plotHighX);c.setState.apply(this,arguments);this.state=a;this.plotY=
    this.plotLow;this.graphic=this.lowerGraphic;g&&(this.plotX=this.plotLowX);b.stateMarkerGraphic&&(b.upperStateMarkerGraphic=b.stateMarkerGraphic,b.stateMarkerGraphic=b.lowerStateMarkerGraphic,b.lowerStateMarkerGraphic=void 0);c.setState.apply(this,arguments);};e.prototype.haloPath=function(){var a=this.series.chart.polar,b=[];this.plotY=this.plotLow;a&&(this.plotX=this.plotLowX);this.isInside&&(b=c.haloPath.apply(this,arguments));this.plotY=this.plotHigh;a&&(this.plotX=this.plotHighX);this.isTopInside&&
    (b=b.concat(c.haloPath.apply(this,arguments)));return b};e.prototype.isValid=function(){return p(this.low)&&p(this.high)};return e}(d.prototype.pointClass)});A(d,"Series/AreaRange/AreaRangeSeries.js",[d["Series/AreaRange/AreaRangePoint.js"],d["Series/Area/AreaSeries.js"],d["Series/Column/ColumnSeries.js"],d["Core/Globals.js"],d["Core/Series/Series.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a,c,t,p){var k=this&&this.__extends||function(){var b=function(g,a){b=Object.setPrototypeOf||
    {__proto__:[]}instanceof Array&&function(b,f){b.__proto__=f;}||function(b,f){for(var h in f)f.hasOwnProperty(h)&&(b[h]=f[h]);};return b(g,a)};return function(g,a){function n(){this.constructor=g;}b(g,a);g.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n);}}(),x=e.prototype,w=l.prototype;l=a.noop;var b=c.prototype,g=p.defined,m=p.extend,n=p.isArray,q=p.pick,H=p.merge;c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.options=void 0;b.points=void 0;
    b.lowerStateMarkerGraphic=void 0;b.xAxis=void 0;return b}k(c,a);c.prototype.toYData=function(b){return [b.low,b.high]};c.prototype.highToXY=function(b){var g=this.chart,f=this.xAxis.postTranslate(b.rectPlotX||0,this.yAxis.len-b.plotHigh);b.plotHighX=f.x-g.plotLeft;b.plotHigh=f.y-g.plotTop;b.plotLowX=b.plotX;};c.prototype.translate=function(){var b=this,g=b.yAxis;x.translate.apply(b);b.points.forEach(function(f){var h=f.high,u=f.plotY;f.isNull?f.plotY=null:(f.plotLow=u,f.plotHigh=g.translate(b.dataModify?
    b.dataModify.modifyValue(h):h,0,1,0,1),b.dataModify&&(f.yBottom=f.plotHigh));});this.chart.polar&&this.points.forEach(function(f){b.highToXY(f);f.tooltipPos=[(f.plotHighX+f.plotLowX)/2,(f.plotHigh+f.plotLow)/2];});};c.prototype.getGraphPath=function(b){var g=[],f=[],h,u=x.getGraphPath;var r=this.options;var a=this.chart.polar,v=a&&!1!==r.connectEnds,n=r.connectNulls,c=r.step;b=b||this.points;for(h=b.length;h--;){var m=b[h];var k=a?{plotX:m.rectPlotX,plotY:m.yBottom,doCurve:!1}:{plotX:m.plotX,plotY:m.plotY,
    doCurve:!1};m.isNull||v||n||b[h+1]&&!b[h+1].isNull||f.push(k);var e={polarPlotY:m.polarPlotY,rectPlotX:m.rectPlotX,yBottom:m.yBottom,plotX:q(m.plotHighX,m.plotX),plotY:m.plotHigh,isNull:m.isNull};f.push(e);g.push(e);m.isNull||v||n||b[h-1]&&!b[h-1].isNull||f.push(k);}b=u.call(this,b);c&&(!0===c&&(c="left"),r.step={left:"right",center:"center",right:"left"}[c]);g=u.call(this,g);f=u.call(this,f);r.step=c;r=[].concat(b,g);!this.chart.polar&&f[0]&&"M"===f[0][0]&&(f[0]=["L",f[0][1],f[0][2]]);this.graphPath=
    r;this.areaPath=b.concat(f);r.isArea=!0;r.xMap=b.xMap;this.areaPath.xMap=b.xMap;return r};c.prototype.drawDataLabels=function(){var g=this.points,a=g.length,f,h=[],u=this.options.dataLabels,r,B=this.chart.inverted;if(u){if(n(u)){var v=u[0]||{enabled:!1};var c=u[1]||{enabled:!1};}else v=m({},u),v.x=u.xHigh,v.y=u.yHigh,c=m({},u),c.x=u.xLow,c.y=u.yLow;if(v.enabled||this._hasPointLabels){for(f=a;f--;)if(r=g[f]){var q=v.inside?r.plotHigh<r.plotLow:r.plotHigh>r.plotLow;r.y=r.high;r._plotY=r.plotY;r.plotY=
    r.plotHigh;h[f]=r.dataLabel;r.dataLabel=r.dataLabelUpper;r.below=q;B?v.align||(v.align=q?"right":"left"):v.verticalAlign||(v.verticalAlign=q?"top":"bottom");}this.options.dataLabels=v;b.drawDataLabels&&b.drawDataLabels.apply(this,arguments);for(f=a;f--;)if(r=g[f])r.dataLabelUpper=r.dataLabel,r.dataLabel=h[f],delete r.dataLabels,r.y=r.low,r.plotY=r._plotY;}if(c.enabled||this._hasPointLabels){for(f=a;f--;)if(r=g[f])q=c.inside?r.plotHigh<r.plotLow:r.plotHigh>r.plotLow,r.below=!q,B?c.align||(c.align=q?
    "left":"right"):c.verticalAlign||(c.verticalAlign=q?"bottom":"top");this.options.dataLabels=c;b.drawDataLabels&&b.drawDataLabels.apply(this,arguments);}if(v.enabled)for(f=a;f--;)if(r=g[f])r.dataLabels=[r.dataLabelUpper,r.dataLabel].filter(function(h){return !!h});this.options.dataLabels=u;}};c.prototype.alignDataLabel=function(){w.alignDataLabel.apply(this,arguments);};c.prototype.drawPoints=function(){var a=this.points.length,c;b.drawPoints.apply(this,arguments);for(c=0;c<a;){var f=this.points[c];f.origProps=
    {plotY:f.plotY,plotX:f.plotX,isInside:f.isInside,negative:f.negative,zone:f.zone,y:f.y};f.lowerGraphic=f.graphic;f.graphic=f.upperGraphic;f.plotY=f.plotHigh;g(f.plotHighX)&&(f.plotX=f.plotHighX);f.y=q(f.high,f.origProps.y);f.negative=f.y<(this.options.threshold||0);this.zones.length&&(f.zone=f.getZone());this.chart.polar||(f.isInside=f.isTopInside="undefined"!==typeof f.plotY&&0<=f.plotY&&f.plotY<=this.yAxis.len&&0<=f.plotX&&f.plotX<=this.xAxis.len);c++;}b.drawPoints.apply(this,arguments);for(c=0;c<
    a;)f=this.points[c],f.upperGraphic=f.graphic,f.graphic=f.lowerGraphic,f.origProps&&(m(f,f.origProps),delete f.origProps),c++;};c.defaultOptions=H(e.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}});return c}(e);m(c.prototype,{pointArrayMap:["low","high"],pointValKey:"low",deferTranslatePolar:!0,
    pointClass:d,setStackedPoints:l});t.registerSeriesType("arearange",c);return c});A(d,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[d["Series/AreaRange/AreaRangeSeries.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l){var a=this&&this.__extends||function(){var a=function(c,k){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g;}||function(b,g){for(var a in g)g.hasOwnProperty(a)&&(b[a]=g[a]);};return a(c,k)};return function(c,k){function b(){this.constructor=
    c;}a(c,k);c.prototype=null===k?Object.create(k):(b.prototype=k.prototype,new b);}}(),c=e.seriesTypes.spline,t=l.merge;l=l.extend;var p=function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a.options=void 0;a.data=void 0;a.points=void 0;return a}a(k,c);k.defaultOptions=t(d.defaultOptions);return k}(d);l(p.prototype,{getPointSpline:c.prototype.getPointSpline});e.registerSeriesType("areasplinerange",p);return p});A(d,"Series/BoxPlot/BoxPlotSeries.js",[d["Series/Column/ColumnSeries.js"],
    d["Core/Globals.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);};return a(c,b)};return function(c,b){function g(){this.constructor=c;}a(c,b);c.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g);}}();e=e.noop;var t=a.extend,p=a.merge,k=a.pick;a=
    function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.options=void 0;b.points=void 0;return b}c(e,a);e.prototype.pointAttribs=function(){return {}};e.prototype.translate=function(){var b=this.yAxis,g=this.pointArrayMap;a.prototype.translate.apply(this);this.points.forEach(function(a){g.forEach(function(g){null!==a[g]&&(a[g+"Plot"]=b.translate(a[g],0,1,0,1));});a.plotHigh=a.highPlot;});};e.prototype.drawPoints=function(){var b=this,g=b.options,a=b.chart,c=a.renderer,q,
    e,l,d,y,z,f=0,h,u,r,B,v=!1!==b.doQuartiles,E,p=b.options.whiskerLength;b.points.forEach(function(n){var m=n.graphic,H=m?"animate":"attr",t=n.shapeArgs,x={},I={},w={},L={},M=n.color||b.color;"undefined"!==typeof n.plotY&&(h=Math.round(t.width),u=Math.floor(t.x),r=u+h,B=Math.round(h/2),q=Math.floor(v?n.q1Plot:n.lowPlot),e=Math.floor(v?n.q3Plot:n.lowPlot),l=Math.floor(n.highPlot),d=Math.floor(n.lowPlot),m||(n.graphic=m=c.g("point").add(b.group),n.stem=c.path().addClass("highcharts-boxplot-stem").add(m),
    p&&(n.whiskers=c.path().addClass("highcharts-boxplot-whisker").add(m)),v&&(n.box=c.path(void 0).addClass("highcharts-boxplot-box").add(m)),n.medianShape=c.path(void 0).addClass("highcharts-boxplot-median").add(m)),a.styledMode||(I.stroke=n.stemColor||g.stemColor||M,I["stroke-width"]=k(n.stemWidth,g.stemWidth,g.lineWidth),I.dashstyle=n.stemDashStyle||g.stemDashStyle||g.dashStyle,n.stem.attr(I),p&&(w.stroke=n.whiskerColor||g.whiskerColor||M,w["stroke-width"]=k(n.whiskerWidth,g.whiskerWidth,g.lineWidth),
    w.dashstyle=n.whiskerDashStyle||g.whiskerDashStyle||g.dashStyle,n.whiskers.attr(w)),v&&(x.fill=n.fillColor||g.fillColor||M,x.stroke=g.lineColor||M,x["stroke-width"]=g.lineWidth||0,x.dashstyle=n.boxDashStyle||g.boxDashStyle||g.dashStyle,n.box.attr(x)),L.stroke=n.medianColor||g.medianColor||M,L["stroke-width"]=k(n.medianWidth,g.medianWidth,g.lineWidth),L.dashstyle=n.medianDashStyle||g.medianDashStyle||g.dashStyle,n.medianShape.attr(L)),z=n.stem.strokeWidth()%2/2,f=u+B+z,m=[["M",f,e],["L",f,l],["M",
    f,q],["L",f,d]],n.stem[H]({d:m}),v&&(z=n.box.strokeWidth()%2/2,q=Math.floor(q)+z,e=Math.floor(e)+z,u+=z,r+=z,m=[["M",u,e],["L",u,q],["L",r,q],["L",r,e],["L",u,e],["Z"]],n.box[H]({d:m})),p&&(z=n.whiskers.strokeWidth()%2/2,l+=z,d+=z,E=/%$/.test(p)?B*parseFloat(p)/100:p/2,m=[["M",f-E,l],["L",f+E,l],["M",f-E,d],["L",f+E,d]],n.whiskers[H]({d:m})),y=Math.round(n.medianPlot),z=n.medianShape.strokeWidth()%2/2,y+=z,m=[["M",u,y],["L",r,y]],n.medianShape[H]({d:m}));});};e.prototype.toYData=function(b){return [b.low,
    b.q1,b.median,b.q3,b.high]};e.defaultOptions=p(d.defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2});return e}(d);t(a.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:e,
    setStackedPoints:e});l.registerSeriesType("boxplot",a);return a});A(d,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return {borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"10px",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,
    color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}});A(d,"Series/Bubble/BubbleLegendItem.js",[d["Core/Color/Color.js"],d["Core/FormatUtilities.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=d.parse,t=l.noop,p=a.arrayMax,k=a.arrayMin,x=a.isNumber,w=a.merge,b=a.pick,g=a.stableSort;return function(){function a(b,a){this.options=this.symbols=this.visible=this.selected=this.ranges=this.movementX=this.maxLabel=this.legendSymbol=
    this.legendItemWidth=this.legendItemHeight=this.legendItem=this.legendGroup=this.legend=this.fontMetrics=this.chart=void 0;this.setState=t;this.init(b,a);}a.prototype.init=function(b,a){this.options=b;this.visible=!0;this.chart=a.chart;this.legend=a;};a.prototype.addToLegend=function(b){b.splice(this.options.legendIndex,0,this);};a.prototype.drawLegendSymbol=function(a){var c=this.chart,n=this.options,e=b(a.options.itemDistance,20),k=n.ranges,m=n.connectorDistance;this.fontMetrics=c.renderer.fontMetrics(n.labels.style.fontSize);
    k&&k.length&&x(k[0].value)?(g(k,function(b,f){return f.value-b.value}),this.ranges=k,this.setOptions(),this.render(),a=this.getMaxLabelSize(),k=this.ranges[0].radius,c=2*k,m=m-k+a.width,m=0<m?m:0,this.maxLabel=a,this.movementX="left"===n.labels.align?m:0,this.legendItemWidth=c+m+e,this.legendItemHeight=c+this.fontMetrics.h/2):a.options.bubbleLegend.autoRanges=!0;};a.prototype.setOptions=function(){var a=this.ranges,g=this.options,k=this.chart.series[g.seriesIndex],e=this.legend.baseline,m={zIndex:g.zIndex,
    "stroke-width":g.borderWidth},l={zIndex:g.zIndex,"stroke-width":g.connectorWidth},z={align:this.legend.options.rtl||"left"===g.labels.align?"right":"left",zIndex:g.zIndex},f=k.options.marker.fillOpacity,h=this.chart.styledMode;a.forEach(function(u,r){h||(m.stroke=b(u.borderColor,g.borderColor,k.color),m.fill=b(u.color,g.color,1!==f?c(k.color).setOpacity(f).get("rgba"):k.color),l.stroke=b(u.connectorColor,g.connectorColor,k.color));a[r].radius=this.getRangeRadius(u.value);a[r]=w(a[r],{center:a[0].radius-
    a[r].radius+e});h||w(!0,a[r],{bubbleAttribs:w(m),connectorAttribs:w(l),labelAttribs:z});},this);};a.prototype.getRangeRadius=function(b){var a=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,a.ranges[a.ranges.length-1].value,a.ranges[0].value,a.minSize,a.maxSize,b)};a.prototype.render=function(){var b=this.chart.renderer,a=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]});this.legendSymbol=b.g("bubble-legend");this.legendItem=
    b.g("bubble-legend-item");this.legendSymbol.translateX=0;this.legendSymbol.translateY=0;this.ranges.forEach(function(b){b.value>=a&&this.renderRange(b);},this);this.legendSymbol.add(this.legendItem);this.legendItem.add(this.legendGroup);this.hideOverlappingLabels();};a.prototype.renderRange=function(b){var a=this.options,g=a.labels,c=this.chart,n=c.series[a.seriesIndex],k=c.renderer,e=this.symbols;c=e.labels;var f=b.center,h=Math.abs(b.radius),u=a.connectorDistance||0,r=g.align,B=a.connectorWidth,v=
    this.ranges[0].radius||0,m=f-h-a.borderWidth/2+B/2,l=this.fontMetrics;l=l.f/2-(l.h-l.f)/2;var d=k.styledMode;u=this.legend.options.rtl||"left"===r?-u:u;"center"===r&&(u=0,a.connectorDistance=0,b.labelAttribs.align="center");r=m+a.labels.y;var p=v+u+a.labels.x;e.bubbleItems.push(k.circle(v,f+((m%1?1:.5)-(B%2?0:.5)),h).attr(d?{}:b.bubbleAttribs).addClass((d?"highcharts-color-"+n.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(a.className||"")).add(this.legendSymbol));e.connectors.push(k.path(k.crispLine([["M",
    v,m],["L",v+u,m]],a.connectorWidth)).attr(d?{}:b.connectorAttribs).addClass((d?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(a.connectorClassName||"")).add(this.legendSymbol));b=k.text(this.formatLabel(b),p,r+l).attr(d?{}:b.labelAttribs).css(d?{}:g.style).addClass("highcharts-bubble-legend-labels "+(a.labels.className||"")).add(this.legendSymbol);c.push(b);b.placed=!0;b.alignAttr={x:p,y:r+l};};a.prototype.getMaxLabelSize=function(){var b,a;this.symbols.labels.forEach(function(g){a=
    g.getBBox(!0);b=b?a.width>b.width?a:b:a;});return b||{}};a.prototype.formatLabel=function(b){var a=this.options,g=a.labels.formatter;a=a.labels.format;var c=this.chart.numberFormatter;return a?e.format(a,b):g?g.call(b):c(b.value,1)};a.prototype.hideOverlappingLabels=function(){var b=this.chart,a=this.symbols;!this.options.labels.allowOverlap&&a&&(b.hideOverlappingLabels(a.labels),a.labels.forEach(function(b,g){b.newOpacity?b.newOpacity!==b.oldOpacity&&a.connectors[g].show():a.connectors[g].hide();}));};
    a.prototype.getRanges=function(){var a=this.legend.bubbleLegend,g=a.options.ranges,c,e=Number.MAX_VALUE,m=-Number.MAX_VALUE;a.chart.series.forEach(function(a){a.isBubble&&!a.ignoreSeries&&(c=a.zData.filter(x),c.length&&(e=b(a.options.zMin,Math.min(e,Math.max(k(c),!1===a.options.displayNegative?a.options.zThreshold:-Number.MAX_VALUE))),m=b(a.options.zMax,Math.max(m,p(c)))));});var l=e===m?[{value:m}]:[{value:e},{value:(e+m)/2},{value:m,autoRanges:!0}];g.length&&g[0].radius&&l.reverse();l.forEach(function(b,
    f){g&&g[f]&&(l[f]=w(g[f],b));});return l};a.prototype.predictBubbleSizes=function(){var b=this.chart,a=this.fontMetrics,g=b.legend.options,c=g.floating,k=(g="horizontal"===g.layout)?b.legend.lastLineHeight:0,e=b.plotSizeX,m=b.plotSizeY,f=b.series[this.options.seriesIndex],h=f.getPxExtremes();b=Math.ceil(h.minPxSize);h=Math.ceil(h.maxPxSize);var u=Math.min(m,e);f=f.options.maxSize;if(c||!/%$/.test(f))a=h;else if(f=parseFloat(f),a=(u+k-a.h/2)*f/100/(f/100+1),g&&m-a>=e||!g&&e-a>=m)a=h;return [b,Math.ceil(a)]};
    a.prototype.updateRanges=function(b,a){var g=this.legend.options.bubbleLegend;g.minSize=b;g.maxSize=a;g.ranges=this.getRanges();};a.prototype.correctSizes=function(){var b=this.legend,a=this.chart.series[this.options.seriesIndex].getPxExtremes();1<Math.abs(Math.ceil(a.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,a.maxPxSize),b.render());};return a}()});A(d,"Series/Bubble/BubbleLegendComposition.js",[d["Series/Bubble/BubbleLegendDefaults.js"],d["Series/Bubble/BubbleLegendItem.js"],
    d["Core/DefaultOptions.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=l.setOptions,t=a.addEvent,p=a.objectEach,k=a.wrap,x;(function(a){function b(b,a,c){var f=this.legend,h=0<=g(this);if(f&&f.options.enabled&&f.bubbleLegend&&f.options.bubbleLegend.autoRanges&&h){var u=f.bubbleLegend.options;h=f.bubbleLegend.predictBubbleSizes();f.bubbleLegend.updateRanges(h[0],h[1]);u.placed||(f.group.placed=!1,f.allItems.forEach(function(h){h.legendGroup.translateY=null;}));f.render();this.getMargins();this.axes.forEach(function(h){h.visible&&
    h.render();u.placed||(h.setScale(),h.updateNames(),p(h.ticks,function(h){h.isNew=!0;h.isNewLabel=!0;}));});u.placed=!0;this.getMargins();b.call(this,a,c);f.bubbleLegend.correctSizes();x(f,m(f));}else b.call(this,a,c),f&&f.options.enabled&&f.bubbleLegend&&(f.render(),x(f,m(f)));}function g(b){b=b.series;for(var a=0;a<b.length;){if(b[a]&&b[a].isBubble&&b[a].visible&&b[a].zData.length)return a;a++;}return -1}function m(b){b=b.allItems;var a=[],g=b.length,f,h=0;for(f=0;f<g;f++)if(b[f].legendItemHeight&&(b[f].itemHeight=
    b[f].legendItemHeight),b[f]===b[g-1]||b[f+1]&&b[f]._legendItemPos[1]!==b[f+1]._legendItemPos[1]){a.push({height:0});var u=a[a.length-1];for(h;h<=f;h++)b[h].itemHeight>u.height&&(u.height=b[h].itemHeight);u.step=f;}return a}function n(b){var a=this.bubbleLegend,c=this.options,f=c.bubbleLegend,h=g(this.chart);a&&a.ranges&&a.ranges.length&&(f.ranges.length&&(f.autoRanges=!!f.ranges[0].autoRanges),this.destroyItem(a));0<=h&&c.enabled&&f.enabled&&(f.seriesIndex=h,this.bubbleLegend=new e(f,this),this.bubbleLegend.addToLegend(b.allItems));}
    function l(){var b=this.chart,a=this.visible,c=this.chart.legend;c&&c.bubbleLegend&&(this.visible=!a,this.ignoreSeries=a,b=0<=g(b),c.bubbleLegend.visible!==b&&(c.update({bubbleLegend:{enabled:b}}),c.bubbleLegend.visible=b),this.visible=a);}function x(b,a){var g=b.options.rtl,f,h,u,r=0;b.allItems.forEach(function(b,c){f=b.legendGroup.translateX;h=b._legendItemPos[1];if((u=b.movementX)||g&&b.ranges)u=g?f-b.options.maxSize/2:f+u,b.legendGroup.attr({translateX:u});c>a[r].step&&r++;b.legendGroup.attr({translateY:Math.round(h+
    a[r].height/2)});b._legendItemPos[1]=h+a[r].height/2;});}var w=[];a.compose=function(a,g,e){-1===w.indexOf(a)&&(w.push(a),c({legend:{bubbleLegend:d}}),k(a.prototype,"drawChartBox",b));-1===w.indexOf(g)&&(w.push(g),t(g,"afterGetAllItems",n));-1===w.indexOf(e)&&(w.push(e),t(e,"legendItemClick",l));};})(x||(x={}));return x});A(d,"Series/Bubble/BubblePoint.js",[d["Core/Series/Point.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l){var a=this&&this.__extends||function(){var a=
    function(c,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c;}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);};return a(c,e)};return function(c,e){function k(){this.constructor=c;}a(c,e);c.prototype=null===e?Object.create(e):(k.prototype=e.prototype,new k);}}();l=l.extend;e=function(c){function e(){var a=null!==c&&c.apply(this,arguments)||this;a.options=void 0;a.series=void 0;return a}a(e,c);e.prototype.haloPath=function(a){return d.prototype.haloPath.call(this,
    0===a?0:(this.marker?this.marker.radius||0:0)+a)};return e}(e.seriesTypes.scatter.prototype.pointClass);l(e.prototype,{ttBelow:!1});return e});A(d,"Series/Bubble/BubbleSeries.js",[d["Core/Axis/Axis.js"],d["Series/Bubble/BubbleLegendComposition.js"],d["Series/Bubble/BubblePoint.js"],d["Core/Color/Color.js"],d["Core/Globals.js"],d["Core/Series/Series.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a,c,t,p,k){var x=this&&this.__extends||function(){var b=function(f,h){b=
    Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h;}||function(b,h){for(var f in h)h.hasOwnProperty(f)&&(b[f]=h[f]);};return b(f,h)};return function(f,h){function a(){this.constructor=f;}b(f,h);f.prototype=null===h?Object.create(h):(a.prototype=h.prototype,new a);}}(),w=a.parse;a=c.noop;var b=p.seriesTypes;c=b.column;var g=b.scatter;b=k.addEvent;var m=k.arrayMax,n=k.arrayMin,q=k.clamp,H=k.extend,K=k.isNumber,I=k.merge,y=k.pick;k=function(b){function f(){var h=null!==b&&
    b.apply(this,arguments)||this;h.data=void 0;h.maxPxSize=void 0;h.minPxSize=void 0;h.options=void 0;h.points=void 0;h.radii=void 0;h.yData=void 0;h.zData=void 0;return h}x(f,b);f.prototype.animate=function(b){!b&&this.points.length<this.options.animationLimit&&this.points.forEach(function(b){var h=b.graphic;h&&h.width&&(this.hasRendered||h.attr({x:b.plotX,y:b.plotY,width:1,height:1}),h.animate(this.markerAttribs(b),this.options.animation));},this);};f.prototype.getRadii=function(){var b=this,f=this.zData,
    a=this.yData,g=[],c=this.chart.bubbleZExtremes;var e=this.getPxExtremes();var m=e.minPxSize,k=e.maxPxSize;if(!c){var n=Number.MAX_VALUE,l=-Number.MAX_VALUE,d;this.chart.series.forEach(function(h){h.bubblePadding&&(h.visible||!b.chart.options.chart.ignoreHiddenSeries)&&(h=h.getZExtremes())&&(n=Math.min(n||h.zMin,h.zMin),l=Math.max(l||h.zMax,h.zMax),d=!0);});d?(c={zMin:n,zMax:l},this.chart.bubbleZExtremes=c):c={zMin:0,zMax:0};}var p=0;for(e=f.length;p<e;p++){var q=f[p];g.push(this.getRadius(c.zMin,c.zMax,
    m,k,q,a[p]));}this.radii=g;};f.prototype.getRadius=function(b,f,a,g,c,e){var h=this.options,r="width"!==h.sizeBy,u=h.zThreshold,v=f-b,m=.5;if(null===e||null===c)return null;if(K(c)){h.sizeByAbsoluteValue&&(c=Math.abs(c-u),v=Math.max(f-u,Math.abs(b-u)),b=0);if(c<b)return a/2-1;0<v&&(m=(c-b)/v);}r&&0<=m&&(m=Math.sqrt(m));return Math.ceil(a+m*(g-a))/2};f.prototype.hasData=function(){return !!this.processedXData.length};f.prototype.pointAttribs=function(b,f){var h=this.options.marker.fillOpacity;b=t.prototype.pointAttribs.call(this,
    b,f);1!==h&&(b.fill=w(b.fill).setOpacity(h).get("rgba"));return b};f.prototype.translate=function(){b.prototype.translate.call(this);this.getRadii();this.translateBubble();};f.prototype.translateBubble=function(){for(var b=this.data,f=this.radii,a=this.getPxExtremes().minPxSize,g=b.length;g--;){var c=b[g],e=f?f[g]:0;K(e)&&e>=a/2?(c.marker=H(c.marker,{radius:e,width:2*e,height:2*e}),c.dlBox={x:c.plotX-e,y:c.plotY-e,width:2*e,height:2*e}):c.shapeArgs=c.plotY=c.dlBox=void 0;}};f.prototype.getPxExtremes=
    function(){var b=Math.min(this.chart.plotWidth,this.chart.plotHeight),f=function(h){if("string"===typeof h){var f=/%$/.test(h);h=parseInt(h,10);}return f?b*h/100:h},a=f(y(this.options.minSize,8));f=Math.max(f(y(this.options.maxSize,"20%")),a);return {minPxSize:a,maxPxSize:f}};f.prototype.getZExtremes=function(){var b=this.options,f=(this.zData||[]).filter(K);if(f.length){var a=y(b.zMin,q(n(f),!1===b.displayNegative?b.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE));b=y(b.zMax,m(f));if(K(a)&&K(b))return {zMin:a,
    zMax:b}}};f.compose=e.compose;f.defaultOptions=I(g.defaultOptions,{dataLabels:{formatter:function(){var b=this.series.chart.numberFormatter,f=this.point.z;return K(f)?b(f,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,
    zoneAxis:"z"});return f}(g);H(k.prototype,{alignDataLabel:c.prototype.alignDataLabel,applyZones:a,bubblePadding:!0,buildKDTree:a,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:l,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"});b(k,"updatedData",function(b){delete b.target.chart.bubbleZExtremes;});d.prototype.beforePadding=function(){var b=this,f=this.len,h=this.chart,a=0,g=f,c=this.isXAxis,v=c?"xData":"yData",e=this.min,m=this.max-
    e,k=f/m,n;this.series.forEach(function(f){if(f.bubblePadding&&(f.visible||!h.options.chart.ignoreHiddenSeries)){n=b.allowZoomOutside=!0;var r=f[v];c&&f.getRadii(0,0,f);if(0<m)for(var u=r.length;u--;)if(K(r[u])&&b.dataMin<=r[u]&&r[u]<=b.max){var B=f.radii&&f.radii[u]||0;a=Math.min((r[u]-e)*k-B,a);g=Math.max((r[u]-e)*k+B,g);}}});n&&0<m&&!this.logarithmic&&(g-=f,k*=(f+Math.max(0,a)-Math.min(g,f))/f,[["min","userMin",a],["max","userMax",g]].forEach(function(h){"undefined"===typeof y(b.options[h[0]],b[h[1]])&&
    (b[h[0]]+=h[2]/k);}));};p.registerSeriesType("bubble",k);return k});A(d,"Series/ColumnRange/ColumnRangePoint.js",[d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e){var l=this&&this.__extends||function(){var a=function(c,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,b){for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);};return a(c,e)};return function(c,e){function k(){this.constructor=c;}a(c,e);c.prototype=null===e?Object.create(e):
    (k.prototype=e.prototype,new k);}}(),a=d.seriesTypes;d=a.column.prototype.pointClass;var c=e.extend,t=e.isNumber;e=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.series=void 0;c.options=void 0;c.barX=void 0;c.pointWidth=void 0;c.shapeType=void 0;return c}l(c,a);c.prototype.isValid=function(){return t(this.low)};return c}(a.arearange.prototype.pointClass);c(e.prototype,{setState:d.prototype.setState});return e});A(d,"Series/ColumnRange/ColumnRangeSeries.js",[d["Series/ColumnRange/ColumnRangePoint.js"],
    d["Core/Globals.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=this&&this.__extends||function(){var b=function(a,g){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);};return b(a,g)};return function(a,g){function c(){this.constructor=a;}b(a,g);a.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c);}}();e=e.noop;var t=l.seriesTypes,p=t.arearange,k=
    t.column,x=k.prototype,w=p.prototype,b=a.clamp,g=a.merge,m=a.pick;a=a.extend;var n={pointRange:null,marker:null,states:{hover:{halo:!1}}};t=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.points=void 0;b.options=void 0;return b}c(e,a);e.prototype.setOptions=function(){g(!0,arguments[0],{stacking:void 0});return w.setOptions.apply(this,arguments)};e.prototype.translate=function(){var a=this,g=a.yAxis,c=a.xAxis,e=c.startAngleRad,f,h=a.chart,u=a.xAxis.isRadial,
    r=Math.max(h.chartWidth,h.chartHeight)+999,k;x.translate.apply(a);a.points.forEach(function(v){var n=v.shapeArgs||{},B=a.options.minPointLength;v.plotHigh=k=b(g.translate(v.high,0,1,0,1),-r,r);v.plotLow=b(v.plotY,-r,r);var l=k;var d=m(v.rectPlotY,v.plotY)-k;Math.abs(d)<B?(B-=d,d+=B,l-=B/2):0>d&&(d*=-1,l-=d);u?(f=v.barX+e,v.shapeType="arc",v.shapeArgs=a.polarArc(l+d,l,f,f+v.pointWidth)):(n.height=d,n.y=l,B=n.x,B=void 0===B?0:B,n=n.width,n=void 0===n?0:n,v.tooltipPos=h.inverted?[g.len+g.pos-h.plotLeft-
    l-d/2,c.len+c.pos-h.plotTop-B-n/2,d]:[c.left-h.plotLeft+B+n/2,g.pos-h.plotTop+l+d/2,d]);});};e.prototype.crispCol=function(){return x.crispCol.apply(this,arguments)};e.prototype.drawPoints=function(){return x.drawPoints.apply(this,arguments)};e.prototype.drawTracker=function(){return x.drawTracker.apply(this,arguments)};e.prototype.getColumnMetrics=function(){return x.getColumnMetrics.apply(this,arguments)};e.prototype.pointAttribs=function(){return x.pointAttribs.apply(this,arguments)};e.prototype.adjustForMissingColumns=
    function(){return x.adjustForMissingColumns.apply(this,arguments)};e.prototype.animate=function(){return x.animate.apply(this,arguments)};e.prototype.translate3dPoints=function(){return x.translate3dPoints.apply(this,arguments)};e.prototype.translate3dShapes=function(){return x.translate3dShapes.apply(this,arguments)};e.defaultOptions=g(k.defaultOptions,p.defaultOptions,n);return e}(p);a(t.prototype,{directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:e,getSymbol:e,polarArc:function(){return x.polarArc.apply(this,
    arguments)},pointClass:d});l.registerSeriesType("columnrange",t);return t});A(d,"Series/ColumnPyramid/ColumnPyramidSeries.js",[d["Series/Column/ColumnSeries.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l){var a=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);};return a(c,b)};return function(c,b){function g(){this.constructor=
    c;}a(c,b);c.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g);}}(),c=d.prototype,t=l.clamp,p=l.merge,k=l.pick;l=function(e){function l(){var b=null!==e&&e.apply(this,arguments)||this;b.data=void 0;b.options=void 0;b.points=void 0;return b}a(l,e);l.prototype.translate=function(){var b=this,a=b.chart,e=b.options,n=b.dense=2>b.closestPointRange*b.xAxis.transA;n=b.borderWidth=k(e.borderWidth,n?0:1);var d=b.yAxis,l=e.threshold,p=b.translatedThreshold=d.getThreshold(l),x=k(e.minPointLength,
    5),w=b.getColumnMetrics(),z=w.width,f=b.barW=Math.max(z,1+2*n),h=b.pointXOffset=w.offset;a.inverted&&(p-=.5);e.pointPadding&&(f=Math.ceil(f));c.translate.apply(b);b.points.forEach(function(g){var c=k(g.yBottom,p),u=999+Math.abs(c),v=t(g.plotY,-u,d.len+u);u=g.plotX+h;var m=f/2,n=Math.min(v,c);c=Math.max(v,c)-n;var q;g.barX=u;g.pointWidth=z;g.tooltipPos=a.inverted?[d.len+d.pos-a.plotLeft-v,b.xAxis.len-u-m,c]:[u+m,v+d.pos-a.plotTop,c];v=l+(g.total||g.y);"percent"===e.stacking&&(v=l+(0>g.y)?-100:100);
    v=d.toPixels(v,!0);var w=(q=a.plotHeight-v-(a.plotHeight-p))?m*(n-v)/q:0;var y=q?m*(n+c-v)/q:0;q=u-w+m;w=u+w+m;var C=u+y+m;y=u-y+m;var H=n-x;var D=n+c;0>g.y&&(H=n,D=n+c+x);a.inverted&&(C=d.width-n,q=v-(d.width-p),w=m*(v-C)/q,y=m*(v-(C-c))/q,q=u+m+w,w=q-2*w,C=u-y+m,y=u+y+m,H=n,D=n+c-x,0>g.y&&(D=n+c+x));g.shapeType="path";g.shapeArgs={x:q,y:H,width:w-q,height:c,d:[["M",q,H],["L",w,H],["L",C,D],["L",y,D],["Z"]]};});};l.defaultOptions=p(d.defaultOptions,{});return l}(d);e.registerSeriesType("columnpyramid",
    l);return l});A(d,"Series/ErrorBar/ErrorBarSeries.js",[d["Series/BoxPlot/BoxPlotSeries.js"],d["Series/Column/ColumnSeries.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);};return a(c,b)};return function(c,b){function g(){this.constructor=c;}a(c,b);c.prototype=
    null===b?Object.create(b):(g.prototype=b.prototype,new g);}}(),t=l.seriesTypes.arearange,p=a.merge;a=a.extend;var k=function(a){function k(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.options=void 0;b.points=void 0;return b}c(k,a);k.prototype.getColumnMetrics=function(){return this.linkedParent&&this.linkedParent.columnMetrics||e.prototype.getColumnMetrics.call(this)};k.prototype.drawDataLabels=function(){var b=this.pointValKey;t&&(t.prototype.drawDataLabels.call(this),this.data.forEach(function(a){a.y=
    a[b];}));};k.prototype.toYData=function(b){return [b.low,b.high]};k.defaultOptions=p(d.defaultOptions,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null});return k}(d);a(k.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1});l.registerSeriesType("errorbar",k);return k});A(d,"Series/Gauge/GaugePoint.js",[d["Core/Series/SeriesRegistry.js"]],
    function(d){var e=this&&this.__extends||function(){var e=function(a,c){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c;}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);};return e(a,c)};return function(a,c){function d(){this.constructor=a;}e(a,c);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d);}}();return function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a.options=void 0;a.series=void 0;a.shapeArgs=void 0;return a}
    e(a,d);a.prototype.setState=function(a){this.state=a;};return a}(d.series.prototype.pointClass)});A(d,"Series/Gauge/GaugeSeries.js",[d["Series/Gauge/GaugePoint.js"],d["Core/Globals.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=this&&this.__extends||function(){var b=function(a,g){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);};return b(a,g)};return function(a,
    g){function c(){this.constructor=a;}b(a,g);a.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c);}}();e=e.noop;var t=l.series,p=l.seriesTypes.column,k=a.clamp,x=a.isNumber,w=a.extend,b=a.merge,g=a.pick,m=a.pInt;a=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.points=void 0;b.options=void 0;b.yAxis=void 0;return b}c(e,a);e.prototype.translate=function(){var a=this.yAxis,c=this.options,e=a.center;this.generatePoints();this.points.forEach(function(d){var n=
    b(c.dial,d.dial),f=m(g(n.radius,"80%"))*e[2]/200,h=m(g(n.baseLength,"70%"))*f/100,u=m(g(n.rearLength,"10%"))*f/100,r=n.baseWidth||3,l=n.topWidth||1,v=c.overshoot,p=a.startAngleRad+a.translate(d.y,null,null,null,!0);if(x(v)||!1===c.wrap)v=x(v)?v/180*Math.PI:0,p=k(p,a.startAngleRad-v,a.endAngleRad+v);p=180*p/Math.PI;d.shapeType="path";d.shapeArgs={d:n.path||[["M",-u,-r/2],["L",h,-r/2],["L",f,-l/2],["L",f,l/2],["L",h,r/2],["L",-u,r/2],["Z"]],translateX:e[0],translateY:e[1],rotation:p};d.plotX=e[0];d.plotY=
    e[1];});};e.prototype.drawPoints=function(){var a=this,c=a.chart,e=a.yAxis.center,d=a.pivot,m=a.options,f=m.pivot,h=c.renderer;a.points.forEach(function(f){var g=f.graphic,e=f.shapeArgs,u=e.d,d=b(m.dial,f.dial);g?(g.animate(e),e.d=u):f.graphic=h[f.shapeType](e).attr({rotation:e.rotation,zIndex:1}).addClass("highcharts-dial").add(a.group);if(!c.styledMode)f.graphic[g?"animate":"attr"]({stroke:d.borderColor||"none","stroke-width":d.borderWidth||0,fill:d.backgroundColor||"#000000"});});d?d.animate({translateX:e[0],
    translateY:e[1]}):(a.pivot=h.circle(0,0,g(f.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(e[0],e[1]).add(a.group),c.styledMode||a.pivot.attr({"stroke-width":f.borderWidth||0,stroke:f.borderColor||"#cccccc",fill:f.backgroundColor||"#000000"}));};e.prototype.animate=function(b){var a=this;b||a.points.forEach(function(b){var g=b.graphic;g&&(g.attr({rotation:180*a.yAxis.startAngleRad/Math.PI}),g.animate({rotation:b.shapeArgs.rotation},a.options.animation));});};e.prototype.render=function(){this.group=
    this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup);t.prototype.render.call(this);this.group.clip(this.chart.clipRect);};e.prototype.setData=function(b,a){t.prototype.setData.call(this,b,!1);this.processData();this.generatePoints();g(a,!0)&&this.chart.redraw();};e.prototype.hasData=function(){return !!this.points.length};e.defaultOptions=b(t.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,
    verticalAlign:"top",y:15,zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});return e}(t);w(a.prototype,{angular:!0,directTouch:!0,drawGraph:e,drawTracker:p.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:d,trackerGroups:["group","dataLabelsGroup"]});l.registerSeriesType("gauge",a);return a});A(d,"Series/PackedBubble/PackedBubblePoint.js",[d["Core/Chart/Chart.js"],d["Core/Series/Point.js"],d["Core/Series/SeriesRegistry.js"]],function(d,e,l){var a=this&&
    this.__extends||function(){var a=function(c,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c;}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);};return a(c,e)};return function(c,e){function d(){this.constructor=c;}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d);}}();return function(c){function l(){var a=null!==c&&c.apply(this,arguments)||this;a.degree=NaN;a.mass=NaN;a.radius=NaN;a.options=void 0;a.series=void 0;a.value=
    null;return a}a(l,c);l.prototype.destroy=function(){this.series.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes);return e.prototype.destroy.apply(this,arguments)};l.prototype.firePointEvent=function(){var a=this.series.options;if(this.isParentNode&&a.parentNode){var c=a.allowPointSelect;a.allowPointSelect=a.parentNode.allowPointSelect;e.prototype.firePointEvent.apply(this,arguments);a.allowPointSelect=c;}else e.prototype.firePointEvent.apply(this,arguments);};l.prototype.select=
    function(){var a=this.series.chart;this.isParentNode?(a.getSelectedPoints=a.getSelectedParentNodes,e.prototype.select.apply(this,arguments),a.getSelectedPoints=d.prototype.getSelectedPoints):e.prototype.select.apply(this,arguments);};return l}(l.seriesTypes.bubble.prototype.pointClass)});A(d,"Series/Networkgraph/DraggableNodes.js",[d["Core/Chart/Chart.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,e,l){var a=l.addEvent;e.dragNodesMixin={onMouseDown:function(a,e){e=this.chart.pointer.normalize(e);
    a.fixedPosition={chartX:e.chartX,chartY:e.chartY,plotX:a.plotX,plotY:a.plotY};a.inDragMode=!0;},onMouseMove:function(a,e){if(a.fixedPosition&&a.inDragMode){var c=this.chart,d=c.pointer.normalize(e);e=a.fixedPosition.chartX-d.chartX;d=a.fixedPosition.chartY-d.chartY;var l=void 0,w=void 0,b=c.graphLayoutsLookup;if(5<Math.abs(e)||5<Math.abs(d))l=a.fixedPosition.plotX-e,w=a.fixedPosition.plotY-d,c.isInsidePlot(l,w)&&(a.plotX=l,a.plotY=w,a.hasDragged=!0,this.redrawHalo(a),b.forEach(function(b){b.restartSimulation();}));}},
    onMouseUp:function(a,e){a.fixedPosition&&(a.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),a.inDragMode=a.hasDragged=!1,this.options.fixedDraggable||delete a.fixedPosition);},redrawHalo:function(a){a&&this.halo&&this.halo.attr({d:a.haloPath(this.options.states.hover.halo.size)});}};a(d,"load",function(){var c=this,e,d,l;c.container&&(e=a(c.container,"mousedown",function(e){var k=c.hoverPoint;k&&k.series&&k.series.hasDraggableNodes&&k.series.options.draggable&&(k.series.onMouseDown(k,
    e),d=a(c.container,"mousemove",function(b){return k&&k.series&&k.series.onMouseMove(k,b)}),l=a(c.container.ownerDocument,"mouseup",function(b){d();l();return k&&k.series&&k.series.onMouseUp(k,b)}));}));a(c,"destroy",function(){e();});});});A(d,"Series/Networkgraph/Integrations.js",[d["Core/Globals.js"]],function(d){d.networkgraphIntegrations={verlet:{attractiveForceFunction:function(e,d){return (d-e)/e},repulsiveForceFunction:function(e,d){return (d-e)/e*(d>e?1:0)},barycenter:function(){var e=this.options.gravitationalConstant,
    d=this.barycenter.xFactor,a=this.barycenter.yFactor;d=(d-(this.box.left+this.box.width)/2)*e;a=(a-(this.box.top+this.box.height)/2)*e;this.nodes.forEach(function(c){c.fixedPosition||(c.plotX-=d/c.mass/c.degree,c.plotY-=a/c.mass/c.degree);});},repulsive:function(e,d,a){d=d*this.diffTemperature/e.mass/e.degree;e.fixedPosition||(e.plotX+=a.x*d,e.plotY+=a.y*d);},attractive:function(e,d,a){var c=e.getMass(),l=-a.x*d*this.diffTemperature;d=-a.y*d*this.diffTemperature;e.fromNode.fixedPosition||(e.fromNode.plotX-=
    l*c.fromNode/e.fromNode.degree,e.fromNode.plotY-=d*c.fromNode/e.fromNode.degree);e.toNode.fixedPosition||(e.toNode.plotX+=l*c.toNode/e.toNode.degree,e.toNode.plotY+=d*c.toNode/e.toNode.degree);},integrate:function(e,d){var a=-e.options.friction,c=e.options.maxSpeed,l=(d.plotX+d.dispX-d.prevX)*a;a*=d.plotY+d.dispY-d.prevY;var p=Math.abs,k=p(l)/(l||1);p=p(a)/(a||1);l=k*Math.min(c,Math.abs(l));a=p*Math.min(c,Math.abs(a));d.prevX=d.plotX+d.dispX;d.prevY=d.plotY+d.dispY;d.plotX+=l;d.plotY+=a;d.temperature=
    e.vectorLength({x:l,y:a});},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.5)}},euler:{attractiveForceFunction:function(e,d){return e*e/d},repulsiveForceFunction:function(e,d){return d*d/e},barycenter:function(){var e=this.options.gravitationalConstant,d=this.barycenter.xFactor,a=this.barycenter.yFactor;this.nodes.forEach(function(c){if(!c.fixedPosition){var l=c.getDegree();l*=1+l/2;c.dispX+=(d-c.plotX)*e*l/c.degree;c.dispY+=(a-c.plotY)*e*l/c.degree;}});},repulsive:function(e,
    d,a,c){e.dispX+=a.x/c*d/e.degree;e.dispY+=a.y/c*d/e.degree;},attractive:function(e,d,a,c){var l=e.getMass(),p=a.x/c*d;d*=a.y/c;e.fromNode.fixedPosition||(e.fromNode.dispX-=p*l.fromNode/e.fromNode.degree,e.fromNode.dispY-=d*l.fromNode/e.fromNode.degree);e.toNode.fixedPosition||(e.toNode.dispX+=p*l.toNode/e.toNode.degree,e.toNode.dispY+=d*l.toNode/e.toNode.degree);},integrate:function(e,d){d.dispX+=d.dispX*e.options.friction;d.dispY+=d.dispY*e.options.friction;var a=d.temperature=e.vectorLength({x:d.dispX,
    y:d.dispY});0!==a&&(d.plotX+=d.dispX/a*Math.min(Math.abs(d.dispX),e.temperature),d.plotY+=d.dispY/a*Math.min(Math.abs(d.dispY),e.temperature));},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.3)}}};});A(d,"Series/Networkgraph/QuadTree.js",[d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,e){e=e.extend;var l=d.QuadTreeNode=function(a){this.box=a;this.boxSize=Math.min(a.width,a.height);this.nodes=[];this.body=this.isInternal=!1;this.isEmpty=!0;};e(l.prototype,{insert:function(a,
    c){this.isInternal?this.nodes[this.getBoxPosition(a)].insert(a,c-1):(this.isEmpty=!1,this.body?c?(this.isInternal=!0,this.divideBox(),!0!==this.body&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,c-1),this.body=!0),this.nodes[this.getBoxPosition(a)].insert(a,c-1)):(c=new l({top:a.plotX,left:a.plotY,width:.1,height:.1}),c.body=a,c.isInternal=!1,this.nodes.push(c)):(this.isInternal=!1,this.body=a));},updateMassAndCenter:function(){var a=0,c=0,e=0;this.isInternal?(this.nodes.forEach(function(d){d.isEmpty||
    (a+=d.mass,c+=d.plotX*d.mass,e+=d.plotY*d.mass);}),c/=a,e/=a):this.body&&(a=this.body.mass,c=this.body.plotX,e=this.body.plotY);this.mass=a;this.plotX=c;this.plotY=e;},divideBox:function(){var a=this.box.width/2,c=this.box.height/2;this.nodes[0]=new l({left:this.box.left,top:this.box.top,width:a,height:c});this.nodes[1]=new l({left:this.box.left+a,top:this.box.top,width:a,height:c});this.nodes[2]=new l({left:this.box.left+a,top:this.box.top+c,width:a,height:c});this.nodes[3]=new l({left:this.box.left,
    top:this.box.top+c,width:a,height:c});},getBoxPosition:function(a){var c=a.plotY<this.box.top+this.box.height/2;return a.plotX<this.box.left+this.box.width/2?c?0:3:c?1:2}});d=d.QuadTree=function(a,c,e,d){this.box={left:a,top:c,width:e,height:d};this.maxDepth=25;this.root=new l(this.box,"0");this.root.isInternal=!0;this.root.isRoot=!0;this.root.divideBox();};e(d.prototype,{insertNodes:function(a){a.forEach(function(a){this.root.insert(a,this.maxDepth);},this);},visitNodeRecursive:function(a,c,e){var d;
    a||(a=this.root);a===this.root&&c&&(d=c(a));!1!==d&&(a.nodes.forEach(function(a){if(a.isInternal){c&&(d=c(a));if(!1===d)return;this.visitNodeRecursive(a,c,e);}else a.body&&c&&c(a.body);e&&e(a);},this),a===this.root&&e&&e(a));},calculateMassAndCenter:function(){this.visitNodeRecursive(null,null,function(a){a.updateMassAndCenter();});}});});A(d,"Series/Networkgraph/Layouts.js",[d["Core/Chart/Chart.js"],d["Core/Animation/AnimationUtilities.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,e,l,a){var c=
    e.setAnimation;e=a.addEvent;var t=a.clamp,p=a.defined,k=a.extend,x=a.isFunction,w=a.pick;l.layouts={"reingold-fruchterman":function(){}};k(l.layouts["reingold-fruchterman"].prototype,{init:function(b){this.options=b;this.nodes=[];this.links=[];this.series=[];this.box={x:0,y:0,width:0,height:0};this.setInitialRendering(!0);this.integration=l.networkgraphIntegrations[b.integration];this.enableSimulation=b.enableSimulation;this.attractiveForce=w(b.attractiveForce,this.integration.attractiveForceFunction);
    this.repulsiveForce=w(b.repulsiveForce,this.integration.repulsiveForceFunction);this.approximation=b.approximation;},updateSimulation:function(b){this.enableSimulation=w(b,this.options.enableSimulation);},start:function(){var b=this.series,a=this.options;this.currentStep=0;this.forces=b[0]&&b[0].forces||[];this.chart=b[0]&&b[0].chart;this.initialRendering&&(this.initPositions(),b.forEach(function(b){b.finishedAnimating=!0;b.render();}));this.setK();this.resetSimulation(a);this.enableSimulation&&this.step();},
    step:function(){var b=this,a=this.series;b.currentStep++;"barnes-hut"===b.approximation&&(b.createQuadTree(),b.quadTree.calculateMassAndCenter());b.forces.forEach(function(a){b[a+"Forces"](b.temperature);});b.applyLimits(b.temperature);b.temperature=b.coolDown(b.startTemperature,b.diffTemperature,b.currentStep);b.prevSystemTemperature=b.systemTemperature;b.systemTemperature=b.getSystemTemperature();b.enableSimulation&&(a.forEach(function(b){b.chart&&b.render();}),b.maxIterations--&&isFinite(b.temperature)&&
    !b.isStable()?(b.simulation&&l.win.cancelAnimationFrame(b.simulation),b.simulation=l.win.requestAnimationFrame(function(){b.step();})):b.simulation=!1);},stop:function(){this.simulation&&l.win.cancelAnimationFrame(this.simulation);},setArea:function(b,a,c,e){this.box={left:b,top:a,width:c,height:e};},setK:function(){this.k=this.options.linkLength||this.integration.getK(this);},addElementsToCollection:function(b,a){b.forEach(function(b){-1===a.indexOf(b)&&a.push(b);});},removeElementFromCollection:function(b,
    a){b=a.indexOf(b);-1!==b&&a.splice(b,1);},clear:function(){this.nodes.length=0;this.links.length=0;this.series.length=0;this.resetSimulation();},resetSimulation:function(){this.forcedStop=!1;this.systemTemperature=0;this.setMaxIterations();this.setTemperature();this.setDiffTemperature();},restartSimulation:function(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0));},
    setMaxIterations:function(b){this.maxIterations=w(b,this.options.maxIterations);},setTemperature:function(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length);},setDiffTemperature:function(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1);},setInitialRendering:function(b){this.initialRendering=b;},createQuadTree:function(){this.quadTree=new l.QuadTree(this.box.left,this.box.top,this.box.width,this.box.height);this.quadTree.insertNodes(this.nodes);},initPositions:function(){var b=
    this.options.initialPositions;x(b)?(b.call(this),this.nodes.forEach(function(b){p(b.prevX)||(b.prevX=b.plotX);p(b.prevY)||(b.prevY=b.plotY);b.dispX=0;b.dispY=0;})):"circle"===b?this.setCircularPositions():this.setRandomPositions();},setCircularPositions:function(){function b(a){a.linksFrom.forEach(function(a){l[a.toNode.id]||(l[a.toNode.id]=!0,k.push(a.toNode),b(a.toNode));});}var a=this.box,c=this.nodes,e=2*Math.PI/(c.length+1),d=c.filter(function(b){return 0===b.linksTo.length}),k=[],l={},p=this.options.initialPositionRadius;
    d.forEach(function(a){k.push(a);b(a);});k.length?c.forEach(function(b){-1===k.indexOf(b)&&k.push(b);}):k=c;k.forEach(function(b,c){b.plotX=b.prevX=w(b.plotX,a.width/2+p*Math.cos(c*e));b.plotY=b.prevY=w(b.plotY,a.height/2+p*Math.sin(c*e));b.dispX=0;b.dispY=0;});},setRandomPositions:function(){function b(b){b=b*b/Math.PI;return b-=Math.floor(b)}var a=this.box,c=this.nodes,e=c.length+1;c.forEach(function(c,g){c.plotX=c.prevX=w(c.plotX,a.width*b(g));c.plotY=c.prevY=w(c.plotY,a.height*b(e+g));c.dispX=0;c.dispY=
    0;});},force:function(b){this.integration[b].apply(this,Array.prototype.slice.call(arguments,1));},barycenterForces:function(){this.getBarycenter();this.force("barycenter");},getBarycenter:function(){var b=0,a=0,c=0;this.nodes.forEach(function(g){a+=g.plotX*g.mass;c+=g.plotY*g.mass;b+=g.mass;});return this.barycenter={x:a,y:c,xFactor:a/b,yFactor:c/b}},barnesHutApproximation:function(b,a){var c=this.getDistXY(b,a),g=this.vectorLength(c);if(b!==a&&0!==g)if(a.isInternal)if(a.boxSize/g<this.options.theta&&
    0!==g){var e=this.repulsiveForce(g,this.k);this.force("repulsive",b,e*a.mass,c,g);var d=!1;}else d=!0;else e=this.repulsiveForce(g,this.k),this.force("repulsive",b,e*a.mass,c,g);return d},repulsiveForces:function(){var b=this;"barnes-hut"===b.approximation?b.nodes.forEach(function(a){b.quadTree.visitNodeRecursive(null,function(c){return b.barnesHutApproximation(a,c)});}):b.nodes.forEach(function(a){b.nodes.forEach(function(c){if(a!==c&&!a.fixedPosition){var g=b.getDistXY(a,c);var e=b.vectorLength(g);
    if(0!==e){var d=b.repulsiveForce(e,b.k);b.force("repulsive",a,d*c.mass,g,e);}}});});},attractiveForces:function(){var b=this,a,c,e;b.links.forEach(function(g){g.fromNode&&g.toNode&&(a=b.getDistXY(g.fromNode,g.toNode),c=b.vectorLength(a),0!==c&&(e=b.attractiveForce(c,b.k),b.force("attractive",g,e,a,c)));});},applyLimits:function(){var b=this;b.nodes.forEach(function(a){a.fixedPosition||(b.integration.integrate(b,a),b.applyLimitBox(a,b.box),a.dispX=0,a.dispY=0);});},applyLimitBox:function(b,a){var c=b.radius;
    b.plotX=t(b.plotX,a.left+c,a.width-c);b.plotY=t(b.plotY,a.top+c,a.height-c);},coolDown:function(b,a,c){return b-a*c},isStable:function(){return .00001>Math.abs(this.systemTemperature-this.prevSystemTemperature)||0>=this.temperature},getSystemTemperature:function(){return this.nodes.reduce(function(b,a){return b+a.temperature},0)},vectorLength:function(b){return Math.sqrt(b.x*b.x+b.y*b.y)},getDistR:function(b,a){b=this.getDistXY(b,a);return this.vectorLength(b)},getDistXY:function(b,a){var c=b.plotX-
    a.plotX;b=b.plotY-a.plotY;return {x:c,y:b,absX:Math.abs(c),absY:Math.abs(b)}}});e(d,"predraw",function(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(function(b){b.stop();});});e(d,"render",function(){function b(b){b.maxIterations--&&isFinite(b.temperature)&&!b.isStable()&&!b.enableSimulation&&(b.beforeStep&&b.beforeStep(),b.step(),e=!1,a=!0);}var a=!1;if(this.graphLayoutsLookup){c(!1,this);for(this.graphLayoutsLookup.forEach(function(b){b.start();});!e;){var e=!0;this.graphLayoutsLookup.forEach(b);}a&&
    this.series.forEach(function(b){b&&b.layout&&b.render();});}});e(d,"beforePrint",function(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(function(b){b.updateSimulation(!1);}),this.redraw());});e(d,"afterPrint",function(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(function(b){b.updateSimulation();});this.redraw();});});A(d,"Series/PackedBubble/PackedBubbleComposition.js",[d["Core/Chart/Chart.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,e,l){var a=e.layouts["reingold-fruchterman"],
    c=l.addEvent,t=l.extendClass,p=l.pick;d.prototype.getSelectedParentNodes=function(){var a=[];this.series.forEach(function(c){c.parentNode&&c.parentNode.selected&&a.push(c.parentNode);});return a};e.networkgraphIntegrations.packedbubble={repulsiveForceFunction:function(a,c,e,b){return Math.min(a,(e.marker.radius+b.marker.radius)/2)},barycenter:function(){var a=this,c=a.options.gravitationalConstant,e=a.box,b=a.nodes,d,m;b.forEach(function(g){a.options.splitSeries&&!g.isParentNode?(d=g.series.parentNode.plotX,
    m=g.series.parentNode.plotY):(d=e.width/2,m=e.height/2);g.fixedPosition||(g.plotX-=(g.plotX-d)*c/(g.mass*Math.sqrt(b.length)),g.plotY-=(g.plotY-m)*c/(g.mass*Math.sqrt(b.length)));});},repulsive:function(a,c,e,b){var g=c*this.diffTemperature/a.mass/a.degree;c=e.x*g;e=e.y*g;a.fixedPosition||(a.plotX+=c,a.plotY+=e);b.fixedPosition||(b.plotX-=c,b.plotY-=e);},integrate:e.networkgraphIntegrations.verlet.integrate,getK:e.noop};e.layouts.packedbubble=t(a,{beforeStep:function(){this.options.marker&&this.series.forEach(function(a){a&&
    a.calculateParentRadius();});},isStable:function(){var a=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&.00001>a||0>=this.temperature},setCircularPositions:function(){var a=this,c=a.box,e=a.nodes,b=2*Math.PI/(e.length+1),g,d,n=a.options.initialPositionRadius;e.forEach(function(e,k){a.options.splitSeries&&!e.isParentNode?(g=e.series.parentNode.plotX,d=e.series.parentNode.plotY):(g=c.width/2,d=c.height/2);e.plotX=
    e.prevX=p(e.plotX,g+n*Math.cos(e.index||k*b));e.plotY=e.prevY=p(e.plotY,d+n*Math.sin(e.index||k*b));e.dispX=0;e.dispY=0;});},repulsiveForces:function(){var a=this,c,e,b,g=a.options.bubblePadding;a.nodes.forEach(function(d){d.degree=d.mass;d.neighbours=0;a.nodes.forEach(function(k){c=0;d===k||d.fixedPosition||!a.options.seriesInteraction&&d.series!==k.series||(b=a.getDistXY(d,k),e=a.vectorLength(b)-(d.marker.radius+k.marker.radius+g),0>e&&(d.degree+=.01,d.neighbours++,c=a.repulsiveForce(-e/Math.sqrt(d.neighbours),
    a.k,d,k)),a.force("repulsive",d,c*k.mass,b,k,e));});});},applyLimitBox:function(c){if(this.options.splitSeries&&!c.isParentNode&&this.options.parentNodeLimit){var e=this.getDistXY(c,c.series.parentNode);var d=c.series.parentNodeRadius-c.marker.radius-this.vectorLength(e);0>d&&d>-2*c.marker.radius&&(c.plotX-=.01*e.x,c.plotY-=.01*e.y);}a.prototype.applyLimitBox.apply(this,arguments);}});c(d,"beforeRedraw",function(){this.allDataPoints&&delete this.allDataPoints;});});A(d,"Series/PackedBubble/PackedBubbleSeries.js",
    [d["Core/Color/Color.js"],d["Core/Globals.js"],d["Series/PackedBubble/PackedBubblePoint.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,e,l,a,c){var t=this&&this.__extends||function(){var a=function(b,h){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,b){for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);};return a(b,h)};return function(b,h){function f(){this.constructor=b;}a(b,h);b.prototype=null===h?Object.create(h):(f.prototype=
    h.prototype,new f);}}(),p=d.parse,k=a.series,x=a.seriesTypes.bubble,w=c.addEvent,b=c.clamp,g=c.defined,m=c.extend,n=c.fireEvent,q=c.isArray,H=c.isNumber,A=c.merge,I=c.pick,y=e.dragNodesMixin;d=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.chart=void 0;b.data=void 0;b.layout=void 0;b.options=void 0;b.points=void 0;b.xData=void 0;return b}t(f,a);f.prototype.accumulateAllPoints=function(a){var b=a.chart,h=[],f,c;for(f=0;f<b.series.length;f++)if(a=b.series[f],a.is("packedbubble")&&
    a.visible||!b.options.chart.ignoreHiddenSeries)for(c=0;c<a.yData.length;c++)h.push([null,null,a.yData[c],a.index,c,{id:c,marker:{radius:0}}]);return h};f.prototype.addLayout=function(){var a=this.options.layoutAlgorithm,b=this.chart.graphLayoutsStorage,f=this.chart.graphLayoutsLookup,c=this.chart.options.chart;b||(this.chart.graphLayoutsStorage=b={},this.chart.graphLayoutsLookup=f=[]);var d=b[a.type];d||(a.enableSimulation=g(c.forExport)?!c.forExport:a.enableSimulation,b[a.type]=d=new e.layouts[a.type],
    d.init(a),f.splice(d.index,0,d));this.layout=d;this.points.forEach(function(a){a.mass=2;a.degree=1;a.collisionNmb=1;});d.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight);d.addElementsToCollection([this],d.series);d.addElementsToCollection(this.points,d.nodes);};f.prototype.addSeriesLayout=function(){var a=this.options.layoutAlgorithm,b=this.chart.graphLayoutsStorage,f=this.chart.graphLayoutsLookup,c=A(a,a.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation});var d=b[a.type+
    "-series"];d||(b[a.type+"-series"]=d=new e.layouts[a.type],d.init(c),f.splice(d.index,0,d));this.parentNodeLayout=d;this.createParentNodes();};f.prototype.calculateParentRadius=function(){var a=this.seriesBox();this.parentNodeRadius=b(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,a?Math.max(Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20);this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius);};f.prototype.calculateZExtremes=
    function(){var a=this.options.zMin,b=this.options.zMax,f=Infinity,c=-Infinity;if(a&&b)return [a,b];this.chart.series.forEach(function(a){a.yData.forEach(function(a){g(a)&&(a>c&&(c=a),a<f&&(f=a));});});a=I(a,f);b=I(b,c);return [a,b]};f.prototype.checkOverlap=function(a,b){var h=a[0]-b[0],f=a[1]-b[1];return -.001>Math.sqrt(h*h+f*f)-Math.abs(a[2]+b[2])};f.prototype.createParentNodes=function(){var a=this,b=a.chart,f=a.parentNodeLayout,c,e=a.parentNode,d=a.pointClass,g=a.layout.options,k={radius:a.parentNodeRadius,
    lineColor:a.color,fillColor:p(a.color).brighten(.4).get()};g.parentNodeOptions&&(k=A(g.parentNodeOptions.marker||{},k));a.parentNodeMass=0;a.points.forEach(function(b){a.parentNodeMass+=Math.PI*Math.pow(b.marker.radius,2);});a.calculateParentRadius();f.nodes.forEach(function(b){b.seriesIndex===a.index&&(c=!0);});f.setArea(0,0,b.plotWidth,b.plotHeight);c||(e||(e=(new d).init(this,{mass:a.parentNodeRadius/2,marker:k,dataLabels:{inside:!1},states:{normal:{marker:k},hover:{marker:k}},dataLabelOnNull:!0,
    degree:a.parentNodeRadius,isParentNode:!0,seriesIndex:a.index})),a.parentNode&&(e.plotX=a.parentNode.plotX,e.plotY=a.parentNode.plotY),a.parentNode=e,f.addElementsToCollection([a],f.series),f.addElementsToCollection([e],f.nodes));};f.prototype.deferLayout=function(){var a=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),a.splitSeries&&this.addSeriesLayout());};f.prototype.destroy=function(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(function(a){a.removeElementFromCollection(this,
    a.series);},this);this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy()));k.prototype.destroy.apply(this,arguments);};f.prototype.drawDataLabels=function(){var a=this.options.dataLabels.textPath,b=this.points;k.prototype.drawDataLabels.apply(this,arguments);this.parentNode&&(this.parentNode.formatPrefix="parentNode",this.points=[this.parentNode],
    this.options.dataLabels.textPath=this.options.dataLabels.parentNodeTextPath,k.prototype.drawDataLabels.apply(this,arguments),this.points=b,this.options.dataLabels.textPath=a);};f.prototype.drawGraph=function(){if(this.layout&&this.layout.options.splitSeries){var a=this.chart;var b=this.layout.options.parentNodeOptions.marker;var f={fill:b.fillColor||p(this.color).brighten(.4).get(),opacity:b.fillOpacity,stroke:b.lineColor||this.color,"stroke-width":I(b.lineWidth,this.options.lineWidth)};this.parentNodesGroup||
    (this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,a.seriesGroup),this.group.attr({zIndex:2}));this.calculateParentRadius();b=A({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},f);this.parentNode.graphic||(this.graph=this.parentNode.graphic=a.renderer.symbol(f.symbol).add(this.parentNodesGroup));this.parentNode.graphic.attr(b);}};f.prototype.drawTracker=
    function(){var b=this.parentNode;a.prototype.drawTracker.call(this);if(b){var f=q(b.dataLabels)?b.dataLabels:b.dataLabel?[b.dataLabel]:[];b.graphic&&(b.graphic.element.point=b);f.forEach(function(a){a.div?a.div.point=b:a.element.point=b;});}};f.prototype.getPointRadius=function(){var a=this,f=a.chart,c=a.options,e=c.useSimulation,d=Math.min(f.plotWidth,f.plotHeight),g={},k=[],l=f.allDataPoints,n,m,p,z;["minSize","maxSize"].forEach(function(a){var b=parseInt(c[a],10),f=/%$/.test(c[a]);g[a]=f?d*b/100:
    b*Math.sqrt(l.length);});f.minRadius=n=g.minSize/Math.sqrt(l.length);f.maxRadius=m=g.maxSize/Math.sqrt(l.length);var q=e?a.calculateZExtremes():[n,m];(l||[]).forEach(function(f,h){p=e?b(f[2],q[0],q[1]):f[2];z=a.getRadius(q[0],q[1],n,m,p);0===z&&(z=null);l[h][2]=z;k.push(z);});a.radii=k;};f.prototype.init=function(){k.prototype.init.apply(this,arguments);this.eventsToUnbind.push(w(this,"updatedData",function(){this.chart.series.forEach(function(a){a.type===this.type&&(a.isDirty=!0);},this);}));return this};
    f.prototype.onMouseUp=function(a){if(a.fixedPosition&&!a.removed){var b,f,h=this.layout,c=this.parentNodeLayout;c&&h.options.dragBetweenSeries&&c.nodes.forEach(function(c){a&&a.marker&&c!==a.series.parentNode&&(b=h.getDistXY(a,c),f=h.vectorLength(b)-c.marker.radius-a.marker.radius,0>f&&(c.series.addPoint(A(a.options,{plotX:a.plotX,plotY:a.plotY}),!1),h.removeElementFromCollection(a,h.nodes),a.remove()));});y.onMouseUp.apply(this,arguments);}};f.prototype.placeBubbles=function(a){var b=this.checkOverlap,
    f=this.positionBubble,c=[],h=1,e=0,d=0;var g=[];var k;a=a.sort(function(a,b){return b[2]-a[2]});if(a.length){c.push([[0,0,a[0][2],a[0][3],a[0][4]]]);if(1<a.length)for(c.push([[0,0-a[1][2]-a[0][2],a[1][2],a[1][3],a[1][4]]]),k=2;k<a.length;k++)a[k][2]=a[k][2]||1,g=f(c[h][e],c[h-1][d],a[k]),b(g,c[h][0])?(c.push([]),d=0,c[h+1].push(f(c[h][e],c[h][0],a[k])),h++,e=0):1<h&&c[h-1][d+1]&&b(g,c[h-1][d+1])?(d++,c[h].push(f(c[h][e],c[h-1][d],a[k])),e++):(e++,c[h].push(g));this.chart.stages=c;this.chart.rawPositions=
    [].concat.apply([],c);this.resizeRadius();g=this.chart.rawPositions;}return g};f.prototype.pointAttribs=function(a,b){var f=this.options,c=f.marker;a&&a.isParentNode&&f.layoutAlgorithm&&f.layoutAlgorithm.parentNodeOptions&&(c=f.layoutAlgorithm.parentNodeOptions.marker);f=c.fillOpacity;a=k.prototype.pointAttribs.call(this,a,b);1!==f&&(a["fill-opacity"]=f);return a};f.prototype.positionBubble=function(a,b,f){var c=Math.sqrt,h=Math.asin,e=Math.acos,d=Math.pow,g=Math.abs;c=c(d(a[0]-b[0],2)+d(a[1]-b[1],
    2));e=e((d(c,2)+d(f[2]+b[2],2)-d(f[2]+a[2],2))/(2*(f[2]+b[2])*c));h=h(g(a[0]-b[0])/c);a=(0>a[1]-b[1]?0:Math.PI)+e+h*(0>(a[0]-b[0])*(a[1]-b[1])?1:-1);return [b[0]+(b[2]+f[2])*Math.sin(a),b[1]-(b[2]+f[2])*Math.cos(a),f[2],f[3],f[4]]};f.prototype.render=function(){var a=[];k.prototype.render.apply(this,arguments);this.options.dataLabels.allowOverlap||(this.data.forEach(function(b){q(b.dataLabels)&&b.dataLabels.forEach(function(b){a.push(b);});}),this.options.useSimulation&&this.chart.hideOverlappingLabels(a));};
    f.prototype.resizeRadius=function(){var a=this.chart,b=a.rawPositions,f=Math.min,c=Math.max,e=a.plotLeft,d=a.plotTop,g=a.plotHeight,k=a.plotWidth,l,n,m;var p=l=Number.POSITIVE_INFINITY;var z=n=Number.NEGATIVE_INFINITY;for(m=0;m<b.length;m++){var q=b[m][2];p=f(p,b[m][0]-q);z=c(z,b[m][0]+q);l=f(l,b[m][1]-q);n=c(n,b[m][1]+q);}m=[z-p,n-l];f=f.apply([],[(k-e)/m[0],(g-d)/m[1]]);if(1e-10<Math.abs(f-1)){for(m=0;m<b.length;m++)b[m][2]*=f;this.placeBubbles(b);}else a.diffY=g/2+d-l-(n-l)/2,a.diffX=k/2+e-p-(z-
    p)/2;};f.prototype.seriesBox=function(){var a=this.chart,b=Math.max,f=Math.min,c,e=[a.plotLeft,a.plotLeft+a.plotWidth,a.plotTop,a.plotTop+a.plotHeight];this.data.forEach(function(a){g(a.plotX)&&g(a.plotY)&&a.marker.radius&&(c=a.marker.radius,e[0]=f(e[0],a.plotX-c),e[1]=b(e[1],a.plotX+c),e[2]=f(e[2],a.plotY-c),e[3]=b(e[3],a.plotY+c));});return H(e.width/e.height)?e:null};f.prototype.setVisible=function(){var a=this;k.prototype.setVisible.apply(a,arguments);a.parentNodeLayout&&a.graph?a.visible?(a.graph.show(),
    a.parentNode.dataLabel&&a.parentNode.dataLabel.show()):(a.graph.hide(),a.parentNodeLayout.removeElementFromCollection(a.parentNode,a.parentNodeLayout.nodes),a.parentNode.dataLabel&&a.parentNode.dataLabel.hide()):a.layout&&(a.visible?a.layout.addElementsToCollection(a.points,a.layout.nodes):a.points.forEach(function(b){a.layout.removeElementFromCollection(b,a.layout.nodes);}));};f.prototype.translate=function(){var a=this.chart,b=this.data,f=this.index,c,e=this.options.useSimulation;this.processedXData=
    this.xData;this.generatePoints();g(a.allDataPoints)||(a.allDataPoints=this.accumulateAllPoints(this),this.getPointRadius());if(e)var d=a.allDataPoints;else d=this.placeBubbles(a.allDataPoints),this.options.draggable=!1;for(c=0;c<d.length;c++)if(d[c][3]===f){var k=b[d[c][4]];var l=I(d[c][2],void 0);e||(k.plotX=d[c][0]-a.plotLeft+a.diffX,k.plotY=d[c][1]-a.plotTop+a.diffY);H(l)&&(k.marker=m(k.marker,{radius:l,width:2*l,height:2*l}),k.radius=l);}e&&this.deferLayout();n(this,"afterTranslate");};f.defaultOptions=
    A(x.defaultOptions,{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){var a=this.series.chart.numberFormatter,b=this.point.value;return H(b)?a(b,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,
    bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1E3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}});return f}(x);m(d.prototype,{alignDataLabel:k.prototype.alignDataLabel,
    axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,isCartesian:!1,noSharedTooltip:!0,onMouseDown:y.onMouseDown,onMouseMove:y.onMouseMove,pointArrayMap:["value"],pointClass:l,pointValKey:"value",redrawHalo:y.redrawHalo,requireSorting:!1,searchPoint:e.noop,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"]});a.registerSeriesType("packedbubble",d);return d});A(d,"Series/Polygon/PolygonSeries.js",[d["Core/Globals.js"],d["Core/Legend/LegendSymbol.js"],d["Core/Series/SeriesRegistry.js"],
    d["Core/Utilities.js"]],function(d,e,l,a){var c=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);};return a(b,c)};return function(b,c){function e(){this.constructor=b;}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e);}}();d=d.noop;var t=l.series,p=l.seriesTypes,k=p.area,x=p.line,w=p.scatter;p=a.extend;var b=a.merge;a=function(a){function e(){var b=
    null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.options=void 0;b.points=void 0;return b}c(e,a);e.prototype.getGraphPath=function(){for(var a=x.prototype.getGraphPath.call(this),b=a.length+1;b--;)(b===a.length||"M"===a[b][0])&&0<b&&a.splice(b,0,["Z"]);return this.areaPath=a};e.prototype.drawGraph=function(){this.options.fillColor=this.color;k.prototype.drawGraph.call(this);};e.defaultOptions=b(w.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,
    pointFormat:""},trackByArea:!0});return e}(w);p(a.prototype,{type:"polygon",drawLegendSymbol:e.drawRectangle,drawTracker:t.prototype.drawTracker,setStackedPoints:d});l.registerSeriesType("polygon",a);return a});A(d,"Core/Axis/WaterfallAxis.js",[d["Extensions/Stacking.js"],d["Core/Utilities.js"]],function(d,e){var l=e.addEvent,a=e.objectEach,c;(function(c){function e(){var a=this.waterfall.stacks;a&&(a.changed=!1,delete a.alreadyChanged);}function k(){var a=this.options.stackLabels;a&&a.enabled&&
    this.waterfall.stacks&&this.waterfall.renderStackTotals();}function x(){for(var a=this.axes,b=this.series,c=b.length;c--;)b[c].options.stacking&&(a.forEach(function(a){a.isXAxis||(a.waterfall.stacks.changed=!0);}),c=0);}function w(){this.waterfall||(this.waterfall=new b(this));}var b=function(){function b(a){this.axis=a;this.stacks={changed:!1};}b.prototype.renderStackTotals=function(){var b=this.axis,c=b.waterfall.stacks,e=b.stacking&&b.stacking.stackTotalGroup,g=new d(b,b.options.stackLabels,!1,0,void 0);
    this.dummyStackItem=g;a(c,function(b){a(b,function(a){g.total=a.stackTotal;a.label&&(g.label=a.label);d.prototype.render.call(g,e);a.label=g.label;delete g.label;});});g.total=null;};return b}();c.Composition=b;c.compose=function(a,b){l(a,"init",w);l(a,"afterBuildStacks",e);l(a,"afterRender",k);l(b,"beforeRedraw",x);};})(c||(c={}));return c});A(d,"Series/Waterfall/WaterfallPoint.js",[d["Series/Column/ColumnSeries.js"],d["Core/Series/Point.js"],d["Core/Utilities.js"]],function(d,e,l){var a=this&&this.__extends||
    function(){var a=function(c,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c;}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);};return a(c,e)};return function(c,e){function d(){this.constructor=c;}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d);}}(),c=l.isNumber;return function(d){function l(){var a=null!==d&&d.apply(this,arguments)||this;a.options=void 0;a.series=void 0;return a}a(l,d);l.prototype.getClassName=function(){var a=
    e.prototype.getClassName.call(this);this.isSum?a+=" highcharts-sum":this.isIntermediateSum&&(a+=" highcharts-intermediate-sum");return a};l.prototype.isValid=function(){return c(this.y)||this.isSum||!!this.isIntermediateSum};return l}(d.prototype.pointClass)});A(d,"Series/Waterfall/WaterfallSeries.js",[d["Core/Axis/Axis.js"],d["Core/Chart/Chart.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"],d["Core/Axis/WaterfallAxis.js"],d["Series/Waterfall/WaterfallPoint.js"]],function(d,e,l,a,c,
    t){var p=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);};return a(b,c)};return function(b,c){function f(){this.constructor=b;}a(b,c);b.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f);}}(),k=l.seriesTypes,x=k.column,w=k.line,b=a.arrayMax,g=a.arrayMin,m=a.correctFloat;k=a.extend;var n=a.isNumber,q=a.merge,A=a.objectEach,J=a.pick;
    a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.chart=void 0;b.data=void 0;b.options=void 0;b.points=void 0;b.stackedYNeg=void 0;b.stackedYPos=void 0;b.stackKey=void 0;b.xData=void 0;b.yAxis=void 0;b.yData=void 0;return b}p(c,a);c.prototype.generatePoints=function(){var a;x.prototype.generatePoints.apply(this);var b=0;for(a=this.points.length;b<a;b++){var c=this.points[b];var e=this.processedYData[b];if(c.isIntermediateSum||c.isSum)c.y=m(e);}};c.prototype.translate=function(){var a=
    this.options,b=this.yAxis,c=J(a.minPointLength,5),e=c/2,d=a.threshold||0,g=d,k=d;a=a.stacking;var l=b.waterfall.stacks[this.stackKey];x.prototype.translate.apply(this);for(var m=this.points,p=0;p<m.length;p++){var q=m[p];var w=this.processedYData[p];var C=q.shapeArgs;if(C&&n(w)){var t=[0,w];var D=q.y;if(a){if(l){t=l[p];if("overlap"===a){var y=t.stackState[t.stateIndex--];y=0<=D?y:y-D;Object.hasOwnProperty.call(t,"absolutePos")&&delete t.absolutePos;Object.hasOwnProperty.call(t,"absoluteNeg")&&delete t.absoluteNeg;}else 0<=
    D?(y=t.threshold+t.posTotal,t.posTotal-=D):(y=t.threshold+t.negTotal,t.negTotal-=D,y-=D),!t.posTotal&&Object.hasOwnProperty.call(t,"absolutePos")&&(t.posTotal=t.absolutePos,delete t.absolutePos),!t.negTotal&&Object.hasOwnProperty.call(t,"absoluteNeg")&&(t.negTotal=t.absoluteNeg,delete t.absoluteNeg);q.isSum||(t.connectorThreshold=t.threshold+t.stackTotal);b.reversed?(w=0<=D?y-D:y+D,D=y):(w=y,D=y-D);q.below=w<=d;C.y=b.translate(w,!1,!0,!1,!0)||0;C.height=Math.abs(C.y-(b.translate(D,!1,!0,!1,!0)||0));
    if(D=b.waterfall.dummyStackItem)D.x=p,D.label=l[p].label,D.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[p],this.stackedYPos[p]);}}else y=Math.max(g,g+D)+t[0],C.y=b.translate(y,!1,!0,!1,!0)||0,q.isSum?(C.y=b.translate(t[1],!1,!0,!1,!0)||0,C.height=Math.min(b.translate(t[0],!1,!0,!1,!0)||0,b.len)-C.y,q.below=t[1]<=d):q.isIntermediateSum?(0<=D?(w=t[1]+k,D=k):(w=k,D=t[1]+k),b.reversed&&(w^=D,D^=w,w^=D),C.y=b.translate(w,!1,!0,!1,!0)||0,C.height=Math.abs(C.y-Math.min(b.translate(D,!1,!0,
    !1,!0)||0,b.len)),k+=t[1],q.below=w<=d):(C.height=0<w?(b.translate(g,!1,!0,!1,!0)||0)-C.y:(b.translate(g,!1,!0,!1,!0)||0)-(b.translate(g-w,!1,!0,!1,!0)||0),g+=w,q.below=g<d),0>C.height&&(C.y+=C.height,C.height*=-1);q.plotY=C.y=Math.round(C.y||0)-this.borderWidth%2/2;C.height=Math.max(Math.round(C.height||0),.001);q.yBottom=C.y+C.height;C.height<=c&&!q.isNull?(C.height=c,C.y-=e,q.plotY=C.y,q.minPointLengthOffset=0>q.y?-e:e):(q.isNull&&(C.width=0),q.minPointLengthOffset=0);D=q.plotY+(q.negative?C.height:
    0);q.below&&(q.plotY+=C.height);q.tooltipPos&&(this.chart.inverted?q.tooltipPos[0]=b.len-D:q.tooltipPos[1]=D);q.isInside=this.isPointInside(q);}}};c.prototype.processData=function(b){var c=this.options,e=this.yData,d=c.data,g=e.length,k=c.threshold||0,l,n,p,q,t;for(t=n=l=p=q=0;t<g;t++){var z=e[t];var w=d&&d[t]?d[t]:{};"sum"===z||w.isSum?e[t]=m(n):"intermediateSum"===z||w.isIntermediateSum?(e[t]=m(l),l=0):(n+=z,l+=z);p=Math.min(n,p);q=Math.max(n,q);}a.prototype.processData.call(this,b);c.stacking||(this.dataMin=
    p+k,this.dataMax=q);};c.prototype.toYData=function(a){return a.isSum?"sum":a.isIntermediateSum?"intermediateSum":a.y};c.prototype.updateParallelArrays=function(b,c){a.prototype.updateParallelArrays.call(this,b,c);if("sum"===this.yData[0]||"intermediateSum"===this.yData[0])this.yData[0]=null;};c.prototype.pointAttribs=function(a,b){var c=this.options.upColor;c&&!a.options.color&&(a.color=0<a.y?c:null);a=x.prototype.pointAttribs.call(this,a,b);delete a.dashstyle;return a};c.prototype.getGraphPath=function(){return [["M",
    0,0]]};c.prototype.getCrispPath=function(){var a=this.data,b=this.yAxis,c=a.length,e=Math.round(this.graph.strokeWidth())%2/2,d=Math.round(this.borderWidth)%2/2,g=this.xAxis.reversed,k=this.yAxis.reversed,l=this.options.stacking,m=[],n;for(n=1;n<c;n++){var p=a[n].shapeArgs;var q=a[n-1];var t=a[n-1].shapeArgs;var w=b.waterfall.stacks[this.stackKey];var x=0<q.y?-t.height:0;w&&t&&p&&(w=w[n-1],l?(w=w.connectorThreshold,x=Math.round(b.translate(w,0,1,0,1)+(k?x:0))-e):x=t.y+q.minPointLengthOffset+d-e,m.push(["M",
    (t.x||0)+(g?0:t.width||0),x],["L",(p.x||0)+(g?p.width||0:0),x]));t&&m.length&&(!l&&0>q.y&&!k||0<q.y&&k)&&((q=m[m.length-2])&&"number"===typeof q[2]&&(q[2]+=t.height||0),(q=m[m.length-1])&&"number"===typeof q[2]&&(q[2]+=t.height||0));}return m};c.prototype.drawGraph=function(){w.prototype.drawGraph.call(this);this.graph.attr({d:this.getCrispPath()});};c.prototype.setStackedPoints=function(){function a(a,b,c,f){if(J)for(c;c<J;c++)A.stackState[c]+=f;else A.stackState[0]=a,J=A.stackState.length;A.stackState.push(A.stackState[J-
    1]+b);}var b=this.options,c=this.yAxis.waterfall.stacks,e=b.threshold,d=e||0,g=d,k=this.stackKey,l=this.xData,m=l.length,n,p,q;this.yAxis.stacking.usePercentage=!1;var t=p=q=d;if(this.visible||!this.chart.options.chart.ignoreHiddenSeries){var w=c.changed;(n=c.alreadyChanged)&&0>n.indexOf(k)&&(w=!0);c[k]||(c[k]={});n=c[k];for(var x=0;x<m;x++){var y=l[x];if(!n[y]||w)n[y]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:w&&n[y]?n[y].label:void 0};var A=n[y];var G=this.yData[x];
    0<=G?A.posTotal+=G:A.negTotal+=G;var F=b.data[x];y=A.absolutePos=A.posTotal;var H=A.absoluteNeg=A.negTotal;A.stackTotal=y+H;var J=A.stackState.length;F&&F.isIntermediateSum?(a(q,p,0,q),q=p,p=e,d^=g,g^=d,d^=g):F&&F.isSum?(a(e,t,J),d=e):(a(d,G,0,t),F&&(t+=G,p+=G));A.stateIndex++;A.threshold=d;d+=A.stackTotal;}c.changed=!1;c.alreadyChanged||(c.alreadyChanged=[]);c.alreadyChanged.push(k);}};c.prototype.getExtremes=function(){var a=this.options.stacking;if(a){var c=this.yAxis;c=c.waterfall.stacks;var e=
    this.stackedYNeg=[];var d=this.stackedYPos=[];"overlap"===a?A(c[this.stackKey],function(a){e.push(g(a.stackState));d.push(b(a.stackState));}):A(c[this.stackKey],function(a){e.push(a.negTotal+a.threshold);d.push(a.posTotal+a.threshold);});return {dataMin:g(e),dataMax:b(d)}}return {dataMin:this.dataMin,dataMax:this.dataMax}};c.defaultOptions=q(x.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}});return c}(x);k(a.prototype,
    {getZonesGraphs:w.prototype.getZonesGraphs,pointValKey:"y",showLine:!0,pointClass:t});l.registerSeriesType("waterfall",a);c.compose(d,e);return a});A(d,"Extensions/Polar.js",[d["Core/Animation/AnimationUtilities.js"],d["Core/Chart/Chart.js"],d["Core/Globals.js"],d["Extensions/Pane.js"],d["Core/Pointer.js"],d["Core/Series/Series.js"],d["Core/Series/SeriesRegistry.js"],d["Core/Renderer/SVG/SVGRenderer.js"],d["Core/Utilities.js"]],function(d,e,l,a,c,t,p,k,x){var w=d.animObject;p=p.seriesTypes;var b=
    x.addEvent,g=x.defined,m=x.find,n=x.isNumber,q=x.pick,A=x.splat,J=x.uniqueKey;d=x.wrap;var I=t.prototype;c=c.prototype;I.searchPointByAngle=function(a){var b=this.chart,c=this.xAxis.pane.center;return this.searchKDTree({clientX:180+-180/Math.PI*Math.atan2(a.chartX-c[0]-b.plotLeft,a.chartY-c[1]-b.plotTop)})};I.getConnectors=function(a,b,c,e){var f=e?1:0;var d=0<=b&&b<=a.length-1?b:0>b?a.length-1+b:0;b=0>d-1?a.length-(1+f):d-1;f=d+1>a.length-1?f:d+1;var g=a[b];f=a[f];var h=g.plotX;g=g.plotY;var k=f.plotX;
    var l=f.plotY;f=a[d].plotX;d=a[d].plotY;h=(1.5*f+h)/2.5;g=(1.5*d+g)/2.5;k=(1.5*f+k)/2.5;var r=(1.5*d+l)/2.5;l=Math.sqrt(Math.pow(h-f,2)+Math.pow(g-d,2));var n=Math.sqrt(Math.pow(k-f,2)+Math.pow(r-d,2));h=Math.atan2(g-d,h-f);r=Math.PI/2+(h+Math.atan2(r-d,k-f))/2;Math.abs(h-r)>Math.PI/2&&(r-=Math.PI);h=f+Math.cos(r)*l;g=d+Math.sin(r)*l;k=f+Math.cos(Math.PI+r)*n;r=d+Math.sin(Math.PI+r)*n;f={rightContX:k,rightContY:r,leftContX:h,leftContY:g,plotX:f,plotY:d};c&&(f.prevPointCont=this.getConnectors(a,b,
    !1,e));return f};I.toXY=function(a){var b=this.chart,c=this.xAxis,f=this.yAxis,d=a.plotX,e=a.plotY,g=a.series,k=b.inverted,l=a.y,m=k?d:f.len-e;k&&g&&!g.isRadialBar&&(a.plotY=e="number"===typeof l?f.translate(l)||0:0);a.rectPlotX=d;a.rectPlotY=e;f.center&&(m+=f.center[3]/2);n(e)&&(f=k?f.postTranslate(e,m):c.postTranslate(d,m),a.plotX=a.polarPlotX=f.x-b.plotLeft,a.plotY=a.polarPlotY=f.y-b.plotTop);this.kdByAngle?(b=(d/Math.PI*180+c.pane.options.startAngle)%360,0>b&&(b+=360),a.clientX=b):a.clientX=a.plotX;};
    p.spline&&(d(p.spline.prototype,"getPointSpline",function(a,b,c,d){this.chart.polar?d?(a=this.getConnectors(b,d,!0,this.connectEnds),b=a.prevPointCont&&a.prevPointCont.rightContX,c=a.prevPointCont&&a.prevPointCont.rightContY,a=["C",n(b)?b:a.plotX,n(c)?c:a.plotY,n(a.leftContX)?a.leftContX:a.plotX,n(a.leftContY)?a.leftContY:a.plotY,a.plotX,a.plotY]):a=["M",c.plotX,c.plotY]:a=a.call(this,b,c,d);return a}),p.areasplinerange&&(p.areasplinerange.prototype.getPointSpline=p.spline.prototype.getPointSpline));
    b(t,"afterTranslate",function(){var a=this.chart;if(a.polar&&this.xAxis){(this.kdByAngle=a.tooltip&&a.tooltip.shared)?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy";if(!this.preventPostTranslate)for(var c=this.points,d=c.length;d--;)this.toXY(c[d]),!a.hasParallelCoordinates&&!this.yAxis.reversed&&c[d].y<this.yAxis.min&&(c[d].isNull=!0);this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(b(this,"afterRender",function(){if(a.polar){var b=this.yAxis.pane.center;
    this.clipCircle?this.clipCircle.animate({x:b[0],y:b[1],r:b[2]/2,innerR:b[3]/2}):this.clipCircle=a.renderer.clipCircle(b[0],b[1],b[2]/2,b[3]/2);this.group.clip(this.clipCircle);this.setClip=l.noop;}})));}},{order:2});d(p.line.prototype,"getGraphPath",function(a,b){var c=this,d;if(this.chart.polar){b=b||this.points;for(d=0;d<b.length;d++)if(!b[d].isNull){var e=d;break}if(!1!==this.options.connectEnds&&"undefined"!==typeof e){this.connectEnds=!0;b.splice(b.length,0,b[e]);var f=!0;}b.forEach(function(a){"undefined"===
    typeof a.polarPlotY&&c.toXY(a);});}d=a.apply(this,[].slice.call(arguments,1));f&&b.pop();return d});var y=function(a,b){var c=this,d=this.chart,e=this.options.animation,f=this.group,g=this.markerGroup,h=this.xAxis&&this.xAxis.center,k=d.plotLeft,n=d.plotTop,m,p,t,x;if(d.polar)if(c.isRadialBar)b||(c.startAngleRad=q(c.translatedThreshold,c.xAxis.startAngleRad),l.seriesTypes.pie.prototype.animate.call(c,b));else{if(d.renderer.isSVG)if(e=w(e),c.is("column")){if(!b){var y=h[3]/2;c.points.forEach(function(a){m=
    a.graphic;t=(p=a.shapeArgs)&&p.r;x=p&&p.innerR;m&&p&&(m.attr({r:y,innerR:y}),m.animate({r:t,innerR:x},c.options.animation));});}}else b?(a={translateX:h[0]+k,translateY:h[1]+n,scaleX:.001,scaleY:.001},f.attr(a),g&&g.attr(a)):(a={translateX:k,translateY:n,scaleX:1,scaleY:1},f.animate(a,e),g&&g.animate(a,e));}else a.call(this,b);};d(I,"animate",y);if(p.column){var z=p.arearange.prototype;p=p.column.prototype;p.polarArc=function(a,b,c,d){var e=this.xAxis.center,f=this.yAxis.len,g=e[3]/2;b=f-b+g;a=f-q(a,
    f)+g;this.yAxis.reversed&&(0>b&&(b=g),0>a&&(a=g));return {x:e[0],y:e[1],r:b,innerR:a,start:c,end:d}};d(p,"animate",y);d(p,"translate",function(a){var b=this.options,c=b.stacking,d=this.chart,e=this.xAxis,f=this.yAxis,k=f.reversed,l=f.center,m=e.startAngleRad,p=e.endAngleRad-m;this.preventPostTranslate=!0;a.call(this);if(e.isRadial){a=this.points;e=a.length;var q=f.translate(f.min);var t=f.translate(f.max);b=b.threshold||0;if(d.inverted&&n(b)){var w=f.translate(b);g(w)&&(0>w?w=0:w>p&&(w=p),this.translatedThreshold=
    w+m);}for(;e--;){b=a[e];var y=b.barX;var z=b.x;var A=b.y;b.shapeType="arc";if(d.inverted){b.plotY=f.translate(A);if(c&&f.stacking){if(A=f.stacking.stacks[(0>A?"-":"")+this.stackKey],this.visible&&A&&A[z]&&!b.isNull){var G=A[z].points[this.getStackIndicator(void 0,z,this.index).key];var F=f.translate(G[0]);G=f.translate(G[1]);g(F)&&(F=x.clamp(F,0,p));}}else F=w,G=b.plotY;F>G&&(G=[F,F=G][0]);if(!k)if(F<q)F=q;else if(G>t)G=t;else{if(G<q||F>t)F=G=0;}else if(G>q)G=q;else if(F<t)F=t;else if(F>q||G<t)F=G=p;
    f.min>f.max&&(F=G=k?p:0);F+=m;G+=m;l&&(b.barX=y+=l[3]/2);z=Math.max(y,0);A=Math.max(y+b.pointWidth,0);b.shapeArgs={x:l&&l[0],y:l&&l[1],r:A,innerR:z,start:F,end:G};b.opacity=F===G?0:void 0;b.plotY=(g(this.translatedThreshold)&&(F<this.translatedThreshold?F:G))-m;}else F=y+m,b.shapeArgs=this.polarArc(b.yBottom,b.plotY,F,F+b.pointWidth);this.toXY(b);d.inverted?(y=f.postTranslate(b.rectPlotY,y+b.pointWidth/2),b.tooltipPos=[y.x-d.plotLeft,y.y-d.plotTop]):b.tooltipPos=[b.plotX,b.plotY];l&&(b.ttBelow=b.plotY>
    l[1]);}}});p.findAlignments=function(a,b){null===b.align&&(b.align=20<a&&160>a?"left":200<a&&340>a?"right":"center");null===b.verticalAlign&&(b.verticalAlign=45>a||315<a?"bottom":135<a&&225>a?"top":"middle");return b};z&&(z.findAlignments=p.findAlignments);d(p,"alignDataLabel",function(a,b,c,d,e,g){var f=this.chart,h=q(d.inside,!!this.options.stacking);f.polar?(a=b.rectPlotX/Math.PI*180,f.inverted?(this.forceDL=f.isInsidePlot(b.plotX,Math.round(b.plotY)),h&&b.shapeArgs?(e=b.shapeArgs,e=this.yAxis.postTranslate(((e.start||
    0)+(e.end||0))/2-this.xAxis.startAngleRad,b.barX+b.pointWidth/2),e={x:e.x-f.plotLeft,y:e.y-f.plotTop}):b.tooltipPos&&(e={x:b.tooltipPos[0],y:b.tooltipPos[1]}),d.align=q(d.align,"center"),d.verticalAlign=q(d.verticalAlign,"middle")):this.findAlignments&&(d=this.findAlignments(a,d)),I.alignDataLabel.call(this,b,c,d,e,g),this.isRadialBar&&b.shapeArgs&&b.shapeArgs.start===b.shapeArgs.end?c.hide():c.show()):a.call(this,b,c,d,e,g);});}d(c,"getCoordinates",function(a,b){var c=this.chart,d={xAxis:[],yAxis:[]};
    c.polar?c.axes.forEach(function(a){var e=a.isXAxis,f=a.center;if("colorAxis"!==a.coll){var g=b.chartX-f[0]-c.plotLeft;f=b.chartY-f[1]-c.plotTop;d[e?"xAxis":"yAxis"].push({axis:a,value:a.translate(e?Math.PI-Math.atan2(g,f):Math.sqrt(Math.pow(g,2)+Math.pow(f,2)),!0)});}}):d=a.call(this,b);return d});k.prototype.clipCircle=function(a,b,c,d){var e=J(),f=this.createElement("clipPath").attr({id:e}).add(this.defs);a=d?this.arc(a,b,c,d,0,2*Math.PI).add(f):this.circle(a,b,c).add(f);a.id=e;a.clipPath=f;return a};
    b(e,"getAxes",function(){this.pane||(this.pane=[]);this.options.pane=A(this.options.pane);this.options.pane.forEach(function(b){new a(b,this);},this);});b(e,"afterDrawChartBox",function(){this.pane.forEach(function(a){a.render();});});b(t,"afterInit",function(){var a=this.chart;a.inverted&&a.polar&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0));});d(e.prototype,"get",function(a,b){return m(this.pane||[],function(a){return a.options.id===b})||a.call(this,b)});});A(d,"masters/highcharts-more.src.js",
    [d["Core/Globals.js"],d["Core/Axis/RadialAxis.js"],d["Series/Bubble/BubbleSeries.js"]],function(d,e,l){e.compose(d.Axis,d.Tick);l.compose(d.Chart,d.Legend,d.Series);});});

    });

    var accessibility = createCommonjsModule(function (module) {
    /*
     Highcharts JS v10.1.0 (2022-04-29)

     Accessibility module

     (c) 2010-2021 Highsoft AS
     Author: Oystein Moseng

     License: www.highcharts.com/license
    */
    (function(a){module.exports?(a["default"]=a,module.exports=a):a("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(a){function x(a,h,w,t){a.hasOwnProperty(h)||(a[h]=t.apply(null,w),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:h,module:a[h]}})));}a=a?a._modules:{};
    x(a,"Accessibility/A11yI18n.js",[a["Core/FormatUtilities.js"],a["Core/Utilities.js"]],function(a,h){var u=a.format,t=h.getNestedProperty,n=h.pick,k;(function(a){function y(d,e){var c=d.indexOf("#each("),b=d.indexOf("#plural("),f=d.indexOf("["),q=d.indexOf("]");if(-1<c){q=d.slice(c).indexOf(")")+c;b=d.substring(0,c);f=d.substring(q+1);q=d.substring(c+6,q).split(",");c=Number(q[1]);d="";if(e=t(q[0],e))for(c=isNaN(c)?e.length:c,c=0>c?e.length+c:Math.min(c,e.length),q=0;q<c;++q)d+=b+e[q]+f;return d.length?
    d:""}if(-1<b){f=d.slice(b).indexOf(")")+b;b=d.substring(b+8,f).split(",");switch(Number(t(b[0],e))){case 0:d=n(b[4],b[1]);break;case 1:d=n(b[2],b[1]);break;case 2:d=n(b[3],b[1]);break;default:d=b[1];}d?(e=d,e=e.trim&&e.trim()||e.replace(/^\s+|\s+$/g,"")):e="";return e}return -1<f?(b=d.substring(0,f),f=Number(d.substring(f+1,q)),d=void 0,e=t(b,e),!isNaN(f)&&e&&(0>f?(d=e[e.length+f],"undefined"===typeof d&&(d=e[0])):(d=e[f],"undefined"===typeof d&&(d=e[e.length-1]))),"undefined"!==typeof d?d:""):"{"+
    d+"}"}function g(d,e,c){var b=function(b,c){b=b.slice(c||0);var f=b.indexOf("{"),d=b.indexOf("}");if(-1<f&&d>f)return {statement:b.substring(f+1,d),begin:c+f+1,end:c+d}},f=[],q=0;do{var z=b(d,q);var a=d.substring(q,z&&z.begin-1);a.length&&f.push({value:a,type:"constant"});z&&f.push({value:z.statement,type:"statement"});q=z?z.end+1:q+1;}while(z);f.forEach(function(b){"statement"===b.type&&(b.value=y(b.value,e));});return u(f.reduce(function(b,c){return b+c.value},""),e,c)}function r(d,e){d=d.split(".");
    for(var c=this.options.lang,b=0;b<d.length;++b)c=c&&c[d[b]];return "string"===typeof c?g(c,e,this):""}var m=[];a.compose=function(d){-1===m.indexOf(d)&&(m.push(d),d.prototype.langFormat=r);return d};a.i18nFormat=g;})(k||(k={}));return k});x(a,"Accessibility/Utils/HTMLUtilities.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,h){function u(a){if("function"===typeof k.MouseEvent)return new k.MouseEvent(a.type,a);if(n.createEvent){var g=n.createEvent("MouseEvent");if(g.initMouseEvent)return g.initMouseEvent(a.type,
    a.bubbles,a.cancelable,a.view||k,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget),g}return t(a.type)}function t(a,g){g=g||{x:0,y:0};if("function"===typeof k.MouseEvent)return new k.MouseEvent(a,{bubbles:!0,cancelable:!0,composed:!0,view:k,detail:"click"===a?1:0,screenX:g.x,screenY:g.y,clientX:g.x,clientY:g.y});if(n.createEvent){var y=n.createEvent("MouseEvent");if(y.initMouseEvent)return y.initMouseEvent(a,!0,!0,k,"click"===a?1:0,g.x,
    g.y,g.x,g.y,!1,!1,!1,!1,0,null),y}return {type:a}}var n=a.doc,k=a.win,E=h.css;return {addClass:function(a,g){a.classList?a.classList.add(g):0>a.className.indexOf(g)&&(a.className+=" "+g);},cloneMouseEvent:u,cloneTouchEvent:function(a){var g=function(a){for(var g=[],d=0;d<a.length;++d){var e=a.item(d);e&&g.push(e);}return g};if("function"===typeof k.TouchEvent)return g=new k.TouchEvent(a.type,{touches:g(a.touches),targetTouches:g(a.targetTouches),changedTouches:g(a.changedTouches),ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,
    altKey:a.altKey,metaKey:a.metaKey,bubbles:a.bubbles,cancelable:a.cancelable,composed:a.composed,detail:a.detail,view:a.view}),a.defaultPrevented&&g.preventDefault(),g;g=u(a);g.touches=a.touches;g.changedTouches=a.changedTouches;g.targetTouches=a.targetTouches;return g},escapeStringForHTML:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(a){return n.getElementById(a)},getFakeMouseEvent:t,
    getHeadingTagNameForElement:function(a){var g=function(a){a=parseInt(a.slice(1),10);return "h"+Math.min(6,a+1)},y=function(a){var d;a:{for(d=a;d=d.previousSibling;){var e=d.tagName||"";if(/H[1-6]/.test(e)){d=e;break a}}d="";}if(d)return g(d);a=a.parentElement;if(!a)return "p";d=a.tagName;return /H[1-6]/.test(d)?g(d):y(a)};return y(a)},removeChildNodes:function(a){for(;a.lastChild;)a.removeChild(a.lastChild);},removeClass:function(a,g){a.classList?a.classList.remove(g):a.className=a.className.replace(new RegExp(g,
    "g"),"");},removeElement:function(a){a&&a.parentNode&&a.parentNode.removeChild(a);},reverseChildNodes:function(a){for(var g=a.childNodes.length;g--;)a.appendChild(a.childNodes[g]);},stripHTMLTagsFromString:function(a){return "string"===typeof a?a.replace(/<\/?[^>]+(>|$)/g,""):a},visuallyHideElement:function(a){E(a,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",
    filter:"alpha(opacity=1)",opacity:.01});}}});x(a,"Accessibility/Utils/ChartUtilities.js",[a["Core/Globals.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Core/Utilities.js"]],function(a,h,w){function u(b,f){var d=f.type,e=b.hcEvents;r.createEvent&&(b.dispatchEvent||b.fireEvent)?b.dispatchEvent?b.dispatchEvent(f):b.fireEvent(d,f):e&&e[d]?c(b,d,f):b.element&&u(b.element,f);}function n(b){var c=b.chart,d={},e="Seconds";d.Seconds=((b.dataMax||b.max||0)-(b.dataMin||b.min||0))/1E3;d.Minutes=d.Seconds/60;
    d.Hours=d.Minutes/60;d.Days=d.Hours/24;["Minutes","Hours","Days"].forEach(function(b){2<d[b]&&(e=b);});var a=d[e].toFixed("Seconds"!==e&&"Minutes"!==e?1:0);return c.langFormat("accessibility.axis.timeRange"+e,{chart:c,axis:b,range:a.replace(".0","")})}function k(b){var c=b.chart,d=c.options,e=d&&d.accessibility&&d.accessibility.screenReaderSection.axisRangeDateFormat||"",a={min:b.dataMin||b.min||0,max:b.dataMax||b.max||0};d=function(d){return b.dateTime?c.time.dateFormat(e,a[d]):a[d].toString()};return c.langFormat("accessibility.axis.rangeFromTo",
    {chart:c,axis:b,rangeFrom:d("min"),rangeTo:d("max")})}function E(b){if(b.points&&b.points.length)return (b=e(b.points,function(b){return !!b.graphic}))&&b.graphic&&b.graphic.element}function y(b){var c=E(b);return c&&c.parentNode||b.graph&&b.graph.element||b.group&&b.group.element}function g(b,c){c.setAttribute("aria-hidden",!1);c!==b.renderTo&&c.parentNode&&c.parentNode!==r.body&&(Array.prototype.forEach.call(c.parentNode.childNodes,function(b){b.hasAttribute("aria-hidden")||b.setAttribute("aria-hidden",
    !0);}),g(b,c.parentNode));}var r=a.doc,m=h.stripHTMLTagsFromString,d=w.defined,e=w.find,c=w.fireEvent;return {fireEventOnWrappedOrUnwrappedElement:u,getChartTitle:function(b){return m(b.options.title.text||b.langFormat("accessibility.defaultChartTitle",{chart:b}))},getAxisDescription:function(b){return b&&(b.userOptions&&b.userOptions.accessibility&&b.userOptions.accessibility.description||b.axisTitle&&b.axisTitle.textStr||b.options.id||b.categories&&"categories"||b.dateTime&&"Time"||"values")},getAxisRangeDescription:function(b){var c=
    b.options||{};return c.accessibility&&"undefined"!==typeof c.accessibility.rangeDescription?c.accessibility.rangeDescription:b.categories?(c=b.chart,b=b.dataMax&&b.dataMin?c.langFormat("accessibility.axis.rangeCategories",{chart:c,axis:b,numCategories:b.dataMax-b.dataMin+1}):"",b):!b.dateTime||0!==b.min&&0!==b.dataMin?k(b):n(b)},getPointFromXY:function(b,c,d){for(var f=b.length,a;f--;)if(a=e(b[f].points||[],function(b){return b.x===c&&b.y===d}))return a},getSeriesFirstPointElement:E,getSeriesFromName:function(b,
    c){return c?(b.series||[]).filter(function(b){return b.name===c}):b.series},getSeriesA11yElement:y,unhideChartElementFromAT:g,hideSeriesFromAT:function(b){(b=y(b))&&b.setAttribute("aria-hidden",!0);},scrollToPoint:function(b){var f=b.series.xAxis,e=b.series.yAxis,a=f&&f.scrollbar?f:e;if((f=a&&a.scrollbar)&&d(f.to)&&d(f.from)){e=f.to-f.from;if(d(a.dataMin)&&d(a.dataMax)){var g=a.toPixels(a.dataMin),m=a.toPixels(a.dataMax);b=(a.toPixels(b["xAxis"===a.coll?"x":"y"]||0)-g)/(m-g);}else b=0;f.updatePosition(b-
    e/2,b+e/2);c(f,"changed",{from:f.from,to:f.to,trigger:"scrollbar",DOMEvent:null});}}}});x(a,"Accessibility/Utils/DOMElementProvider.js",[a["Core/Globals.js"],a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h){var u=a.doc,t=h.removeElement;return function(){function a(){this.elements=[];}a.prototype.createElement=function(){var a=u.createElement.apply(u,arguments);this.elements.push(a);return a};a.prototype.destroyCreatedElements=function(){this.elements.forEach(function(a){t(a);});this.elements=
    [];};return a}()});x(a,"Accessibility/Utils/EventProvider.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,h){var u=h.addEvent;return function(){function h(){this.eventRemovers=[];}h.prototype.addEvent=function(){var h=u.apply(a,arguments);this.eventRemovers.push(h);return h};h.prototype.removeAddedEvents=function(){this.eventRemovers.forEach(function(a){return a()});this.eventRemovers=[];};return h}()});x(a,"Accessibility/AccessibilityComponent.js",[a["Accessibility/Utils/ChartUtilities.js"],
    a["Accessibility/Utils/DOMElementProvider.js"],a["Accessibility/Utils/EventProvider.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Core/Utilities.js"]],function(a,h,w,t,n){var k=a.fireEventOnWrappedOrUnwrappedElement,u=t.getFakeMouseEvent;a=n.extend;t=function(){function a(){this.proxyProvider=this.keyCodes=this.eventProvider=this.domElementProvider=this.chart=void 0;}a.prototype.initBase=function(a,r){this.chart=a;this.eventProvider=new w;this.domElementProvider=new h;this.proxyProvider=r;this.keyCodes=
    {left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36};};a.prototype.addEvent=function(a,r,m,d){return this.eventProvider.addEvent(a,r,m,d)};a.prototype.createElement=function(a,r){return this.domElementProvider.createElement(a,r)};a.prototype.fakeClickEvent=function(a){var g=u("click");k(a,g);};a.prototype.destroyBase=function(){this.domElementProvider.destroyCreatedElements();this.eventProvider.removeAddedEvents();};return a}();a(t.prototype,{init:function(){},
    getKeyboardNavigation:function(){},onChartUpdate:function(){},onChartRender:function(){},destroy:function(){}});return t});x(a,"Accessibility/KeyboardNavigationHandler.js",[a["Core/Utilities.js"]],function(a){var h=a.find;a=function(){function a(a,h){this.chart=a;this.keyCodeMap=h.keyCodeMap||[];this.validate=h.validate;this.init=h.init;this.terminate=h.terminate;this.response={success:1,prev:2,next:3,noHandler:4,fail:5};}a.prototype.run=function(a){var u=a.which||a.keyCode,k=this.response.noHandler,
    w=h(this.keyCodeMap,function(a){return -1<a[0].indexOf(u)});w?k=w[1].call(this,u,a):9===u&&(k=this.response[a.shiftKey?"prev":"next"]);return k};return a}();return a});x(a,"Accessibility/Components/ContainerComponent.js",[a["Accessibility/AccessibilityComponent.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Core/Globals.js"],a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h,w,t,n){var k=this&&this.__extends||function(){var a=function(d,e){a=
    Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b;}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);};return a(d,e)};return function(d,e){function c(){this.constructor=d;}a(d,e);d.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c);}}(),u=w.unhideChartElementFromAT,y=w.getChartTitle,g=t.doc,r=n.stripHTMLTagsFromString;return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}k(d,a);d.prototype.onChartUpdate=function(){this.handleSVGTitleElement();
    this.setSVGContainerLabel();this.setGraphicContainerAttrs();this.setRenderToAttrs();this.makeCreditsAccessible();};d.prototype.handleSVGTitleElement=function(){var d=this.chart,c="highcharts-title-"+d.index,b=r(d.langFormat("accessibility.svgContainerTitle",{chartTitle:y(d)}));if(b.length){var a=this.svgTitleElement=this.svgTitleElement||g.createElementNS("http://www.w3.org/2000/svg","title");a.textContent=b;a.id=c;d.renderTo.insertBefore(a,d.renderTo.firstChild);}};d.prototype.setSVGContainerLabel=
    function(){var d=this.chart,c=d.langFormat("accessibility.svgContainerLabel",{chartTitle:y(d)});d.renderer.box&&c.length&&d.renderer.box.setAttribute("aria-label",c);};d.prototype.setGraphicContainerAttrs=function(){var d=this.chart,c=d.langFormat("accessibility.graphicContainerLabel",{chartTitle:y(d)});c.length&&d.container.setAttribute("aria-label",c);};d.prototype.setRenderToAttrs=function(){var d=this.chart,c="disabled"!==d.options.accessibility.landmarkVerbosity,b=d.langFormat("accessibility.chartContainerLabel",
    {title:y(d),chart:d});b&&(d.renderTo.setAttribute("role",c?"region":"group"),d.renderTo.setAttribute("aria-label",b));};d.prototype.makeCreditsAccessible=function(){var d=this.chart,c=d.credits;c&&(c.textStr&&c.element.setAttribute("aria-label",d.langFormat("accessibility.credits",{creditsStr:r(c.textStr)})),u(d,c.element));};d.prototype.getKeyboardNavigation=function(){var d=this.chart;return new h(d,{keyCodeMap:[],validate:function(){return !0},init:function(){var c=d.accessibility;c&&c.keyboardNavigation.tabindexContainer.focus();}})};
    d.prototype.destroy=function(){this.chart.renderTo.setAttribute("aria-hidden",!0);};return d}(a)});x(a,"Accessibility/FocusBorder.js",[a["Core/Renderer/SVG/SVGLabel.js"],a["Core/Utilities.js"]],function(a,h){var u=h.addEvent,t=h.pick,n;(function(h){function k(){var b=this.focusElement,c=this.options.accessibility.keyboardNavigation.focusBorder;b&&(b.removeFocusBorder(),c.enabled&&b.addFocusBorder(c.margin,{stroke:c.style.color,strokeWidth:c.style.lineWidth,r:c.style.borderRadius}));}function y(b,c){var d=
    this.options.accessibility.keyboardNavigation.focusBorder;(c=c||b.element)&&c.focus&&(c.hcEvents&&c.hcEvents.focusin||u(c,"focusin",function(){}),c.focus(),d.hideBrowserFocusOutline&&(c.style.outline="none"));this.focusElement&&this.focusElement.removeFocusBorder();this.focusElement=b;this.renderFocusBorder();}function g(b){if(!b.focusBorderDestroyHook){var c=b.destroy;b.destroy=function(){b.focusBorder&&b.focusBorder.destroy&&b.focusBorder.destroy();return c.apply(b,arguments)};b.focusBorderDestroyHook=
    c;}}function r(b,c){this.focusBorder&&this.removeFocusBorder();var d=this.getBBox(),f=t(b,3),e=this.parentGroup,q=this.scaleX||e&&e.scaleX,h=this.scaleY||e&&e.scaleY;q=(q?!h:h)?Math.abs(q||h||1):(Math.abs(q||1)+Math.abs(h||1))/2;d.x+=this.translateX?this.translateX:0;d.y+=this.translateY?this.translateY:0;h=d.x-f;var r=d.y-f,B=d.width+2*f,C=d.height+2*f,D=this instanceof a;if("text"===this.element.nodeName||D){var I=!!this.rotation;if(D)var p={x:I?1:0,y:0};else{var l=p=0;"middle"===this.attr("text-anchor")?
    p=l=.5:this.rotation?p=.25:l=.75;p={x:p,y:l};}l=+this.attr("x");var v=+this.attr("y");isNaN(l)||(h=l-d.width*p.x-f);isNaN(v)||(r=v-d.height*p.y-f);D&&I&&(D=B,B=C,C=D,isNaN(l)||(h=l-d.height*p.x-f),isNaN(v)||(r=v-d.width*p.y-f));}this.focusBorder=this.renderer.rect(h,r,B,C,parseInt((c&&c.r||0).toString(),10)/q).addClass("highcharts-focus-border").attr({zIndex:99}).add(e);this.renderer.styledMode||this.focusBorder.attr({stroke:c&&c.stroke,"stroke-width":(c&&c.strokeWidth||0)/q});m(this,b,c);g(this);}function m(c){for(var d=
    [],a=1;a<arguments.length;a++)d[a-1]=arguments[a];c.focusBorderUpdateHooks||(c.focusBorderUpdateHooks={},b.forEach(function(b){b+="Setter";var a=c[b]||c._defaultSetter;c.focusBorderUpdateHooks[b]=a;c[b]=function(){var b=a.apply(c,arguments);c.addFocusBorder.apply(c,d);return b};}));}function d(){e(this);this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook);this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder);}function e(b){b.focusBorderUpdateHooks&&
    (Object.keys(b.focusBorderUpdateHooks).forEach(function(c){var d=b.focusBorderUpdateHooks[c];d===b._defaultSetter?delete b[c]:b[c]=d;}),delete b.focusBorderUpdateHooks);}var c=[],b="x y transform width height r d stroke-width".split(" ");h.compose=function(b,a){-1===c.indexOf(b)&&(c.push(b),b=b.prototype,b.renderFocusBorder=k,b.setFocusToElement=y);-1===c.indexOf(a)&&(c.push(a),a=a.prototype,a.addFocusBorder=r,a.removeFocusBorder=d);};})(n||(n={}));return n});x(a,"Accessibility/Utils/Announcer.js",[a["Core/Renderer/HTML/AST.js"],
    a["Accessibility/Utils/DOMElementProvider.js"],a["Core/Globals.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Core/Utilities.js"]],function(a,h,w,t,n){var k=w.doc,u=t.addClass,y=t.visuallyHideElement,g=n.attr;return function(){function r(a,d){this.chart=a;this.domElementProvider=new h;this.announceRegion=this.addAnnounceRegion(d);}r.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements();};r.prototype.announce=function(g){var d=this;a.setElementHTML(this.announceRegion,g);this.clearAnnouncementRegionTimer&&
    clearTimeout(this.clearAnnouncementRegionTimer);this.clearAnnouncementRegionTimer=setTimeout(function(){d.announceRegion.innerHTML=a.emptyHTML;delete d.clearAnnouncementRegionTimer;},1E3);};r.prototype.addAnnounceRegion=function(a){var d=this.chart.announcerContainer||this.createAnnouncerContainer(),e=this.domElementProvider.createElement("div");g(e,{"aria-hidden":!1,"aria-live":a});this.chart.styledMode?u(e,"highcharts-visually-hidden"):y(e);d.appendChild(e);return e};r.prototype.createAnnouncerContainer=
    function(){var a=this.chart,d=k.createElement("div");g(d,{"aria-hidden":!1,"class":"highcharts-announcer-container"});d.style.position="relative";a.renderTo.insertBefore(d,a.renderTo.firstChild);return a.announcerContainer=d};return r}()});x(a,"Accessibility/Components/AnnotationsA11y.js",[a["Accessibility/Utils/HTMLUtilities.js"]],function(a){function h(a){return (a.annotations||[]).reduce(function(a,h){h.options&&!1!==h.options.visible&&(a=a.concat(h.labels));return a},[])}function u(a){return a.options&&
    a.options.accessibility&&a.options.accessibility.description||a.graphic&&a.graphic.text&&a.graphic.text.textStr||""}function t(a){var g=a.options&&a.options.accessibility&&a.options.accessibility.description;if(g)return g;g=a.chart;var h=u(a),m=a.points.filter(function(c){return !!c.graphic}).map(function(c){var b=c.accessibility&&c.accessibility.valueDescription||c.graphic&&c.graphic.element&&c.graphic.element.getAttribute("aria-label")||"";c=c&&c.series.name||"";return (c?c+", ":"")+"data point "+
    b}).filter(function(c){return !!c}),d=m.length,e="accessibility.screenReaderSection.annotations.description"+(1<d?"MultiplePoints":d?"SinglePoint":"NoPoints");a={annotationText:h,annotation:a,numPoints:d,annotationPoint:m[0],additionalAnnotationPoints:m.slice(1)};return g.langFormat(e,a)}function n(a){return h(a).map(function(a){return (a=k(E(t(a))))?"<li>"+a+"</li>":""})}var k=a.escapeStringForHTML,E=a.stripHTMLTagsFromString;return {getAnnotationsInfoHTML:function(a){var g=a.annotations;return g&&
    g.length?'<ul style="list-style-type: none">'+n(a).join(" ")+"</ul>":""},getAnnotationLabelDescription:t,getAnnotationListItems:n,getPointAnnotationTexts:function(a){var g=h(a.series.chart).filter(function(g){return -1<g.points.indexOf(a)});return g.length?g.map(function(a){return ""+u(a)}):[]}}});x(a,"Accessibility/Components/InfoRegionsComponent.js",[a["Accessibility/A11yI18n.js"],a["Accessibility/AccessibilityComponent.js"],a["Accessibility/Utils/Announcer.js"],a["Accessibility/Components/AnnotationsA11y.js"],
    a["Core/Renderer/HTML/AST.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Core/FormatUtilities.js"],a["Core/Globals.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Core/Utilities.js"]],function(a,h,w,t,n,k,E,y,g,r){function m(b,c){var a=c[0],d=b.series&&b.series[0]||{};d={numSeries:b.series.length,numPoints:d.points&&d.points.length,chart:b,mapTitle:b.mapView&&b.mapView.geoMap&&b.mapView.geoMap.title};if(!a)return b.langFormat("accessibility.chartTypes.emptyChart",d);if("map"===a)return d.mapTitle?
    b.langFormat("accessibility.chartTypes.mapTypeDescription",d):b.langFormat("accessibility.chartTypes.unknownMap",d);if(1<b.types.length)return b.langFormat("accessibility.chartTypes.combinationChart",d);c=c[0];a=b.langFormat("accessibility.seriesTypeDescriptions."+c,d);var e=b.series&&2>b.series.length?"Single":"Multiple";return (b.langFormat("accessibility.chartTypes."+c+e,d)||b.langFormat("accessibility.chartTypes.default"+e,d))+(a?" "+a:"")}var d=this&&this.__extends||function(){var b=function(c,
    a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c;}||function(b,c){for(var a in c)c.hasOwnProperty(a)&&(b[a]=c[a]);};return b(c,a)};return function(c,a){function d(){this.constructor=c;}b(c,a);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d);}}(),e=t.getAnnotationsInfoHTML,c=k.getAxisDescription,b=k.getAxisRangeDescription,f=k.getChartTitle,q=k.unhideChartElementFromAT,z=E.format,u=y.doc,G=g.addClass,x=g.getElement,A=g.getHeadingTagNameForElement,
    F=g.stripHTMLTagsFromString,B=g.visuallyHideElement,C=r.attr,D=r.pick;return function(g){function p(){var b=null!==g&&g.apply(this,arguments)||this;b.announcer=void 0;b.screenReaderSections={};return b}d(p,g);p.prototype.init=function(){var b=this.chart,c=this;this.initRegionsDefinitions();this.addEvent(b,"aftergetTableAST",function(b){c.onDataTableCreated(b);});this.addEvent(b,"afterViewData",function(b){c.dataTableDiv=b;setTimeout(function(){c.focusDataTable();},300);});this.announcer=new w(b,"assertive");};
    p.prototype.initRegionsDefinitions=function(){var b=this;this.screenReaderSections={before:{element:null,buildContent:function(c){var a=c.options.accessibility.screenReaderSection.beforeChartFormatter;return a?a(c):b.defaultBeforeChartFormatter(c)},insertIntoDOM:function(b,c){c.renderTo.insertBefore(b,c.renderTo.firstChild);},afterInserted:function(){"undefined"!==typeof b.sonifyButtonId&&b.initSonifyButton(b.sonifyButtonId);"undefined"!==typeof b.dataTableButtonId&&b.initDataTableButton(b.dataTableButtonId);}},
    after:{element:null,buildContent:function(c){var a=c.options.accessibility.screenReaderSection.afterChartFormatter;return a?a(c):b.defaultAfterChartFormatter()},insertIntoDOM:function(b,c){c.renderTo.insertBefore(b,c.container.nextSibling);},afterInserted:function(){b.chart.accessibility&&b.chart.accessibility.keyboardNavigation.updateExitAnchor();}}};};p.prototype.onChartRender=function(){var b=this;this.linkedDescriptionElement=this.getLinkedDescriptionElement();this.setLinkedDescriptionAttrs();Object.keys(this.screenReaderSections).forEach(function(c){b.updateScreenReaderSection(c);});};
    p.prototype.getLinkedDescriptionElement=function(){var b=this.chart.options.accessibility.linkedDescription;if(b){if("string"!==typeof b)return b;b=z(b,this.chart);b=u.querySelectorAll(b);if(1===b.length)return b[0]}};p.prototype.setLinkedDescriptionAttrs=function(){var b=this.linkedDescriptionElement;b&&(b.setAttribute("aria-hidden","true"),G(b,"highcharts-linked-description"));};p.prototype.updateScreenReaderSection=function(b){var c=this.chart,a=this.screenReaderSections[b],d=a.buildContent(c),
    l=a.element=a.element||this.createElement("div"),e=l.firstChild||this.createElement("div");d?(this.setScreenReaderSectionAttribs(l,b),n.setElementHTML(e,d),l.appendChild(e),a.insertIntoDOM(l,c),c.styledMode?G(e,"highcharts-visually-hidden"):B(e),q(c,e),a.afterInserted&&a.afterInserted()):(l.parentNode&&l.parentNode.removeChild(l),delete a.element);};p.prototype.setScreenReaderSectionAttribs=function(b,c){var a=this.chart,d=a.langFormat("accessibility.screenReaderSection."+c+"RegionLabel",{chart:a,
    chartTitle:f(a)});C(b,{id:"highcharts-screen-reader-region-"+c+"-"+a.index,"aria-label":d||void 0});b.style.position="relative";d&&b.setAttribute("role","all"===a.options.accessibility.landmarkVerbosity?"region":"group");};p.prototype.defaultBeforeChartFormatter=function(){var b=this.chart,c=b.options.accessibility.screenReaderSection.beforeChartFormat;if(!c)return "";var d=this.getAxesDescription(),L=b.sonify&&b.options.sonification&&b.options.sonification.enabled,J="highcharts-a11y-sonify-data-btn-"+
    b.index,q="hc-linkto-highcharts-data-table-"+b.index,p=e(b),C=b.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:b});d={headingTagName:A(b.renderTo),chartTitle:f(b),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:d.xAxis,yAxisDescription:d.yAxis,playAsSoundButton:L?this.getSonifyButtonText(J):"",viewTableButton:b.getCSV?this.getDataTableButtonText(q):"",annotationsTitle:p?C:"",annotationsList:p};
    b=a.i18nFormat(c,d,b);this.dataTableButtonId=q;this.sonifyButtonId=J;return b.replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")};p.prototype.defaultAfterChartFormatter=function(){var b=this.chart,c=b.options.accessibility.screenReaderSection.afterChartFormat;if(!c)return "";var d={endOfChartMarker:this.getEndOfChartMarkerText()};return a.i18nFormat(c,d,b).replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")};p.prototype.getLinkedDescription=function(){var b=this.linkedDescriptionElement;return F(b&&b.innerHTML||"")};p.prototype.getLongdescText=
    function(){var b=this.chart.options,c=b.caption;c=c&&c.text;var a=this.getLinkedDescription();return b.accessibility.description||a||c||""};p.prototype.getTypeDescriptionText=function(){var b=this.chart;return b.types?b.options.accessibility.typeDescription||m(b,b.types):""};p.prototype.getDataTableButtonText=function(b){var c=this.chart;c=c.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:c,chartTitle:f(c)});return '<button id="'+b+'">'+c+"</button>"};p.prototype.getSonifyButtonText=
    function(b){var c=this.chart;if(c.options.sonification&&!1===c.options.sonification.enabled)return "";c=c.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:c,chartTitle:f(c)});return '<button id="'+b+'">'+c+"</button>"};p.prototype.getSubtitleText=function(){var b=this.chart.options.subtitle;return F(b&&b.text||"")};p.prototype.getEndOfChartMarkerText=function(){var b=this.chart,c=b.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:b});return '<div id="highcharts-end-of-chart-marker-'+
    b.index+'">'+c+"</div>"};p.prototype.onDataTableCreated=function(b){var c=this.chart;if(c.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");var a=b.tree.attributes||{};a.tabindex=-1;a.summary=c.langFormat("accessibility.table.tableSummary",{chart:c});b.tree.attributes=a;}};p.prototype.focusDataTable=function(){var b=this.dataTableDiv;(b=b&&b.getElementsByTagName("table")[0])&&b.focus&&b.focus();};p.prototype.initSonifyButton=function(b){var c=
    this,a=this.sonifyButton=x(b),d=this.chart,e=function(b){a&&(a.setAttribute("aria-hidden","true"),a.setAttribute("aria-label",""));b.preventDefault();b.stopPropagation();b=d.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:d});c.announcer.announce(b);setTimeout(function(){a&&(a.removeAttribute("aria-hidden"),a.removeAttribute("aria-label"));d.sonify&&d.sonify();},1E3);};a&&d&&(a.setAttribute("tabindex",-1),a.onclick=function(b){(d.options.accessibility&&d.options.accessibility.screenReaderSection.onPlayAsSoundClick||
    e).call(this,b,d);});};p.prototype.initDataTableButton=function(b){var c=this.viewDataTableButton=x(b),a=this.chart;b=b.replace("hc-linkto-","");c&&(C(c,{tabindex:-1,"aria-expanded":!!x(b)}),c.onclick=a.options.accessibility.screenReaderSection.onViewDataTableClick||function(){a.viewData();});};p.prototype.getAxesDescription=function(){var b=this.chart,c=function(c,a){c=b[c];return 1<c.length||c[0]&&D(c[0].options.accessibility&&c[0].options.accessibility.enabled,a)},a=!!b.types&&0>b.types.indexOf("map")&&
    0>b.types.indexOf("treemap")&&0>b.types.indexOf("tilemap"),d=!!b.hasCartesianSeries,e=c("xAxis",!b.angular&&d&&a);c=c("yAxis",d&&a);a={};e&&(a.xAxis=this.getAxisDescriptionText("xAxis"));c&&(a.yAxis=this.getAxisDescriptionText("yAxis"));return a};p.prototype.getAxisDescriptionText=function(a){var d=this.chart,e=d[a];return d.langFormat("accessibility.axis."+a+"Description"+(1<e.length?"Plural":"Singular"),{chart:d,names:e.map(function(b){return c(b)}),ranges:e.map(function(c){return b(c)}),numAxes:e.length})};
    p.prototype.destroy=function(){this.announcer&&this.announcer.destroy();};return p}(h)});x(a,"Accessibility/Components/MenuComponent.js",[a["Core/Chart/Chart.js"],a["Core/Utilities.js"],a["Accessibility/AccessibilityComponent.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h,w,t,n,k){var u=this&&this.__extends||function(){var a=function(d,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
    function(b,c){b.__proto__=c;}||function(b,c){for(var a in c)c.hasOwnProperty(a)&&(b[a]=c[a]);};return a(d,c)};return function(d,c){function b(){this.constructor=d;}a(d,c);d.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b);}}(),y=h.attr,g=n.getChartTitle,r=n.unhideChartElementFromAT,m=k.getFakeMouseEvent;h=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}u(d,a);d.prototype.init=function(){var c=this.chart,b=this;this.addEvent(c,"exportMenuShown",function(){b.onMenuShown();});
    this.addEvent(c,"exportMenuHidden",function(){b.onMenuHidden();});this.createProxyGroup();};d.prototype.onMenuHidden=function(){var c=this.chart.exportContextMenu;c&&c.setAttribute("aria-hidden","true");this.setExportButtonExpandedState("false");};d.prototype.onMenuShown=function(){var c=this.chart,b=c.exportContextMenu;b&&(this.addAccessibleContextMenuAttribs(),r(c,b));this.setExportButtonExpandedState("true");};d.prototype.setExportButtonExpandedState=function(c){this.exportButtonProxy&&this.exportButtonProxy.buttonElement.setAttribute("aria-expanded",
    c);};d.prototype.onChartRender=function(){var c=this.chart,b=c.focusElement,a=c.accessibility;this.proxyProvider.clearGroup("chartMenu");this.proxyMenuButton();this.exportButtonProxy&&b&&b===c.exportingGroup&&(b.focusBorder?c.setFocusToElement(b,this.exportButtonProxy.buttonElement):a&&a.keyboardNavigation.tabindexContainer.focus());};d.prototype.proxyMenuButton=function(){var c=this.chart,b=this.proxyProvider,a=c.exportSVGElements&&c.exportSVGElements[0],d=c.options.exporting,e=c.exportSVGElements&&
    c.exportSVGElements[0];d&&!1!==d.enabled&&d.accessibility&&d.accessibility.enabled&&e&&e.element&&a&&(this.exportButtonProxy=b.addProxyElement("chartMenu",{click:a},{"aria-label":c.langFormat("accessibility.exporting.menuButtonLabel",{chart:c,chartTitle:g(c)}),"aria-expanded":!1,title:c.options.lang.contextButtonTitle||null}));};d.prototype.createProxyGroup=function(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu","div");};d.prototype.addAccessibleContextMenuAttribs=function(){var c=
    this.chart,b=c.exportDivElements;b&&b.length&&(b.forEach(function(b){b&&("LI"!==b.tagName||b.children&&b.children.length?b.setAttribute("aria-hidden","true"):b.setAttribute("tabindex",-1));}),(b=b[0]&&b[0].parentNode)&&y(b,{"aria-hidden":void 0,"aria-label":c.langFormat("accessibility.exporting.chartMenuLabel",{chart:c}),role:"list"}));};d.prototype.getKeyboardNavigation=function(){var c=this.keyCodes,b=this.chart,a=this;return new t(b,{keyCodeMap:[[[c.left,c.up],function(){return a.onKbdPrevious(this)}],
    [[c.right,c.down],function(){return a.onKbdNext(this)}],[[c.enter,c.space],function(){return a.onKbdClick(this)}]],validate:function(){return !!b.exporting&&!1!==b.options.exporting.enabled&&!1!==b.options.exporting.accessibility.enabled},init:function(){var c=a.exportButtonProxy,d=a.chart.exportingGroup;c&&d&&b.setFocusToElement(d,c.buttonElement);},terminate:function(){b.hideExportMenu();}})};d.prototype.onKbdPrevious=function(c){var b=this.chart,a=b.options.accessibility;c=c.response;for(var d=b.highlightedExportItemIx||
    0;d--;)if(b.highlightExportItem(d))return c.success;return a.keyboardNavigation.wrapAround?(b.highlightLastExportItem(),c.success):c.prev};d.prototype.onKbdNext=function(c){var b=this.chart,a=b.options.accessibility;c=c.response;for(var d=(b.highlightedExportItemIx||0)+1;d<b.exportDivElements.length;++d)if(b.highlightExportItem(d))return c.success;return a.keyboardNavigation.wrapAround?(b.highlightExportItem(0),c.success):c.next};d.prototype.onKbdClick=function(c){var b=this.chart,a=b.exportDivElements[b.highlightedExportItemIx],
    d=(b.exportSVGElements&&b.exportSVGElements[0]).element;b.openMenu?this.fakeClickEvent(a):(this.fakeClickEvent(d),b.highlightExportItem(0));return c.response.success};return d}(w);(function(d){function e(){var b=this.exportSVGElements&&this.exportSVGElements[0];if(b&&(b=b.element,b.onclick))b.onclick(m("click"));}function c(){var b=this.exportDivElements;b&&this.exportContextMenu&&this.openMenu&&(b.forEach(function(b){if(b&&"highcharts-menu-item"===b.className&&b.onmouseout)b.onmouseout(m("mouseout"));}),
    this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus());}function b(b){var c=this.exportDivElements&&this.exportDivElements[b],a=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(c&&"LI"===c.tagName&&(!c.children||!c.children.length)){var d=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;c.focus&&d&&c.focus();if(a&&a.onmouseout)a.onmouseout(m("mouseout"));if(c.onmouseover)c.onmouseover(m("mouseover"));this.highlightedExportItemIx=
    b;return !0}return !1}function f(){if(this.exportDivElements)for(var b=this.exportDivElements.length;b--;)if(this.highlightExportItem(b))return !0;return !1}var q=[];d.compose=function(d){-1===q.indexOf(d)&&(q.push(d),d=a.prototype,d.hideExportMenu=c,d.highlightExportItem=b,d.highlightLastExportItem=f,d.showExportMenu=e);};})(h||(h={}));return h});x(a,"Accessibility/KeyboardNavigation.js",[a["Core/Globals.js"],a["Accessibility/Components/MenuComponent.js"],a["Core/Utilities.js"],a["Accessibility/Utils/EventProvider.js"],
    a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h,w,t,n){var k=a.doc,u=a.win,y=w.addEvent,g=w.fireEvent,r=n.getElement;w=function(){function a(a,e){this.components=this.chart=void 0;this.currentModuleIx=NaN;this.exitAnchor=this.eventProvider=void 0;this.modules=[];this.tabindexContainer=void 0;this.init(a,e);}a.prototype.init=function(a,e){var c=this,b=this.eventProvider=new t;this.chart=a;this.components=e;this.modules=[];this.currentModuleIx=0;this.update();b.addEvent(this.tabindexContainer,
    "keydown",function(b){return c.onKeydown(b)});b.addEvent(this.tabindexContainer,"focus",function(b){return c.onFocus(b)});["mouseup","touchend"].forEach(function(a){return b.addEvent(k,a,function(){return c.onMouseUp()})});["mousedown","touchstart"].forEach(function(d){return b.addEvent(a.renderTo,d,function(){c.isClickingChart=!0;})});b.addEvent(a.renderTo,"mouseover",function(){c.pointerIsOverChart=!0;});b.addEvent(a.renderTo,"mouseout",function(){c.pointerIsOverChart=!1;});};a.prototype.update=function(a){var d=
    this.chart.options.accessibility;d=d&&d.keyboardNavigation;var c=this.components;this.updateContainerTabindex();d&&d.enabled&&a&&a.length?(this.modules=a.reduce(function(b,a){a=c[a].getKeyboardNavigation();return b.concat(a)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor());};a.prototype.updateExitAnchor=function(){var a=r("highcharts-end-of-chart-marker-"+this.chart.index);this.removeExitAnchor();a?(this.makeElementAnExitAnchor(a),this.exitAnchor=a):this.createExitAnchor();};
    a.prototype.move=function(a){var d=this.modules&&this.modules[this.currentModuleIx];d&&d.terminate&&d.terminate(a);this.chart.focusElement&&this.chart.focusElement.removeFocusBorder();this.currentModuleIx+=a;if(d=this.modules&&this.modules[this.currentModuleIx]){if(d.validate&&!d.validate())return this.move(a);if(d.init)return d.init(a),!0}this.currentModuleIx=0;this.exiting=!0;0<a?this.exitAnchor.focus():this.tabindexContainer.focus();return !1};a.prototype.onFocus=function(a){var d=this.chart;a=
    a.relatedTarget&&d.container.contains(a.relatedTarget);this.exiting||this.tabbingInBackwards||this.isClickingChart||a||(a=this.getFirstValidModuleIx(),null!==a&&(this.currentModuleIx=a,this.modules[a].init(1)));this.exiting=!1;};a.prototype.onMouseUp=function(){delete this.isClickingChart;if(!this.keyboardReset){var a=this.chart;if(!this.pointerIsOverChart){var e=this.modules&&this.modules[this.currentModuleIx||0];e&&e.terminate&&e.terminate();this.currentModuleIx=0;}a.focusElement&&(a.focusElement.removeFocusBorder(),
    delete a.focusElement);this.keyboardReset=!0;}};a.prototype.onKeydown=function(a){a=a||u.event;var d=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],c;this.exiting=this.keyboardReset=!1;if(d){var b=d.run(a);b===d.response.success?c=!0:b===d.response.prev?c=this.move(-1):b===d.response.next&&(c=this.move(1));c&&(a.preventDefault(),a.stopPropagation());}};a.prototype.updateContainerTabindex=function(){var a=this.chart.options.accessibility;a=a&&a.keyboardNavigation;a=!(a&&!1===a.enabled);
    var e=this.chart,c=e.container;e.renderTo.hasAttribute("tabindex")&&(c.removeAttribute("tabindex"),c=e.renderTo);this.tabindexContainer=c;var b=c.getAttribute("tabindex");a&&!b?c.setAttribute("tabindex","0"):a||e.container.removeAttribute("tabindex");};a.prototype.createExitAnchor=function(){var a=this.chart,e=this.exitAnchor=k.createElement("div");a.renderTo.appendChild(e);this.makeElementAnExitAnchor(e);};a.prototype.makeElementAnExitAnchor=function(a){var d=this.tabindexContainer.getAttribute("tabindex")||
    0;a.setAttribute("class","highcharts-exit-anchor");a.setAttribute("tabindex",d);a.setAttribute("aria-hidden",!1);this.addExitAnchorEventsToEl(a);};a.prototype.removeExitAnchor=function(){this.exitAnchor&&this.exitAnchor.parentNode&&(this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor);};a.prototype.addExitAnchorEventsToEl=function(a){var d=this.chart,c=this;this.eventProvider.addEvent(a,"focus",function(b){b=b||u.event;var a=!(b.relatedTarget&&d.container.contains(b.relatedTarget)||
    c.exiting);d.focusElement&&delete d.focusElement;a?(c.tabbingInBackwards=!0,c.tabindexContainer.focus(),delete c.tabbingInBackwards,b.preventDefault(),c.modules&&c.modules.length&&(c.currentModuleIx=c.modules.length-1,(b=c.modules[c.currentModuleIx])&&b.validate&&!b.validate()?c.move(-1):b&&b.init(-1))):c.exiting=!1;});};a.prototype.getFirstValidModuleIx=function(){for(var a=this.modules.length,e=0;e<a;++e){var c=this.modules[e];if(!c.validate||c.validate())return e}return null};a.prototype.destroy=
    function(){this.removeExitAnchor();this.eventProvider.removeAddedEvents();this.chart.container.removeAttribute("tabindex");};return a}();(function(r){function d(){var b=this;g(this,"dismissPopupContent",{},function(){b.tooltip&&b.tooltip.hide(0);b.hideExportMenu();});}function e(b){27===(b.which||b.keyCode)&&a.charts&&a.charts.forEach(function(b){b&&b.dismissPopupContent&&b.dismissPopupContent();});}var c=[];r.compose=function(b){h.compose(b);-1===c.indexOf(b)&&(c.push(b),b.prototype.dismissPopupContent=
    d);-1===c.indexOf(k)&&(c.push(k),y(k,"keydown",e));return b};})(w||(w={}));return w});x(a,"Accessibility/Components/LegendComponent.js",[a["Core/Animation/AnimationUtilities.js"],a["Core/Globals.js"],a["Core/Legend/Legend.js"],a["Core/Utilities.js"],a["Accessibility/AccessibilityComponent.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h,w,t,n,k,E,y){function g(b){var a=b.legend&&b.legend.allItems,
    c=b.options.legend.accessibility||{};return !(!a||!a.length||b.colorAxis&&b.colorAxis.length||!1===c.enabled)}function r(a,c){c.setState(a?"hover":"",!0);["legendGroup","legendItem","legendSymbol"].forEach(function(d){(d=(d=c[d])&&d.element||d)&&b(d,a?"mouseover":"mouseout");});}var m=this&&this.__extends||function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);};return b(a,c)};
    return function(a,c){function d(){this.constructor=a;}b(a,c);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d);}}(),d=a.animObject,e=h.doc,c=t.addEvent,b=t.fireEvent,f=t.isNumber,q=t.pick,z=t.syncTimeout,u=E.getChartTitle,x=y.stripHTMLTagsFromString,H=y.addClass,A=y.removeClass;a=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.highlightedLegendItemIx=NaN;a.proxyGroup=null;return a}m(a,b);a.prototype.init=function(){var b=this;this.recreateProxies();this.addEvent(w,
    "afterScroll",function(){this.chart===b.chart&&(b.proxyProvider.updateGroupProxyElementPositions("legend"),b.updateLegendItemProxyVisibility(),-1<b.highlightedLegendItemIx&&this.chart.highlightLegendItem(b.highlightedLegendItemIx));});this.addEvent(w,"afterPositionItem",function(a){this.chart===b.chart&&this.chart.renderer&&b.updateProxyPositionForItem(a.item);});this.addEvent(w,"afterRender",function(){this.chart===b.chart&&this.chart.renderer&&b.recreateProxies()&&z(function(){return b.proxyProvider.updateGroupProxyElementPositions("legend")},
    d(q(this.chart.renderer.globalAnimation,!0)).duration);});};a.prototype.updateLegendItemProxyVisibility=function(){var b=this.chart,a=b.legend,c=a.currentPage||1,d=a.clipHeight||0;(a.allItems||[]).forEach(function(e){if(e.a11yProxyElement){var v=e.a11yProxyElement.element,f=!1;if(a.pages&&a.pages.length){f=e.pageIx||0;var l=e._legendItemPos?e._legendItemPos[1]:0;e=e.legendItem?Math.round(e.legendItem.getBBox().height):0;f=l+e-a.pages[f]>d||f!==c-1;}f?b.styledMode?H(v,"highcharts-a11y-invisible"):v.style.visibility=
    "hidden":(A(v,"highcharts-a11y-invisible"),v.style.visibility="");}});};a.prototype.onChartRender=function(){g(this.chart)||this.removeProxies();};a.prototype.highlightAdjacentLegendPage=function(b){var a=this.chart,c=a.legend;b=(c.currentPage||1)+b;var d=c.pages||[];if(0<b&&b<=d.length){d=c.allItems.length;for(var e=0;e<d;++e)if(c.allItems[e].pageIx+1===b){a.highlightLegendItem(e)&&(this.highlightedLegendItemIx=e);break}}};a.prototype.updateProxyPositionForItem=function(b){b.a11yProxyElement&&b.a11yProxyElement.refreshPosition();};
    a.prototype.recreateProxies=function(){var b=e.activeElement,a=this.proxyGroup;b=b&&a&&a.contains(b);this.removeProxies();return g(this.chart)?(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),b&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0):!1};a.prototype.removeProxies=function(){this.proxyProvider.removeGroup("legend");};a.prototype.updateLegendTitle=function(){var b=this.chart,a=x((b.legend&&b.legend.options.title&&
    b.legend.options.title.text||"").replace(/<br ?\/?>/g," "));b=b.langFormat("accessibility.legend.legendLabel"+(a?"":"NoTitle"),{chart:b,legendTitle:a,chartTitle:u(b)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":b});};a.prototype.addLegendProxyGroup=function(){this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:"all"===this.chart.options.accessibility.landmarkVerbosity?"region":null});};a.prototype.proxyLegendItems=function(){var b=this;(this.chart.legend&&
    this.chart.legend.allItems||[]).forEach(function(a){a.legendItem&&a.legendItem.element&&b.proxyLegendItem(a);});};a.prototype.proxyLegendItem=function(b){if(b.legendItem&&b.legendGroup){var a=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:x(b.name),item:b});b.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:b.legendItem,visual:(b.legendGroup.div?b.legendItem:b.legendGroup).element},{tabindex:-1,"aria-pressed":b.visible,"aria-label":a});}};a.prototype.getKeyboardNavigation=
    function(){var b=this.keyCodes,a=this,c=this.chart;return new k(c,{keyCodeMap:[[[b.left,b.right,b.up,b.down],function(b){return a.onKbdArrowKey(this,b)}],[[b.enter,b.space],function(c){return h.isFirefox&&c===b.space?this.response.success:a.onKbdClick(this)}],[[b.pageDown,b.pageUp],function(c){a.highlightAdjacentLegendPage(c===b.pageDown?1:-1);return this.response.success}]],validate:function(){return a.shouldHaveLegendNavigation()},init:function(){c.highlightLegendItem(0);a.highlightedLegendItemIx=
    0;},terminate:function(){a.highlightedLegendItemIx=-1;c.legend.allItems.forEach(function(b){return r(!1,b)});}})};a.prototype.onKbdArrowKey=function(b,a){var c=this.keyCodes,d=b.response,e=this.chart,v=e.options.accessibility,f=e.legend.allItems.length;a=a===c.left||a===c.up?-1:1;if(e.highlightLegendItem(this.highlightedLegendItemIx+a))return this.highlightedLegendItemIx+=a,d.success;1<f&&v.keyboardNavigation.wrapAround&&b.init(a);return d.success};a.prototype.onKbdClick=function(b){var a=this.chart.legend.allItems[this.highlightedLegendItemIx];
    a&&a.a11yProxyElement&&a.a11yProxyElement.click();return b.response.success};a.prototype.shouldHaveLegendNavigation=function(){var b=this.chart,a=b.colorAxis&&b.colorAxis.length,c=(b.options.legend||{}).accessibility||{};return !!(b.legend&&b.legend.allItems&&b.legend.display&&!a&&c.enabled&&c.keyboardNavigation&&c.keyboardNavigation.enabled)};return a}(n);(function(b){function a(b){var a=this.legend.allItems,c=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,d=a[b];
    return d?(f(c)&&a[c]&&r(!1,a[c]),a=this.legend,b=a.allItems[b].pageIx,c=a.currentPage,"undefined"!==typeof b&&b+1!==c&&a.scroll(1+b-c),b=d.legendItem,a=d.a11yProxyElement&&d.a11yProxyElement.buttonElement,b&&b.element&&a&&this.setFocusToElement(b,a),r(!0,d),!0):!1}function d(b){var a=b.item;this.chart.options.accessibility.enabled&&a&&a.a11yProxyElement&&a.a11yProxyElement.buttonElement.setAttribute("aria-pressed",b.visible?"true":"false");}var e=[];b.compose=function(b,f){-1===e.indexOf(b)&&(e.push(b),
    b.prototype.highlightLegendItem=a);-1===e.indexOf(f)&&(e.push(f),c(f,"afterColorizeItem",d));};})(a||(a={}));return a});x(a,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[a["Accessibility/Components/AnnotationsA11y.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Core/FormatUtilities.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Core/Utilities.js"]],function(a,h,w,t,n){function k(b){var a=b.index;return b.series&&b.series.data&&l(a)?D(b.series.data,function(b){return !!(b&&"undefined"!==
    typeof b.index&&b.index>a&&b.graphic&&b.graphic.element)})||null:null}function u(b){var a=b.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return !!(!1!==a&&b.points&&b.points.length>=a)}function y(b){var a=b.options.accessibility||{};return !u(b)&&!a.exposeAsGroupOnly}function g(b){var a=b.chart.options.accessibility.keyboardNavigation.seriesNavigation;return !(!b.points||!(b.points.length<a.pointNavigationEnabledThreshold||!1===a.pointNavigationEnabledThreshold))}function r(b,
    a){var c=b.series,d=c.chart;b=d.options.accessibility.point||{};var e=c.options.accessibility&&c.options.accessibility.point||{};c=c.tooltipOptions||{};d=d.options.lang;return I(a)?F(a,e.valueDecimals||b.valueDecimals||c.valueDecimals||-1,d.decimalPoint,d.accessibility.thousandsSep||d.thousandsSep):a}function m(b){var a=(b.options.accessibility||{}).description;return a&&b.chart.langFormat("accessibility.series.description",{description:a,series:b})||""}function d(b,a){return b.chart.langFormat("accessibility.series."+
    a+"Description",{name:z(b[a]),series:b})}function e(b,a,c){var d=a||"",e=c||"";return b.series.pointArrayMap.reduce(function(a,c){a+=a.length?", ":"";var f=r(b,p(b[c],b.options[c]));return a+(c+": "+d+f+e)},"")}function c(b){var a=b.series,c=1<a.chart.series.length||a.options.name,d=b.series;var f=d.chart;var v=d.options.accessibility;v=v&&v.point&&v.point.valueDescriptionFormat||f.options.accessibility.point.valueDescriptionFormat;d=p(d.xAxis&&d.xAxis.options.accessibility&&d.xAxis.options.accessibility.enabled,
    !f.angular);if(d){var g=b.series;var h=g.chart;var z=g.options.accessibility&&g.options.accessibility.point||{},m=h.options.accessibility.point||{};(g=g.xAxis&&g.xAxis.dateTime)?(g=g.getXDateFormat(b.x||0,h.options.tooltip.dateTimeLabelFormats),z=z.dateFormatter&&z.dateFormatter(b)||m.dateFormatter&&m.dateFormatter(b)||z.dateFormat||m.dateFormat||g,h=h.time.dateFormat(z,b.x||0,void 0)):h=void 0;z=(b.series.xAxis||{}).categories&&l(b.category)&&(""+b.category).replace("<br/>"," ");m=b.id&&0>b.id.indexOf("highcharts-");
    g="x, "+b.x;h=b.name||h||z||(m?b.id:g);}else h="";z=l(b.index)?b.index+1:"";m=b.series;var k=m.chart.options.accessibility.point||{},u=m.chart.options.accessibility&&m.chart.options.accessibility.point||{},B=m.tooltipOptions||{};g=u.valuePrefix||k.valuePrefix||B.valuePrefix||"";k=u.valueSuffix||k.valueSuffix||B.valueSuffix||"";u=r(b,b["undefined"!==typeof b.value?"value":"y"]);m=b.isNull?m.chart.langFormat("accessibility.series.nullPointValue",{point:b}):m.pointArrayMap?e(b,g,k):g+u+k;f=A(v,{point:b,
    index:z,xDescription:h,value:m,separator:d?", ":""},f);v=(v=b.options&&b.options.accessibility&&b.options.accessibility.description)?" "+v:"";a=c?" "+a.name+".":"";c=b.series.chart;d=q(b);h={point:b,annotations:d};c=d.length?c.langFormat("accessibility.series.pointAnnotationsDescription",h):"";b.accessibility=b.accessibility||{};b.accessibility.valueDescription=f;return f+v+a+(c?" "+c:"")}function b(b){var a=y(b),d=g(b),e=b.chart.options.accessibility.point.describeNull;(a||d)&&b.points.forEach(function(d){var f;
    if(!(f=d.graphic&&d.graphic.element)){var l=d.series;f=l&&l.chart;l=l&&l.is("sunburst");f=f&&f.options.accessibility.point.describeNull;if(f=d.isNull&&!l&&f){l=d.series;var v=k(d);l=(f=v&&v.graphic)?f.parentGroup:l.graph||l.group;v=v?{x:p(d.plotX,v.plotX,0),y:p(d.plotY,v.plotY,0)}:{x:p(d.plotX,0),y:p(d.plotY,0)};v=d.series.chart.renderer.rect(v.x,v.y,1,1);v.attr({"class":"highcharts-a11y-dummy-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0});l&&l.element?(d.graphic=v,d.hasDummyGraphic=
    !0,v.add(l),l.element.insertBefore(v.element,f?f.element:null),f=v.element):f=void 0;}}l=d.options&&d.options.accessibility&&!1===d.options.accessibility.enabled;f&&(d.isNull&&!e?f.setAttribute("aria-hidden",!0):(f.setAttribute("tabindex","-1"),b.chart.styledMode||(f.style.outline="none"),a&&!l?(v=d.series,l=v.chart.options.accessibility.point||{},v=v.options.accessibility&&v.options.accessibility.point||{},d=C(v.descriptionFormatter&&v.descriptionFormatter(d)||l.descriptionFormatter&&l.descriptionFormatter(d)||
    c(d)),f.setAttribute("role","img"),f.setAttribute("aria-label",d)):f.setAttribute("aria-hidden",!0)));});}function f(b){var a=b.chart,c=a.types||[],e=m(b),f=function(c){return a[c]&&1<a[c].length&&b[c]},l=b.index+1,v=d(b,"xAxis"),q=d(b,"yAxis"),g={seriesNumber:l,series:b,chart:a};c=1<c.length?"Combination":"";g=a.langFormat("accessibility.series.summary."+b.type+c,g)||a.langFormat("accessibility.series.summary.default"+c,g);f=(f("yAxis")?" "+q+".":"")+(f("xAxis")?" "+v+".":"");return A(a.options.accessibility.series.descriptionFormat||
    "",{seriesDescription:g,authorDescription:e?" "+e:"",axisDescription:f,series:b,chart:a,seriesNumber:l},void 0)}var q=a.getPointAnnotationTexts,z=h.getAxisDescription,M=h.getSeriesFirstPointElement,x=h.getSeriesA11yElement,H=h.unhideChartElementFromAT,A=w.format,F=w.numberFormat,B=t.reverseChildNodes,C=t.stripHTMLTagsFromString,D=n.find,I=n.isNumber,p=n.pick,l=n.defined;return {defaultPointDescriptionFormatter:c,defaultSeriesDescriptionFormatter:f,describeSeries:function(a){var c=a.chart,d=M(a),e=
    x(a),l=c.is3d&&c.is3d();if(e){e.lastChild!==d||l||B(e);b(a);H(c,e);l=a.chart;c=l.options.chart;d=1<l.series.length;l=l.options.accessibility.series.describeSingleSeries;var v=(a.options.accessibility||{}).exposeAsGroupOnly;c.options3d&&c.options3d.enabled&&d||!(d||l||v||u(a))?e.removeAttribute("aria-label"):(c=a.chart.options.accessibility,d=c.landmarkVerbosity,(a.options.accessibility||{}).exposeAsGroupOnly?e.setAttribute("role","img"):"all"===d?e.setAttribute("role","region"):e.setAttribute("role",
    "group"),e.setAttribute("tabindex","-1"),a.chart.styledMode||(e.style.outline="none"),e.setAttribute("aria-label",C(c.series.descriptionFormatter&&c.series.descriptionFormatter(a)||f(a))));}}}});x(a,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[a["Core/Globals.js"],a["Core/Utilities.js"],a["Accessibility/Utils/Announcer.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/EventProvider.js"],a["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,
    h,w,t,n,k){function u(a){var b=a.series.data.filter(function(b){return a.x===b.x&&a.y===b.y});return 1===b.length?b[0]:a}function y(a,b){var c=(a||[]).concat(b||[]).reduce(function(b,a){b[a.name+a.index]=a;return b},{});return Object.keys(c).map(function(b){return c[b]})}var g=h.addEvent,r=h.defined,m=t.getChartTitle,d=k.defaultPointDescriptionFormatter,e=k.defaultSeriesDescriptionFormatter;h=function(){function c(b){this.announcer=void 0;this.dirty={allSeries:{}};this.eventProvider=void 0;this.lastAnnouncementTime=
    0;this.chart=b;}c.prototype.init=function(){var b=this.chart,a=b.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0;this.dirty={allSeries:{}};this.eventProvider=new n;this.announcer=new w(b,a);this.addEventListeners();};c.prototype.destroy=function(){this.eventProvider.removeAddedEvents();this.announcer.destroy();};c.prototype.addEventListeners=function(){var b=this,a=this.chart,c=this.eventProvider;c.addEvent(a,"afterApplyDrilldown",function(){b.lastAnnouncementTime=
    0;});c.addEvent(a,"afterAddSeries",function(a){b.onSeriesAdded(a.series);});c.addEvent(a,"redraw",function(){b.announceDirtyData();});};c.prototype.onSeriesAdded=function(b){this.chart.options.accessibility.announceNewData.enabled&&(this.dirty.hasDirty=!0,this.dirty.allSeries[b.name+b.index]=b,this.dirty.newSeries=r(this.dirty.newSeries)?void 0:b);};c.prototype.announceDirtyData=function(){var b=this;if(this.chart.options.accessibility.announceNewData&&this.dirty.hasDirty){var a=this.dirty.newPoint;a&&
    (a=u(a));this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(function(a){return b.dirty.allSeries[a]}),this.dirty.newSeries,a);this.dirty={allSeries:{}};}};c.prototype.queueAnnouncement=function(b,a,c){var d=this,e=this.chart.options.accessibility.announceNewData;if(e.enabled){var f=+new Date;e=Math.max(0,e.minAnnounceInterval-(f-this.lastAnnouncementTime));b=y(this.queuedAnnouncement&&this.queuedAnnouncement.series,b);if(a=this.buildAnnouncementMessage(b,a,c))this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),
    this.queuedAnnouncement={time:f,message:a,series:b},this.queuedAnnouncementTimer=setTimeout(function(){d&&d.announcer&&(d.lastAnnouncementTime=+new Date,d.announcer.announce(d.queuedAnnouncement.message),delete d.queuedAnnouncement,delete d.queuedAnnouncementTimer);},e);}};c.prototype.buildAnnouncementMessage=function(b,c,g){var f=this.chart,q=f.options.accessibility.announceNewData;if(q.announcementFormatter&&(b=q.announcementFormatter(b,c,g),!1!==b))return b.length?b:null;b=a.charts&&1<a.charts.length?
    "Multiple":"Single";b=c?"newSeriesAnnounce"+b:g?"newPointAnnounce"+b:"newDataAnnounce";q=m(f);return f.langFormat("accessibility.announceNewData."+b,{chartTitle:q,seriesDesc:c?e(c):null,pointDesc:g?d(g):null,point:g,series:c})};return c}();(function(a){function b(b){var a=this.chart,c=this.newDataAnnouncer;c&&c.chart===a&&a.options.accessibility.announceNewData.enabled&&(c.dirty.newPoint=r(c.dirty.newPoint)?void 0:b.point);}function c(){var b=this.chart,a=this.newDataAnnouncer;a&&a.chart===b&&b.options.accessibility.announceNewData.enabled&&
    (a.dirty.hasDirty=!0,a.dirty.allSeries[this.name+this.index]=this);}a.composedClasses=[];a.compose=function(d){-1===a.composedClasses.indexOf(d)&&(a.composedClasses.push(d),g(d,"addPoint",b),g(d,"updatedData",c));};})(h||(h={}));return h});x(a,"Accessibility/ProxyElement.js",[a["Core/Globals.js"],a["Core/Utilities.js"],a["Accessibility/Utils/EventProvider.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/HTMLUtilities.js"]],function(a,h,w,t,n){var k=a.doc,u=h.attr,y=h.css,g=h.merge,
    r=t.fireEventOnWrappedOrUnwrappedElement,m=n.cloneMouseEvent,d=n.cloneTouchEvent,e=n.getFakeMouseEvent,c=n.removeElement;return function(){function b(b,a,c,d){this.chart=b;this.target=a;this.groupType=c;c="ul"===c;this.eventProvider=new w;var e=c?k.createElement("li"):null,f=this.buttonElement=k.createElement("button");b.styledMode||this.hideButtonVisually(f);e?(c&&!b.styledMode&&(e.style.listStyle="none"),e.appendChild(f),this.element=e):this.element=f;this.updateTarget(a,d);}b.prototype.click=function(){var b=
    this.getTargetPosition();b.x+=b.width/2;b.y+=b.height/2;b=e("click",b);r(this.target.click,b);};b.prototype.updateTarget=function(b,a){this.target=b;this.updateCSSClassName();var c=a||{};Object.keys(c).forEach(function(b){null===c[b]&&delete c[b];});u(this.buttonElement,g({"aria-label":this.getTargetAttr(b.click,"aria-label")},c));this.eventProvider.removeAddedEvents();this.addProxyEventsToButton(this.buttonElement,b.click);this.refreshPosition();};b.prototype.refreshPosition=function(){var b=this.getTargetPosition();
    y(this.buttonElement,{width:(b.width||1)+"px",height:(b.height||1)+"px",left:(Math.round(b.x)||0)+"px",top:(Math.round(b.y)||0)+"px"});};b.prototype.remove=function(){this.eventProvider.removeAddedEvents();c(this.element);};b.prototype.updateCSSClassName=function(){var b=this.chart.legend;b=b.group&&b.group.div;b=-1<(b&&b.className||"").indexOf("highcharts-no-tooltip");var a=-1<(this.getTargetAttr(this.target.click,"class")||"").indexOf("highcharts-no-tooltip");this.buttonElement.className=b||a?"highcharts-a11y-proxy-button highcharts-no-tooltip":
    "highcharts-a11y-proxy-button";};b.prototype.addProxyEventsToButton=function(b,a){var c=this;"click touchstart touchend touchcancel touchmove mouseover mouseenter mouseleave mouseout".split(" ").forEach(function(e){var f=0===e.indexOf("touch");c.eventProvider.addEvent(b,e,function(b){var c=f?d(b):m(b);a&&r(a,c);b.stopPropagation();f||b.preventDefault();},{passive:!1});});};b.prototype.hideButtonVisually=function(b){y(b,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,
    filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"});};b.prototype.getTargetPosition=function(){var b=this.target.click;b=b.element?b.element:b;b=this.target.visual||b;if(this.chart.renderTo&&b&&b.getBoundingClientRect){b=b.getBoundingClientRect();var a=this.chart.pointer.getChartPosition();return {x:(b.left-a.left)/a.scaleX,y:(b.top-a.top)/a.scaleY,width:b.right/a.scaleX-b.left/
    a.scaleX,height:b.bottom/a.scaleY-b.top/a.scaleY}}return {x:0,y:0,width:1,height:1}};b.prototype.getTargetAttr=function(b,a){return b.element?b.element.getAttribute(a):b.getAttribute(a)};return b}()});x(a,"Accessibility/ProxyProvider.js",[a["Core/Globals.js"],a["Core/Utilities.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/DOMElementProvider.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Accessibility/ProxyElement.js"]],function(a,h,w,t,n,k){var u=a.doc,y=h.attr,g=h.css,
    r=w.unhideChartElementFromAT,m=n.removeElement,d=n.removeChildNodes;return function(){function a(a){this.chart=a;this.domElementProvider=new t;this.groups={};this.groupOrder=[];this.beforeChartProxyPosContainer=this.createProxyPosContainer("before");this.afterChartProxyPosContainer=this.createProxyPosContainer("after");this.update();}a.prototype.addProxyElement=function(a,b,d){var c=this.groups[a];if(!c)throw Error("ProxyProvider.addProxyElement: Invalid group key "+a);a=new k(this.chart,b,c.type,
    d);c.proxyContainerElement.appendChild(a.element);c.proxyElements.push(a);return a};a.prototype.addGroup=function(a,b,d){var c=this.groups[a];if(c)return c.groupElement;c=this.domElementProvider.createElement(b);if(d&&d.role&&"div"!==b){var e=this.domElementProvider.createElement("div");e.appendChild(c);}else e=c;e.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+a.replace(/\W/g,"-");this.groups[a]={proxyContainerElement:c,groupElement:e,type:b,proxyElements:[]};y(e,d||{});"ul"===
    b&&c.setAttribute("role","list");this.afterChartProxyPosContainer.appendChild(e);this.updateGroupOrder(this.groupOrder);return e};a.prototype.updateGroupAttrs=function(a,b){var c=this.groups[a];if(!c)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+a);y(c.groupElement,b);};a.prototype.updateGroupOrder=function(a){var b=this;this.groupOrder=a.slice();if(!this.isDOMOrderGroupOrder()){var c=a.indexOf("series"),e=-1<c?a.slice(0,c):a,g=-1<c?a.slice(c+1):[];a=u.activeElement;["before","after"].forEach(function(a){var c=
    b["before"===a?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];a="before"===a?e:g;d(c);a.forEach(function(a){(a=b.groups[a])&&c.appendChild(a.groupElement);});});(this.beforeChartProxyPosContainer.contains(a)||this.afterChartProxyPosContainer.contains(a))&&a&&a.focus&&a.focus();}};a.prototype.clearGroup=function(a){var b=this.groups[a];if(!b)throw Error("ProxyProvider.clearGroup: Invalid group key "+a);d(b.proxyContainerElement);};a.prototype.removeGroup=function(a){var b=this.groups[a];
    b&&(m(b.groupElement),delete this.groups[a]);};a.prototype.update=function(){this.updatePosContainerPositions();this.updateGroupOrder(this.groupOrder);this.updateProxyElementPositions();};a.prototype.updateProxyElementPositions=function(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this));};a.prototype.updateGroupProxyElementPositions=function(a){(a=this.groups[a])&&a.proxyElements.forEach(function(b){return b.refreshPosition()});};a.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements();};
    a.prototype.createProxyPosContainer=function(a){var b=this.domElementProvider.createElement("div");b.setAttribute("aria-hidden","false");b.className="highcharts-a11y-proxy-container"+(a?"-"+a:"");g(b,{top:"0",left:"0"});this.chart.styledMode||(b.style.whiteSpace="nowrap",b.style.position="absolute");return b};a.prototype.getCurrentGroupOrderInDOM=function(){var a=this,b=function(b){var c=[];b=b.children;for(var d=0;d<b.length;++d){a:{var e=b[d];for(var f=Object.keys(a.groups),g=f.length;g--;){var h=
    f[g],q=a.groups[h];if(q&&e===q.groupElement){e=h;break a}}e=void 0;}e&&c.push(e);}return c},d=b(this.beforeChartProxyPosContainer);b=b(this.afterChartProxyPosContainer);d.push("series");return d.concat(b)};a.prototype.isDOMOrderGroupOrder=function(){var a=this,b=this.getCurrentGroupOrderInDOM(),d=this.groupOrder.filter(function(b){return "series"===b||!!a.groups[b]}),e=b.length;if(e!==d.length)return !1;for(;e--;)if(b[e]!==d[e])return !1;return !0};a.prototype.updatePosContainerPositions=function(){var a=
    this.chart;if(!a.renderer.forExport){var b=a.renderer.box;a.container.insertBefore(this.afterChartProxyPosContainer,b.nextSibling);a.container.insertBefore(this.beforeChartProxyPosContainer,b);r(this.chart,this.afterChartProxyPosContainer);r(this.chart,this.beforeChartProxyPosContainer);}};return a}()});x(a,"Extensions/RangeSelector.js",[a["Core/Axis/Axis.js"],a["Core/Chart/Chart.js"],a["Core/Globals.js"],a["Core/DefaultOptions.js"],a["Core/Renderer/SVG/SVGElement.js"],a["Core/Utilities.js"]],function(a,
    h,w,t,n,k){function u(b){if(-1!==b.indexOf("%L"))return "text";var a="aAdewbBmoyY".split("").some(function(a){return -1!==b.indexOf("%"+a)}),c="HkIlMS".split("").some(function(a){return -1!==b.indexOf("%"+a)});return a&&c?"datetime-local":a?"date":c?"time":"text"}var y=t.defaultOptions,g=k.addEvent,r=k.createElement,m=k.css,d=k.defined,e=k.destroyObjectProperties,c=k.discardElement,b=k.extend,f=k.find,q=k.fireEvent,z=k.isNumber,x=k.merge,G=k.objectEach,H=k.pad,A=k.pick,F=k.pInt,B=k.splat;b(y,{rangeSelector:{allButtonsEnabled:!1,
    buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%b %e, %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#335cad",cursor:"pointer"},labelStyle:{color:"#666666"}}});
    b(y.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"});var C=function(){function f(b){this.buttons=void 0;this.buttonOptions=f.prototype.defaultButtons;this.initialButtonGroupWidth=0;this.options=void 0;this.chart=b;this.init(b);}f.prototype.clickButton=function(b,c){var e=this.chart,l=this.buttonOptions[b],f=e.xAxis[0],v=e.scroller&&e.scroller.getUnionExtremes()||f||{},h=v.dataMin,p=v.dataMax,m=f&&Math.round(Math.min(f.max,A(p,f.max))),r=l.type;v=l._range;var k,u=l.dataGrouping;
    if(null!==h&&null!==p){e.fixedRange=v;this.setSelected(b);u&&(this.forcedDataGrouping=!0,a.prototype.setDataGrouping.call(f||{chart:this.chart},u,!1),this.frozenStates=l.preserveDataGrouping);if("month"===r||"year"===r)if(f){r={range:l,max:m,chart:e,dataMin:h,dataMax:p};var n=f.minFromRange.call(r);z(r.newMax)&&(m=r.newMax);}else v=l;else if(v)n=Math.max(m-v,h),m=Math.min(n+v,p);else if("ytd"===r)if(f)"undefined"===typeof p&&(h=Number.MAX_VALUE,p=Number.MIN_VALUE,e.series.forEach(function(b){b=b.xData;
    h=Math.min(b[0],h);p=Math.max(b[b.length-1],p);}),c=!1),m=this.getYTDExtremes(p,h,e.time.useUTC),n=k=m.min,m=m.max;else{this.deferredYTDClick=b;return}else"all"===r&&f&&(e.navigator&&e.navigator.baseSeries[0]&&(e.navigator.baseSeries[0].xAxis.options.range=void 0),n=h,m=p);d(n)&&(n+=l._offsetMin);d(m)&&(m+=l._offsetMax);this.dropdown&&(this.dropdown.selectedIndex=b+1);if(f)f.setExtremes(n,m,A(c,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:l});else{var t=B(e.options.xAxis)[0];var w=
    t.range;t.range=v;var F=t.min;t.min=k;g(e,"load",function(){t.range=w;t.min=F;});}q(this,"afterBtnClick");}};f.prototype.setSelected=function(b){this.selected=this.options.selected=b;};f.prototype.init=function(b){var a=this,c=b.options.rangeSelector,d=c.buttons||a.defaultButtons.slice(),e=c.selected,f=function(){var b=a.minInput,c=a.maxInput;b&&b.blur&&q(b,"blur");c&&c.blur&&q(c,"blur");};a.chart=b;a.options=c;a.buttons=[];a.buttonOptions=d;this.eventsToUnbind=[];this.eventsToUnbind.push(g(b.container,
    "mousedown",f));this.eventsToUnbind.push(g(b,"resize",f));d.forEach(a.computeButtonRange);"undefined"!==typeof e&&d[e]&&this.clickButton(e,!1);this.eventsToUnbind.push(g(b,"load",function(){b.xAxis&&b.xAxis[0]&&g(b.xAxis[0],"setExtremes",function(c){this.max-this.min!==b.fixedRange&&"rangeSelectorButton"!==c.trigger&&"updatedData"!==c.trigger&&a.forcedDataGrouping&&!a.frozenStates&&this.setDataGrouping(!1,!1);});}));};f.prototype.updateButtonStates=function(){var b=this,a=this.chart,c=this.dropdown,
    d=a.xAxis[0],e=Math.round(d.max-d.min),f=!d.hasVisibleSeries,g=a.scroller&&a.scroller.getUnionExtremes()||d,h=g.dataMin,p=g.dataMax;a=b.getYTDExtremes(p,h,a.time.useUTC);var m=a.min,q=a.max,r=b.selected,k=z(r),u=b.options.allButtonsEnabled,n=b.buttons;b.buttonOptions.forEach(function(a,l){var v=a._range,g=a.type,J=a.count||1,L=n[l],K=0,N=a._offsetMax-a._offsetMin;a=l===r;var B=v>p-h,t=v<d.minRange,z=!1,A=!1;v=v===e;("month"===g||"year"===g)&&e+36E5>=864E5*{month:28,year:365}[g]*J-N&&e-36E5<=864E5*
    {month:31,year:366}[g]*J+N?v=!0:"ytd"===g?(v=q-m+N===e,z=!a):"all"===g&&(v=d.max-d.min>=p-h,A=!a&&k&&v);g=!u&&(B||t||A||f);J=a&&v||v&&!k&&!z||a&&b.frozenStates;g?K=3:J&&(k=!0,K=2);L.state!==K&&(L.setState(K),c&&(c.options[l+1].disabled=g,2===K&&(c.selectedIndex=l+1)),0===K&&r===l&&b.setSelected());});};f.prototype.computeButtonRange=function(b){var a=b.type,c=b.count||1,d={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5};if(d[a])b._range=d[a]*c;else if("month"===a||"year"===a)b._range=
    864E5*{month:30,year:365}[a]*c;b._offsetMin=A(b.offsetMin,0);b._offsetMax=A(b.offsetMax,0);b._range+=b._offsetMax-b._offsetMin;};f.prototype.getInputValue=function(b){b="min"===b?this.minInput:this.maxInput;var a=this.chart.options.rangeSelector,c=this.chart.time;return b?("text"===b.type&&a.inputDateParser||this.defaultInputDateParser)(b.value,c.useUTC,c):0};f.prototype.setInputValue=function(b,a){var c=this.options,e=this.chart.time,f="min"===b?this.minInput:this.maxInput;b="min"===b?this.minDateBox:
    this.maxDateBox;if(f){var l=f.getAttribute("data-hc-time");l=d(l)?Number(l):void 0;d(a)&&(d(l)&&f.setAttribute("data-hc-time-previous",l),f.setAttribute("data-hc-time",a),l=a);f.value=e.dateFormat(this.inputTypeFormats[f.type]||c.inputEditDateFormat,l);b&&b.attr({text:e.dateFormat(c.inputDateFormat,l)});}};f.prototype.setInputExtremes=function(b,a,c){if(b="min"===b?this.minInput:this.maxInput){var d=this.inputTypeFormats[b.type],e=this.chart.time;d&&(a=e.dateFormat(d,a),b.min!==a&&(b.min=a),c=e.dateFormat(d,
    c),b.max!==c&&(b.max=c));}};f.prototype.showInput=function(b){var a="min"===b?this.minDateBox:this.maxDateBox;if((b="min"===b?this.minInput:this.maxInput)&&a&&this.inputGroup){var c="text"===b.type,d=this.inputGroup,e=d.translateX;d=d.translateY;var f=this.options.inputBoxWidth;m(b,{width:c?a.width+(f?-2:20)+"px":"auto",height:c?a.height-2+"px":"auto",border:"2px solid silver"});c&&f?m(b,{left:e+a.x+"px",top:d+"px"}):m(b,{left:Math.min(Math.round(a.x+e-(b.offsetWidth-a.width)/2),this.chart.chartWidth-
    b.offsetWidth)+"px",top:d-(b.offsetHeight-a.height)/2+"px"});}};f.prototype.hideInput=function(b){(b="min"===b?this.minInput:this.maxInput)&&m(b,{top:"-9999em",border:0,width:"1px",height:"1px"});};f.prototype.defaultInputDateParser=function(b,a,c){var d=b.split("/").join("-").split(" ").join("T");-1===d.indexOf("T")&&(d+="T00:00");if(a)d+="Z";else{var e;if(e=w.isSafari)e=d,e=!(6<e.length&&(e.lastIndexOf("-")===e.length-6||e.lastIndexOf("+")===e.length-6));e&&(e=(new Date(d)).getTimezoneOffset()/60,
    d+=0>=e?"+"+H(-e)+":00":"-"+H(e)+":00");}d=Date.parse(d);z(d)||(b=b.split("-"),d=Date.UTC(F(b[0]),F(b[1])-1,F(b[2])));c&&a&&z(d)&&(d+=c.getTimezoneOffset(d));return d};f.prototype.drawInput=function(a){function c(){var b=g.getInputValue(a),c=d.xAxis[0],e=d.scroller&&d.scroller.xAxis?d.scroller.xAxis:c,f=e.dataMin;e=e.dataMax;var l=g.maxInput,v=g.minInput;b!==Number(n.getAttribute("data-hc-time-previous"))&&z(b)&&(n.setAttribute("data-hc-time-previous",b),q&&l&&z(f)?b>Number(l.getAttribute("data-hc-time"))?
    b=void 0:b<f&&(b=f):v&&z(e)&&(b<Number(v.getAttribute("data-hc-time"))?b=void 0:b>e&&(b=e)),"undefined"!==typeof b&&c.setExtremes(q?b:c.min,q?c.max:b,void 0,void 0,{trigger:"rangeSelectorInput"}));}var d=this.chart,e=this.div,f=this.inputGroup,g=this,l=d.renderer.style||{},h=d.renderer,p=d.options.rangeSelector,q="min"===a,k=y.lang[q?"rangeSelectorFrom":"rangeSelectorTo"]||"";k=h.label(k,0).addClass("highcharts-range-label").attr({padding:k?2:0,height:k?p.inputBoxHeight:0}).add(f);h=h.label("",0).addClass("highcharts-range-input").attr({padding:2,
    width:p.inputBoxWidth,height:p.inputBoxHeight,"text-align":"center"}).on("click",function(){g.showInput(a);g[a+"Input"].focus();});d.styledMode||h.attr({stroke:p.inputBoxBorderColor,"stroke-width":1});h.add(f);var n=r("input",{name:a,className:"highcharts-range-selector"},void 0,e);n.setAttribute("type",u(p.inputDateFormat||"%b %e, %Y"));d.styledMode||(k.css(x(l,p.labelStyle)),h.css(x({color:"#333333"},l,p.inputStyle)),m(n,b({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",
    height:"1px",padding:0,textAlign:"center",fontSize:l.fontSize,fontFamily:l.fontFamily,top:"-9999em"},p.inputStyle)));n.onfocus=function(){g.showInput(a);};n.onblur=function(){n===w.doc.activeElement&&c();g.hideInput(a);g.setInputValue(a);n.blur();};var B=!1;n.onchange=function(){B||(c(),g.hideInput(a),n.blur());};n.onkeypress=function(b){13===b.keyCode&&c();};n.onkeydown=function(b){B=!0;38!==b.keyCode&&40!==b.keyCode||c();};n.onkeyup=function(){B=!1;};return {dateBox:h,input:n,label:k}};f.prototype.getPosition=
    function(){var b=this.chart,a=b.options.rangeSelector;b="top"===a.verticalAlign?b.plotTop-b.axisOffset[0]:0;return {buttonTop:b+a.buttonPosition.y,inputTop:b+a.inputPosition.y-10}};f.prototype.getYTDExtremes=function(b,a,c){var d=this.chart.time,e=new d.Date(b),f=d.get("FullYear",e);c=c?d.Date.UTC(f,0,1):+new d.Date(f,0,1);a=Math.max(a,c);e=e.getTime();return {max:Math.min(b||e,e),min:a}};f.prototype.render=function(b,a){var c=this.chart,e=c.renderer,f=c.container,g=c.options,v=g.rangeSelector,l=A(g.chart.style&&
    g.chart.style.zIndex,0)+1;g=v.inputEnabled;if(!1!==v.enabled){this.rendered||(this.group=e.g("range-selector-group").attr({zIndex:7}).add(),this.div=r("div",void 0,{position:"relative",height:0,zIndex:l}),this.buttonOptions.length&&this.renderButtons(),f.parentNode&&f.parentNode.insertBefore(this.div,f),g&&(this.inputGroup=e.g("input-group").add(this.group),e=this.drawInput("min"),this.minDateBox=e.dateBox,this.minLabel=e.label,this.minInput=e.input,e=this.drawInput("max"),this.maxDateBox=e.dateBox,
    this.maxLabel=e.label,this.maxInput=e.input));if(g&&(this.setInputValue("min",b),this.setInputValue("max",a),b=c.scroller&&c.scroller.getUnionExtremes()||c.xAxis[0]||{},d(b.dataMin)&&d(b.dataMax)&&(c=c.xAxis[0].minRange||0,this.setInputExtremes("min",b.dataMin,Math.min(b.dataMax,this.getInputValue("max"))-c),this.setInputExtremes("max",Math.max(b.dataMin,this.getInputValue("min"))+c,b.dataMax)),this.inputGroup)){var h=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(function(b){if(b){var a=
    b.getBBox().width;a&&(b.attr({x:h}),h+=a+v.inputSpacing);}});}this.alignElements();this.rendered=!0;}};f.prototype.renderButtons=function(){var b=this,a=this.buttons,c=this.options,d=y.lang,e=this.chart.renderer,f=x(c.buttonTheme),h=f&&f.states,p=f.width||28;delete f.width;delete f.states;this.buttonGroup=e.g("range-selector-buttons").add(this.group);var m=this.dropdown=r("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:.0001},this.div);
    g(m,"touchstart",function(){m.style.fontSize="16px";});[[w.isMS?"mouseover":"mouseenter"],[w.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(function(c){var d=c[0],e=c[1];g(m,d,function(){var c=a[b.currentButtonIndex()];c&&q(c.element,e||d);});});this.zoomText=e.label(d&&d.rangeSelectorZoom||"",0).attr({padding:c.buttonTheme.padding,height:c.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup);this.chart.styledMode||(this.zoomText.css(c.labelStyle),f["stroke-width"]=A(f["stroke-width"],
    0));r("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,m);this.buttonOptions.forEach(function(c,d){r("option",{textContent:c.title||c.text},void 0,m);a[d]=e.button(c.text,0,0,function(a){var e=c.events&&c.events.click,f;e&&(f=e.call(c,a));!1!==f&&b.clickButton(d);b.isActive=!0;},f,h&&h.hover,h&&h.select,h&&h.disabled).attr({"text-align":"center",width:p}).add(b.buttonGroup);c.title&&a[d].attr("title",c.title);});};f.prototype.alignElements=function(){var b=this,a=this.buttonGroup,c=this.buttons,
    d=this.chart,e=this.group,f=this.inputGroup,g=this.options,h=this.zoomText,p=d.options,m=p.exporting&&!1!==p.exporting.enabled&&p.navigation&&p.navigation.buttonOptions;p=g.buttonPosition;var q=g.inputPosition,r=g.verticalAlign,k=function(a,c){return m&&b.titleCollision(d)&&"top"===r&&"right"===c.align&&c.y-a.getBBox().height-12<(m.y||0)+(m.height||0)+d.spacing[0]?-40:0},n=d.plotLeft;if(e&&p&&q){var u=p.x-d.spacing[3];if(a){this.positionButtons();if(!this.initialButtonGroupWidth){var B=0;h&&(B+=h.getBBox().width+
    5);c.forEach(function(b,a){B+=b.width;a!==c.length-1&&(B+=g.buttonSpacing);});this.initialButtonGroupWidth=B;}n-=d.spacing[3];this.updateButtonStates();h=k(a,p);this.alignButtonGroup(h);e.placed=a.placed=d.hasLoaded;}a=0;f&&(a=k(f,q),"left"===q.align?u=n:"right"===q.align&&(u=-Math.max(d.axisOffset[1],-a)),f.align({y:q.y,width:f.getBBox().width,align:q.align,x:q.x+u-2},!0,d.spacingBox),f.placed=d.hasLoaded);this.handleCollision(a);e.align({verticalAlign:r},!0,d.spacingBox);f=e.alignAttr.translateY;a=
    e.getBBox().height+20;k=0;"bottom"===r&&(k=(k=d.legend&&d.legend.options)&&"bottom"===k.verticalAlign&&k.enabled&&!k.floating?d.legend.legendHeight+A(k.margin,10):0,a=a+k-20,k=f-a-(g.floating?0:g.y)-(d.titleOffset?d.titleOffset[2]:0)-10);if("top"===r)g.floating&&(k=0),d.titleOffset&&d.titleOffset[0]&&(k=d.titleOffset[0]),k+=d.margin[0]-d.spacing[0]||0;else if("middle"===r)if(q.y===p.y)k=f;else if(q.y||p.y)k=0>q.y||0>p.y?k-Math.min(q.y,p.y):f-a;e.translate(g.x,g.y+Math.floor(k));p=this.minInput;q=
    this.maxInput;f=this.dropdown;g.inputEnabled&&p&&q&&(p.style.marginTop=e.translateY+"px",q.style.marginTop=e.translateY+"px");f&&(f.style.marginTop=e.translateY+"px");}};f.prototype.alignButtonGroup=function(b,a){var c=this.chart,d=this.buttonGroup,e=this.options.buttonPosition,f=c.plotLeft-c.spacing[3],g=e.x-c.spacing[3];"right"===e.align?g+=b-f:"center"===e.align&&(g-=f/2);d&&d.align({y:e.y,width:A(a,this.initialButtonGroupWidth),align:e.align,x:g},!0,c.spacingBox);};f.prototype.positionButtons=function(){var b=
    this.buttons,a=this.chart,c=this.options,d=this.zoomText,e=a.hasLoaded?"animate":"attr",f=c.buttonPosition,g=a.plotLeft,h=g;d&&"hidden"!==d.visibility&&(d[e]({x:A(g+f.x,g)}),h+=f.x+d.getBBox().width+5);this.buttonOptions.forEach(function(a,d){if("hidden"!==b[d].visibility)b[d][e]({x:h}),h+=b[d].width+c.buttonSpacing;else b[d][e]({x:g});});};f.prototype.handleCollision=function(b){var a=this,c=this.chart,d=this.buttonGroup,e=this.inputGroup,f=this.options,g=f.buttonPosition,h=f.dropdown,l=f.inputPosition;
    f=function(){var b=0;a.buttons.forEach(function(a){a=a.getBBox();a.width>b&&(b=a.width);});return b};var p=function(a){if(e&&d){var c=e.alignAttr.translateX+e.alignOptions.x-b+e.getBBox().x+2,f=e.alignOptions.width,h=d.alignAttr.translateX+d.getBBox().x;return h+a>c&&c+f>h&&g.y<l.y+e.getBBox().height}return !1},q=function(){e&&d&&e.attr({translateX:e.alignAttr.translateX+(c.axisOffset[1]>=-b?0:-b),translateY:e.alignAttr.translateY+d.getBBox().height+10});};if(d){if("always"===h){this.collapseButtons(b);
    p(f())&&q();return}"never"===h&&this.expandButtons();}e&&d?l.align===g.align||p(this.initialButtonGroupWidth+20)?"responsive"===h?(this.collapseButtons(b),p(f())&&q()):q():"responsive"===h&&this.expandButtons():d&&"responsive"===h&&(this.initialButtonGroupWidth>c.plotWidth?this.collapseButtons(b):this.expandButtons());};f.prototype.collapseButtons=function(b){var a=this.buttons,c=this.buttonOptions,d=this.chart,e=this.dropdown,f=this.options,g=this.zoomText,h=d.userOptions.rangeSelector&&d.userOptions.rangeSelector.buttonTheme||
    {},l=function(b){return {text:b?b+" \u25be":"\u25be",width:"auto",paddingLeft:A(f.buttonTheme.paddingLeft,h.padding,8),paddingRight:A(f.buttonTheme.paddingRight,h.padding,8)}};g&&g.hide();var p=!1;c.forEach(function(b,c){c=a[c];2!==c.state?c.hide():(c.show(),c.attr(l(b.text)),p=!0);});p||(e&&(e.selectedIndex=0),a[0].show(),a[0].attr(l(this.zoomText&&this.zoomText.textStr)));c=f.buttonPosition.align;this.positionButtons();"right"!==c&&"center"!==c||this.alignButtonGroup(b,a[this.currentButtonIndex()].getBBox().width);
    this.showDropdown();};f.prototype.expandButtons=function(){var b=this.buttons,a=this.buttonOptions,c=this.options,d=this.zoomText;this.hideDropdown();d&&d.show();a.forEach(function(a,d){d=b[d];d.show();d.attr({text:a.text,width:c.buttonTheme.width||28,paddingLeft:A(c.buttonTheme.paddingLeft,"unset"),paddingRight:A(c.buttonTheme.paddingRight,"unset")});2>d.state&&d.setState(0);});this.positionButtons();};f.prototype.currentButtonIndex=function(){var b=this.dropdown;return b&&0<b.selectedIndex?b.selectedIndex-
    1:0};f.prototype.showDropdown=function(){var b=this.buttonGroup,a=this.buttons,c=this.chart,d=this.dropdown;if(b&&d){var e=b.translateX;b=b.translateY;a=a[this.currentButtonIndex()].getBBox();m(d,{left:c.plotLeft+e+"px",top:b+.5+"px",width:a.width+"px",height:a.height+"px"});this.hasVisibleDropdown=!0;}};f.prototype.hideDropdown=function(){var b=this.dropdown;b&&(m(b,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1);};f.prototype.getHeight=function(){var b=this.options,a=this.group,
    c=b.y,d=b.buttonPosition.y,e=b.inputPosition.y;if(b.height)return b.height;this.alignElements();b=a?a.getBBox(!0).height+13+c:0;a=Math.min(e,d);if(0>e&&0>d||0<e&&0<d)b+=Math.abs(a);return b};f.prototype.titleCollision=function(b){return !(b.options.title.text||b.options.subtitle.text)};f.prototype.update=function(b){var a=this.chart;x(!0,a.options.rangeSelector,b);this.destroy();this.init(a);this.render();};f.prototype.destroy=function(){var b=this,a=b.minInput,d=b.maxInput;b.eventsToUnbind&&(b.eventsToUnbind.forEach(function(b){return b()}),
    b.eventsToUnbind=void 0);e(b.buttons);a&&(a.onfocus=a.onblur=a.onchange=null);d&&(d.onfocus=d.onblur=d.onchange=null);G(b,function(a,d){a&&"chart"!==d&&(a instanceof n?a.destroy():a instanceof window.HTMLElement&&c(a));a!==f.prototype[d]&&(b[d]=null);},this);};return f}();C.prototype.defaultButtons=[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},
    {type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}];C.prototype.inputTypeFormats={"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"};a.prototype.minFromRange=function(){var b=this.range,a=b.type,c=this.max,d=this.chart.time,e=function(b,c){var e="year"===a?"FullYear":"Month",f=new d.Date(b),g=d.get(e,f);d.set(e,f,g+c);g===d.get(e,f)&&d.set("Date",f,0);return f.getTime()-b};if(z(b)){var f=c-b;var g=b;}else f=c+e(c,-b.count),this.chart&&(this.chart.fixedRange=
    c-f);var h=A(this.dataMin,Number.MIN_VALUE);z(f)||(f=h);f<=h&&(f=h,"undefined"===typeof g&&(g=e(f,b.count)),this.newMax=Math.min(f+g,this.dataMax));z(c)||(f=void 0);return f};if(!w.RangeSelector){var D=[],I=function(b){function a(){d&&(c=b.xAxis[0].getExtremes(),e=b.legend,p=d&&d.options.verticalAlign,z(c.min)&&d.render(c.min,c.max),e.display&&"top"===p&&p===e.options.verticalAlign&&(h=x(b.spacingBox),h.y="vertical"===e.options.layout?b.plotTop:h.y+d.getHeight(),e.group.placed=!1,e.align(h)));}var c,
    d=b.rangeSelector,e,h,p;d&&(f(D,function(a){return a[0]===b})||D.push([b,[g(b.xAxis[0],"afterSetExtremes",function(b){d&&d.render(b.min,b.max);}),g(b,"redraw",a)]]),a());};g(h,"afterGetContainer",function(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new C(this));});g(h,"beforeRender",function(){var b=this.axes,a=this.rangeSelector;a&&(z(a.deferredYTDClick)&&(a.clickButton(a.deferredYTDClick),delete a.deferredYTDClick),b.forEach(function(b){b.updateNames();b.setScale();}),
    this.getAxisMargins(),a.render(),b=a.options.verticalAlign,a.options.floating||("bottom"===b?this.extraBottomMargin=!0:"middle"!==b&&(this.extraTopMargin=!0)));});g(h,"update",function(b){var a=b.options.rangeSelector;b=this.rangeSelector;var c=this.extraBottomMargin,e=this.extraTopMargin;a&&a.enabled&&!d(b)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=b=new C(this));this.extraTopMargin=this.extraBottomMargin=!1;b&&(I(this),a=a&&a.verticalAlign||b.options&&
    b.options.verticalAlign,b.options.floating||("bottom"===a?this.extraBottomMargin=!0:"middle"!==a&&(this.extraTopMargin=!0)),this.extraBottomMargin!==c||this.extraTopMargin!==e)&&(this.isDirtyBox=!0);});g(h,"render",function(){var b=this.rangeSelector;b&&!b.options.floating&&(b.render(),b=b.options.verticalAlign,"bottom"===b?this.extraBottomMargin=!0:"middle"!==b&&(this.extraTopMargin=!0));});g(h,"getMargins",function(){var b=this.rangeSelector;b&&(b=b.getHeight(),this.extraTopMargin&&(this.plotTop+=
    b),this.extraBottomMargin&&(this.marginBottom+=b));});h.prototype.callbacks.push(I);g(h,"destroy",function(){for(var b=0;b<D.length;b++){var a=D[b];if(a[0]===this){a[1].forEach(function(b){return b()});D.splice(b,1);break}}});w.RangeSelector=C;}return C});x(a,"Accessibility/Components/RangeSelectorComponent.js",[a["Extensions/RangeSelector.js"],a["Accessibility/AccessibilityComponent.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/Announcer.js"],a["Accessibility/KeyboardNavigationHandler.js"],
    a["Core/Utilities.js"]],function(a,h,w,t,n,k){var u=this&&this.__extends||function(){var a=function(d,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a;}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);};return a(d,c)};return function(d,c){function b(){this.constructor=d;}a(d,c);d.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b);}}(),y=w.unhideChartElementFromAT,g=w.getAxisRangeDescription,r=k.addEvent,m=k.attr;h=function(a){function d(){var c=
    null!==a&&a.apply(this,arguments)||this;c.announcer=void 0;return c}u(d,a);d.prototype.init=function(){this.announcer=new t(this.chart,"polite");};d.prototype.onChartUpdate=function(){var a=this.chart,b=this,d=a.rangeSelector;d&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),d.buttons&&d.buttons.length&&d.buttons.forEach(function(a){b.setRangeButtonAttrs(a);}),d.maxInput&&d.minInput&&["minInput","maxInput"].forEach(function(c,e){if(c=d[c])y(a,c),b.setRangeInputAttrs(c,"accessibility.rangeSelector."+
    (e?"max":"min")+"InputLabel");}));};d.prototype.updateSelectorVisibility=function(){var a=this.chart,b=a.rangeSelector,d=b&&b.dropdown,e=b&&b.buttons||[];b&&b.hasVisibleDropdown&&d?(y(a,d),e.forEach(function(b){return b.element.setAttribute("aria-hidden",!0)})):(d&&d.setAttribute("aria-hidden",!0),e.forEach(function(b){return y(a,b.element)}));};d.prototype.setDropdownAttrs=function(){var a=this.chart,b=a.rangeSelector&&a.rangeSelector.dropdown;b&&(a=a.langFormat("accessibility.rangeSelector.dropdownLabel",
    {rangeTitle:a.options.lang.rangeSelectorZoom}),b.setAttribute("aria-label",a),b.setAttribute("tabindex",-1));};d.prototype.setRangeButtonAttrs=function(a){m(a.element,{tabindex:-1,role:"button"});};d.prototype.setRangeInputAttrs=function(a,b){var c=this.chart;m(a,{tabindex:-1,"aria-label":c.langFormat(b,{chart:c})});};d.prototype.onButtonNavKbdArrowKey=function(a,b){var c=a.response,d=this.keyCodes,e=this.chart,g=e.options.accessibility.keyboardNavigation.wrapAround;b=b===d.left||b===d.up?-1:1;return e.highlightRangeSelectorButton(e.highlightedRangeSelectorItemIx+
    b)?c.success:g?(a.init(b),c.success):c[0<b?"next":"prev"]};d.prototype.onButtonNavKbdClick=function(a){a=a.response;var b=this.chart;3!==b.oldRangeSelectorItemState&&this.fakeClickEvent(b.rangeSelector.buttons[b.highlightedRangeSelectorItemIx].element);return a.success};d.prototype.onAfterBtnClick=function(){var a=this.chart,b=g(a.xAxis[0]);(a=a.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:a,axisRangeDescription:b}))&&this.announcer.announce(a);};d.prototype.onInputKbdMove=
    function(a){var b=this.chart,c=b.rangeSelector,d=b.highlightedInputRangeIx=(b.highlightedInputRangeIx||0)+a;1<d||0>d?b.accessibility&&(b.accessibility.keyboardNavigation.tabindexContainer.focus(),b.accessibility.keyboardNavigation.move(a)):c&&(a=c[d?"maxDateBox":"minDateBox"],c=c[d?"maxInput":"minInput"],a&&c&&b.setFocusToElement(a,c));};d.prototype.onInputNavInit=function(a){var b=this,c=this,d=this.chart,e=0<a?0:1,g=d.rangeSelector,h=g&&g[e?"maxDateBox":"minDateBox"];a=g&&g.minInput;g=g&&g.maxInput;
    d.highlightedInputRangeIx=e;if(h&&a&&g){d.setFocusToElement(h,e?g:a);this.removeInputKeydownHandler&&this.removeInputKeydownHandler();d=function(a){(a.which||a.keyCode)===b.keyCodes.tab&&(a.preventDefault(),a.stopPropagation(),c.onInputKbdMove(a.shiftKey?-1:1));};var m=r(a,"keydown",d),k=r(g,"keydown",d);this.removeInputKeydownHandler=function(){m();k();};}};d.prototype.onInputNavTerminate=function(){var a=this.chart.rangeSelector||{};a.maxInput&&a.hideInput("max");a.minInput&&a.hideInput("min");this.removeInputKeydownHandler&&
    (this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler);};d.prototype.initDropdownNav=function(){var a=this,b=this.chart,d=b.rangeSelector,e=d&&d.dropdown;d&&e&&(b.setFocusToElement(d.buttonGroup,e),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=r(e,"keydown",function(d){var c=b.accessibility;(d.which||d.keyCode)===a.keyCodes.tab&&(d.preventDefault(),d.stopPropagation(),c&&(c.keyboardNavigation.tabindexContainer.focus(),c.keyboardNavigation.move(d.shiftKey?
    -1:1)));}));};d.prototype.getRangeSelectorButtonNavigation=function(){var a=this.chart,b=this.keyCodes,d=this;return new n(a,{keyCodeMap:[[[b.left,b.right,b.up,b.down],function(b){return d.onButtonNavKbdArrowKey(this,b)}],[[b.enter,b.space],function(){return d.onButtonNavKbdClick(this)}]],validate:function(){return !!(a.rangeSelector&&a.rangeSelector.buttons&&a.rangeSelector.buttons.length)},init:function(b){var c=a.rangeSelector;c&&c.hasVisibleDropdown?d.initDropdownNav():c&&(c=c.buttons.length-1,a.highlightRangeSelectorButton(0<
    b?0:c));},terminate:function(){d.removeDropdownKeydownHandler&&(d.removeDropdownKeydownHandler(),delete d.removeDropdownKeydownHandler);}})};d.prototype.getRangeSelectorInputNavigation=function(){var a=this.chart,b=this;return new n(a,{keyCodeMap:[],validate:function(){return !!(a.rangeSelector&&a.rangeSelector.inputGroup&&"hidden"!==a.rangeSelector.inputGroup.element.style.visibility&&!1!==a.options.rangeSelector.inputEnabled&&a.rangeSelector.minInput&&a.rangeSelector.maxInput)},init:function(a){b.onInputNavInit(a);},
    terminate:function(){b.onInputNavTerminate();}})};d.prototype.getKeyboardNavigation=function(){return [this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]};d.prototype.destroy=function(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler();this.removeInputKeydownHandler&&this.removeInputKeydownHandler();this.announcer&&this.announcer.destroy();};return d}(h);(function(d){function e(b){var a=this.rangeSelector&&this.rangeSelector.buttons||[],d=this.highlightedRangeSelectorItemIx,
    c=this.rangeSelector&&this.rangeSelector.selected;"undefined"!==typeof d&&a[d]&&d!==c&&a[d].setState(this.oldRangeSelectorItemState||0);this.highlightedRangeSelectorItemIx=b;return a[b]?(this.setFocusToElement(a[b].box,a[b].element),b!==c&&(this.oldRangeSelectorItemState=a[b].state,a[b].setState(1)),!0):!1}function c(){var b=this.chart.accessibility;if(b&&b.components.rangeSelector)return b.components.rangeSelector.onAfterBtnClick()}var b=[];d.compose=function(d,g){-1===b.indexOf(d)&&(b.push(d),d.prototype.highlightRangeSelectorButton=
    e);-1===b.indexOf(g)&&(b.push(g),r(a,"afterBtnClick",c));};})(h||(h={}));return h});x(a,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[a["Core/Utilities.js"]],function(a){var h=a.addEvent,u=a.merge,t;(function(a){function k(a){u(!0,a,{marker:{enabled:!0,states:{normal:{opacity:0}}}});}function n(a){return a.marker.states&&a.marker.states.normal&&a.marker.states.normal.opacity}function t(){if(this.chart.styledMode){if(this.markerGroup)this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden");
    this._hasPointMarkers&&this.points&&this.points.length&&this.points.forEach(function(a){a.graphic&&(a.graphic[a.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),a.graphic[!1===a.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"));});}}function g(a){this.resetA11yMarkerOptions=u(a.options.marker||{},this.userOptions.marker||{});}function r(){var a=this.options,e=!1!==(this.options.accessibility&&this.options.accessibility.enabled);if(e=this.chart.options.accessibility.enabled&&
    e)e=this.chart.options.accessibility,e=this.points.length<e.series.pointDescriptionEnabledThreshold||!1===e.series.pointDescriptionEnabledThreshold;if(e){if(a.marker&&!1===a.marker.enabled&&(this.a11yMarkersForced=!0,k(this.options)),this._hasPointMarkers&&this.points&&this.points.length)for(a=this.points.length;a--;){e=this.points[a];var c=e.options,b=e.hasForcedA11yMarker;delete e.hasForcedA11yMarker;c.marker&&(b=b&&0===n(c),c.marker.enabled&&!b?(u(!0,c.marker,{states:{normal:{opacity:n(c)||1}}}),
    e.hasForcedA11yMarker=!1):!1===c.marker.enabled&&(k(c),e.hasForcedA11yMarker=!0));}}else this.a11yMarkersForced&&(delete this.a11yMarkersForced,(a=this.resetA11yMarkerOptions)&&this.update({marker:{enabled:a.enabled,states:{normal:{opacity:a.states&&a.states.normal&&a.states.normal.opacity}}}}),delete this.resetA11yMarkerOptions);}var m=[];a.compose=function(a){-1===m.indexOf(a)&&(m.push(a),h(a,"afterSetOptions",g),h(a,"render",r),h(a,"afterRender",t));};})(t||(t={}));return t});x(a,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",
    [a["Core/Series/Point.js"],a["Core/Series/Series.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Globals.js"],a["Core/Utilities.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Accessibility/Utils/EventProvider.js"],a["Accessibility/Utils/ChartUtilities.js"]],function(a,h,w,t,n,k,x,y){function g(a){var b=a.index,c=a.series.points,d=c.length;if(c[b]!==a)for(;d--;){if(c[d]===a)return d}else return b}function r(a){var b=a.chart.options.accessibility.keyboardNavigation.seriesNavigation,c=a.options.accessibility||
    {},d=c.keyboardNavigation;return d&&!1===d.enabled||!1===c.enabled||!1===a.options.enableMouseTracking||!a.visible||b.pointNavigationEnabledThreshold&&b.pointNavigationEnabledThreshold<=a.points.length}function m(a){var b=a.series.chart.options.accessibility,c=a.options.accessibility&&!1===a.options.accessibility.enabled;return a.isNull&&b.keyboardNavigation.seriesNavigation.skipNullPoints||!1===a.visible||!1===a.isInside||c||r(a.series)}function d(a){a=a.series||[];for(var b=a.length,c=0;c<b;++c)if(!r(a[c])){a:{var d=
    a[c].points||[];for(var e=d.length,f=0;f<e;++f)if(!m(d[f])){d=d[f];break a}d=null;}if(d)return d}return null}function e(a){for(var b=a.series.length,c=!1;b--&&!(a.highlightedPoint=a.series[b].points[a.series[b].points.length-1],c=a.series[b].highlightNextValidPoint()););return c}function c(a){delete a.highlightedPoint;return (a=d(a))?a.highlight():!1}var b=w.seriesTypes,f=t.doc,q=n.defined,u=n.fireEvent,E=y.getPointFromXY,G=y.getSeriesFromName,H=y.scrollToPoint;w=function(){function b(a,b){this.keyCodes=
    b;this.chart=a;}b.prototype.init=function(){var b=this,c=this.chart,e=this.eventProvider=new x;e.addEvent(h,"destroy",function(){return b.onSeriesDestroy(this)});e.addEvent(c,"afterApplyDrilldown",function(){var a=d(this);a&&a.highlight(!1);});e.addEvent(c,"drilldown",function(a){a=a.point;var c=a.series;b.lastDrilledDownPoint={x:a.x,y:a.y,seriesName:c?c.name:""};});e.addEvent(c,"drillupall",function(){setTimeout(function(){b.onDrillupAll();},10);});e.addEvent(a,"afterSetState",function(){var a=this.graphic&&
    this.graphic.element,b=f.activeElement,d=b&&b.getAttribute("class");d=d&&-1<d.indexOf("highcharts-a11y-proxy-button");c.highlightedPoint===this&&b!==a&&!d&&a&&a.focus&&a.focus();});};b.prototype.onDrillupAll=function(){var a=this.lastDrilledDownPoint,b=this.chart,c=a&&G(b,a.seriesName),e;a&&c&&q(a.x)&&q(a.y)&&(e=E(c,a.x,a.y));e=e||d(b);b.container&&b.container.focus();e&&e.highlight&&e.highlight(!1);};b.prototype.getKeyboardNavigationHandler=function(){var a=this,b=this.keyCodes,f=this.chart,g=f.inverted;
    return new k(f,{keyCodeMap:[[g?[b.up,b.down]:[b.left,b.right],function(b){return a.onKbdSideways(this,b)}],[g?[b.left,b.right]:[b.up,b.down],function(b){return a.onKbdVertical(this,b)}],[[b.enter,b.space],function(a,b){if(a=f.highlightedPoint)b.point=a,u(a.series,"click",b),a.firePointEvent("click");return this.response.success}],[[b.home],function(){c(f);return this.response.success}],[[b.end],function(){e(f);return this.response.success}],[[b.pageDown,b.pageUp],function(a){f.highlightAdjacentSeries(a===
    b.pageDown);return this.response.success}]],init:function(){return a.onHandlerInit(this)},validate:function(){return !!d(f)},terminate:function(){return a.onHandlerTerminate()}})};b.prototype.onKbdSideways=function(a,b){var c=this.keyCodes;return this.attemptHighlightAdjacentPoint(a,b===c.right||b===c.down)};b.prototype.onHandlerInit=function(a){var b=this.chart;b.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&b.highlightedPoint?b.highlightedPoint.highlight():c(b);return a.response.success};
    b.prototype.onKbdVertical=function(a,b){var c=this.chart,d=this.keyCodes;b=b===d.down||b===d.right;d=c.options.accessibility.keyboardNavigation.seriesNavigation;if(d.mode&&"serialize"===d.mode)return this.attemptHighlightAdjacentPoint(a,b);c[c.highlightedPoint&&c.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](b);return a.response.success};b.prototype.onHandlerTerminate=function(){var a=this.chart,b=a.options.accessibility.keyboardNavigation;
    a.tooltip&&a.tooltip.hide(0);var c=a.highlightedPoint&&a.highlightedPoint.series;if(c&&c.onMouseOut)c.onMouseOut();if(a.highlightedPoint&&a.highlightedPoint.onMouseOut)a.highlightedPoint.onMouseOut();b.seriesNavigation.rememberPointFocus||delete a.highlightedPoint;};b.prototype.attemptHighlightAdjacentPoint=function(a,b){var d=this.chart,f=d.options.accessibility.keyboardNavigation.wrapAround;return d.highlightAdjacentPoint(b)?a.response.success:f&&(b?c(d):e(d))?a.response.success:a.response[b?"next":
    "prev"]};b.prototype.onSeriesDestroy=function(a){var b=this.chart;b.highlightedPoint&&b.highlightedPoint.series===a&&(delete b.highlightedPoint,b.focusElement&&b.focusElement.removeFocusBorder());};b.prototype.destroy=function(){this.eventProvider.removeAddedEvents();};return b}();(function(a){function c(a){var b=this.series,c=this.highlightedPoint,d=c&&g(c)||0,e=c&&c.series.points||[],f=this.series&&this.series[this.series.length-1];f=f&&f.points&&f.points[f.points.length-1];if(!b[0]||!b[0].points)return !1;
    if(c){if(b=b[c.series.index+(a?1:-1)],d=e[d+(a?1:-1)],!d&&b&&(d=b.points[a?0:b.points.length-1]),!d)return !1}else d=a?b[0].points[0]:f;return m(d)?(b=d.series,r(b)?this.highlightedPoint=a?b.points[b.points.length-1]:b.points[0]:this.highlightedPoint=d,this.highlightAdjacentPoint(a)):d.highlight()}function d(a){var b=this.highlightedPoint,c=Infinity,d;if(!q(b.plotX)||!q(b.plotY))return !1;this.series.forEach(function(e){r(e)||e.points.forEach(function(f){if(q(f.plotY)&&q(f.plotX)&&f!==b){var g=f.plotY-
    b.plotY,h=Math.abs(f.plotX-b.plotX);h=Math.abs(g)*Math.abs(g)+h*h*4;e.yAxis&&e.yAxis.reversed&&(g*=-1);!(0>=g&&a||0<=g&&!a||5>h||m(f))&&h<c&&(c=h,d=f);}});});return d?d.highlight():!1}function e(a){var b=this.highlightedPoint,c=this.series&&this.series[this.series.length-1],d=c&&c.points&&c.points[c.points.length-1];if(!this.highlightedPoint)return c=a?this.series&&this.series[0]:c,(d=a?c&&c.points&&c.points[0]:d)?d.highlight():!1;c=this.series[b.series.index+(a?-1:1)];if(!c)return !1;d=f(b,c,4);if(!d)return !1;
    if(r(c))return d.highlight(),a=this.highlightAdjacentSeries(a),a?a:(b.highlight(),!1);d.highlight();return d.series.highlightNextValidPoint()}function f(a,b,c,d){var e=Infinity,f=b.points.length,g=function(a){return !(q(a.plotX)&&q(a.plotY))};if(!g(a)){for(;f--;){var h=b.points[f];if(!g(h)&&(h=(a.plotX-h.plotX)*(a.plotX-h.plotX)*(c||1)+(a.plotY-h.plotY)*(a.plotY-h.plotY)*(d||1),h<e)){e=h;var m=f;}}return q(m)?b.points[m]:void 0}}function h(a){void 0===a&&(a=!0);var b=this.series.chart;if(!this.isNull&&
    a)this.onMouseOver();else b.tooltip&&b.tooltip.hide(0);H(this);this.graphic&&(b.setFocusToElement(this.graphic),!a&&b.focusElement&&b.focusElement.removeFocusBorder());b.highlightedPoint=this;return this}function k(){var a=this.chart.highlightedPoint,b=(a&&a.series)===this?g(a):0;a=this.points;var c=a.length;if(a&&c){for(var d=b;d<c;++d)if(!m(a[d]))return a[d].highlight();for(;0<=b;--b)if(!m(a[b]))return a[b].highlight()}return !1}var l=[];a.compose=function(a,f,g){-1===l.indexOf(a)&&(l.push(a),a=
    a.prototype,a.highlightAdjacentPoint=c,a.highlightAdjacentPointVertical=d,a.highlightAdjacentSeries=e);-1===l.indexOf(f)&&(l.push(f),f.prototype.highlight=h);-1===l.indexOf(g)&&(l.push(g),f=g.prototype,f.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(function(a){b[a]&&(b[a].prototype.keyboardMoveVertical=!1);}),f.highlightNextValidPoint=k);};})(w||(w={}));return w});x(a,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[a["Accessibility/AccessibilityComponent.js"],a["Accessibility/Utils/ChartUtilities.js"],
    a["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],a["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],a["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],a["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"],a["Core/Tooltip.js"]],function(a,h,w,t,n,k,x){var u=this&&this.__extends||function(){var a=function(d,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
    (a[c]=b[c]);};return a(d,e)};return function(d,e){function c(){this.constructor=d;}a(d,e);d.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c);}}(),g=h.hideSeriesFromAT,r=n.describeSeries;return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}u(d,a);d.compose=function(a,c,b){t.compose(b);w.compose(b);k.compose(a,c,b);};d.prototype.init=function(){this.newDataAnnouncer=new t(this.chart);this.newDataAnnouncer.init();this.keyboardNavigation=new k(this.chart,this.keyCodes);
    this.keyboardNavigation.init();this.hideTooltipFromATWhenShown();this.hideSeriesLabelsFromATWhenShown();};d.prototype.hideTooltipFromATWhenShown=function(){var a=this;this.addEvent(x,"refresh",function(){this.chart===a.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0);});};d.prototype.hideSeriesLabelsFromATWhenShown=function(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(a){a.labelBySeries&&a.labelBySeries.attr("aria-hidden",
    !0);});});};d.prototype.onChartRender=function(){this.chart.series.forEach(function(a){!1!==(a.options.accessibility&&a.options.accessibility.enabled)&&a.visible?r(a):g(a);});};d.prototype.getKeyboardNavigation=function(){return this.keyboardNavigation.getKeyboardNavigationHandler()};d.prototype.destroy=function(){this.newDataAnnouncer.destroy();this.keyboardNavigation.destroy();};return d}(a)});x(a,"Accessibility/Components/ZoomComponent.js",[a["Accessibility/AccessibilityComponent.js"],a["Accessibility/Utils/ChartUtilities.js"],
    a["Core/Globals.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Core/Utilities.js"]],function(a,h,w,t,n){var k=this&&this.__extends||function(){var a=function(g,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c;}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);};return a(g,d)};return function(g,d){function e(){this.constructor=g;}a(g,d);g.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e);}}(),u=h.unhideChartElementFromAT,y=
    n.attr,g=n.pick;a=function(a){function h(){var d=null!==a&&a.apply(this,arguments)||this;d.focusedMapNavButtonIx=-1;return d}k(h,a);h.prototype.init=function(){var a=this,e=this.chart;this.proxyProvider.addGroup("zoom","div");["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(function(c){a.addEvent(e,c,function(){a.updateProxyOverlays();});});};h.prototype.onChartUpdate=function(){var a=this.chart,e=this;a.mapNavigation&&a.mapNavigation.navButtons.forEach(function(c,b){u(a,c.element);
    e.setMapNavButtonAttrs(c.element,"accessibility.zoom.mapZoom"+(b?"Out":"In"));});};h.prototype.setMapNavButtonAttrs=function(a,e){var c=this.chart;e=c.langFormat(e,{chart:c});y(a,{tabindex:-1,role:"button","aria-label":e});};h.prototype.onChartRender=function(){this.updateProxyOverlays();};h.prototype.updateProxyOverlays=function(){var a=this.chart;this.proxyProvider.clearGroup("zoom");a.resetZoomButton&&this.createZoomProxyButton(a.resetZoomButton,"resetZoomProxyButton",a.langFormat("accessibility.zoom.resetZoomButton",
    {chart:a}));a.drillUpButton&&a.breadcrumbs&&a.breadcrumbs.list&&this.createZoomProxyButton(a.drillUpButton,"drillUpProxyButton",a.langFormat("accessibility.drillUpButton",{chart:a,buttonText:a.breadcrumbs.getButtonText(a.breadcrumbs.list[a.breadcrumbs.list.length-1])}));};h.prototype.createZoomProxyButton=function(a,e,c){this[e]=this.proxyProvider.addProxyElement("zoom",{click:a},{"aria-label":c,tabindex:-1});};h.prototype.getMapZoomNavigation=function(){var a=this.keyCodes,e=this.chart,c=this;return new t(e,
    {keyCodeMap:[[[a.up,a.down,a.left,a.right],function(a){return c.onMapKbdArrow(this,a)}],[[a.tab],function(a,d){return c.onMapKbdTab(this,d)}],[[a.space,a.enter],function(){return c.onMapKbdClick(this)}]],validate:function(){return !!(e.mapZoom&&e.mapNavigation&&e.mapNavigation.navButtons.length)},init:function(a){return c.onMapNavInit(a)}})};h.prototype.onMapKbdArrow=function(a,e){var c=this.keyCodes;this.chart[e===c.up||e===c.down?"yAxis":"xAxis"][0].panStep(e===c.left||e===c.up?-1:1);return a.response.success};
    h.prototype.onMapKbdTab=function(a,e){var c=this.chart;a=a.response;var b=(e=e.shiftKey)&&!this.focusedMapNavButtonIx||!e&&this.focusedMapNavButtonIx;c.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0);if(b)return c.mapZoom(),a[e?"prev":"next"];this.focusedMapNavButtonIx+=e?-1:1;e=c.mapNavigation.navButtons[this.focusedMapNavButtonIx];c.setFocusToElement(e.box,e.element);e.setState(2);return a.success};h.prototype.onMapKbdClick=function(a){this.fakeClickEvent(this.chart.mapNavButtons[this.focusedMapNavButtonIx].element);
    return a.response.success};h.prototype.onMapNavInit=function(a){var d=this.chart,c=d.mapNavigation.navButtons[0],b=d.mapNavigation.navButtons[1];c=0<a?c:b;d.setFocusToElement(c.box,c.element);c.setState(2);this.focusedMapNavButtonIx=0<a?0:1;};h.prototype.simpleButtonNavigation=function(a,e,c){var b=this.keyCodes,d=this,h=this.chart;return new t(h,{keyCodeMap:[[[b.tab,b.up,b.down,b.left,b.right],function(a,c){return this.response[a===b.tab&&c.shiftKey||a===b.left||a===b.up?"prev":"next"]}],[[b.space,
    b.enter],function(){var a=c(this,h);return g(a,this.response.success)}]],validate:function(){return h[a]&&h[a].box&&d[e].buttonElement},init:function(){h.setFocusToElement(h[a].box,d[e].buttonElement);}})};h.prototype.getKeyboardNavigation=function(){return [this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(a,e){e.zoomOut();}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(a,e){e.drillUp();return a.response.prev}),this.getMapZoomNavigation()]};return h}(a);
    (function(a){function g(a,e){var c=e||3;e=this.getExtremes();var b=(e.max-e.min)/c*a;c=e.max+b;b=e.min+b;var d=c-b;0>a&&b<e.dataMin?(b=e.dataMin,c=b+d):0<a&&c>e.dataMax&&(c=e.dataMax,b=c-d);this.setExtremes(b,c);}a.composedClasses=[];a.compose=function(d){-1===a.composedClasses.indexOf(d)&&(a.composedClasses.push(d),d.prototype.panStep=g);};})(a||(a={}));return a});x(a,"Accessibility/HighContrastMode.js",[a["Core/Globals.js"]],function(a){var h=a.doc,u=a.isMS,t=a.win;return {isHighContrastModeActive:function(){var a=
    /(Edg)/.test(t.navigator.userAgent);if(t.matchMedia&&a)return t.matchMedia("(-ms-high-contrast: active)").matches;if(u&&t.getComputedStyle){a=h.createElement("div");a.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)";h.body.appendChild(a);var k=(a.currentStyle||t.getComputedStyle(a)).backgroundImage;h.body.removeChild(a);return "none"===k}return t.matchMedia&&t.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(a){a.highContrastModeActive=
    !0;var h=a.options.accessibility.highContrastTheme;a.update(h,!1);a.series.forEach(function(a){var k=h.plotOptions[a.type]||{};a.update({color:k.color||"windowText",colors:[k.color||"windowText"],borderColor:k.borderColor||"window"});a.points.forEach(function(a){a.options&&a.options.color&&a.update({color:k.color||"windowText",borderColor:k.borderColor||"window"},!1);});});a.redraw();}}});x(a,"Accessibility/HighContrastTheme.js",[],function(){return {chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},
    subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",
    borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},
    errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},labels:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",
    style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},
    scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}});x(a,"Accessibility/Options/Options.js",[],function(){return {accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",
    afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#335cad",
    lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5E3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}}}});x(a,"Accessibility/Options/LangOptions.js",[],function(){return {accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",
    svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}",descriptionNoPoints:"{annotationText}"},
    endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},
    table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",
    arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",
    funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",
    defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",
    barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",
    bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.",
    timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{"default":"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",
    defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",
    splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",
    barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, slices, slice)}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#plural(series.points.length, slices, slice)}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, points, point)}.",
    scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#plural(series.points.length, points, point)}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, boxes, box)}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#plural(series.points.length, boxes, box)}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",
    bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, areas, area)}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#plural(series.points.length, areas, area)}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",
    maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}."},
    description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{Annotation: #each(annotations). }"}}}});x(a,"Accessibility/Options/DeprecatedOptions.js",[a["Core/Utilities.js"]],function(a){function h(a,h,k){for(var d,e=0;e<h.length-1;++e)d=h[e],a=a[d]=y(a[d],{});a[h[h.length-1]]=k;}function u(a,k,m,d){function e(a,b){return b.reduce(function(a,b){return a[b]},a)}var c=e(a.options,k),b=e(a.options,m);Object.keys(d).forEach(function(e){var f,
    g=c[e];"undefined"!==typeof g&&(h(b,d[e],g),x(32,!1,a,(f={},f[k.join(".")+"."+e]=m.join(".")+"."+d[e].join("."),f)));});}function t(a){var g=a.options.chart,h=a.options.accessibility||{};["description","typeDescription"].forEach(function(d){var e;g[d]&&(h[d]=g[d],x(32,!1,a,(e={},e["chart."+d]="use accessibility."+d,e)));});}function n(a){a.axes.forEach(function(g){(g=g.options)&&g.description&&(g.accessibility=g.accessibility||{},g.accessibility.description=g.description,x(32,!1,a,{"axis.description":"use axis.accessibility.description"}));});}
    function k(a){var g={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};a.series.forEach(function(k){Object.keys(g).forEach(function(d){var e,c=k.options[d];"accessibility.pointDescriptionFormatter"===d&&(c=k.options.accessibility&&
    k.options.accessibility.pointDescriptionFormatter);"undefined"!==typeof c&&(h(k.options,g[d],"skipKeyboardNavigation"===d?!c:c),x(32,!1,a,(e={},e["series."+d]="series."+g[d].join("."),e)));});});}var x=a.error,y=a.pick;return function(a){t(a);n(a);a.series&&k(a);u(a,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],
    pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection",
    "axisRangeDateFormat"]});u(a,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]});u(a,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector",
    "buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]});}});x(a,"Accessibility/Accessibility.js",[a["Core/DefaultOptions.js"],a["Core/Globals.js"],a["Core/Utilities.js"],a["Accessibility/A11yI18n.js"],a["Accessibility/Components/ContainerComponent.js"],a["Accessibility/FocusBorder.js"],
    a["Accessibility/Components/InfoRegionsComponent.js"],a["Accessibility/KeyboardNavigation.js"],a["Accessibility/Components/LegendComponent.js"],a["Accessibility/Components/MenuComponent.js"],a["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],a["Accessibility/ProxyProvider.js"],a["Accessibility/Components/RangeSelectorComponent.js"],a["Accessibility/Components/SeriesComponent/SeriesComponent.js"],a["Accessibility/Components/ZoomComponent.js"],a["Accessibility/HighContrastMode.js"],a["Accessibility/HighContrastTheme.js"],
    a["Accessibility/Options/Options.js"],a["Accessibility/Options/LangOptions.js"],a["Accessibility/Options/DeprecatedOptions.js"]],function(a,h,w,t,n,k,x,y,g,r,m,d,e,c,b,f,q,z,M,G){a=a.defaultOptions;var u=h.doc,A=w.addEvent,E=w.extend,B=w.fireEvent,C=w.merge;h=function(){function a(a){this.proxyProvider=this.keyboardNavigation=this.components=this.chart=void 0;this.init(a);}a.prototype.init=function(a){this.chart=a;u.addEventListener&&a.renderer.isSVG?(G(a),this.proxyProvider=new d(this.chart),this.initComponents(),
    this.keyboardNavigation=new y(a,this.components)):(this.zombie=!0,this.components={},a.renderTo.setAttribute("aria-hidden",!0));};a.prototype.initComponents=function(){var a=this.chart,d=this.proxyProvider,f=a.options.accessibility;this.components={container:new n,infoRegions:new x,legend:new g,chartMenu:new r,rangeSelector:new e,series:new c,zoom:new b};f.customComponents&&E(this.components,f.customComponents);var h=this.components;this.getComponentOrder().forEach(function(b){h[b].initBase(a,d);h[b].init();});};
    a.prototype.getComponentOrder=function(){if(!this.components)return [];if(!this.components.series)return Object.keys(this.components);var a=Object.keys(this.components).filter(function(a){return "series"!==a});return ["series"].concat(a)};a.prototype.update=function(){var a=this.components,b=this.chart,c=b.options.accessibility;B(b,"beforeA11yUpdate");b.types=this.getChartTypes();c=c.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(c);this.getComponentOrder().forEach(function(c){a[c].onChartUpdate();
    B(b,"afterA11yComponentUpdate",{name:c,component:a[c]});});this.keyboardNavigation.update(c);!b.highContrastModeActive&&f.isHighContrastModeActive()&&f.setHighContrastTheme(b);B(b,"afterA11yUpdate",{accessibility:this});};a.prototype.destroy=function(){var a=this.chart||{},b=this.components;Object.keys(b).forEach(function(a){b[a].destroy();b[a].destroyBase();});this.proxyProvider&&this.proxyProvider.destroy();this.keyboardNavigation&&this.keyboardNavigation.destroy();a.renderTo&&a.renderTo.setAttribute("aria-hidden",
    !0);a.focusElement&&a.focusElement.removeFocusBorder();};a.prototype.getChartTypes=function(){var a={};this.chart.series.forEach(function(b){a[b.type]=1;});return Object.keys(a)};return a}();(function(a){function d(){this.accessibility&&this.accessibility.destroy();}function f(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());var a=this.accessibility;a&&!a.zombie&&(a.proxyProvider.updateProxyElementPositions(),a.getComponentOrder().forEach(function(b){a.components[b].onChartRender();}));}
    function h(a){if(a=a.options.accessibility)a.customComponents&&(this.options.accessibility.customComponents=a.customComponents,delete a.customComponents),C(!0,this.options.accessibility,a),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility);this.a11yDirty=!0;}function n(){var b=this.accessibility,c=this.options.accessibility;c&&c.enabled?b&&!b.zombie?b.update():(this.accessibility=b=new a(this),!b.zombie)&&b.update():b?(b.destroy&&b.destroy(),delete this.accessibility):
    this.renderTo.setAttribute("aria-hidden",!0);}function u(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0);}var q=[];a.i18nFormat=t.i18nFormat;a.compose=function(a,l,p,v,w,x,z){y.compose(l);m.compose(w);g.compose(l,p);r.compose(l);c.compose(l,v,w);b.compose(a);t.compose(l);k.compose(l,x);z&&e.compose(l,z);-1===q.indexOf(l)&&(q.push(l),l.prototype.updateA11yEnabled=n,A(l,"destroy",d),A(l,"render",f),A(l,"update",h),["addSeries","init"].forEach(function(a){A(l,a,function(){this.a11yDirty=
    !0;});}),["afterApplyDrilldown","drillupall"].forEach(function(a){A(l,a,function(){var a=this.accessibility;a&&!a.zombie&&a.update();});}));-1===q.indexOf(v)&&(q.push(v),A(v,"update",u));-1===q.indexOf(w)&&(q.push(w),["update","updatedData","remove"].forEach(function(a){A(w,a,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0);});}));};})(h||(h={}));C(!0,a,z,{accessibility:{highContrastTheme:q},lang:M});return h});x(a,"masters/modules/accessibility.src.js",[a["Core/Globals.js"],a["Accessibility/Accessibility.js"],
    a["Accessibility/AccessibilityComponent.js"],a["Accessibility/Utils/ChartUtilities.js"],a["Accessibility/Utils/HTMLUtilities.js"],a["Accessibility/KeyboardNavigationHandler.js"],a["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(a,h,w,t,n,k,x){a.i18nFormat=h.i18nFormat;a.A11yChartUtilities=t;a.A11yHTMLUtilities=n;a.AccessibilityComponent=w;a.KeyboardNavigationHandler=k;a.SeriesAccessibilityDescriber=x;h.compose(a.Axis,a.Chart,a.Legend,a.Point,a.Series,a.SVGElement,a.RangeSelector);});});

    });

    var exportData = createCommonjsModule(function (module) {
    /*
     Highcharts JS v10.1.0 (2022-04-29)

     Exporting module

     (c) 2010-2021 Torstein Honsi

     License: www.highcharts.com/license
    */
    (function(a){module.exports?(a["default"]=a,module.exports=a):a("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(a){function g(a,b,d,n){a.hasOwnProperty(b)||(a[b]=n.apply(null,d),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:b,module:a[b]}})));}
    a=a?a._modules:{};g(a,"Extensions/DownloadURL.js",[a["Core/Globals.js"]],function(a){var b=a.isSafari,d=a.win,n=d.document,k=d.URL||d.webkitURL||d,r=a.dataURLtoBlob=function(a){if((a=a.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<a.length&&d.atob&&d.ArrayBuffer&&d.Uint8Array&&d.Blob&&k.createObjectURL){var b=d.atob(a[3]),m=new d.ArrayBuffer(b.length);m=new d.Uint8Array(m);for(var f=0;f<m.length;++f)m[f]=b.charCodeAt(f);a=new d.Blob([m],{type:a[1]});return k.createObjectURL(a)}};
    a=a.downloadURL=function(a,k){var m=d.navigator,f=n.createElement("a");if("string"===typeof a||a instanceof String||!m.msSaveOrOpenBlob){a=""+a;m=/Edge\/\d+/.test(m.userAgent);if(b&&"string"===typeof a&&0===a.indexOf("data:application/pdf")||m||2E6<a.length)if(a=r(a)||"",!a)throw Error("Failed to convert to blob");if("undefined"!==typeof f.download)f.href=a,f.download=k,n.body.appendChild(f),f.click(),n.body.removeChild(f);else try{var l=d.open(a,"chart");if("undefined"===typeof l||null===l)throw Error("Failed to open window");
    }catch(E){d.location.href=a;}}else m.msSaveOrOpenBlob(a,k);};return {dataURLtoBlob:r,downloadURL:a}});g(a,"Extensions/ExportData.js",[a["Core/Axis/Axis.js"],a["Core/Chart/Chart.js"],a["Core/Renderer/HTML/AST.js"],a["Core/Globals.js"],a["Core/DefaultOptions.js"],a["Core/Utilities.js"],a["Extensions/DownloadURL.js"]],function(a,b,d,n,k,r,m){function g(a,p){var c=l.navigator,f=-1<c.userAgent.indexOf("WebKit")&&0>c.userAgent.indexOf("Chrome"),b=l.URL||l.webkitURL||l;try{if(c.msSaveOrOpenBlob&&l.MSBlobBuilder){var t=
    new l.MSBlobBuilder;t.append(a);return t.getBlob("image/svg+xml")}if(!f)return b.createObjectURL(new l.Blob(["\ufeff"+a],{type:p}))}catch(N){}}var I=n.doc,f=n.seriesTypes,l=n.win;n=k.getOptions;k=k.setOptions;var E=r.addEvent,J=r.defined,F=r.extend,K=r.find,C=r.fireEvent,L=r.isNumber,v=r.pick,G=m.downloadURL;k({exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,
    useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}});E(b,"render",function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&this.viewData();});b.prototype.setUpKeyToAxis=function(){f.arearange&&(f.arearange.prototype.keyToAxis={low:"y",high:"y"});f.gantt&&
    (f.gantt.prototype.keyToAxis={start:"x",end:"x"});};b.prototype.getDataRows=function(c){var p=this.hasParallelCoordinates,y=this.time,f=this.options.exporting&&this.options.exporting.csv||{},b=this.xAxis,t={},d=[],m=[],n=[],z;var l=this.options.lang.exportData;var k=l.categoryHeader,M=l.categoryDatetimeHeader,w=function(q,e,b){if(f.columnHeaderFormatter){var d=f.columnHeaderFormatter(q,e,b);if(!1!==d)return d}return q?q instanceof a?q.options.title&&q.options.title.text||(q.dateTime?M:k):c?{columnTitle:1<
    b?e:q.name,topLevelColumnTitle:q.name}:q.name+(1<b?" ("+e+")":""):k},H=function(a,c,e){var q={},b={};c.forEach(function(c){var d=(a.keyToAxis&&a.keyToAxis[c]||c)+"Axis";d=L(e)?a.chart[d][e]:a[d];q[c]=d&&d.categories||[];b[c]=d&&d.dateTime;});return {categoryMap:q,dateTimeValueAxisMap:b}},r=function(a,c){return a.data.filter(function(a){return "undefined"!==typeof a.y&&a.name}).length&&c&&!c.categories&&!a.keyToAxis?a.pointArrayMap&&a.pointArrayMap.filter(function(a){return "x"===a}).length?(a.pointArrayMap.unshift("x"),
    a.pointArrayMap):["x","y"]:a.pointArrayMap||["y"]},h=[];var x=0;this.setUpKeyToAxis();this.series.forEach(function(a){var d=a.xAxis,e=a.options.keys||r(a,d),q=e.length,l=!a.requireSorting&&{},g=b.indexOf(d),B=H(a,e),k;if(!1!==a.options.includeInDataExport&&!a.options.isInternal&&!1!==a.visible){K(h,function(a){return a[0]===g})||h.push([g,x]);for(k=0;k<q;)z=w(a,e[k],e.length),n.push(z.columnTitle||z),c&&m.push(z.topLevelColumnTitle||z),k++;var A={chart:a.chart,autoIncrement:a.autoIncrement,options:a.options,
    pointArrayMap:a.pointArrayMap};a.options.data.forEach(function(c,b){p&&(B=H(a,e,b));var w={series:A};a.pointClass.prototype.applyOptions.apply(w,[c]);c=w.x;var h=a.data[b]&&a.data[b].name;k=0;if(!d||"name"===a.exportKey||!p&&d&&d.hasNames&&h)c=h;l&&(l[c]&&(c+="|"+b),l[c]=!0);t[c]||(t[c]=[],t[c].xValues=[]);t[c].x=w.x;t[c].name=h;for(t[c].xValues[g]=w.x;k<q;)b=e[k],h=w[b],t[c][x+k]=v(B.categoryMap[b][h],B.dateTimeValueAxisMap[b]?y.dateFormat(f.dateFormat,h):null,h),k++;});x+=k;}});for(e in t)Object.hasOwnProperty.call(t,
    e)&&d.push(t[e]);var e=c?[m,n]:[n];for(x=h.length;x--;){var A=h[x][0];var D=h[x][1];var g=b[A];d.sort(function(a,c){return a.xValues[A]-c.xValues[A]});l=w(g);e[0].splice(D,0,l);c&&e[1]&&e[1].splice(D,0,l);d.forEach(function(a){var c=a.name;g&&!J(c)&&(g.dateTime?(a.x instanceof Date&&(a.x=a.x.getTime()),c=y.dateFormat(f.dateFormat,a.x)):c=g.categories?v(g.names[a.x],g.categories[a.x],a.x):a.x);a.splice(D,0,c);});}e=e.concat(d);C(this,"exportData",{dataRows:e});return e};b.prototype.getCSV=function(a){var c=
    "",d=this.getDataRows(),b=this.options.exporting.csv,f=v(b.decimalPoint,","!==b.itemDelimiter&&a?(1.1).toLocaleString()[1]:"."),k=v(b.itemDelimiter,","===f?";":","),l=b.lineDelimiter;d.forEach(function(a,b){for(var p,y=a.length;y--;)p=a[y],"string"===typeof p&&(p='"'+p+'"'),"number"===typeof p&&"."!==f&&(p=p.toString().replace(".",f)),a[y]=p;c+=a.join(k);b<d.length-1&&(c+=l);});return c};b.prototype.getTable=function(a){var c=function(a){if(!a.tagName||"#text"===a.tagName)return a.textContent||"";
    var b=a.attributes,d="<"+a.tagName;b&&Object.keys(b).forEach(function(a){d+=" "+a+'="'+b[a]+'"';});d+=">";d+=a.textContent||"";(a.children||[]).forEach(function(a){d+=c(a);});return d+="</"+a.tagName+">"};a=this.getTableAST(a);return c(a)};b.prototype.getTableAST=function(a){var c=0,b=[],d=this.options,f=a?(1.1).toLocaleString()[1]:".",k=v(d.exporting.useMultiLevelHeaders,!0);a=this.getDataRows(k);var l=k?a.shift():null,g=a.shift(),m=function(a,c,b,d){var h=v(d,"");c="text"+(c?" "+c:"");"number"===
    typeof h?(h=h.toString(),","===f&&(h=h.replace(".",f)),c="number"):d||(c="empty");b=F({"class":c},b);return {tagName:a,attributes:b,textContent:h}};!1!==d.exporting.tableCaption&&b.push({tagName:"caption",attributes:{"class":"highcharts-table-caption"},textContent:v(d.exporting.tableCaption,d.title.text?d.title.text:"Chart")});for(var n=0,r=a.length;n<r;++n)a[n].length>c&&(c=a[n].length);b.push(function(a,c,b){var f=[],h=0;b=b||c&&c.length;var l=0,e;if(e=k&&a&&c){a:if(e=a.length,c.length===e){for(;e--;)if(a[e]!==
    c[e]){e=!1;break a}e=!0;}else e=!1;e=!e;}if(e){for(e=[];h<b;++h){var g=a[h];var p=a[h+1];g===p?++l:l?(e.push(m("th","highcharts-table-topheading",{scope:"col",colspan:l+1},g)),l=0):(g===c[h]?d.exporting.useRowspanHeaders?(p=2,delete c[h]):(p=1,c[h]=""):p=1,g=m("th","highcharts-table-topheading",{scope:"col"},g),1<p&&g.attributes&&(g.attributes.valign="top",g.attributes.rowspan=p),e.push(g));}f.push({tagName:"tr",children:e});}if(c){e=[];h=0;for(b=c.length;h<b;++h)"undefined"!==typeof c[h]&&e.push(m("th",
    null,{scope:"col"},c[h]));f.push({tagName:"tr",children:e});}return {tagName:"thead",children:f}}(l,g,Math.max(c,g.length)));var u=[];a.forEach(function(a){for(var b=[],d=0;d<c;d++)b.push(m(d?"td":"th",null,d?{}:{scope:"row"},a[d]));u.push({tagName:"tr",children:b});});b.push({tagName:"tbody",children:u});b={tree:{tagName:"table",id:"highcharts-data-table-"+this.index,children:b}};C(this,"aftergetTableAST",b);return b.tree};b.prototype.downloadCSV=function(){var a=this.getCSV(!0);G(g(a,"text/csv")||
    "data:text/csv,\ufeff"+encodeURIComponent(a),this.getFilename()+".csv");};b.prototype.downloadXLS=function(){var a='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+
    this.getTable(!0)+"</body></html>";G(g(a,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+l.btoa(unescape(encodeURIComponent(a))),this.getFilename()+".xls");};b.prototype.viewData=function(){this.toggleDataTable(!0);};b.prototype.hideData=function(){this.toggleDataTable(!1);};b.prototype.toggleDataTable=function(a){(a=v(a,!this.isDataTableVisible))&&!this.dataTableDiv&&(this.dataTableDiv=I.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,
    this.renderTo.nextSibling));this.dataTableDiv&&(this.dataTableDiv.style.display=a?"block":"none",a&&(this.dataTableDiv.innerHTML=d.emptyHTML,(new d([this.getTableAST()])).addToDOM(this.dataTableDiv),C(this,"afterViewData",this.dataTableDiv)));this.isDataTableVisible=a;a=this.exportDivElements;var b=this.options.exporting,c=b&&b.buttons&&b.buttons.contextButton.menuItems;b=this.options.lang;u&&u.menuItemDefinitions&&b&&b.viewData&&b.hideData&&c&&a&&(a=a[c.indexOf("viewData")])&&d.setElementHTML(a,
    this.isDataTableVisible?b.hideData:b.viewData);};var u=n().exporting;u&&(F(u.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV();}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS();}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable();}}}),u.buttons&&u.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData"));f.map&&(f.map.prototype.exportKey="name");f.mapbubble&&(f.mapbubble.prototype.exportKey=
    "name");f.treemap&&(f.treemap.prototype.exportKey="name");});g(a,"masters/modules/export-data.src.js",[],function(){});});

    });

    var exporting = createCommonjsModule(function (module) {
    /*
     Highcharts JS v10.1.0 (2022-04-29)

     Exporting module

     (c) 2010-2021 Torstein Honsi

     License: www.highcharts.com/license
    */
    (function(a){module.exports?(a["default"]=a,module.exports=a):a("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(a){function h(a,b,t,n){a.hasOwnProperty(b)||(a[b]=n.apply(null,t),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:b,module:a[b]}})));}a=a?a._modules:{};h(a,
    "Extensions/FullScreen.js",[a["Core/Chart/Chart.js"],a["Core/Globals.js"],a["Core/Renderer/HTML/AST.js"],a["Core/Utilities.js"]],function(a,b,t,n){var l=n.addEvent,g=n.fireEvent;n=function(){function a(c){this.chart=c;this.isOpen=!1;c=c.renderTo;this.browserProps||("function"===typeof c.requestFullscreen?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:c.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",
    requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:c.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:c.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}));}a.prototype.close=function(){var c=this,e=c.chart,a=e.options.chart;g(e,"fullscreenClose",null,
    function(){if(c.isOpen&&c.browserProps&&e.container.ownerDocument instanceof Document)e.container.ownerDocument[c.browserProps.exitFullscreen]();c.unbindFullscreenEvent&&(c.unbindFullscreenEvent=c.unbindFullscreenEvent());e.setSize(c.origWidth,c.origHeight,!1);c.origWidth=void 0;c.origHeight=void 0;a.width=c.origWidthOption;a.height=c.origHeightOption;c.origWidthOption=void 0;c.origHeightOption=void 0;c.isOpen=!1;c.setButtonText();});};a.prototype.open=function(){var c=this,e=c.chart,a=e.options.chart;
    g(e,"fullscreenOpen",null,function(){a&&(c.origWidthOption=a.width,c.origHeightOption=a.height);c.origWidth=e.chartWidth;c.origHeight=e.chartHeight;if(c.browserProps){var g=l(e.container.ownerDocument,c.browserProps.fullscreenChange,function(){c.isOpen?(c.isOpen=!1,c.close()):(e.setSize(null,null,!1),c.isOpen=!0,c.setButtonText());}),H=l(e,"destroy",g);c.unbindFullscreenEvent=function(){g();H();};var b=e.renderTo[c.browserProps.requestFullscreen]();if(b)b["catch"](function(){alert("Full screen is not supported inside a frame.");});}});};
    a.prototype.setButtonText=function(){var c=this.chart,a=c.exportDivElements,g=c.options.exporting,b=g&&g.buttons&&g.buttons.contextButton.menuItems;c=c.options.lang;g&&g.menuItemDefinitions&&c&&c.exitFullscreen&&c.viewFullscreen&&b&&a&&(a=a[b.indexOf("viewFullscreen")])&&t.setElementHTML(a,this.isOpen?c.exitFullscreen:g.menuItemDefinitions.viewFullscreen.text||c.viewFullscreen);};a.prototype.toggle=function(){this.isOpen?this.close():this.open();};return a}();b.Fullscreen=n;l(a,"beforeRender",function(){this.fullscreen=
    new b.Fullscreen(this);});return b.Fullscreen});h(a,"Core/Chart/ChartNavigationComposition.js",[],function(){var a;(function(a){a.compose=function(a){a.navigation||(a.navigation=new b(a));return a};var b=function(){function a(a){this.updates=[];this.chart=a;}a.prototype.addUpdate=function(a){this.chart.navigation.updates.push(a);};a.prototype.update=function(a,g){var b=this;this.updates.forEach(function(c){c.call(b.chart,a,g);});};return a}();a.Additions=b;})(a||(a={}));return a});h(a,"Extensions/Exporting/ExportingDefaults.js",
    [a["Core/Globals.js"]],function(a){return {exporting:{type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"viewFullscreen printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",
    onclick:function(){this.fullscreen.toggle();}},printChart:{textKey:"printChart",onclick:function(){this.print();}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart();}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"});}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"});}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"});}}}},
    lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{padding:5}},
    menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",color:"#333333",background:"none",fontSize:a.isTouchDevice?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"}}}});h(a,"Extensions/Exporting/ExportingSymbols.js",[],function(){var a;(function(a){function b(a,b,c,e){return [["M",a,b+2.5],["L",a+c,b+2.5],["M",a,b+e/2+.5],["L",a+c,b+e/2+.5],["M",a,b+e-1.5],["L",a+c,b+e-1.5]]}function l(a,
    b,c,e){a=e/3-2;e=[];return e=e.concat(this.circle(c-a,b,a,a),this.circle(c-a,b+a+4,a,a),this.circle(c-a,b+2*(a+4),a,a))}var h=[];a.compose=function(a){-1===h.indexOf(a)&&(h.push(a),a=a.prototype.symbols,a.menu=b,a.menuball=l.bind(a));};})(a||(a={}));return a});h(a,"Core/HttpUtilities.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,b){var l=a.doc,h=b.createElement,z=b.discardElement,g=b.merge,p=b.objectEach,c={ajax:function(a){var c=g(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,
    data:!1,headers:{}},a);a={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var b=new XMLHttpRequest;if(!c.url)return !1;b.open(c.type.toUpperCase(),c.url,!0);c.headers["Content-Type"]||b.setRequestHeader("Content-Type",a[c.dataType]||a.text);p(c.headers,function(a,c){b.setRequestHeader(c,a);});c.responseType&&(b.responseType=c.responseType);b.onreadystatechange=function(){if(4===b.readyState){if(200===b.status){if("blob"!==c.responseType){var a=b.responseText;
    if("json"===c.dataType)try{a=JSON.parse(a);}catch(x){c.error&&c.error(b,x);return}}return c.success&&c.success(a,b)}c.error&&c.error(b,b.responseText);}};try{c.data=JSON.stringify(c.data);}catch(A){}b.send(c.data||!0);},getJSON:function(a,b){c.ajax({url:a,success:b,dataType:"json",headers:{"Content-Type":"text/plain"}});},post:function(a,c,b){var e=h("form",g({method:"post",action:a,enctype:"multipart/form-data"},b),{display:"none"},l.body);p(c,function(a,c){h("input",{type:"hidden",name:c,value:a},null,
    e);});e.submit();z(e);}};return c});h(a,"Extensions/Exporting/Exporting.js",[a["Core/Renderer/HTML/AST.js"],a["Core/Chart/Chart.js"],a["Core/Chart/ChartNavigationComposition.js"],a["Core/DefaultOptions.js"],a["Extensions/Exporting/ExportingDefaults.js"],a["Extensions/Exporting/ExportingSymbols.js"],a["Core/Globals.js"],a["Core/HttpUtilities.js"],a["Core/Utilities.js"]],function(a,b,h,n,z,g,p,c,e){b=n.defaultOptions;var l=p.doc,t=p.SVG_NS,A=p.win,x=e.addEvent,v=e.css,B=e.createElement,K=e.discardElement,
    C=e.extend,O=e.find,D=e.fireEvent,P=e.isObject,m=e.merge,Q=e.objectEach,y=e.pick,R=e.removeEvent,S=e.uniqueKey,E;(function(b){function n(a){var d=this,c=d.renderer,b=m(d.options.navigation.buttonOptions,a),e=b.onclick,q=b.menuItems,r=b.symbolSize||12;d.btnCount||(d.btnCount=0);d.exportDivElements||(d.exportDivElements=[],d.exportSVGElements=[]);if(!1!==b.enabled&&b.theme){var f=b.theme,J;d.styledMode||(f.fill=y(f.fill,"#ffffff"),f.stroke=y(f.stroke,"none"));e?J=function(a){a&&a.stopPropagation();
    e.call(d,a);}:q&&(J=function(a){a&&a.stopPropagation();d.contextMenu(u.menuClassName,q,u.translateX,u.translateY,u.width,u.height,u);u.setState(2);});b.text&&b.symbol?f.paddingLeft=y(f.paddingLeft,30):b.text||C(f,{width:b.width,height:b.height,padding:0});d.styledMode||(f["stroke-linecap"]="round",f.fill=y(f.fill,"#ffffff"),f.stroke=y(f.stroke,"none"));var u=c.button(b.text,0,0,J,f).addClass(a.className).attr({title:y(d.options.lang[b._titleKey||b.titleKey],"")});u.menuClassName=a.menuClassName||"highcharts-menu-"+
    d.btnCount++;if(b.symbol){var l=c.symbol(b.symbol,b.symbolX-r/2,b.symbolY-r/2,r,r,{width:r,height:r}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(u);d.styledMode||l.attr({stroke:b.symbolStroke,fill:b.symbolFill,"stroke-width":b.symbolStrokeWidth||1});}u.add(d.exportingGroup).align(C(b,{width:u.width,x:y(b.x,d.buttonOffset)}),!0,"spacingBox");d.buttonOffset+=(u.width+b.buttonSpacing)*("right"===b.align?-1:1);d.exportSVGElements.push(u,l);}}function z(){if(this.printReverseInfo){var a=this.printReverseInfo,
    b=a.childNodes,c=a.origDisplay;a=a.resetParams;this.moveContainers(this.renderTo);[].forEach.call(b,function(a,d){1===a.nodeType&&(a.style.display=c[d]||"");});this.isPrinting=!1;a&&this.setSize.apply(this,a);delete this.printReverseInfo;F=void 0;D(this,"afterPrint");}}function E(){var a=l.body,b=this.options.exporting.printMaxWidth,c={childNodes:a.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0;this.pointer.reset(null,0);D(this,"beforePrint");b&&this.chartWidth>b&&(c.resetParams=[this.options.chart.width,
    void 0,!1],this.setSize(b,void 0,!1));[].forEach.call(c.childNodes,function(a,d){1===a.nodeType&&(c.origDisplay[d]=a.style.display,a.style.display="none");});this.moveContainers(a);this.printReverseInfo=c;}function H(a){a.renderExporting();x(a,"redraw",a.renderExporting);x(a,"destroy",a.destroyExport);}function T(d,b,c,I,g,q,r){var f=this,w=f.options.navigation,G=f.chartWidth,h=f.chartHeight,L="cache-"+d,m=Math.max(g,q),k=f[L];if(!k){f.exportContextMenu=f[L]=k=B("div",{className:d},{position:"absolute",
    zIndex:1E3,padding:m+"px",pointerEvents:"auto"},f.fixedDiv||f.container);var p=B("ul",{className:"highcharts-menu"},{listStyle:"none",margin:0,padding:0},k);f.styledMode||v(p,C({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},w.menuStyle));k.hideMenu=function(){v(k,{display:"none"});r&&r.setState(0);f.openMenu=!1;v(f.renderTo,{overflow:"hidden"});v(f.container,{overflow:"hidden"});e.clearTimeout(k.hideTimer);D(f,"exportMenuHidden");};f.exportEvents.push(x(k,
    "mouseleave",function(){k.hideTimer=A.setTimeout(k.hideMenu,500);}),x(k,"mouseenter",function(){e.clearTimeout(k.hideTimer);}),x(l,"mouseup",function(a){f.pointer.inClass(a.target,d)||k.hideMenu();}),x(k,"click",function(){f.openMenu&&k.hideMenu();}));b.forEach(function(d){"string"===typeof d&&(d=f.options.exporting.menuItemDefinitions[d]);if(P(d,!0)){var b=void 0;d.separator?b=B("hr",void 0,void 0,p):("viewData"===d.textKey&&f.isDataTableVisible&&(d.textKey="hideData"),b=B("li",{className:"highcharts-menu-item",
    onclick:function(a){a&&a.stopPropagation();k.hideMenu();d.onclick&&d.onclick.apply(f,arguments);}},void 0,p),a.setElementHTML(b,d.text||f.options.lang[d.textKey]),f.styledMode||(b.onmouseover=function(){v(this,w.menuItemHoverStyle);},b.onmouseout=function(){v(this,w.menuItemStyle);},v(b,C({cursor:"pointer"},w.menuItemStyle||{}))));f.exportDivElements.push(b);}});f.exportDivElements.push(p,k);f.exportMenuWidth=k.offsetWidth;f.exportMenuHeight=k.offsetHeight;}b={display:"block"};c+f.exportMenuWidth>G?b.right=
    G-c-g-m+"px":b.left=c-m+"px";I+q+f.exportMenuHeight>h&&"top"!==r.alignOptions.verticalAlign?b.bottom=h-I-m+"px":b.top=I+q-m+"px";v(k,b);v(f.renderTo,{overflow:""});v(f.container,{overflow:""});f.openMenu=!0;D(f,"exportMenuShown");}function U(a){var d=a?a.target:this,b=d.exportSVGElements,c=d.exportDivElements;a=d.exportEvents;var l;b&&(b.forEach(function(a,c){a&&(a.onclick=a.ontouchstart=null,l="cache-"+a.menuClassName,d[l]&&delete d[l],b[c]=a.destroy());}),b.length=0);d.exportingGroup&&(d.exportingGroup.destroy(),
    delete d.exportingGroup);c&&(c.forEach(function(a,d){a&&(e.clearTimeout(a.hideTimer),R(a,"mouseleave"),c[d]=a.onmouseout=a.onmouseover=a.ontouchstart=a.onclick=null,K(a));}),c.length=0);a&&(a.forEach(function(a){a();}),a.length=0);}function V(a,b){b=this.getSVGForExport(a,b);a=m(this.options.exporting,a);c.post(a.url,{filename:a.filename?a.filename.replace(/\//g,"-"):this.getFilename(),type:a.type,width:a.width||0,scale:a.scale,svg:b},a.formAttributes);}function W(){this.styledMode&&this.inlineStyles();
    return this.container.innerHTML}function X(){var a=this.userOptions.title&&this.userOptions.title.text,b=this.options.exporting.filename;if(b)return b.replace(/\//g,"-");"string"===typeof a&&(b=a.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,""));if(!b||5>b.length)b="chart";return b}function Y(a){var b,c=m(this.options,a);c.plotOptions=m(this.userOptions.plotOptions,a&&a.plotOptions);
    c.time=m(this.userOptions.time,a&&a.time);var d=B("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},l.body),e=this.renderTo.style.width;var g=this.renderTo.style.height;e=c.exporting.sourceWidth||c.chart.width||/px$/.test(e)&&parseInt(e,10)||(c.isGantt?800:600);g=c.exporting.sourceHeight||c.chart.height||/px$/.test(g)&&parseInt(g,10)||400;C(c.chart,{animation:!1,renderTo:d,forExport:!0,renderer:"SVGRenderer",width:e,height:g});c.exporting.enabled=
    !1;delete c.data;c.series=[];this.series.forEach(function(a){b=m(a.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:a.visible});b.isInternal||c.series.push(b);});var h={};this.axes.forEach(function(a){a.userOptions.internalKey||(a.userOptions.internalKey=S());a.options.isInternal||(h[a.coll]||(h[a.coll]=!0,c[a.coll]=[]),c[a.coll].push(m(a.userOptions,{visible:a.visible})));});var f=new this.constructor(c,this.callback);a&&["xAxis","yAxis","series"].forEach(function(b){var c=
    {};a[b]&&(c[b]=a[b],f.update(c));});this.axes.forEach(function(a){var b=O(f.axes,function(b){return b.options.internalKey===a.userOptions.internalKey}),c=a.getExtremes(),d=c.userMin;c=c.userMax;b&&("undefined"!==typeof d&&d!==b.min||"undefined"!==typeof c&&c!==b.max)&&b.setExtremes(d,c,!0,!1);});g=f.getChartHTML();D(this,"getSVG",{chartCopy:f});g=this.sanitizeSVG(g,c);c=null;f.destroy();K(d);return g}function Z(a,b){var c=this.options.exporting;return this.getSVG(m({chart:{borderRadius:0}},c.chartOptions,
    b,{exporting:{sourceWidth:a&&a.sourceWidth||c.sourceWidth,sourceHeight:a&&a.sourceHeight||c.sourceHeight}}))}function aa(a){return a.replace(/([A-Z])/g,function(a,b){return "-"+b.toLowerCase()})}function ba(){function a(b){var d={},f,w;if(r&&1===b.nodeType&&-1===ca.indexOf(b.nodeName)){var l=A.getComputedStyle(b,null);var G="svg"===b.nodeName?{}:A.getComputedStyle(b.parentNode,null);if(!g[b.nodeName]){h=r.getElementsByTagName("svg")[0];var k=r.createElementNS(b.namespaceURI,b.nodeName);h.appendChild(k);
    g[b.nodeName]=m(A.getComputedStyle(k,null));"text"===b.nodeName&&delete g.text.fill;h.removeChild(k);}for(var q in l)if(p.isFirefox||p.isMS||p.isSafari||Object.hasOwnProperty.call(l,q)){var t=l[q],n=q;k=f=!1;if(e.length){for(w=e.length;w--&&!f;)f=e[w].test(n);k=!f;}"transform"===n&&"none"===t&&(k=!0);for(w=c.length;w--&&!k;)k=c[w].test(n)||"function"===typeof t;k||G[n]===t&&"svg"!==b.nodeName||g[b.nodeName][n]===t||(M&&-1===M.indexOf(n)?d[n]=t:t&&b.setAttribute(aa(n),t));}v(b,d);"svg"===b.nodeName&&
    b.setAttribute("stroke-width","1px");"text"!==b.nodeName&&[].forEach.call(b.children||b.childNodes,a);}}var c=da,e=b.inlineWhitelist,g={},h,q=l.createElement("iframe");v(q,{width:"1px",height:"1px",visibility:"hidden"});l.body.appendChild(q);var r=q.contentWindow&&q.contentWindow.document;r&&r.body.appendChild(r.createElementNS(t,"svg"));a(this.container.querySelector("svg"));h.parentNode.removeChild(h);q.parentNode.removeChild(q);}function ea(a){(this.fixedDiv?[this.fixedDiv,this.scrollingContainer]:
    [this.container]).forEach(function(b){a.appendChild(b);});}function fa(){var a=this;a.exporting={update:function(b,c){a.isDirtyExporting=!0;m(!0,a.options.exporting,b);y(c,!0)&&a.redraw();}};h.compose(a).navigation.addUpdate(function(b,c){a.isDirtyExporting=!0;m(!0,a.options.navigation,b);y(c,!0)&&a.redraw();});}function ha(){var a=this;a.isPrinting||(F=a,p.isSafari||a.beforePrint(),setTimeout(function(){A.focus();A.print();p.isSafari||setTimeout(function(){a.afterPrint();},1E3);},1));}function ia(){var a=
    this,b=a.options.exporting,c=b.buttons,e=a.isDirtyExporting||!a.exportSVGElements;a.buttonOffset=0;a.isDirtyExporting&&a.destroyExport();e&&!1!==b.enabled&&(a.exportEvents=[],a.exportingGroup=a.exportingGroup||a.renderer.g("exporting-group").attr({zIndex:3}).add(),Q(c,function(b){a.addButton(b);}),a.isDirtyExporting=!1);}function ja(a,b){var c=a.indexOf("</svg>")+6,d=a.substr(c);a=a.substr(0,c);b&&b.exporting&&b.exporting.allowHTML&&d&&(d='<foreignObject x="0" y="0" width="'+b.chart.width+'" height="'+
    b.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+d.replace(/(<(?:img|br).*?(?=>))>/g,"$1 />")+"</body></foreignObject>",a=a.replace("</svg>",d+"</svg>"));a=a.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;);?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+:)href=/g," xlink:href=").replace(/\n/," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,
    '$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad");this.ieSanitizeSVG&&(a=this.ieSanitizeSVG(a));return a}var N=[],da=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/],M="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" ");b.inlineWhitelist=[];var ca=["clipPath","defs","desc"],F;b.compose=function(a,b){g.compose(b);-1===N.indexOf(a)&&(N.push(a),
    b=a.prototype,b.afterPrint=z,b.exportChart=V,b.inlineStyles=ba,b.print=ha,b.sanitizeSVG=ja,b.getChartHTML=W,b.getSVG=Y,b.getSVGForExport=Z,b.getFilename=X,b.moveContainers=ea,b.beforePrint=E,b.contextMenu=T,b.addButton=n,b.destroyExport=U,b.renderExporting=ia,b.callbacks.push(H),x(a,"init",fa),p.isSafari&&p.win.matchMedia("print").addListener(function(a){F&&(a.matches?F.beforePrint():F.afterPrint());}));};})(E||(E={}));b.exporting=m(z.exporting,b.exporting);b.lang=m(z.lang,b.lang);b.navigation=m(z.navigation,
    b.navigation);return E});h(a,"masters/modules/exporting.src.js",[a["Core/Globals.js"],a["Extensions/Exporting/Exporting.js"],a["Core/HttpUtilities.js"]],function(a,b,h){a.HttpUtilities=h;a.ajax=h.ajax;a.getJSON=h.getJSON;a.post=h.post;b.compose(a.Chart,a.Renderer);});});

    });

    var gantt = createCommonjsModule(function (module) {
    /*
     Highcharts Gantt JS v10.1.0 (2022-04-29)

     Gantt series

     (c) 2016-2021 Lars A. V. Cabrera

     License: www.highcharts.com/license
    */
    (function(b){module.exports?(b["default"]=b,module.exports=b):b("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(b){function H(b,p,v,t){b.hasOwnProperty(p)||(b[p]=t.apply(null,v),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:p,module:b[p]}})));}b=b?b._modules:{};H(b,"Series/XRange/XRangePoint.js",
    [b["Core/Series/Point.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,p,v){var t=this&&this.__extends||function(){var b=function(l,h){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d;}||function(h,d){for(var r in d)d.hasOwnProperty(r)&&(h[r]=d[r]);};return b(l,h)};return function(l,h){function x(){this.constructor=l;}b(l,h);l.prototype=null===h?Object.create(h):(x.prototype=h.prototype,new x);}}();v=v.extend;p=function(p){function l(){var h=
    null!==p&&p.apply(this,arguments)||this;h.options=void 0;h.series=void 0;return h}t(l,p);l.getColorByCategory=function(h,l){var d=h.options.colors||h.chart.options.colors;h=l.y%(d?d.length:h.chart.options.chart.colorCount);return {colorIndex:h,color:d&&d[h]}};l.prototype.resolveColor=function(){var h=this.series;if(h.options.colorByPoint&&!this.options.color){var x=l.getColorByCategory(h,this);h.chart.styledMode||(this.color=x.color);this.options.colorIndex||(this.colorIndex=x.colorIndex);}else this.color||
    (this.color=h.color);};l.prototype.init=function(){b.prototype.init.apply(this,arguments);this.y||(this.y=0);return this};l.prototype.setState=function(){b.prototype.setState.apply(this,arguments);this.series.drawPoint(this,this.series.getAnimationVerb());};l.prototype.getLabelConfig=function(){var h=b.prototype.getLabelConfig.call(this),l=this.series.yAxis.categories;h.x2=this.x2;h.yCategory=this.yCategory=l&&l[this.y];return h};l.prototype.isValid=function(){return "number"===typeof this.x&&"number"===
    typeof this.x2};return l}(p.seriesTypes.column.prototype.pointClass);v(p.prototype,{ttBelow:!1,tooltipDateKeys:["x","x2"]});return p});H(b,"Series/XRange/XRangeComposition.js",[b["Core/Axis/Axis.js"],b["Core/Utilities.js"]],function(b,p){var v=p.addEvent,t=p.pick;v(b,"afterGetSeriesExtremes",function(){var b=this.series,l;if(this.isXAxis){var h=t(this.dataMax,-Number.MAX_VALUE);b.forEach(function(b){b.x2Data&&b.x2Data.forEach(function(d){d>h&&(h=d,l=!0);});});l&&(this.dataMax=h);}});});H(b,"Series/XRange/XRangeSeries.js",
    [b["Core/Globals.js"],b["Core/Color/Color.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"],b["Series/XRange/XRangePoint.js"]],function(b,p,v,t,C){var l=this&&this.__extends||function(){var a=function(c,m){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a;}||function(m,a){for(var c in a)a.hasOwnProperty(c)&&(m[c]=a[c]);};return a(c,m)};return function(c,m){function D(){this.constructor=c;}a(c,m);c.prototype=null===m?Object.create(m):(D.prototype=m.prototype,
    new D);}}(),h=p.parse,x=v.series,d=v.seriesTypes.column,r=d.prototype,g=t.clamp,A=t.correctFloat,B=t.defined;p=t.extend;var L=t.find,e=t.isNumber,a=t.isObject,c=t.merge,u=t.pick;t=function(E){function G(){var a=null!==E&&E.apply(this,arguments)||this;a.data=void 0;a.options=void 0;a.points=void 0;return a}l(G,E);G.prototype.init=function(){d.prototype.init.apply(this,arguments);this.options.stacking=void 0;};G.prototype.getColumnMetrics=function(){function a(){c.series.forEach(function(a){var m=a.xAxis;
    a.xAxis=a.yAxis;a.yAxis=m;});}var c=this.chart;a();var e=r.getColumnMetrics.call(this);a();return e};G.prototype.cropData=function(a,c,e,u){c=x.prototype.cropData.call(this,this.x2Data,c,e,u);c.xData=a.slice(c.start,c.end);return c};G.prototype.findPointIndex=function(a){var m=this.cropped,c=this.cropStart,u=this.points,g=a.id;if(g)var d=(d=L(u,function(a){return a.id===g}))?d.index:void 0;"undefined"===typeof d&&(d=(d=L(u,function(m){return m.x===a.x&&m.x2===a.x2&&!m.touched}))?d.index:void 0);m&&
    e(d)&&e(c)&&d>=c&&(d-=c);return d};G.prototype.translatePoint=function(m){var D=this.xAxis,d=this.yAxis,E=this.columnMetrics,F=this.options,h=F.minPointLength||0,r=(m.shapeArgs&&m.shapeArgs.width||0)/2,z=this.pointXOffset=E.offset,n=m.plotX,y=u(m.x2,m.x+(m.len||0)),q=D.translate(y,0,0,0,1);y=Math.abs(q-n);var f=this.chart.inverted,k=u(F.borderWidth,1)%2/2,w=E.offset,J=Math.round(E.width);h&&(h-=y,0>h&&(h=0),n-=h/2,q+=h/2);n=Math.max(n,-10);q=g(q,-10,D.len+10);B(m.options.pointWidth)&&(w-=(Math.ceil(m.options.pointWidth)-
    J)/2,J=Math.ceil(m.options.pointWidth));F.pointPlacement&&e(m.plotY)&&d.categories&&(m.plotY=d.translate(m.y,0,1,0,1,F.pointPlacement));F=Math.floor(Math.min(n,q))+k;F={x:F,y:Math.floor(m.plotY+w)+k,width:Math.floor(Math.max(n,q))+k-F,height:J,r:this.options.borderRadius};m.shapeArgs=F;f?m.tooltipPos[1]+=z+r:m.tooltipPos[0]-=r+z-F.width/2;r=F.x;z=r+F.width;0>r||z>D.len?(r=g(r,0,D.len),z=g(z,0,D.len),q=z-r,m.dlBox=c(F,{x:r,width:z-r,centerX:q?q/2:null})):m.dlBox=null;r=m.tooltipPos;z=f?1:0;q=f?0:1;
    E=this.columnMetrics?this.columnMetrics.offset:-E.width/2;r[z]=f?r[z]+F.width/2:r[z]+(D.reversed?-1:0)*F.width;r[q]=g(r[q]+(f?-1:1)*E,0,d.len-1);if(d=m.partialFill)a(d)&&(d=d.amount),e(d)||(d=0),m.partShapeArgs=c(F,{r:this.options.borderRadius}),n=Math.max(Math.round(y*d+m.plotX-n),0),m.clipRectArgs={x:D.reversed?F.x+y-n:F.x,y:F.y,width:n,height:F.height};};G.prototype.translate=function(){r.translate.apply(this,arguments);this.points.forEach(function(a){this.translatePoint(a);},this);};G.prototype.drawPoint=
    function(m,D){var e=this.options,d=this.chart.renderer,g=m.graphic,E=m.shapeType,r=m.shapeArgs,z=m.partShapeArgs,n=m.clipRectArgs,y=m.partialFill,q=e.stacking&&!e.borderRadius,f=m.state,k=e.states[f||"normal"]||{},w="undefined"===typeof f?"attr":D;f=this.pointAttribs(m,f);k=u(this.chart.options.chart.animation,k.animation);if(m.isNull||!1===m.visible)g&&(m.graphic=g.destroy());else{if(g)g.rect[D](r);else m.graphic=g=d.g("point").addClass(m.getClassName()).add(m.group||this.group),g.rect=d[E](c(r)).addClass(m.getClassName()).addClass("highcharts-partfill-original").add(g);
    z&&(g.partRect?(g.partRect[D](c(z)),g.partialClipRect[D](c(n))):(g.partialClipRect=d.clipRect(n.x,n.y,n.width,n.height),g.partRect=d[E](z).addClass("highcharts-partfill-overlay").add(g).clip(g.partialClipRect)));this.chart.styledMode||(g.rect[D](f,k).shadow(e.shadow,null,q),z&&(a(y)||(y={}),a(e.partialFill)&&(y=c(e.partialFill,y)),m=y.fill||h(f.fill).brighten(-.3).get()||h(m.color||this.color).brighten(-.3).get(),f.fill=m,g.partRect[w](f,k).shadow(e.shadow,null,q)));}};G.prototype.drawPoints=function(){var a=
    this,c=a.getAnimationVerb();a.points.forEach(function(m){a.drawPoint(m,c);});};G.prototype.getAnimationVerb=function(){return this.chart.pointCount<(this.options.animationLimit||250)?"animate":"attr"};G.prototype.isPointInside=function(a){var m=a.shapeArgs,c=a.plotX,e=a.plotY;return m?"undefined"!==typeof c&&"undefined"!==typeof e&&0<=e&&e<=this.yAxis.len&&0<=(m.x||0)+(m.width||0)&&c<=this.xAxis.len:E.prototype.isPointInside.apply(this,arguments)};G.defaultOptions=c(d.defaultOptions,{colorByPoint:!0,
    dataLabels:{formatter:function(){var m=this.point.partialFill;a(m)&&(m=m.amount);if(e(m)&&0<m)return A(100*m)+"%"},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:'<span style="font-size: 10px">{point.x} - {point.x2}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.yCategory}</b><br/>'},borderRadius:3,pointRange:0});return G}(d);p(t.prototype,{type:"xrange",parallelArrays:["x","x2","y"],requireSorting:!1,animate:x.prototype.animate,cropShoulder:1,
    getExtremesFromAll:!0,autoIncrement:b.noop,buildKDTree:b.noop,pointClass:C});v.registerSeriesType("xrange",t);return t});H(b,"Series/Gantt/GanttPoint.js",[b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,p){var v=this&&this.__extends||function(){var b=function(l,h){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d;}||function(h,d){for(var r in d)d.hasOwnProperty(r)&&(h[r]=d[r]);};return b(l,h)};return function(l,h){function x(){this.constructor=
    l;}b(l,h);l.prototype=null===h?Object.create(h):(x.prototype=h.prototype,new x);}}(),t=p.pick;return function(b){function l(){var h=null!==b&&b.apply(this,arguments)||this;h.options=void 0;h.series=void 0;return h}v(l,b);l.setGanttPointAliases=function(h){function b(d,r){"undefined"!==typeof r&&(h[d]=r);}b("x",t(h.start,h.x));b("x2",t(h.end,h.x2));b("partialFill",t(h.completed,h.partialFill));};l.prototype.applyOptions=function(h,x){h=b.prototype.applyOptions.call(this,h,x);l.setGanttPointAliases(h);
    return h};l.prototype.isValid=function(){return ("number"===typeof this.start||"number"===typeof this.x)&&("number"===typeof this.end||"number"===typeof this.x2||this.milestone)};return l}(b.seriesTypes.xrange.prototype.pointClass)});H(b,"Core/Axis/BrokenAxis.js",[b["Extensions/Stacking.js"],b["Core/Utilities.js"]],function(b,p){var v=p.addEvent,t=p.find,C=p.fireEvent,l=p.isArray,h=p.isNumber,x=p.pick,d;(function(d){function g(){"undefined"!==typeof this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,
    !1);}function r(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1);}function B(){var a=this.brokenAxis;if(a&&a.hasBreaks){for(var c=this.tickPositions,e=this.tickPositions.info,g=[],u=0;u<c.length;u++)a.isInAnyBreak(c[u])||g.push(c[u]);this.tickPositions=g;this.tickPositions.info=e;}}function L(){this.brokenAxis||(this.brokenAxis=new G(this));}function e(){var a=this.options.connectNulls,c=this.points,e=this.xAxis,g=this.yAxis;if(this.isDirty)for(var u=c.length;u--;){var d=c[u],E=
    !(null===d.y&&!1===a)&&(e&&e.brokenAxis&&e.brokenAxis.isInAnyBreak(d.x,!0)||g&&g.brokenAxis&&g.brokenAxis.isInAnyBreak(d.y,!0));d.visible=E?!1:!1!==d.options.visible;}}function a(){this.drawBreaks(this.xAxis,["x"]);this.drawBreaks(this.yAxis,x(this.pointArrayMap,["y"]));}function c(a,c){var m=this,e=m.points,g,u,d,z;if(a&&a.brokenAxis&&a.brokenAxis.hasBreaks){var n=a.brokenAxis;c.forEach(function(c){g=n&&n.breakArray||[];u=a.isXAxis?a.min:x(m.options.threshold,a.min);e.forEach(function(n){z=x(n["stack"+
    c.toUpperCase()],n[c]);g.forEach(function(f){if(h(u)&&h(z)){d=!1;if(u<f.from&&z>f.to||u>f.from&&z<f.from)d="pointBreak";else if(u<f.from&&z>f.from&&z<f.to||u>f.from&&z>f.to&&z<f.from)d="pointInBreak";d&&C(a,d,{point:n,brk:f});}});});});}}function u(){var a=this.currentDataGrouping,c=a&&a.gapSize;a=this.points.slice();var e=this.yAxis,g=this.options.gapSize,u=a.length-1,d;if(g&&0<u)for("value"!==this.options.gapUnit&&(g*=this.basePointRange),c&&c>g&&c>=this.basePointRange&&(g=c),d=void 0;u--;)d&&!1!==
    d.visible||(d=a[u+1]),c=a[u],!1!==d.visible&&!1!==c.visible&&(d.x-c.x>g&&(d=(c.x+d.x)/2,a.splice(u+1,0,{isNull:!0,x:d}),e.stacking&&this.options.stacking&&(d=e.stacking.stacks[this.stackKey][d]=new b(e,e.options.stackLabels,!1,d,this.stack),d.total=0)),d=c);return this.getGraphPath(a)}var E=[];d.compose=function(m,d){-1===E.indexOf(m)&&(E.push(m),m.keepProps.push("brokenAxis"),v(m,"init",L),v(m,"afterInit",g),v(m,"afterSetTickPositions",B),v(m,"afterSetOptions",r));if(-1===E.indexOf(d)){E.push(d);
    var D=d.prototype;D.drawBreaks=c;D.gappedPath=u;v(d,"afterGeneratePoints",e);v(d,"afterRender",a);}return m};var G=function(){function a(a){this.hasBreaks=!1;this.axis=a;}a.isInBreak=function(a,c){var d=a.repeat||Infinity,m=a.from,e=a.to-a.from;c=c>=m?(c-m)%d:d-(m-c)%d;return a.inclusive?c<=e:c<e&&0!==c};a.lin2Val=function(c){var d=this.brokenAxis;d=d&&d.breakArray;if(!d||!h(c))return c;var m;for(m=0;m<d.length;m++){var e=d[m];if(e.from>=c)break;else e.to<c?c+=e.len:a.isInBreak(e,c)&&(c+=e.len);}return c};
    a.val2Lin=function(c){var d=this.brokenAxis;d=d&&d.breakArray;if(!d||!h(c))return c;var m=c,e;for(e=0;e<d.length;e++){var g=d[e];if(g.to<=c)m-=g.len;else if(g.from>=c)break;else if(a.isInBreak(g,c)){m-=c-g.from;break}}return m};a.prototype.findBreakAt=function(a,c){return t(c,function(c){return c.from<a&&a<c.to})};a.prototype.isInAnyBreak=function(c,d){var m=this.axis,e=m.options.breaks||[],g=e.length,u;if(g&&h(c)){for(;g--;)if(a.isInBreak(e[g],c)){var z=!0;u||(u=x(e[g].showPoints,!m.isXAxis));}var n=
    z&&d?z&&!u:z;}return n};a.prototype.setBreaks=function(c,d){var m=this,e=m.axis,g=l(c)&&!!c.length;e.isDirty=m.hasBreaks!==g;m.hasBreaks=g;e.options.breaks=e.userOptions.breaks=c;e.forceRedraw=!0;e.series.forEach(function(a){a.isDirty=!0;});g||e.val2lin!==a.val2Lin||(delete e.val2lin,delete e.lin2val);g&&(e.userOptions.ordinal=!1,e.lin2val=a.lin2Val,e.val2lin=a.val2Lin,e.setExtremes=function(a,c,n,y,q){if(m.hasBreaks){for(var f=this.options.breaks||[],k;k=m.findBreakAt(a,f);)a=k.to;for(;k=m.findBreakAt(c,
    f);)c=k.from;c<a&&(c=a);}e.constructor.prototype.setExtremes.call(this,a,c,n,y,q);},e.setAxisTranslation=function(){e.constructor.prototype.setAxisTranslation.call(this);m.unitLength=void 0;if(m.hasBreaks){var c=e.options.breaks||[],d=[],n=[],y=x(e.pointRangePadding,0),q=0,f,k=e.userMin||e.min,w=e.userMax||e.max,g;c.forEach(function(c){f=c.repeat||Infinity;h(k)&&h(w)&&(a.isInBreak(c,k)&&(k+=c.to%f-k%f),a.isInBreak(c,w)&&(w-=w%f-c.from%f));});c.forEach(function(a){O=a.from;f=a.repeat||Infinity;if(h(k)&&
    h(w)){for(;O-f>k;)O-=f;for(;O<k;)O+=f;for(g=O;g<w;g+=f)d.push({value:g,move:"in"}),d.push({value:g+a.to-a.from,move:"out",size:a.breakSize});}});d.sort(function(f,k){return f.value===k.value?("in"===f.move?0:1)-("in"===k.move?0:1):f.value-k.value});var N=0;var O=k;d.forEach(function(f){N+="in"===f.move?1:-1;1===N&&"in"===f.move&&(O=f.value);0===N&&h(O)&&(n.push({from:O,to:f.value,len:f.value-O-(f.size||0)}),q+=f.value-O-(f.size||0));});m.breakArray=n;h(k)&&h(w)&&h(e.min)&&(m.unitLength=w-k-q+y,C(e,
    "afterBreaks"),e.staticScale?e.transA=e.staticScale:m.unitLength&&(e.transA*=(w-e.min+y)/m.unitLength),y&&(e.minPixelPadding=e.transA*(e.minPointOffset||0)),e.min=k,e.max=w);}});x(d,!0)&&e.chart.redraw();};return a}();d.Additions=G;})(d||(d={}));return d});H(b,"Core/Axis/GridAxis.js",[b["Core/Axis/Axis.js"],b["Core/Axis/AxisDefaults.js"],b["Core/Globals.js"],b["Core/Utilities.js"]],function(b,p,v,t){var C=v.dateFormats,l=t.addEvent,h=t.defined,x=t.erase,d=t.find,r=t.isArray,g=t.isNumber,A=t.merge,B=
    t.pick,L=t.timeUnits,e=t.wrap,a;(function(a){function c(f,k){var a={width:0,height:0};k.forEach(function(k){k=f[k];if(t.isObject(k,!0)){var c=t.isObject(k.label,!0)?k.label:{};k=c.getBBox?c.getBBox().height:0;c.textStr&&!g(c.textPxLength)&&(c.textPxLength=c.getBBox().width);var n=g(c.textPxLength)?Math.round(c.textPxLength):0;c.textStr&&(n=Math.round(c.getBBox().width));a.height=Math.max(k,a.height);a.width=Math.max(n,a.width);}});"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&
    (a.width+=this.options.labels.indentation*((this.treeGrid.mapOfPosToGridNode[-1].height||0)-1));return a}function E(){var f=this.grid;(f&&f.columns||[]).forEach(function(f){f.getOffset();});}function G(f){if(!0===(this.options.grid||{}).enabled){var k=this.axisTitle,c=this.height,n=this.horiz,q=this.left,e=this.offset,N=this.opposite,w=this.options,y=this.top,m=this.width,d=this.tickSize(),g=k&&k.getBBox().width,u=w.title.x,z=w.title.y,J=B(w.title.margin,n?5:10);k=this.chart.renderer.fontMetrics(w.title.style.fontSize,
    k).f;d=(n?y+c:q)+(n?1:-1)*(N?-1:1)*(d?d[0]/2:0)+(this.side===a.Side.bottom?k:0);f.titlePosition.x=n?q-(g||0)/2-J+u:d+(N?m:0)+e+u;f.titlePosition.y=n?d-(N?c:0)+(N?k:-k)/2+e+z:y-J+z;}}function m(){var f=this.chart,k=this.options.grid;k=void 0===k?{}:k;var a=this.userOptions;if(k.enabled){var c=this.options;c.labels.align=B(c.labels.align,"center");this.categories||(c.showLastLabel=!1);this.labelRotation=0;c.labels.rotation=0;}if(k.columns){c=this.grid.columns=[];for(var n=this.grid.columnIndex=0;++n<
    k.columns.length;){var q=A(a,k.columns[k.columns.length-n-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete q.grid.columns;q=new b(this.chart,q);q.grid.isColumn=!0;q.grid.columnIndex=n;x(f.axes,q);x(f[this.coll],q);c.push(q);}}}function D(){var f=this.grid,k=this.options;if(!0===(k.grid||{}).enabled){var c=this.min||0,n=this.max||0;this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions);this.rightWall&&this.rightWall.destroy();if(this.grid&&this.grid.isOuterAxis()&&
    this.axisLine){var q=k.lineWidth;if(q){q=this.getLinePath(q);var e=q[0],w=q[1],y=((this.tickSize("tick")||[1])[0]-1)*(this.side===a.Side.top||this.side===a.Side.left?-1:1);"M"===e[0]&&"L"===w[0]&&(this.horiz?(e[2]+=y,w[2]+=y):(e[1]+=y,w[1]+=y));!this.horiz&&this.chart.marginRight&&(e=[e,["L",this.left,e[2]||0]],y=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(n+this.tickmarkOffset)],w=[["M",w[1]||0,this.toPixels(n+this.tickmarkOffset)],y],this.grid.upperBorder||0===c%1||(this.grid.upperBorder=
    this.grid.renderBorder(e)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:k.lineColor,"stroke-width":k.lineWidth}),this.grid.upperBorder.animate({d:e})),this.grid.lowerBorder||0===n%1||(this.grid.lowerBorder=this.grid.renderBorder(w)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:k.lineColor,"stroke-width":k.lineWidth}),this.grid.lowerBorder.animate({d:w})));this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:k.lineColor,"stroke-width":k.lineWidth}),this.grid.axisLineExtra.animate({d:q})):
    this.grid.axisLineExtra=this.grid.renderBorder(q);this.axisLine[this.showAxis?"show":"hide"]();}}(f&&f.columns||[]).forEach(function(f){f.render();});if(!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){f=this.tickmarkOffset;k=this.tickPositions[this.tickPositions.length-1];q=this.tickPositions[0];for(e=w=void 0;(w=this.hiddenLabels.pop())&&w.element;)w.show();for(;(e=this.hiddenMarks.pop())&&e.element;)e.show();(w=this.ticks[q].label)&&(c-q>f?this.hiddenLabels.push(w.hide()):
    w.show());(w=this.ticks[k].label)&&(k-n>f?this.hiddenLabels.push(w.hide()):w.show());(c=this.ticks[k].mark)&&k-n<f&&0<k-n&&this.ticks[k].isLast&&this.hiddenMarks.push(c.hide());}}}function Q(){var f=this.tickPositions&&this.tickPositions.info,k=this.options,a=this.userOptions.labels||{};(k.grid||{}).enabled&&(this.horiz?(this.series.forEach(function(f){f.options.pointRange=0;}),f&&k.dateTimeLabelFormats&&k.labels&&!h(a.align)&&(!1===k.dateTimeLabelFormats[f.unitName].range||1<f.count)&&(k.labels.align=
    "left",h(a.x)||(k.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval));}function M(f){var k=this.options;f=f.userOptions;var a=k&&t.isObject(k.grid,!0)?k.grid:{};if(!0===a.enabled){var c=A(!0,{className:"highcharts-grid-axis "+(f.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,
    style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},f);"xAxis"===this.coll&&(h(f.linkedTo)&&!h(f.tickPixelInterval)&&(c.tickPixelInterval=350),h(f.tickPixelInterval)||!h(f.linkedTo)||h(f.tickPositioner)||h(f.tickInterval)||(c.tickPositioner=function(f,k){var a=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;
    if(a){for(var n=c.units||[],q=void 0,e=void 0,w=void 0,y=0;y<n.length;y++)if(n[y][0]===a.unitName){q=y;break}n[q+1]?(w=n[q+1][0],e=(n[q+1][1]||[1])[0]):"year"===a.unitName&&(w="year",e=10*a.count);a=L[w];this.tickInterval=a*e;return this.getTimeTicks({unitRange:a,count:e,unitName:w},f,k,this.options.startOfWeek)}}));A(!0,this.options,c);this.horiz&&(k.minPadding=B(f.minPadding,0),k.maxPadding=B(f.maxPadding,0));g(k.grid.borderWidth)&&(k.tickWidth=k.lineWidth=a.borderWidth);}}function F(f){f=(f=f.userOptions)&&
    f.grid||{};var k=f.columns;f.enabled&&k&&A(!0,this.options,k[k.length-1]);}function K(){(this.grid.columns||[]).forEach(function(f){f.setScale();});}function I(f){var k=p.defaultLeftAxisOptions,a=this.horiz,c=this.maxLabelDimensions,n=this.options.grid;n=void 0===n?{}:n;n.enabled&&c&&(k=2*Math.abs(k.labels.x),a=a?n.cellHeight||k+c.height:k+c.width,r(f.tickSize)?f.tickSize[0]=a:f.tickSize=[a,0]);}function z(){this.axes.forEach(function(f){(f.grid&&f.grid.columns||[]).forEach(function(f){f.setAxisSize();
    f.setAxisTranslation();});});}function n(f){var k=this.grid;(k.columns||[]).forEach(function(k){k.destroy(f.keepEvents);});k.columns=void 0;}function y(f){f=f.userOptions||{};var k=f.grid||{};k.enabled&&h(k.borderColor)&&(f.tickColor=f.lineColor=k.borderColor);this.grid||(this.grid=new J(this));this.hiddenLabels=[];this.hiddenMarks=[];}function q(f){var k=this.label,c=this.axis,n=c.reversed,q=c.chart,e=c.options.grid||{},w=c.options.labels,y=w.align,d=a.Side[c.side],m=f.tickmarkOffset,u=c.tickPositions,
    N=this.pos-m;u=g(u[f.index+1])?u[f.index+1]-m:(c.max||0)+m;var z=c.tickSize("tick");m=z?z[0]:0;z=z?z[1]/2:0;if(!0===e.enabled){if("top"===d){e=c.top+c.offset;var J=e-m;}else"bottom"===d?(J=q.chartHeight-c.bottom+c.offset,e=J+m):(e=c.top+c.len-(c.translate(n?u:N)||0),J=c.top+c.len-(c.translate(n?N:u)||0));"right"===d?(d=q.chartWidth-c.right+c.offset,n=d+m):"left"===d?(n=c.left+c.offset,d=n-m):(d=Math.round(c.left+(c.translate(n?u:N)||0))-z,n=Math.min(Math.round(c.left+(c.translate(n?N:u)||0))-z,c.left+
    c.len));this.slotWidth=n-d;f.pos.x="left"===y?d:"right"===y?n:d+(n-d)/2;f.pos.y=J+(e-J)/2;q=q.renderer.fontMetrics(w.style.fontSize,k&&k.element);k=k?k.getBBox().height:0;w.useHTML?f.pos.y+=q.b+-(k/2):(k=Math.round(k/q.h),f.pos.y+=(q.b-(q.h-q.f))/2+-((k-1)*q.h/2));f.pos.x+=c.horiz&&w.x||0;}}function f(f){var k=f.axis,a=f.value;if(k.options.grid&&k.options.grid.enabled){var c=k.tickPositions,n=(k.linkedParent||k).series[0],q=a===c[0];c=a===c[c.length-1];var e=n&&d(n.options.data,function(f){return f[k.isXAxis?
    "x":"y"]===a}),w=void 0;e&&n.is("gantt")&&(w=A(e),v.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(w));f.isFirst=q;f.isLast=c;f.point=w;}}function k(){var f=this.options,k=this.categories,a=this.tickPositions,c=a[0],n=a[a.length-1],q=this.linkedParent&&this.linkedParent.min||this.min,e=this.linkedParent&&this.linkedParent.max||this.max,w=this.tickInterval;!0!==(f.grid||{}).enabled||k||!this.horiz&&!this.isLinked||(c<q&&c+w>q&&!f.startOnTick&&(a[0]=q),n>e&&n-w<e&&!f.endOnTick&&(a[a.length-
    1]=e));}function w(f){var k=this.options.grid;return !0===(void 0===k?{}:k).enabled&&this.categories?this.tickInterval:f.apply(this,Array.prototype.slice.call(arguments,1))}(function(f){f[f.top=0]="top";f[f.right=1]="right";f[f.bottom=2]="bottom";f[f.left=3]="left";})(a.Side||(a.Side={}));a.compose=function(a,d,g){-1===a.keepProps.indexOf("grid")&&(a.keepProps.push("grid"),a.prototype.getMaxLabelDimensions=c,e(a.prototype,"unsquish",w),l(a,"init",y),l(a,"afterGetOffset",E),l(a,"afterGetTitlePosition",
    G),l(a,"afterInit",m),l(a,"afterRender",D),l(a,"afterSetAxisTranslation",Q),l(a,"afterSetOptions",M),l(a,"afterSetOptions",F),l(a,"afterSetScale",K),l(a,"afterTickSize",I),l(a,"trimTicks",k),l(a,"destroy",n));l(d,"afterSetChartSize",z);l(g,"afterGetLabelPosition",q);l(g,"labelFormat",f);return a};var J=function(){function f(f){this.axis=f;}f.prototype.isOuterAxis=function(){var f=this.axis,k=f.grid.columnIndex,a=f.linkedParent&&f.linkedParent.grid.columns||f.grid.columns,c=k?f.linkedParent:f,n=-1,
    q=0;f.chart[f.coll].forEach(function(k,a){k.side!==f.side||k.options.isInternal||(q=a,k===c&&(n=a));});return q===n&&(g(k)?a.length===k:!0)};f.prototype.renderBorder=function(f){var k=this.axis,a=k.chart.renderer,c=k.options;f=a.path(f).addClass("highcharts-axis-line").add(k.axisBorder);a.styledMode||f.attr({stroke:c.lineColor,"stroke-width":c.lineWidth,zIndex:7});return f};return f}();a.Additions=J;})(a||(a={}));C.E=function(a){return this.dateFormat("%a",a,!0).charAt(0)};C.W=function(a){var c=this,
    e=new this.Date(a);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(a){c.set(a,e,0);});var d=(this.get("Day",e)+6)%7;a=new this.Date(e.valueOf());this.set("Date",a,this.get("Date",e)-d+3);d=new this.Date(this.get("FullYear",a),0,1);4!==this.get("Day",d)&&(this.set("Month",e,0),this.set("Date",e,1+(11-this.get("Day",d))%7));return (1+Math.floor((a.valueOf()-d.valueOf())/6048E5)).toString()};return a});H(b,"Gantt/Tree.js",[b["Core/Utilities.js"]],function(b){var p=b.extend,v=b.isNumber,
    t=b.pick,C=function(h,b){var d=h.reduce(function(d,g){var r=t(g.parent,"");"undefined"===typeof d[r]&&(d[r]=[]);d[r].push(g);return d},{});Object.keys(d).forEach(function(r,g){var h=d[r];""!==r&&-1===b.indexOf(r)&&(h.forEach(function(d){g[""].push(d);}),delete g[r]);});return d},l=function(h,b,d,r,g,A){var B=0,L=0,e=A&&A.after,a=A&&A.before;b={data:r,depth:d-1,id:h,level:d,parent:b};var c,u;"function"===typeof a&&a(b,A);a=(g[h]||[]).map(function(a){var e=l(a.id,h,d+1,a,g,A),m=a.start;a=!0===a.milestone?
    m:a.end;c=!v(c)||m<c?m:c;u=!v(u)||a>u?a:u;B=B+1+e.descendants;L=Math.max(e.height+1,L);return e});r&&(r.start=t(r.start,c),r.end=t(r.end,u));p(b,{children:a,descendants:B,height:L});"function"===typeof e&&e(b,A);return b};return {getListOfParents:C,getNode:l,getTree:function(b,x){var d=b.map(function(d){return d.id});b=C(b,d);return l("",null,1,null,b,x)}}});H(b,"Core/Axis/TreeGridTick.js",[b["Core/Utilities.js"]],function(b){var p=b.addEvent,v=b.isObject,t=b.isNumber,C=b.pick,l=b.wrap,h;(function(b){function d(){this.treeGrid||
    (this.treeGrid=new L(this));}function r(e,a){e=e.treeGrid;var c=!e.labelIcon,d=a.renderer,g=a.xy,b=a.options,m=b.width||0,r=b.height||0,h=g.x-m/2-(b.padding||0);g=g.y-r/2;var l=a.collapsed?90:180,A=a.show&&t(g),B=e.labelIcon;B||(e.labelIcon=B=d.path(d.symbols[b.type](b.x||0,b.y||0,m,r)).addClass("highcharts-label-icon").add(a.group));B.attr({y:A?0:-9999});d.styledMode||B.attr({cursor:"pointer",fill:C(a.color,"#666666"),"stroke-width":1,stroke:b.lineColor,strokeWidth:b.lineWidth||0});B[c?"attr":"animate"]({translateX:h,
    translateY:g,rotation:l});}function g(e,a,c,d,g,b,m,r,h){var u=C(this.options&&this.options.labels,b);b=this.pos;var D=this.axis,E="treegrid"===D.options.type;e=e.apply(this,[a,c,d,g,u,m,r,h]);E&&(a=u&&v(u.symbol,!0)?u.symbol:{},u=u&&t(u.indentation)?u.indentation:0,b=(b=(D=D.treeGrid.mapOfPosToGridNode)&&D[b])&&b.depth||1,e.x+=(a.width||0)+2*(a.padding||0)+(b-1)*u);return e}function h(e){var a=this,c=a.pos,d=a.axis,g=a.label,b=d.treeGrid.mapOfPosToGridNode,m=d.options,h=C(a.options&&a.options.labels,
    m&&m.labels),l=h&&v(h.symbol,!0)?h.symbol:{},A=(b=b&&b[c])&&b.depth;m="treegrid"===m.type;var B=-1<d.tickPositions.indexOf(c);c=d.chart.styledMode;m&&b&&g&&g.element&&g.addClass("highcharts-treegrid-node-level-"+A);e.apply(a,Array.prototype.slice.call(arguments,1));m&&g&&g.element&&b&&b.descendants&&0<b.descendants&&(d=d.treeGrid.isCollapsed(b),r(a,{color:!c&&g.styles&&g.styles.color||"",collapsed:d,group:g.parentGroup,options:l,renderer:g.renderer,show:B,xy:g.xy}),l="highcharts-treegrid-node-"+(d?
    "expanded":"collapsed"),g.addClass("highcharts-treegrid-node-"+(d?"collapsed":"expanded")).removeClass(l),c||g.css({cursor:"pointer"}),[g,a.treeGrid.labelIcon].forEach(function(c){c&&!c.attachedTreeGridEvents&&(p(c.element,"mouseover",function(){g.addClass("highcharts-treegrid-node-active");g.renderer.styledMode||g.css({textDecoration:"underline"});}),p(c.element,"mouseout",function(){var a=v(h.style)?h.style:{};g.removeClass("highcharts-treegrid-node-active");g.renderer.styledMode||g.css({textDecoration:a.textDecoration});}),
    p(c.element,"click",function(){a.treeGrid.toggleCollapse();}),c.attachedTreeGridEvents=!0);}));}var B=!1;b.compose=function(e){B||(p(e,"init",d),l(e.prototype,"getLabelPosition",g),l(e.prototype,"renderLabel",h),e.prototype.collapse=function(a){this.treeGrid.collapse(a);},e.prototype.expand=function(a){this.treeGrid.expand(a);},e.prototype.toggleCollapse=function(a){this.treeGrid.toggleCollapse(a);},B=!0);};var L=function(){function e(a){this.tick=a;}e.prototype.collapse=function(a){var c=this.tick,e=c.axis,
    d=e.brokenAxis;d&&e.treeGrid.mapOfPosToGridNode&&(c=e.treeGrid.collapse(e.treeGrid.mapOfPosToGridNode[c.pos]),d.setBreaks(c,C(a,!0)));};e.prototype.destroy=function(){this.labelIcon&&this.labelIcon.destroy();};e.prototype.expand=function(a){var c=this.tick,e=c.axis,d=e.brokenAxis;d&&e.treeGrid.mapOfPosToGridNode&&(c=e.treeGrid.expand(e.treeGrid.mapOfPosToGridNode[c.pos]),d.setBreaks(c,C(a,!0)));};e.prototype.toggleCollapse=function(a){var c=this.tick,e=c.axis,d=e.brokenAxis;d&&e.treeGrid.mapOfPosToGridNode&&
    (c=e.treeGrid.toggleCollapse(e.treeGrid.mapOfPosToGridNode[c.pos]),d.setBreaks(c,C(a,!0)));};return e}();b.Additions=L;})(h||(h={}));return h});H(b,"Series/TreeUtilities.js",[b["Core/Color/Color.js"],b["Core/Utilities.js"]],function(b,p){function v(b,g){var h=g.before,r=g.idRoot,l=g.mapIdToNode[r],e=g.points[b.i],a=e&&e.options||{},c=[],u=0;b.levelDynamic=b.level-(!1!==g.levelIsConstant?0:l.level);b.name=d(e&&e.name,"");b.visible=r===b.id||!0===g.visible;"function"===typeof h&&(b=h(b,g));b.children.forEach(function(a,
    e){var d=t({},g);t(d,{index:e,siblings:b.children.length,visible:b.visible});a=v(a,d);c.push(a);a.visible&&(u+=a.val);});h=d(a.value,u);b.visible=0<=h&&(0<u||b.visible);b.children=c;b.childrenTotal=u;b.isLeaf=b.visible&&!u;b.val=h;return b}var t=p.extend,C=p.isArray,l=p.isNumber,h=p.isObject,x=p.merge,d=p.pick;return {getColor:function(h,g){var l=g.index,r=g.mapOptionsToLevel,L=g.parentColor,e=g.parentColorIndex,a=g.series,c=g.colors,u=g.siblings,E=a.points,G=a.chart.options.chart,m;if(h){E=E[h.i];
    h=r[h.level]||{};if(r=E&&h.colorByPoint){var D=E.index%(c?c.length:G.colorCount);var x=c&&c[D];}if(!a.chart.styledMode){c=E&&E.options.color;G=h&&h.color;if(m=L)m=(m=h&&h.colorVariation)&&"brightness"===m.key&&l&&u?b.parse(L).brighten(l/u*m.to).get():L;m=d(c,G,x,m,a.color);}var p=d(E&&E.options.colorIndex,h&&h.colorIndex,D,e,g.colorIndex);}return {color:m,colorIndex:p}},getLevelOptions:function(b){var g=null;if(h(b)){g={};var A=l(b.from)?b.from:1;var B=b.levels;var r={};var e=h(b.defaults)?b.defaults:
    {};C(B)&&(r=B.reduce(function(a,c){if(h(c)&&l(c.level)){var g=x({},c);var b=d(g.levelIsConstant,e.levelIsConstant);delete g.levelIsConstant;delete g.level;c=c.level+(b?0:A-1);h(a[c])?x(!0,a[c],g):a[c]=g;}return a},{}));B=l(b.to)?b.to:1;for(b=0;b<=B;b++)g[b]=x({},e,h(r[b])?r[b]:{});}return g},setTreeValues:v,updateRootId:function(b){if(h(b)){var g=h(b.options)?b.options:{};g=d(b.rootNode,g.rootId,"");h(b.userOptions)&&(b.userOptions.rootId=g);b.rootNode=g;}return g}}});H(b,"Core/Axis/TreeGridAxis.js",
    [b["Core/Axis/BrokenAxis.js"],b["Core/Axis/GridAxis.js"],b["Gantt/Tree.js"],b["Core/Axis/TreeGridTick.js"],b["Series/TreeUtilities.js"],b["Core/Utilities.js"]],function(b,p,v,t,C,l){var h=C.getLevelOptions,x=l.addEvent,d=l.find,r=l.fireEvent,g=l.isArray,A=l.isObject,B=l.isString,L=l.merge,e=l.pick,a=l.wrap,c;(function(c){function u(a,c){var n=a.collapseEnd||0;a=a.collapseStart||0;n>=c&&(a-=.5);return {from:a,to:n,showPoints:!1}}function l(a,c,n){var e=[],q=[],f={},k="boolean"===typeof c?c:!1,w={},
    g=-1;a=v.getTree(a,{after:function(f){f=w[f.pos];var k=0,a=0;f.children.forEach(function(f){a+=(f.descendants||0)+1;k=Math.max((f.height||0)+1,k);});f.descendants=a;f.height=k;f.collapsed&&q.push(f);},before:function(a){var c=A(a.data,!0)?a.data:{},n=B(c.name)?c.name:"",q=f[a.parent];q=A(q,!0)?w[q.pos]:null;var y=function(f){return f.name===n},m;k&&A(q,!0)&&(m=d(q.children,y))?(y=m.pos,m.nodes.push(a)):y=g++;w[y]||(w[y]=m={depth:q?q.depth+1:0,name:n,id:c.id,nodes:[a],children:[],pos:y},-1!==y&&e.push(n),
    A(q,!0)&&q.children.push(m));B(a.id)&&(f[a.id]=a);m&&!0===c.collapsed&&(m.collapsed=!0);a.pos=y;}});w=function(f,k){var a=function(f,c,n){var e=c+(-1===c?0:k-1),q=(e-c)/2,d=c+q;f.nodes.forEach(function(f){var k=f.data;A(k,!0)&&(k.y=c+(k.seriesIndex||0),delete k.seriesIndex);f.pos=d;});n[d]=f;f.pos=d;f.tickmarkOffset=q+.5;f.collapseStart=e+.5;f.children.forEach(function(f){a(f,e+1,n);e=(f.collapseEnd||0)-.5;});f.collapseEnd=e+.5;return n};return a(f["-1"],-1,{})}(w,n);return {categories:e,mapOfIdToNode:f,
    mapOfPosToGridNode:w,collapsedNodes:q,tree:a}}function m(a){a.target.axes.filter(function(a){return "treegrid"===a.options.type}).forEach(function(c){var n=c.options||{},e=n.labels,q=n.uniqueNames;n=n.max;var f=0;if(!c.treeGrid.mapOfPosToGridNode||c.series.some(function(f){return !f.hasRendered||f.isDirtyData||f.isDirty})){var k=c.series.reduce(function(k,a){a.visible&&((a.options.data||[]).forEach(function(c){a.options.keys&&a.options.keys.length&&(c=a.pointClass.prototype.optionsToObject.call({series:a},
    c),a.pointClass.setGanttPointAliases(c));A(c,!0)&&(c.seriesIndex=f,k.push(c));}),!0===q&&f++);return k},[]);if(n&&k.length<n)for(var d=k.length;d<=n;d++)k.push({name:d+"\u200b"});n=l(k,q||!1,!0===q?f:1);c.categories=n.categories;c.treeGrid.mapOfPosToGridNode=n.mapOfPosToGridNode;c.hasNames=!0;c.treeGrid.tree=n.tree;c.series.forEach(function(f){var a=(f.options.data||[]).map(function(a){g(a)&&f.options.keys&&f.options.keys.length&&k.forEach(function(f){0<=a.indexOf(f.x)&&0<=a.indexOf(f.x2)&&(a=f);});
    return A(a,!0)?L(a):a});f.visible&&f.setData(a,!1);});c.treeGrid.mapOptionsToLevel=h({defaults:e,from:1,levels:e&&e.levels,to:c.treeGrid.tree&&c.treeGrid.tree.height});"beforeRender"===a.type&&(c.treeGrid.collapsedNodes=n.collapsedNodes);}});}function D(a,c){var e=this.treeGrid.mapOptionsToLevel||{},d=this.ticks,q=d[c],f;if("treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode){var k=this.treeGrid.mapOfPosToGridNode[c];(e=e[k.depth])&&(f={labels:e});!q&&F?d[c]=new F(this,c,void 0,void 0,{category:k.name,
    tickmarkOffset:k.tickmarkOffset,options:f}):(q.parameters.category=k.name,q.options=f,q.addLabel());}else a.apply(this,Array.prototype.slice.call(arguments,1));}function Q(a,c,e){var n=this,q="treegrid"===e.type;n.treeGrid||(n.treeGrid=new K(n));q&&(x(c,"beforeRender",m),x(c,"beforeRedraw",m),x(c,"addSeries",function(f){f.options.data&&(f=l(f.options.data,e.uniqueNames||!1,1),n.treeGrid.collapsedNodes=(n.treeGrid.collapsedNodes||[]).concat(f.collapsedNodes));}),x(n,"foundExtremes",function(){n.treeGrid.collapsedNodes&&
    n.treeGrid.collapsedNodes.forEach(function(f){var k=n.treeGrid.collapse(f);n.brokenAxis&&(n.brokenAxis.setBreaks(k,!1),n.treeGrid.collapsedNodes&&(n.treeGrid.collapsedNodes=n.treeGrid.collapsedNodes.filter(function(k){return f.collapseStart!==k.collapseStart||f.collapseEnd!==k.collapseEnd})));});}),x(n,"afterBreaks",function(){"yAxis"===n.coll&&!n.staticScale&&n.chart.options.chart.height&&(n.isDirty=!0);}),e=L({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],
    symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},e,{reversed:!0,grid:{columns:void 0}}));a.apply(n,[c,e]);q&&(n.hasNames=!0,n.options.showLastLabel=!0);}function C(a){var c=this.options;"treegrid"===c.type?(this.min=e(this.userMin,c.min,this.dataMin),this.max=e(this.userMax,c.max,this.dataMax),r(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():
    []):a.apply(this,Array.prototype.slice.call(arguments,1));}var F;c.compose=function(c,e,n,d){-1===c.keepProps.indexOf("treeGrid")&&(c.keepProps.push("treeGrid"),F=d,a(c.prototype,"generateTick",D),a(c.prototype,"init",Q),a(c.prototype,"setTickInterval",C),c.prototype.utils={getNode:v.getNode},p.compose(c,e,d),b.compose(c,n),t.compose(d));return c};var K=function(){function a(a){this.axis=a;}a.prototype.setCollapsedStatus=function(a){var c=this.axis,e=c.chart;c.series.forEach(function(c){var f=c.options.data;
    if(a.id&&f){var k=e.get(a.id);c=f[c.data.indexOf(k)];k&&c&&(k.collapsed=a.collapsed,c.collapsed=a.collapsed);}});};a.prototype.collapse=function(a){var c=this.axis,e=c.options.breaks||[],q=u(a,c.max);e.push(q);a.collapsed=!0;c.treeGrid.setCollapsedStatus(a);return e};a.prototype.expand=function(a){var c=this.axis,e=c.options.breaks||[],q=u(a,c.max);a.collapsed=!1;c.treeGrid.setCollapsedStatus(a);return e.reduce(function(f,a){a.to===q.to&&a.from===q.from||f.push(a);return f},[])};a.prototype.getTickPositions=
    function(){var a=this.axis,c=Math.floor(a.min/a.tickInterval)*a.tickInterval,e=Math.ceil(a.max/a.tickInterval)*a.tickInterval;return Object.keys(a.treeGrid.mapOfPosToGridNode||{}).reduce(function(n,f){f=+f;!(f>=c&&f<=e)||a.brokenAxis&&a.brokenAxis.isInAnyBreak(f)||n.push(f);return n},[])};a.prototype.isCollapsed=function(a){var c=this.axis,e=c.options.breaks||[],q=u(a,c.max);return e.some(function(f){return f.from===q.from&&f.to===q.to})};a.prototype.toggleCollapse=function(a){return this.isCollapsed(a)?
    this.expand(a):this.collapse(a)};return a}();c.Additions=K;})(c||(c={}));return c});H(b,"Extensions/CurrentDateIndication.js",[b["Core/Axis/Axis.js"],b["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],b["Core/Utilities.js"]],function(b,p,v){var t=v.addEvent,C=v.merge;v=v.wrap;var l={color:"#ccd6eb",width:2,label:{format:"%a, %b %d %Y, %H:%M",formatter:function(b,l){return this.axis.chart.time.dateFormat(l||"",b)},rotation:0,style:{fontSize:"10px"}}};t(b,"afterSetOptions",function(){var b=this.options,
    x=b.currentDateIndicator;x&&(x="object"===typeof x?C(l,x):C(l),x.value=Date.now(),x.className="highcharts-current-date-indicator",b.plotLines||(b.plotLines=[]),b.plotLines.push(x));});t(p,"render",function(){this.label&&this.label.attr({text:this.getLabelText(this.options.label)});});v(p.prototype,"getLabelText",function(b,l){var d=this.options;return d&&d.className&&-1!==d.className.indexOf("highcharts-current-date-indicator")&&d.label&&"function"===typeof d.label.formatter?(d.value=Date.now(),d.label.formatter.call(this,
    d.value,d.label.format)):b.call(this,l)});});H(b,"Extensions/StaticScale.js",[b["Core/Axis/Axis.js"],b["Core/Chart/Chart.js"],b["Core/Utilities.js"]],function(b,p,v){var t=v.addEvent,C=v.defined,l=v.isNumber,h=v.pick;t(b,"afterSetOptions",function(){var b=this.chart.options.chart;!this.horiz&&l(this.options.staticScale)&&(!b.height||b.scrollablePlotArea&&b.scrollablePlotArea.minHeight)&&(this.staticScale=this.options.staticScale);});p.prototype.adjustHeight=function(){"adjustHeight"!==this.redrawTrigger&&
    ((this.axes||[]).forEach(function(b){var d=b.chart,l=!!d.initiatedScale&&d.options.animation,g=b.options.staticScale;if(b.staticScale&&C(b.min)){var A=h(b.brokenAxis&&b.brokenAxis.unitLength,b.max+b.tickInterval-b.min)*g;A=Math.max(A,g);g=A-d.plotHeight;!d.scrollablePixelsY&&1<=Math.abs(g)&&(d.plotHeight=A,d.redrawTrigger="adjustHeight",d.setSize(void 0,d.chartHeight+g,l));b.series.forEach(function(g){(g=g.sharedClipKey&&d.sharedClips[g.sharedClipKey])&&g.attr(d.inverted?{width:d.plotHeight}:{height:d.plotHeight});});}}),
    this.initiatedScale=!0);this.redrawTrigger=null;};t(p,"render",p.prototype.adjustHeight);});H(b,"Extensions/ArrowSymbols.js",[b["Core/Renderer/SVG/SVGRenderer.js"]],function(b){function p(b,l,h,p){return [["M",b,l+p/2],["L",b+h,l],["L",b,l+p/2],["L",b+h,l+p]]}function v(b,l,h,p){return [["M",b+h,l],["L",b,l+p/2],["L",b+h,l+p],["Z"]]}function t(b,l,h,p){return v(b,l,h/2,p)}b=b.prototype.symbols;b.arrow=p;b["arrow-filled"]=v;b["arrow-filled-half"]=t;b["arrow-half"]=function(b,l,h,t){return p(b,l,h/2,t)};
    b["triangle-left"]=v;b["triangle-left-half"]=t;return b});H(b,"Gantt/Connection.js",[b["Core/Globals.js"],b["Core/DefaultOptions.js"],b["Core/Series/Point.js"],b["Core/Utilities.js"]],function(b,p,v,t){function C(d){var e=d.shapeArgs;return e?{xMin:e.x||0,xMax:(e.x||0)+(e.width||0),yMin:e.y||0,yMax:(e.y||0)+(e.height||0)}:(e=d.graphic&&d.graphic.getBBox())?{xMin:d.plotX-e.width/2,xMax:d.plotX+e.width/2,yMin:d.plotY-e.height/2,yMax:d.plotY+e.height/2}:null}var l=t.defined,h=t.error,x=t.extend,d=
    t.merge,r=t.objectEach,g=b.deg2rad,A=Math.max,B=Math.min;x(p.defaultOptions,{connectors:{type:"straight",lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}});p=function(){function b(e,a,c){this.toPoint=this.pathfinder=this.graphics=this.fromPoint=this.chart=void 0;this.init(e,a,c);}b.prototype.init=function(e,a,c){this.fromPoint=e;this.toPoint=a;this.options=c;this.chart=e.series.chart;this.pathfinder=
    this.chart.pathfinder;};b.prototype.renderPath=function(e,a,c){var d=this.chart,b=d.styledMode,g=d.pathfinder,m=!d.options.chart.forExport&&!1!==c,h=this.graphics&&this.graphics.path;g.group||(g.group=d.renderer.g().addClass("highcharts-pathfinder-group").attr({zIndex:-1}).add(d.seriesGroup));g.group.translate(d.plotLeft,d.plotTop);h&&h.renderer||(h=d.renderer.path().add(g.group),b||h.attr({opacity:0}));h.attr(a);e={d:e};b||(e.opacity=1);h[m?"animate":"attr"](e,c);this.graphics=this.graphics||{};this.graphics.path=
    h;};b.prototype.addMarker=function(e,a,c){var d=this.fromPoint.series.chart,b=d.pathfinder;d=d.renderer;var h="start"===e?this.fromPoint:this.toPoint,m=h.getPathfinderAnchorPoint(a);if(a.enabled&&((c="start"===e?c[1]:c[c.length-2])&&"M"===c[0]||"L"===c[0])){c={x:c[1],y:c[2]};c=h.getRadiansToVector(c,m);m=h.getMarkerVector(c,a.radius,m);c=-c/g;if(a.width&&a.height){var l=a.width;var A=a.height;}else l=A=2*a.radius;this.graphics=this.graphics||{};m={x:m.x-l/2,y:m.y-A/2,width:l,height:A,rotation:c,rotationOriginX:m.x,
    rotationOriginY:m.y};this.graphics[e]?this.graphics[e].animate(m):(this.graphics[e]=d.symbol(a.symbol).addClass("highcharts-point-connecting-path-"+e+"-marker").attr(m).add(b.group),d.styledMode||this.graphics[e].attr({fill:a.color||this.fromPoint.color,stroke:a.lineColor,"stroke-width":a.lineWidth,opacity:0}).animate({opacity:1},h.series.options.animation));}};b.prototype.getPath=function(e){var a=this.pathfinder,c=this.chart,b=a.algorithms[e.type],g=a.chartObstacles;if("function"!==typeof b)return h('"'+
    e.type+'" is not a Pathfinder algorithm.'),{path:[],obstacles:[]};b.requiresObstacles&&!g&&(g=a.chartObstacles=a.getChartObstacles(e),c.options.connectors.algorithmMargin=e.algorithmMargin,a.chartObstacleMetrics=a.getObstacleMetrics(g));return b(this.fromPoint.getPathfinderAnchorPoint(e.startMarker),this.toPoint.getPathfinderAnchorPoint(e.endMarker),d({chartObstacles:g,lineObstacles:a.lineObstacles||[],obstacleMetrics:a.chartObstacleMetrics,hardBounds:{xMin:0,xMax:c.plotWidth,yMin:0,yMax:c.plotHeight},
    obstacleOptions:{margin:e.algorithmMargin},startDirectionX:a.getAlgorithmStartDirection(e.startMarker)},e))};b.prototype.render=function(){var e=this.fromPoint,a=e.series,c=a.chart,b=c.pathfinder,g=d(c.options.connectors,a.options.connectors,e.options.connectors,this.options),h={};c.styledMode||(h.stroke=g.lineColor||e.color,h["stroke-width"]=g.lineWidth,g.dashStyle&&(h.dashstyle=g.dashStyle));h["class"]="highcharts-point-connecting-path highcharts-color-"+e.colorIndex;g=d(h,g);l(g.marker.radius)||
    (g.marker.radius=B(A(Math.ceil((g.algorithmMargin||8)/2)-1,1),5));e=this.getPath(g);c=e.path;e.obstacles&&(b.lineObstacles=b.lineObstacles||[],b.lineObstacles=b.lineObstacles.concat(e.obstacles));this.renderPath(c,h,a.options.animation);this.addMarker("start",d(g.marker,g.startMarker),c);this.addMarker("end",d(g.marker,g.endMarker),c);};b.prototype.destroy=function(){this.graphics&&(r(this.graphics,function(e){e.destroy();}),delete this.graphics);};return b}();b.Connection=p;x(v.prototype,{getPathfinderAnchorPoint:function(d){var e=
    C(this);switch(d.align){case "right":var a="xMax";break;case "left":a="xMin";}switch(d.verticalAlign){case "top":var c="yMin";break;case "bottom":c="yMax";}return {x:a?e[a]:(e.xMin+e.xMax)/2,y:c?e[c]:(e.yMin+e.yMax)/2}},getRadiansToVector:function(d,e){var a;l(e)||(a=C(this))&&(e={x:(a.xMin+a.xMax)/2,y:(a.yMin+a.yMax)/2});return Math.atan2(e.y-d.y,d.x-e.x)},getMarkerVector:function(d,e,a){var c=2*Math.PI,b=C(this),g=b.xMax-b.xMin,h=b.yMax-b.yMin,m=Math.atan2(h,g),l=!1;g/=2;var A=h/2,B=b.xMin+g;b=b.yMin+
    A;for(var r=B,p=b,t=1,z=1;d<-Math.PI;)d+=c;for(;d>Math.PI;)d-=c;c=Math.tan(d);d>-m&&d<=m?(z=-1,l=!0):d>m&&d<=Math.PI-m?z=-1:d>Math.PI-m||d<=-(Math.PI-m)?(t=-1,l=!0):t=-1;l?(r+=t*g,p+=z*g*c):(r+=h/(2*c)*t,p+=z*A);a.x!==B&&(r=a.x);a.y!==b&&(p=a.y);return {x:r+e*Math.cos(d),y:p-e*Math.sin(d)}}});return p});H(b,"Gantt/PathfinderAlgorithms.js",[b["Core/Utilities.js"]],function(b){function p(d,b,h){h=h||0;var g=d.length-1;b-=1e-7;for(var e,a;h<=g;)if(e=g+h>>1,a=b-d[e].xMin,0<a)h=e+1;else if(0>a)g=e-1;else return e;
    return 0<h?h-1:0}function v(d,b){for(var g=p(d,b.x+1)+1;g--;){var h;if(h=d[g].xMax>=b.x)h=d[g],h=b.x<=h.xMax&&b.x>=h.xMin&&b.y<=h.yMax&&b.y>=h.yMin;if(h)return g}return -1}function t(d){var b=[];if(d.length){b.push(["M",d[0].start.x,d[0].start.y]);for(var g=0;g<d.length;++g)b.push(["L",d[g].end.x,d[g].end.y]);}return b}function C(d,b){d.yMin=x(d.yMin,b.yMin);d.yMax=h(d.yMax,b.yMax);d.xMin=x(d.xMin,b.xMin);d.xMax=h(d.xMax,b.xMax);}var l=b.pick,h=Math.min,x=Math.max,d=Math.abs;b=function(b,h,r){function g(a,
    c,d,e,b){a={x:a.x,y:a.y};a[c]=d[e||c]+(b||0);return a}function e(a,c,e){var b=d(c[e]-a[e+"Min"])>d(c[e]-a[e+"Max"]);return g(c,e,a,e+(b?"Max":"Min"),b?1:-1)}var a=[],c=l(r.startDirectionX,d(h.x-b.x)>d(h.y-b.y))?"x":"y",u=r.chartObstacles,A=v(u,b);r=v(u,h);if(-1<r){var p=u[r];r=e(p,h,c);p={start:r,end:h};var m=r;}else m=h;-1<A&&(u=u[A],r=e(u,b,c),a.push({start:b,end:r}),r[c]>=b[c]===r[c]>=m[c]&&(c="y"===c?"x":"y",h=b[c]<h[c],a.push({start:r,end:g(r,c,u,c+(h?"Max":"Min"),h?1:-1)}),c="y"===c?"x":"y"));
    b=a.length?a[a.length-1].end:b;r=g(b,c,m);a.push({start:b,end:r});c=g(r,"y"===c?"x":"y",m);a.push({start:r,end:c});a.push(p);return {path:t(a),obstacles:a}};b.requiresObstacles=!0;var r=function(b,r,B){function g(a,c,f){var k,d=a.x<c.x?1:-1;if(a.x<c.x){var e=a;var b=c;}else e=c,b=a;if(a.y<c.y){var n=a;var q=c;}else n=c,q=a;for(k=0>d?h(p(I,b.x),I.length-1):0;I[k]&&(0<d&&I[k].xMin<=b.x||0>d&&I[k].xMax>=e.x);){if(I[k].xMin<=b.x&&I[k].xMax>=e.x&&I[k].yMin<=q.y&&I[k].yMax>=n.y)return f?{y:a.y,x:a.x<c.x?I[k].xMin-
    1:I[k].xMax+1,obstacle:I[k]}:{x:a.x,y:a.y<c.y?I[k].yMin-1:I[k].yMax+1,obstacle:I[k]};k+=d;}return c}function e(a,c,f,k,b){var e=b.soft,n=b.hard,q=k?"x":"y",w={x:c.x,y:c.y},m={x:c.x,y:c.y};b=a[q+"Max"]>=e[q+"Max"];e=a[q+"Min"]<=e[q+"Min"];var h=a[q+"Max"]>=n[q+"Max"];n=a[q+"Min"]<=n[q+"Min"];var y=d(a[q+"Min"]-c[q]),u=d(a[q+"Max"]-c[q]);f=10>d(y-u)?c[q]<f[q]:u<y;m[q]=a[q+"Min"];w[q]=a[q+"Max"];a=g(c,m,k)[q]!==m[q];c=g(c,w,k)[q]!==w[q];f=a?c?f:!0:c?!1:f;f=e?b?f:!0:b?!1:f;return n?h?f:!0:h?!1:f}function a(c,
    d,f){if(c.x===d.x&&c.y===d.y)return [];var k=f?"x":"y",b=B.obstacleOptions.margin;var n={soft:{xMin:Q,xMax:M,yMin:F,yMax:K},hard:B.hardBounds};var q=v(I,c);if(-1<q){q=I[q];n=e(q,c,d,f,n);C(q,B.hardBounds);var y=f?{y:c.y,x:q[n?"xMax":"xMin"]+(n?1:-1)}:{x:c.x,y:q[n?"yMax":"yMin"]+(n?1:-1)};var u=v(I,y);-1<u&&(u=I[u],C(u,B.hardBounds),y[k]=n?x(q[k+"Max"]-b+1,(u[k+"Min"]+q[k+"Max"])/2):h(q[k+"Min"]+b-1,(u[k+"Max"]+q[k+"Min"])/2),c.x===y.x&&c.y===y.y?(m&&(y[k]=n?x(q[k+"Max"],u[k+"Max"])+1:h(q[k+"Min"],
    u[k+"Min"])-1),m=!m):m=!1);c=[{start:c,end:y}];}else k=g(c,{x:f?d.x:c.x,y:f?c.y:d.y},f),c=[{start:c,end:{x:k.x,y:k.y}}],k[f?"x":"y"]!==d[f?"x":"y"]&&(n=e(k.obstacle,k,d,!f,n),C(k.obstacle,B.hardBounds),n={x:f?k.x:k.obstacle[n?"xMax":"xMin"]+(n?1:-1),y:f?k.obstacle[n?"yMax":"yMin"]+(n?1:-1):k.y},f=!f,c=c.concat(a({x:k.x,y:k.y},n,f)));return c=c.concat(a(c[c.length-1].end,d,!f))}function c(a,c,f){var k=h(a.xMax-c.x,c.x-a.xMin)<h(a.yMax-c.y,c.y-a.yMin);f=e(a,c,f,k,{soft:B.hardBounds,hard:B.hardBounds});
    return k?{y:c.y,x:a[f?"xMax":"xMin"]+(f?1:-1)}:{x:c.x,y:a[f?"yMax":"yMin"]+(f?1:-1)}}var u=l(B.startDirectionX,d(r.x-b.x)>d(r.y-b.y)),A=u?"x":"y",G=[],m=!1,D=B.obstacleMetrics,Q=h(b.x,r.x)-D.maxWidth-10,M=x(b.x,r.x)+D.maxWidth+10,F=h(b.y,r.y)-D.maxHeight-10,K=x(b.y,r.y)+D.maxHeight+10,I=B.chartObstacles;var z=p(I,Q);D=p(I,M);I=I.slice(z,D+1);if(-1<(D=v(I,r))){var n=c(I[D],r,b);G.push({end:r,start:n});r=n;}for(;-1<(D=v(I,r));)z=0>r[A]-b[A],n={x:r.x,y:r.y},n[A]=I[D][z?A+"Max":A+"Min"]+(z?1:-1),G.push({end:r,
    start:n}),r=n;b=a(b,r,u);b=b.concat(G.reverse());return {path:t(b),obstacles:b}};r.requiresObstacles=!0;return {fastAvoid:r,straight:function(d,b){return {path:[["M",d.x,d.y],["L",b.x,b.y]],obstacles:[{start:d,end:b}]}},simpleConnect:b}});H(b,"Gantt/Pathfinder.js",[b["Gantt/Connection.js"],b["Core/Chart/Chart.js"],b["Core/Globals.js"],b["Core/DefaultOptions.js"],b["Core/Series/Point.js"],b["Core/Utilities.js"],b["Gantt/PathfinderAlgorithms.js"]],function(b,p,v,t,C,l,h){function x(a){var c=a.shapeArgs;
    return c?{xMin:c.x||0,xMax:(c.x||0)+(c.width||0),yMin:c.y||0,yMax:(c.y||0)+(c.height||0)}:(c=a.graphic&&a.graphic.getBBox())?{xMin:a.plotX-c.width/2,xMax:a.plotX+c.width/2,yMin:a.plotY-c.height/2,yMax:a.plotY+c.height/2}:null}function d(c){for(var d=c.length,b=0,e,g,m=[],h=function(c,d,b){b=a(b,10);var e=c.yMax+b>d.yMin-b&&c.yMin-b<d.yMax+b,f=c.xMax+b>d.xMin-b&&c.xMin-b<d.xMax+b,k=e?c.xMin>d.xMax?c.xMin-d.xMax:d.xMin-c.xMax:Infinity,n=f?c.yMin>d.yMax?c.yMin-d.yMax:d.yMin-c.yMax:Infinity;return f&&
    e?b?h(c,d,Math.floor(b/2)):Infinity:E(k,n)};b<d;++b)for(e=b+1;e<d;++e)g=h(c[b],c[e]),80>g&&m.push(g);m.push(80);return u(Math.floor(m.sort(function(a,c){return a-c})[Math.floor(m.length/10)]/2-1),1)}function r(a){if(a.options.pathfinder||a.series.reduce(function(a,c){c.options&&e(!0,c.options.connectors=c.options.connectors||{},c.options.pathfinder);return a||c.options&&c.options.pathfinder},!1))e(!0,a.options.connectors=a.options.connectors||{},a.options.pathfinder),B('WARNING: Pathfinder options have been renamed. Use "chart.connectors" or "series.connectors" instead.');}
    var g=l.addEvent,A=l.defined,B=l.error,L=l.extend,e=l.merge,a=l.pick,c=l.splat,u=Math.max,E=Math.min;L(t.defaultOptions,{connectors:{type:"straight",lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}});var G=function(){function e(a){this.lineObstacles=this.group=this.connections=this.chartObstacleMetrics=this.chartObstacles=this.chart=void 0;this.init(a);}e.prototype.init=function(a){this.chart=
    a;this.connections=[];g(a,"redraw",function(){this.pathfinder.update();});};e.prototype.update=function(a){var d=this.chart,e=this,g=e.connections;e.connections=[];d.series.forEach(function(a){a.visible&&!a.options.isInternal&&a.points.forEach(function(f){var a=f.options;a&&a.dependency&&(a.connect=a.dependency);var n;a=f.options&&f.options.connect&&c(f.options.connect);f.visible&&!1!==f.isInside&&a&&a.forEach(function(a){n=d.get("string"===typeof a?a:a.to);n instanceof C&&n.series.visible&&n.visible&&
    !1!==n.isInside&&e.connections.push(new b(f,n,"string"===typeof a?{}:a));});});});for(var m=0,h=void 0,u=void 0,n=g.length,y=e.connections.length;m<n;++m){u=!1;for(h=0;h<y;++h)if(g[m].fromPoint===e.connections[h].fromPoint&&g[m].toPoint===e.connections[h].toPoint){e.connections[h].graphics=g[m].graphics;u=!0;break}u||g[m].destroy();}delete this.chartObstacles;delete this.lineObstacles;e.renderConnections(a);};e.prototype.renderConnections=function(a){a?this.chart.series.forEach(function(a){var c=function(){var c=
    a.chart.pathfinder;(c&&c.connections||[]).forEach(function(c){c.fromPoint&&c.fromPoint.series===a&&c.render();});a.pathfinderRemoveRenderEvent&&(a.pathfinderRemoveRenderEvent(),delete a.pathfinderRemoveRenderEvent);};!1===a.options.animation?c():a.pathfinderRemoveRenderEvent=g(a,"afterAnimate",c);}):this.connections.forEach(function(a){a.render();});};e.prototype.getChartObstacles=function(c){for(var b=[],e=this.chart.series,g=a(c.algorithmMargin,0),m,h=0,u=e.length;h<u;++h)if(e[h].visible&&!e[h].options.isInternal){var n=
    0,y=e[h].points.length,q=void 0;for(q=void 0;n<y;++n)q=e[h].points[n],q.visible&&(q=x(q))&&b.push({xMin:q.xMin-g,xMax:q.xMax+g,yMin:q.yMin-g,yMax:q.yMax+g});}b=b.sort(function(f,a){return f.xMin-a.xMin});A(c.algorithmMargin)||(m=c.algorithmMargin=d(b),b.forEach(function(f){f.xMin-=m;f.xMax+=m;f.yMin-=m;f.yMax+=m;}));return b};e.prototype.getObstacleMetrics=function(a){for(var c=0,d=0,b,e,g=a.length;g--;)b=a[g].xMax-a[g].xMin,e=a[g].yMax-a[g].yMin,c<b&&(c=b),d<e&&(d=e);return {maxHeight:d,maxWidth:c}};
    e.prototype.getAlgorithmStartDirection=function(a){var c="top"!==a.verticalAlign&&"bottom"!==a.verticalAlign;return "left"!==a.align&&"right"!==a.align?c?void 0:!1:c?!0:void 0};return e}();G.prototype.algorithms=h;v.Pathfinder=G;L(C.prototype,{getPathfinderAnchorPoint:function(a){var c=x(this);switch(a.align){case "right":var d="xMax";break;case "left":d="xMin";}switch(a.verticalAlign){case "top":var b="yMin";break;case "bottom":b="yMax";}return {x:d?c[d]:(c.xMin+c.xMax)/2,y:b?c[b]:(c.yMin+c.yMax)/2}},
    getRadiansToVector:function(a,c){var d;A(c)||(d=x(this))&&(c={x:(d.xMin+d.xMax)/2,y:(d.yMin+d.yMax)/2});return Math.atan2(c.y-a.y,a.x-c.x)},getMarkerVector:function(a,c,d){var b=2*Math.PI,e=x(this),g=e.xMax-e.xMin,m=e.yMax-e.yMin,h=Math.atan2(m,g),n=!1;g/=2;var u=m/2,q=e.xMin+g;e=e.yMin+u;for(var f=q,k=e,w=1,J=1;a<-Math.PI;)a+=b;for(;a>Math.PI;)a-=b;b=Math.tan(a);a>-h&&a<=h?(J=-1,n=!0):a>h&&a<=Math.PI-h?J=-1:a>Math.PI-h||a<=-(Math.PI-h)?(w=-1,n=!0):w=-1;n?(f+=w*g,k+=J*g*b):(f+=m/(2*b)*w,k+=J*u);d.x!==
    q&&(f=d.x);d.y!==e&&(k=d.y);return {x:f+c*Math.cos(a),y:k-c*Math.sin(a)}}});p.prototype.callbacks.push(function(a){!1!==a.options.connectors.enabled&&(r(a),this.pathfinder=new G(this),this.pathfinder.update(!0));});return G});H(b,"Series/Gantt/GanttSeries.js",[b["Core/Axis/Axis.js"],b["Core/Chart/Chart.js"],b["Series/Gantt/GanttPoint.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Axis/Tick.js"],b["Core/Utilities.js"],b["Core/Axis/TreeGridAxis.js"]],function(b,p,v,t,C,l,h){var x=this&&this.__extends||
    function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d;}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);};return d(b,a)};return function(b,a){function c(){this.constructor=b;}d(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c);}}(),d=t.series,r=t.seriesTypes.xrange,g=l.extend,A=l.isNumber,B=l.merge;h.compose(b,p,d,C);b=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.data=void 0;
    a.options=void 0;a.points=void 0;return a}x(b,d);b.prototype.drawPoint=function(a,c){var d=this.options,b=this.chart.renderer,e=a.shapeArgs,g=a.plotY,h=a.graphic,l=a.selected&&"select",p=d.stacking&&!d.borderRadius;if(a.options.milestone)if(A(g)&&null!==a.y&&!1!==a.visible){e=b.symbols.diamond(e.x||0,e.y||0,e.width||0,e.height||0);if(h)h[c]({d:e});else a.graphic=b.path(e).addClass(a.getClassName(),!0).add(a.group||this.group);this.chart.styledMode||a.graphic.attr(this.pointAttribs(a,l)).shadow(d.shadow,
    null,p);}else h&&(a.graphic=h.destroy());else r.prototype.drawPoint.call(this,a,c);};b.prototype.translatePoint=function(a){r.prototype.translatePoint.call(this,a);if(a.options.milestone){var c=a.shapeArgs;var d=c.height||0;a.shapeArgs={x:(c.x||0)-d/2,y:c.y,width:d,height:d};}};b.defaultOptions=B(r.defaultOptions,{grouping:!1,dataLabels:{enabled:!0},tooltip:{headerFormat:'<span style="font-size: 10px">{series.name}</span><br/>',pointFormat:null,pointFormatter:function(){var a=this.series,c=a.xAxis,d=
    a.tooltipOptions.dateTimeLabelFormats,b=c.options.startOfWeek,e=a.tooltipOptions,g=e.xDateFormat,h=this.options.milestone,l="<b>"+(this.name||this.yCategory)+"</b>";if(e.pointFormat)return this.tooltipFormatter(e.pointFormat);!g&&A(this.start)&&(g=a.chart.time.getDateFormat(c.closestPointRange,this.start,b,d||{}));c=a.chart.time.dateFormat(g,this.start);a=a.chart.time.dateFormat(g,this.end);l+="<br/>";return h?l+(c+"<br/>"):l+("Start: "+c+"<br/>End: ")+(a+"<br/>")}},connectors:{type:"simpleConnect",
    animation:{reversed:!0},startMarker:{enabled:!0,symbol:"arrow-filled",radius:4,fill:"#fa0",align:"left"},endMarker:{enabled:!1,align:"right"}}});return b}(r);g(b.prototype,{pointArrayMap:["start","end","y"],pointClass:v,setData:d.prototype.setData});t.registerSeriesType("gantt",b);return b});H(b,"Core/Chart/GanttChart.js",[b["Core/Chart/Chart.js"],b["Core/DefaultOptions.js"],b["Core/Utilities.js"]],function(b,p,v){var t=this&&this.__extends||function(){var d=function(b,g){d=Object.setPrototypeOf||
    {__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var g in b)b.hasOwnProperty(g)&&(d[g]=b[g]);};return d(b,g)};return function(b,g){function h(){this.constructor=b;}d(b,g);b.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h);}}(),C=p.getOptions,l=v.isArray,h=v.merge,x=v.splat;b=function(b){function d(){return null!==b&&b.apply(this,arguments)||this}t(d,b);d.prototype.init=function(d,r){var g=C(),p=d.xAxis,e=d.yAxis,a;d.xAxis=d.yAxis=void 0;var c=h(!0,{chart:{type:"gantt"},
    title:{text:null},legend:{enabled:!1},navigator:{series:{type:"gantt"},yAxis:{type:"category"}}},d,{isGantt:!0});d.xAxis=p;d.yAxis=e;c.xAxis=(l(d.xAxis)?d.xAxis:[d.xAxis||{},{}]).map(function(c,d){1===d&&(a=0);return h(g.xAxis,{grid:{enabled:!0},opposite:!0,linkedTo:a},c,{type:"datetime"})});c.yAxis=x(d.yAxis||{}).map(function(a){return h(g.yAxis,{grid:{enabled:!0},staticScale:50,reversed:!0,type:a.categories?a.type:"treegrid"},a)});b.prototype.init.call(this,c,r);};return d}(b);(function(d){d.ganttChart=
    function(b,g,h){return new d(b,g,h)};})(b||(b={}));return b});H(b,"Core/Axis/ScrollbarAxis.js",[b["Core/Utilities.js"]],function(b){var p=b.addEvent,v=b.defined,t=b.pick;return function(){function b(){}b.compose=function(l,h){if(-1===b.composed.indexOf(l))b.composed.push(l);else return l;var x=function(b){var d=t(b.options&&b.options.min,b.min),g=t(b.options&&b.options.max,b.max);return {axisMin:d,axisMax:g,scrollMin:v(b.dataMin)?Math.min(d,b.min,b.dataMin,t(b.threshold,Infinity)):d,scrollMax:v(b.dataMax)?
    Math.max(g,b.max,b.dataMax,t(b.threshold,-Infinity)):g}};p(l,"afterInit",function(){var b=this;b.options&&b.options.scrollbar&&b.options.scrollbar.enabled&&(b.options.scrollbar.vertical=!b.horiz,b.options.startOnTick=b.options.endOnTick=!1,b.scrollbar=new h(b.chart.renderer,b.options.scrollbar,b.chart),p(b.scrollbar,"changed",function(d){var g=x(b),h=g.axisMax,l=g.scrollMin,r=g.scrollMax-l;v(g.axisMin)&&v(h)&&(b.horiz&&!b.reversed||!b.horiz&&b.reversed?(g=l+r*this.to,l+=r*this.from):(g=l+r*(1-this.from),
    l+=r*(1-this.to)),this.shouldUpdateExtremes(d.DOMType)?b.setExtremes(l,g,!0,"mousemove"!==d.DOMType&&"touchmove"!==d.DOMType,d):this.setRange(this.from,this.to));}));});p(l,"afterRender",function(){var b=x(this),h=b.scrollMin,g=b.scrollMax;b=this.scrollbar;var l=this.axisTitleMargin+(this.titleOffset||0),p=this.chart.scrollbarsOffsets,t=this.options.margin||0;b&&(this.horiz?(this.opposite||(p[1]+=l),b.position(this.left,this.top+this.height+2+p[1]-(this.opposite?t:0),this.width,this.height),this.opposite||
    (p[1]+=t),l=1):(this.opposite&&(p[0]+=l),b.position(b.options.opposite?this.left+this.width+2+p[0]-(this.opposite?0:t):this.opposite?0:t,this.top,this.width,this.height),this.opposite&&(p[0]+=t),l=0),p[l]+=b.size+b.options.margin,isNaN(h)||isNaN(g)||!v(this.min)||!v(this.max)||this.min===this.max?b.setRange(0,1):(p=(this.min-h)/(g-h),h=(this.max-h)/(g-h),this.horiz&&!this.reversed||!this.horiz&&this.reversed?b.setRange(p,h):b.setRange(1-h,1-p)));});p(l,"afterGetOffset",function(){var b=this.scrollbar&&
    !this.scrollbar.options.opposite;b=this.horiz?2:b?3:1;var h=this.scrollbar;h&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[b]+=h.size+h.options.margin);});return l};b.composed=[];return b}()});H(b,"Core/ScrollbarDefaults.js",[b["Core/Globals.js"]],function(b){return {height:b.isTouchDevice?20:14,barBorderRadius:0,buttonBorderRadius:0,liveRedraw:void 0,margin:10,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:1,barBorderColor:"#cccccc",buttonArrowColor:"#333333",
    buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"#333333",trackBackgroundColor:"#f2f2f2",trackBorderColor:"#f2f2f2",trackBorderWidth:1}});H(b,"Core/Scrollbar.js",[b["Core/DefaultOptions.js"],b["Core/Globals.js"],b["Core/Axis/ScrollbarAxis.js"],b["Core/ScrollbarDefaults.js"],b["Core/Utilities.js"]],function(b,p,v,t,C){var l=b.defaultOptions,h=C.addEvent,x=C.correctFloat,d=C.defined,r=C.destroyObjectProperties,g=C.fireEvent,A=C.merge,B=C.pick,L=C.removeEvent;
    b=function(){function b(a,c,b){this._events=[];this.chart=void 0;this.from=this.chartY=this.chartX=0;this.scrollbar=this.renderer=this.options=this.group=void 0;this.scrollbarButtons=[];this.scrollbarGroup=void 0;this.scrollbarLeft=0;this.scrollbarRifles=void 0;this.scrollbarStrokeWidth=1;this.to=this.size=this.scrollbarTop=0;this.track=void 0;this.trackBorderWidth=1;this.userOptions=void 0;this.y=this.x=0;this.init(a,c,b);}b.compose=function(a){v.compose(a,b);};b.swapXY=function(a,c){c&&a.forEach(function(a){for(var c=
    a.length,b,d=0;d<c;d+=2)b=a[d+1],"number"===typeof b&&(a[d+1]=a[d+2],a[d+2]=b);});return a};b.prototype.addEvents=function(){var a=this.options.inverted?[1,0]:[0,1],c=this.scrollbarButtons,b=this.scrollbarGroup.element,d=this.track.element,e=this.mouseDownHandler.bind(this),g=this.mouseMoveHandler.bind(this),l=this.mouseUpHandler.bind(this);a=[[c[a[0]].element,"click",this.buttonToMinClick.bind(this)],[c[a[1]].element,"click",this.buttonToMaxClick.bind(this)],[d,"click",this.trackClick.bind(this)],
    [b,"mousedown",e],[b.ownerDocument,"mousemove",g],[b.ownerDocument,"mouseup",l]];p.hasTouch&&a.push([b,"touchstart",e],[b.ownerDocument,"touchmove",g],[b.ownerDocument,"touchend",l]);a.forEach(function(a){h.apply(null,a);});this._events=a;};b.prototype.buttonToMaxClick=function(a){var c=(this.to-this.from)*B(this.options.step,.2);this.updatePosition(this.from+c,this.to+c);g(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:a});};b.prototype.buttonToMinClick=function(a){var c=x(this.to-
    this.from)*B(this.options.step,.2);this.updatePosition(x(this.from-c),x(this.to-c));g(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:a});};b.prototype.cursorToScrollbarPosition=function(a){var c=this.options;c=c.minWidth>this.calculatedWidth?c.minWidth:0;return {chartX:(a.chartX-this.x-this.xOffset)/(this.barWidth-c),chartY:(a.chartY-this.y-this.yOffset)/(this.barWidth-c)}};b.prototype.destroy=function(){var a=this,c=a.chart.scroller;a.removeEvents();["track","scrollbarRifles",
    "scrollbar","scrollbarGroup","group"].forEach(function(c){a[c]&&a[c].destroy&&(a[c]=a[c].destroy());});c&&a===c.scrollbar&&(c.scrollbar=null,r(c.scrollbarButtons));};b.prototype.drawScrollbarButton=function(a){var c=this.renderer,d=this.scrollbarButtons,e=this.options,g=this.size,h=c.g().add(this.group);d.push(h);h=c.rect().addClass("highcharts-scrollbar-button").add(h);this.chart.styledMode||h.attr({stroke:e.buttonBorderColor,"stroke-width":e.buttonBorderWidth,fill:e.buttonBackgroundColor});h.attr(h.crisp({x:-.5,
    y:-.5,width:g+1,height:g+1,r:e.buttonBorderRadius},h.strokeWidth()));h=c.path(b.swapXY([["M",g/2+(a?-1:1),g/2-3],["L",g/2+(a?-1:1),g/2+3],["L",g/2+(a?2:-2),g/2]],e.vertical)).addClass("highcharts-scrollbar-arrow").add(d[a]);this.chart.styledMode||h.attr({fill:e.buttonArrowColor});};b.prototype.init=function(a,c,b){this.scrollbarButtons=[];this.renderer=a;this.userOptions=c;this.options=A(t,l.scrollbar,c);this.chart=b;this.size=B(this.options.size,this.options.height);c.enabled&&(this.render(),this.addEvents());};
    b.prototype.mouseDownHandler=function(a){a=this.chart.pointer.normalize(a);a=this.cursorToScrollbarPosition(a);this.chartX=a.chartX;this.chartY=a.chartY;this.initPositions=[this.from,this.to];this.grabbedCenter=!0;};b.prototype.mouseMoveHandler=function(a){var c=this.chart.pointer.normalize(a),b=this.options.vertical?"chartY":"chartX",d=this.initPositions||[];!this.grabbedCenter||a.touches&&0===a.touches[0][b]||(c=this.cursorToScrollbarPosition(c)[b],b=this[b],b=c-b,this.hasDragged=!0,this.updatePosition(d[0]+
    b,d[1]+b),this.hasDragged&&g(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:a.type,DOMEvent:a}));};b.prototype.mouseUpHandler=function(a){this.hasDragged&&g(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:a.type,DOMEvent:a});this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null;};b.prototype.position=function(a,c,b,d){var e=this.options.vertical,g=this.rendered?"animate":"attr",h=d,l=0;this.group.show();this.x=a;this.y=c+this.trackBorderWidth;this.width=
    b;this.height=d;this.xOffset=h;this.yOffset=l;e?(this.width=this.yOffset=b=l=this.size,this.xOffset=h=0,this.barWidth=d-2*b,this.x=a+=this.options.margin):(this.height=this.xOffset=d=h=this.size,this.barWidth=b-2*d,this.y+=this.options.margin);this.group[g]({translateX:a,translateY:this.y});this.track[g]({width:b,height:d});this.scrollbarButtons[1][g]({translateX:e?0:b-h,translateY:e?d-l:0});};b.prototype.removeEvents=function(){this._events.forEach(function(a){L.apply(null,a);});this._events.length=
    0;};b.prototype.render=function(){var a=this.renderer,c=this.options,d=this.size,e=this.chart.styledMode,g=a.g("scrollbar").attr({zIndex:c.zIndex}).hide().add();this.group=g;this.track=a.rect().addClass("highcharts-scrollbar-track").attr({x:0,r:c.trackBorderRadius||0,height:d,width:d}).add(g);e||this.track.attr({fill:c.trackBackgroundColor,stroke:c.trackBorderColor,"stroke-width":c.trackBorderWidth});this.trackBorderWidth=this.track.strokeWidth();this.track.attr({y:-this.trackBorderWidth%2/2});this.scrollbarGroup=
    a.g().add(g);this.scrollbar=a.rect().addClass("highcharts-scrollbar-thumb").attr({height:d,width:d,r:c.barBorderRadius||0}).add(this.scrollbarGroup);this.scrollbarRifles=a.path(b.swapXY([["M",-3,d/4],["L",-3,2*d/3],["M",0,d/4],["L",0,2*d/3],["M",3,d/4],["L",3,2*d/3]],c.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup);e||(this.scrollbar.attr({fill:c.barBackgroundColor,stroke:c.barBorderColor,"stroke-width":c.barBorderWidth}),this.scrollbarRifles.attr({stroke:c.rifleColor,
    "stroke-width":1}));this.scrollbarStrokeWidth=this.scrollbar.strokeWidth();this.scrollbarGroup.translate(-this.scrollbarStrokeWidth%2/2,-this.scrollbarStrokeWidth%2/2);this.drawScrollbarButton(0);this.drawScrollbarButton(1);};b.prototype.setRange=function(a,c){var b=this.options,e=b.vertical,g=b.minWidth,h=this.barWidth,l=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(d(h)){var r=h*Math.min(c,1);a=Math.max(a,0);var p=Math.ceil(h*a);this.calculatedWidth=
    r=x(r-p);r<g&&(p=(h-g+r)*a,r=g);g=Math.floor(p+this.xOffset+this.yOffset);h=r/2-.5;this.from=a;this.to=c;e?(this.scrollbarGroup[l]({translateY:g}),this.scrollbar[l]({height:r}),this.scrollbarRifles[l]({translateY:h}),this.scrollbarTop=g,this.scrollbarLeft=0):(this.scrollbarGroup[l]({translateX:g}),this.scrollbar[l]({width:r}),this.scrollbarRifles[l]({translateX:h}),this.scrollbarLeft=g,this.scrollbarTop=0);12>=r?this.scrollbarRifles.hide():this.scrollbarRifles.show();!1===b.showFull&&(0>=a&&1<=c?
    this.group.hide():this.group.show());this.rendered=!0;}};b.prototype.shouldUpdateExtremes=function(a){return B(this.options.liveRedraw,p.svg&&!p.isTouchDevice&&!this.chart.isBoosting)||"mouseup"===a||"touchend"===a||!d(a)};b.prototype.trackClick=function(a){var c=this.chart.pointer.normalize(a),b=this.to-this.from,d=this.y+this.scrollbarTop,e=this.x+this.scrollbarLeft;this.options.vertical&&c.chartY>d||!this.options.vertical&&c.chartX>e?this.updatePosition(this.from+b,this.to+b):this.updatePosition(this.from-
    b,this.to-b);g(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:a});};b.prototype.update=function(a){this.destroy();this.init(this.chart.renderer,A(!0,this.options,a),this.chart);};b.prototype.updatePosition=function(a,c){1<c&&(a=x(1-x(c-a)),c=1);0>a&&(c=x(c-a),a=0);this.from=a;this.to=c;};b.defaultOptions=t;return b}();l.scrollbar=A(!0,b.defaultOptions,l.scrollbar);return b});H(b,"Extensions/RangeSelector.js",[b["Core/Axis/Axis.js"],b["Core/Chart/Chart.js"],b["Core/Globals.js"],
    b["Core/DefaultOptions.js"],b["Core/Renderer/SVG/SVGElement.js"],b["Core/Utilities.js"]],function(b,p,v,t,C,l){function h(a){if(-1!==a.indexOf("%L"))return "text";var c="aAdewbBmoyY".split("").some(function(c){return -1!==a.indexOf("%"+c)}),b="HkIlMS".split("").some(function(c){return -1!==a.indexOf("%"+c)});return c&&b?"datetime-local":c?"date":b?"time":"text"}var x=t.defaultOptions,d=l.addEvent,r=l.createElement,g=l.css,A=l.defined,B=l.destroyObjectProperties,L=l.discardElement,e=l.extend,a=l.find,
    c=l.fireEvent,u=l.isNumber,E=l.merge,G=l.objectEach,m=l.pad,D=l.pick,H=l.pInt,M=l.splat;e(x,{rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%b %e, %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},
    inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#335cad",cursor:"pointer"},labelStyle:{color:"#666666"}}});e(x.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"});var F=function(){function a(c){this.buttons=void 0;this.buttonOptions=a.prototype.defaultButtons;this.initialButtonGroupWidth=0;this.options=void 0;this.chart=c;this.init(c);}a.prototype.clickButton=function(a,e){var n=this.chart,f=this.buttonOptions[a],k=n.xAxis[0],g=n.scroller&&
    n.scroller.getUnionExtremes()||k||{},h=g.dataMin,m=g.dataMax,l=k&&Math.round(Math.min(k.max,D(m,k.max))),y=f.type;g=f._range;var r,p=f.dataGrouping;if(null!==h&&null!==m){n.fixedRange=g;this.setSelected(a);p&&(this.forcedDataGrouping=!0,b.prototype.setDataGrouping.call(k||{chart:this.chart},p,!1),this.frozenStates=f.preserveDataGrouping);if("month"===y||"year"===y)if(k){y={range:f,max:l,chart:n,dataMin:h,dataMax:m};var t=k.minFromRange.call(y);u(y.newMax)&&(l=y.newMax);}else g=f;else if(g)t=Math.max(l-
    g,h),l=Math.min(t+g,m);else if("ytd"===y)if(k)"undefined"===typeof m&&(h=Number.MAX_VALUE,m=Number.MIN_VALUE,n.series.forEach(function(a){a=a.xData;h=Math.min(a[0],h);m=Math.max(a[a.length-1],m);}),e=!1),l=this.getYTDExtremes(m,h,n.time.useUTC),t=r=l.min,l=l.max;else{this.deferredYTDClick=a;return}else"all"===y&&k&&(n.navigator&&n.navigator.baseSeries[0]&&(n.navigator.baseSeries[0].xAxis.options.range=void 0),t=h,l=m);A(t)&&(t+=f._offsetMin);A(l)&&(l+=f._offsetMax);this.dropdown&&(this.dropdown.selectedIndex=
    a+1);if(k)k.setExtremes(t,l,D(e,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:f});else{var z=M(n.options.xAxis)[0];var v=z.range;z.range=g;var x=z.min;z.min=r;d(n,"load",function(){z.range=v;z.min=x;});}c(this,"afterBtnClick");}};a.prototype.setSelected=function(a){this.selected=this.options.selected=a;};a.prototype.init=function(a){var b=this,e=a.options.rangeSelector,f=e.buttons||b.defaultButtons.slice(),k=e.selected,n=function(){var a=b.minInput,f=b.maxInput;a&&a.blur&&c(a,"blur");
    f&&f.blur&&c(f,"blur");};b.chart=a;b.options=e;b.buttons=[];b.buttonOptions=f;this.eventsToUnbind=[];this.eventsToUnbind.push(d(a.container,"mousedown",n));this.eventsToUnbind.push(d(a,"resize",n));f.forEach(b.computeButtonRange);"undefined"!==typeof k&&f[k]&&this.clickButton(k,!1);this.eventsToUnbind.push(d(a,"load",function(){a.xAxis&&a.xAxis[0]&&d(a.xAxis[0],"setExtremes",function(f){this.max-this.min!==a.fixedRange&&"rangeSelectorButton"!==f.trigger&&"updatedData"!==f.trigger&&b.forcedDataGrouping&&
    !b.frozenStates&&this.setDataGrouping(!1,!1);});}));};a.prototype.updateButtonStates=function(){var a=this,b=this.chart,c=this.dropdown,f=b.xAxis[0],k=Math.round(f.max-f.min),d=!f.hasVisibleSeries,e=b.scroller&&b.scroller.getUnionExtremes()||f,g=e.dataMin,h=e.dataMax;b=a.getYTDExtremes(h,g,b.time.useUTC);var m=b.min,l=b.max,r=a.selected,p=u(r),t=a.options.allButtonsEnabled,z=a.buttons;a.buttonOptions.forEach(function(b,e){var n=b._range,q=b.type,w=b.count||1,y=z[e],J=0,P=b._offsetMax-b._offsetMin;b=
    e===r;var u=n>h-g,O=n<f.minRange,N=!1,R=!1;n=n===k;("month"===q||"year"===q)&&k+36E5>=864E5*{month:28,year:365}[q]*w-P&&k-36E5<=864E5*{month:31,year:366}[q]*w+P?n=!0:"ytd"===q?(n=l-m+P===k,N=!b):"all"===q&&(n=f.max-f.min>=h-g,R=!b&&p&&n);q=!t&&(u||O||R||d);w=b&&n||n&&!p&&!N||b&&a.frozenStates;q?J=3:w&&(p=!0,J=2);y.state!==J&&(y.setState(J),c&&(c.options[e+1].disabled=q,2===J&&(c.selectedIndex=e+1)),0===J&&r===e&&a.setSelected());});};a.prototype.computeButtonRange=function(a){var b=a.type,c=a.count||
    1,f={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5};if(f[b])a._range=f[b]*c;else if("month"===b||"year"===b)a._range=864E5*{month:30,year:365}[b]*c;a._offsetMin=D(a.offsetMin,0);a._offsetMax=D(a.offsetMax,0);a._range+=a._offsetMax-a._offsetMin;};a.prototype.getInputValue=function(a){a="min"===a?this.minInput:this.maxInput;var b=this.chart.options.rangeSelector,c=this.chart.time;return a?("text"===a.type&&b.inputDateParser||this.defaultInputDateParser)(a.value,c.useUTC,c):0};a.prototype.setInputValue=
    function(a,b){var c=this.options,f=this.chart.time,k="min"===a?this.minInput:this.maxInput;a="min"===a?this.minDateBox:this.maxDateBox;if(k){var d=k.getAttribute("data-hc-time");d=A(d)?Number(d):void 0;A(b)&&(A(d)&&k.setAttribute("data-hc-time-previous",d),k.setAttribute("data-hc-time",b),d=b);k.value=f.dateFormat(this.inputTypeFormats[k.type]||c.inputEditDateFormat,d);a&&a.attr({text:f.dateFormat(c.inputDateFormat,d)});}};a.prototype.setInputExtremes=function(a,b,c){if(a="min"===a?this.minInput:this.maxInput){var f=
    this.inputTypeFormats[a.type],k=this.chart.time;f&&(b=k.dateFormat(f,b),a.min!==b&&(a.min=b),c=k.dateFormat(f,c),a.max!==c&&(a.max=c));}};a.prototype.showInput=function(a){var b="min"===a?this.minDateBox:this.maxDateBox;if((a="min"===a?this.minInput:this.maxInput)&&b&&this.inputGroup){var c="text"===a.type,f=this.inputGroup,k=f.translateX;f=f.translateY;var d=this.options.inputBoxWidth;g(a,{width:c?b.width+(d?-2:20)+"px":"auto",height:c?b.height-2+"px":"auto",border:"2px solid silver"});c&&d?g(a,{left:k+
    b.x+"px",top:f+"px"}):g(a,{left:Math.min(Math.round(b.x+k-(a.offsetWidth-b.width)/2),this.chart.chartWidth-a.offsetWidth)+"px",top:f-(a.offsetHeight-b.height)/2+"px"});}};a.prototype.hideInput=function(a){(a="min"===a?this.minInput:this.maxInput)&&g(a,{top:"-9999em",border:0,width:"1px",height:"1px"});};a.prototype.defaultInputDateParser=function(a,b,c){var f=a.split("/").join("-").split(" ").join("T");-1===f.indexOf("T")&&(f+="T00:00");if(b)f+="Z";else{var k;if(k=v.isSafari)k=f,k=!(6<k.length&&(k.lastIndexOf("-")===
    k.length-6||k.lastIndexOf("+")===k.length-6));k&&(k=(new Date(f)).getTimezoneOffset()/60,f+=0>=k?"+"+m(-k)+":00":"-"+m(k)+":00");}f=Date.parse(f);u(f)||(a=a.split("-"),f=Date.UTC(H(a[0]),H(a[1])-1,H(a[2])));c&&b&&u(f)&&(f+=c.getTimezoneOffset(f));return f};a.prototype.drawInput=function(a){function b(){var b=d.getInputValue(a),f=c.xAxis[0],k=c.scroller&&c.scroller.xAxis?c.scroller.xAxis:f,e=k.dataMin;k=k.dataMax;var g=d.maxInput,h=d.minInput;b!==Number(t.getAttribute("data-hc-time-previous"))&&u(b)&&
    (t.setAttribute("data-hc-time-previous",b),p&&g&&u(e)?b>Number(g.getAttribute("data-hc-time"))?b=void 0:b<e&&(b=e):h&&u(k)&&(b<Number(h.getAttribute("data-hc-time"))?b=void 0:b>k&&(b=k)),"undefined"!==typeof b&&f.setExtremes(p?b:f.min,p?f.max:b,void 0,void 0,{trigger:"rangeSelectorInput"}));}var c=this.chart,f=this.div,k=this.inputGroup,d=this,n=c.renderer.style||{},m=c.renderer,l=c.options.rangeSelector,p="min"===a,P=x.lang[p?"rangeSelectorFrom":"rangeSelectorTo"]||"";P=m.label(P,0).addClass("highcharts-range-label").attr({padding:P?
    2:0,height:P?l.inputBoxHeight:0}).add(k);m=m.label("",0).addClass("highcharts-range-input").attr({padding:2,width:l.inputBoxWidth,height:l.inputBoxHeight,"text-align":"center"}).on("click",function(){d.showInput(a);d[a+"Input"].focus();});c.styledMode||m.attr({stroke:l.inputBoxBorderColor,"stroke-width":1});m.add(k);var t=r("input",{name:a,className:"highcharts-range-selector"},void 0,f);t.setAttribute("type",h(l.inputDateFormat||"%b %e, %Y"));c.styledMode||(P.css(E(n,l.labelStyle)),m.css(E({color:"#333333"},
    n,l.inputStyle)),g(t,e({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:n.fontSize,fontFamily:n.fontFamily,top:"-9999em"},l.inputStyle)));t.onfocus=function(){d.showInput(a);};t.onblur=function(){t===v.doc.activeElement&&b();d.hideInput(a);d.setInputValue(a);t.blur();};var z=!1;t.onchange=function(){z||(b(),d.hideInput(a),t.blur());};t.onkeypress=function(a){13===a.keyCode&&b();};t.onkeydown=function(a){z=!0;38!==a.keyCode&&
    40!==a.keyCode||b();};t.onkeyup=function(){z=!1;};return {dateBox:m,input:t,label:P}};a.prototype.getPosition=function(){var a=this.chart,b=a.options.rangeSelector;a="top"===b.verticalAlign?a.plotTop-a.axisOffset[0]:0;return {buttonTop:a+b.buttonPosition.y,inputTop:a+b.inputPosition.y-10}};a.prototype.getYTDExtremes=function(a,b,c){var f=this.chart.time,k=new f.Date(a),d=f.get("FullYear",k);c=c?f.Date.UTC(d,0,1):+new f.Date(d,0,1);b=Math.max(b,c);k=k.getTime();return {max:Math.min(a||k,k),min:b}};a.prototype.render=
    function(a,b){var c=this.chart,f=c.renderer,k=c.container,d=c.options,e=d.rangeSelector,g=D(d.chart.style&&d.chart.style.zIndex,0)+1;d=e.inputEnabled;if(!1!==e.enabled){this.rendered||(this.group=f.g("range-selector-group").attr({zIndex:7}).add(),this.div=r("div",void 0,{position:"relative",height:0,zIndex:g}),this.buttonOptions.length&&this.renderButtons(),k.parentNode&&k.parentNode.insertBefore(this.div,k),d&&(this.inputGroup=f.g("input-group").add(this.group),f=this.drawInput("min"),this.minDateBox=
    f.dateBox,this.minLabel=f.label,this.minInput=f.input,f=this.drawInput("max"),this.maxDateBox=f.dateBox,this.maxLabel=f.label,this.maxInput=f.input));if(d&&(this.setInputValue("min",a),this.setInputValue("max",b),a=c.scroller&&c.scroller.getUnionExtremes()||c.xAxis[0]||{},A(a.dataMin)&&A(a.dataMax)&&(c=c.xAxis[0].minRange||0,this.setInputExtremes("min",a.dataMin,Math.min(a.dataMax,this.getInputValue("max"))-c),this.setInputExtremes("max",Math.max(a.dataMin,this.getInputValue("min"))+c,a.dataMax)),
    this.inputGroup)){var h=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(function(a){if(a){var b=a.getBBox().width;b&&(a.attr({x:h}),h+=b+e.inputSpacing);}});}this.alignElements();this.rendered=!0;}};a.prototype.renderButtons=function(){var a=this,b=this.buttons,e=this.options,f=x.lang,k=this.chart.renderer,g=E(e.buttonTheme),h=g&&g.states,m=g.width||28;delete g.width;delete g.states;this.buttonGroup=k.g("range-selector-buttons").add(this.group);var l=this.dropdown=r("select",
    void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:.0001},this.div);d(l,"touchstart",function(){l.style.fontSize="16px";});[[v.isMS?"mouseover":"mouseenter"],[v.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(function(f){var k=f[0],e=f[1];d(l,k,function(){var f=b[a.currentButtonIndex()];f&&c(f.element,e||k);});});this.zoomText=k.label(f&&f.rangeSelectorZoom||"",0).attr({padding:e.buttonTheme.padding,height:e.buttonTheme.height,paddingLeft:0,
    paddingRight:0}).add(this.buttonGroup);this.chart.styledMode||(this.zoomText.css(e.labelStyle),g["stroke-width"]=D(g["stroke-width"],0));r("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,l);this.buttonOptions.forEach(function(c,f){r("option",{textContent:c.title||c.text},void 0,l);b[f]=k.button(c.text,0,0,function(b){var k=c.events&&c.events.click,d;k&&(d=k.call(c,b));!1!==d&&a.clickButton(f);a.isActive=!0;},g,h&&h.hover,h&&h.select,h&&h.disabled).attr({"text-align":"center",width:m}).add(a.buttonGroup);
    c.title&&b[f].attr("title",c.title);});};a.prototype.alignElements=function(){var a=this,b=this.buttonGroup,c=this.buttons,f=this.chart,k=this.group,d=this.inputGroup,e=this.options,g=this.zoomText,h=f.options,m=h.exporting&&!1!==h.exporting.enabled&&h.navigation&&h.navigation.buttonOptions;h=e.buttonPosition;var l=e.inputPosition,r=e.verticalAlign,p=function(b,c){return m&&a.titleCollision(f)&&"top"===r&&"right"===c.align&&c.y-b.getBBox().height-12<(m.y||0)+(m.height||0)+f.spacing[0]?-40:0},t=f.plotLeft;
    if(k&&h&&l){var u=h.x-f.spacing[3];if(b){this.positionButtons();if(!this.initialButtonGroupWidth){var z=0;g&&(z+=g.getBBox().width+5);c.forEach(function(a,b){z+=a.width;b!==c.length-1&&(z+=e.buttonSpacing);});this.initialButtonGroupWidth=z;}t-=f.spacing[3];this.updateButtonStates();g=p(b,h);this.alignButtonGroup(g);k.placed=b.placed=f.hasLoaded;}b=0;d&&(b=p(d,l),"left"===l.align?u=t:"right"===l.align&&(u=-Math.max(f.axisOffset[1],-b)),d.align({y:l.y,width:d.getBBox().width,align:l.align,x:l.x+u-2},!0,
    f.spacingBox),d.placed=f.hasLoaded);this.handleCollision(b);k.align({verticalAlign:r},!0,f.spacingBox);d=k.alignAttr.translateY;b=k.getBBox().height+20;p=0;"bottom"===r&&(p=(p=f.legend&&f.legend.options)&&"bottom"===p.verticalAlign&&p.enabled&&!p.floating?f.legend.legendHeight+D(p.margin,10):0,b=b+p-20,p=d-b-(e.floating?0:e.y)-(f.titleOffset?f.titleOffset[2]:0)-10);if("top"===r)e.floating&&(p=0),f.titleOffset&&f.titleOffset[0]&&(p=f.titleOffset[0]),p+=f.margin[0]-f.spacing[0]||0;else if("middle"===
    r)if(l.y===h.y)p=d;else if(l.y||h.y)p=0>l.y||0>h.y?p-Math.min(l.y,h.y):d-b;k.translate(e.x,e.y+Math.floor(p));h=this.minInput;l=this.maxInput;d=this.dropdown;e.inputEnabled&&h&&l&&(h.style.marginTop=k.translateY+"px",l.style.marginTop=k.translateY+"px");d&&(d.style.marginTop=k.translateY+"px");}};a.prototype.alignButtonGroup=function(a,b){var c=this.chart,f=this.buttonGroup,d=this.options.buttonPosition,e=c.plotLeft-c.spacing[3],g=d.x-c.spacing[3];"right"===d.align?g+=a-e:"center"===d.align&&(g-=e/
    2);f&&f.align({y:d.y,width:D(b,this.initialButtonGroupWidth),align:d.align,x:g},!0,c.spacingBox);};a.prototype.positionButtons=function(){var a=this.buttons,b=this.chart,c=this.options,f=this.zoomText,d=b.hasLoaded?"animate":"attr",e=c.buttonPosition,g=b.plotLeft,h=g;f&&"hidden"!==f.visibility&&(f[d]({x:D(g+e.x,g)}),h+=e.x+f.getBBox().width+5);this.buttonOptions.forEach(function(b,f){if("hidden"!==a[f].visibility)a[f][d]({x:h}),h+=a[f].width+c.buttonSpacing;else a[f][d]({x:g});});};a.prototype.handleCollision=
    function(a){var b=this,c=this.chart,f=this.buttonGroup,d=this.inputGroup,e=this.options,g=e.buttonPosition,h=e.dropdown,n=e.inputPosition;e=function(){var a=0;b.buttons.forEach(function(b){b=b.getBBox();b.width>a&&(a=b.width);});return a};var l=function(b){if(d&&f){var c=d.alignAttr.translateX+d.alignOptions.x-a+d.getBBox().x+2,k=d.alignOptions.width,e=f.alignAttr.translateX+f.getBBox().x;return e+b>c&&c+k>e&&g.y<n.y+d.getBBox().height}return !1},m=function(){d&&f&&d.attr({translateX:d.alignAttr.translateX+
    (c.axisOffset[1]>=-a?0:-a),translateY:d.alignAttr.translateY+f.getBBox().height+10});};if(f){if("always"===h){this.collapseButtons(a);l(e())&&m();return}"never"===h&&this.expandButtons();}d&&f?n.align===g.align||l(this.initialButtonGroupWidth+20)?"responsive"===h?(this.collapseButtons(a),l(e())&&m()):m():"responsive"===h&&this.expandButtons():f&&"responsive"===h&&(this.initialButtonGroupWidth>c.plotWidth?this.collapseButtons(a):this.expandButtons());};a.prototype.collapseButtons=function(a){var b=this.buttons,
    c=this.buttonOptions,f=this.chart,d=this.dropdown,e=this.options,g=this.zoomText,h=f.userOptions.rangeSelector&&f.userOptions.rangeSelector.buttonTheme||{},n=function(a){return {text:a?a+" \u25be":"\u25be",width:"auto",paddingLeft:D(e.buttonTheme.paddingLeft,h.padding,8),paddingRight:D(e.buttonTheme.paddingRight,h.padding,8)}};g&&g.hide();var l=!1;c.forEach(function(a,c){c=b[c];2!==c.state?c.hide():(c.show(),c.attr(n(a.text)),l=!0);});l||(d&&(d.selectedIndex=0),b[0].show(),b[0].attr(n(this.zoomText&&
    this.zoomText.textStr)));c=e.buttonPosition.align;this.positionButtons();"right"!==c&&"center"!==c||this.alignButtonGroup(a,b[this.currentButtonIndex()].getBBox().width);this.showDropdown();};a.prototype.expandButtons=function(){var a=this.buttons,b=this.buttonOptions,c=this.options,f=this.zoomText;this.hideDropdown();f&&f.show();b.forEach(function(b,f){f=a[f];f.show();f.attr({text:b.text,width:c.buttonTheme.width||28,paddingLeft:D(c.buttonTheme.paddingLeft,"unset"),paddingRight:D(c.buttonTheme.paddingRight,
    "unset")});2>f.state&&f.setState(0);});this.positionButtons();};a.prototype.currentButtonIndex=function(){var a=this.dropdown;return a&&0<a.selectedIndex?a.selectedIndex-1:0};a.prototype.showDropdown=function(){var a=this.buttonGroup,b=this.buttons,c=this.chart,f=this.dropdown;if(a&&f){var d=a.translateX;a=a.translateY;b=b[this.currentButtonIndex()].getBBox();g(f,{left:c.plotLeft+d+"px",top:a+.5+"px",width:b.width+"px",height:b.height+"px"});this.hasVisibleDropdown=!0;}};a.prototype.hideDropdown=function(){var a=
    this.dropdown;a&&(g(a,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1);};a.prototype.getHeight=function(){var a=this.options,b=this.group,c=a.y,f=a.buttonPosition.y,d=a.inputPosition.y;if(a.height)return a.height;this.alignElements();a=b?b.getBBox(!0).height+13+c:0;b=Math.min(d,f);if(0>d&&0>f||0<d&&0<f)a+=Math.abs(b);return a};a.prototype.titleCollision=function(a){return !(a.options.title.text||a.options.subtitle.text)};a.prototype.update=function(a){var b=this.chart;E(!0,b.options.rangeSelector,
    a);this.destroy();this.init(b);this.render();};a.prototype.destroy=function(){var b=this,c=b.minInput,d=b.maxInput;b.eventsToUnbind&&(b.eventsToUnbind.forEach(function(a){return a()}),b.eventsToUnbind=void 0);B(b.buttons);c&&(c.onfocus=c.onblur=c.onchange=null);d&&(d.onfocus=d.onblur=d.onchange=null);G(b,function(c,d){c&&"chart"!==d&&(c instanceof C?c.destroy():c instanceof window.HTMLElement&&L(c));c!==a.prototype[d]&&(b[d]=null);},this);};return a}();F.prototype.defaultButtons=[{type:"month",count:1,
    text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}];F.prototype.inputTypeFormats={"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"};b.prototype.minFromRange=function(){var a=this.range,b=a.type,c=this.max,d=this.chart.time,f=function(a,c){var f="year"===
    b?"FullYear":"Month",e=new d.Date(a),k=d.get(f,e);d.set(f,e,k+c);k===d.get(f,e)&&d.set("Date",e,0);return e.getTime()-a};if(u(a)){var e=c-a;var g=a;}else e=c+f(c,-a.count),this.chart&&(this.chart.fixedRange=c-e);var h=D(this.dataMin,Number.MIN_VALUE);u(e)||(e=h);e<=h&&(e=h,"undefined"===typeof g&&(g=f(e,a.count)),this.newMax=Math.min(e+g,this.dataMax));u(c)||(e=void 0);return e};if(!v.RangeSelector){var K=[],I=function(b){function c(){g&&(e=b.xAxis[0].getExtremes(),f=b.legend,h=g&&g.options.verticalAlign,
    u(e.min)&&g.render(e.min,e.max),f.display&&"top"===h&&h===f.options.verticalAlign&&(k=E(b.spacingBox),k.y="vertical"===f.options.layout?b.plotTop:k.y+g.getHeight(),f.group.placed=!1,f.align(k)));}var e,g=b.rangeSelector,f,k,h;g&&(a(K,function(a){return a[0]===b})||K.push([b,[d(b.xAxis[0],"afterSetExtremes",function(a){g&&g.render(a.min,a.max);}),d(b,"redraw",c)]]),c());};d(p,"afterGetContainer",function(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new F(this));});
    d(p,"beforeRender",function(){var a=this.axes,b=this.rangeSelector;b&&(u(b.deferredYTDClick)&&(b.clickButton(b.deferredYTDClick),delete b.deferredYTDClick),a.forEach(function(a){a.updateNames();a.setScale();}),this.getAxisMargins(),b.render(),a=b.options.verticalAlign,b.options.floating||("bottom"===a?this.extraBottomMargin=!0:"middle"!==a&&(this.extraTopMargin=!0)));});d(p,"update",function(a){var b=a.options.rangeSelector;a=this.rangeSelector;var c=this.extraBottomMargin,d=this.extraTopMargin;b&&
    b.enabled&&!A(a)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=a=new F(this));this.extraTopMargin=this.extraBottomMargin=!1;a&&(I(this),b=b&&b.verticalAlign||a.options&&a.options.verticalAlign,a.options.floating||("bottom"===b?this.extraBottomMargin=!0:"middle"!==b&&(this.extraTopMargin=!0)),this.extraBottomMargin!==c||this.extraTopMargin!==d)&&(this.isDirtyBox=!0);});d(p,"render",function(){var a=this.rangeSelector;a&&!a.options.floating&&(a.render(),a=a.options.verticalAlign,
    "bottom"===a?this.extraBottomMargin=!0:"middle"!==a&&(this.extraTopMargin=!0));});d(p,"getMargins",function(){var a=this.rangeSelector;a&&(a=a.getHeight(),this.extraTopMargin&&(this.plotTop+=a),this.extraBottomMargin&&(this.marginBottom+=a));});p.prototype.callbacks.push(I);d(p,"destroy",function(){for(var a=0;a<K.length;a++){var b=K[a];if(b[0]===this){b[1].forEach(function(a){return a()});K.splice(a,1);break}}});v.RangeSelector=F;}return F});H(b,"Core/Axis/NavigatorAxis.js",[b["Core/Globals.js"],b["Core/Utilities.js"]],
    function(b,p){var v=b.isTouchDevice,t=p.addEvent,C=p.correctFloat,l=p.defined,h=p.isNumber,x=p.pick,d=function(){function b(b){this.axis=b;}b.prototype.destroy=function(){this.axis=void 0;};b.prototype.toFixedRange=function(b,d,p,r){var e=this.axis,a=e.chart;a=a&&a.fixedRange;var c=(e.pointRange||0)/2;b=x(p,e.translate(b,!0,!e.horiz));d=x(r,e.translate(d,!0,!e.horiz));e=a&&(d-b)/a;l(p)||(b=C(b+c));l(r)||(d=C(d-c));.7<e&&1.3>e&&(r?b=d-a:d=b+a);h(b)&&h(d)||(b=d=void 0);return {min:b,max:d}};return b}();
    return function(){function b(){}b.compose=function(b){b.keepProps.push("navigatorAxis");t(b,"init",function(){this.navigatorAxis||(this.navigatorAxis=new d(this));});t(b,"zoom",function(b){var d=this.chart.options,g=d.navigator,e=this.navigatorAxis,a=d.chart.pinchType,c=d.rangeSelector;d=d.chart.zoomType;this.isXAxis&&(g&&g.enabled||c&&c.enabled)&&("y"===d?b.zoomed=!1:(!v&&"xy"===d||v&&"xy"===a)&&this.options.range&&(g=e.previousZoom,l(b.newMin)?e.previousZoom=[this.min,this.max]:g&&(b.newMin=g[0],
    b.newMax=g[1],e.previousZoom=void 0)));"undefined"!==typeof b.zoomed&&b.preventDefault();});};b.AdditionsClass=d;return b}()});H(b,"Core/Navigator.js",[b["Core/Axis/Axis.js"],b["Core/Chart/Chart.js"],b["Core/Color/Color.js"],b["Core/Globals.js"],b["Core/Axis/NavigatorAxis.js"],b["Core/DefaultOptions.js"],b["Core/Renderer/RendererRegistry.js"],b["Core/Scrollbar.js"],b["Core/Series/Series.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,p,v,t,C,l,h,x,d,r,g){v=v.parse;var A=t.hasTouch,
    B=t.isTouchDevice,H=l.defaultOptions,e=g.addEvent,a=g.clamp,c=g.correctFloat,u=g.defined,E=g.destroyObjectProperties,G=g.erase,m=g.extend,D=g.find,Q=g.isArray,M=g.isNumber,F=g.merge,K=g.pick,I=g.removeEvent,z=g.splat,n=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b=[].filter.call(b,M);if(b.length)return Math[a].apply(0,b)};l="undefined"===typeof r.seriesTypes.areaspline?"line":"areaspline";m(H,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle",
    "navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:v("#6685c2").setOpacity(.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:l,fillOpacity:.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",
    [1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,
    endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}});h.getRendererType().prototype.symbols["navigator-handle"]=function(a,b,c,d,e){a=(e&&e.width||0)/2;b=Math.round(a/3)+.5;e=e&&e.height||0;return [["M",-a-1,.5],["L",a,.5],["L",a,e+.5],["L",-a-1,e+.5],["L",-a-1,.5],["M",-b,4],["L",-b,e-3],["M",b-1,4],["L",b-1,e-3]]};var y=function(){function d(a){this.zoomedMin=this.zoomedMax=this.yAxis=this.xAxis=this.top=this.size=this.shades=this.rendered=
    this.range=this.outlineHeight=this.outline=this.opposite=this.navigatorSize=this.navigatorSeries=this.navigatorOptions=this.navigatorGroup=this.navigatorEnabled=this.left=this.height=this.handles=this.chart=this.baseSeries=void 0;this.init(a);}d.prototype.drawHandle=function(a,b,c,d){var f=this.navigatorOptions.handles.height;this.handles[b][d](c?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(a,10)+.5-f)}:{translateX:Math.round(this.left+parseInt(a,10)),translateY:Math.round(this.top+
    this.height/2-f/2-1)});};d.prototype.drawOutline=function(a,b,c,d){var f=this.navigatorOptions.maskInside,e=this.outline.strokeWidth(),k=e/2,g=e%2/2;e=this.outlineHeight;var h=this.scrollbarHeight||0,l=this.size,m=this.left-h,n=this.top;c?(m-=k,c=n+b+g,b=n+a+g,g=[["M",m+e,n-h-g],["L",m+e,c],["L",m,c],["L",m,b],["L",m+e,b],["L",m+e,n+l+h]],f&&g.push(["M",m+e,c-k],["L",m+e,b+k])):(a+=m+h-g,b+=m+h-g,n+=k,g=[["M",m,n],["L",a,n],["L",a,n+e],["L",b,n+e],["L",b,n],["L",m+l+2*h,n]],f&&g.push(["M",a-k,n],["L",
    b+k,n]));this.outline[d]({d:g});};d.prototype.drawMasks=function(a,b,c,d){var f=this.left,e=this.top,k=this.height;if(c){var g=[f,f,f];var h=[e,e+a,e+b];var m=[k,k,k];var l=[a,b-a,this.size-b];}else g=[f,f+a,f+b],h=[e,e,e],m=[a,b-a,this.size-b],l=[k,k,k];this.shades.forEach(function(a,b){a[d]({x:g[b],y:h[b],width:m[b],height:l[b]});});};d.prototype.renderElements=function(){var a=this,b=a.navigatorOptions,c=b.maskInside,d=a.chart,e=d.renderer,g,h={cursor:d.inverted?"ns-resize":"ew-resize"};a.navigatorGroup=
    g=e.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();[!c,c,!c].forEach(function(c,f){var k=e.rect().addClass("highcharts-navigator-mask"+(1===f?"-inside":"-outside")).add(g);d.styledMode||(k.attr({fill:c?b.maskFill:"rgba(0,0,0,0)"}),1===f&&k.css(h));a.shades[f]=k;});a.outline=e.path().addClass("highcharts-navigator-outline").add(g);d.styledMode||a.outline.attr({"stroke-width":b.outlineWidth,stroke:b.outlineColor});b.handles.enabled&&[0,1].forEach(function(c){b.handles.inverted=d.inverted;
    a.handles[c]=e.symbol(b.handles.symbols[c],-b.handles.width/2-1,0,b.handles.width,b.handles.height,b.handles);a.handles[c].attr({zIndex:7-c}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][c]).add(g);if(!d.styledMode){var f=b.handles;a.handles[c].attr({fill:f.backgroundColor,stroke:f.borderColor,"stroke-width":f.lineWidth}).css(h);}});};d.prototype.update=function(a){(this.series||[]).forEach(function(a){a.baseSeries&&delete a.baseSeries.navigatorSeries;});this.destroy();
    F(!0,this.chart.options.navigator,this.options,a);this.init(this.chart);};d.prototype.render=function(b,d,e,g){var f=this.chart,k=this.scrollbarHeight,h,m=this.xAxis,l=m.pointRange||0;var n=m.navigatorAxis.fake?f.xAxis[0]:m;var q=this.navigatorEnabled,p,w=this.rendered;var r=f.inverted;var t=f.xAxis[0].minRange,v=f.xAxis[0].options.maxRange;if(!this.hasDragged||u(e)){b=c(b-l/2);d=c(d+l/2);if(!M(b)||!M(d))if(w)e=0,g=K(m.width,n.width);else return;this.left=K(m.left,f.plotLeft+k+(r?f.plotWidth:0));this.size=
    p=h=K(m.len,(r?f.plotHeight:f.plotWidth)-2*k);f=r?k:h+2*k;e=K(e,m.toPixels(b,!0));g=K(g,m.toPixels(d,!0));M(e)&&Infinity!==Math.abs(e)||(e=0,g=f);b=m.toValue(e,!0);d=m.toValue(g,!0);var J=Math.abs(c(d-b));J<t?this.grabbedLeft?e=m.toPixels(d-t-l,!0):this.grabbedRight&&(g=m.toPixels(b+t+l,!0)):u(v)&&c(J-l)>v&&(this.grabbedLeft?e=m.toPixels(d-v-l,!0):this.grabbedRight&&(g=m.toPixels(b+v+l,!0)));this.zoomedMax=a(Math.max(e,g),0,p);this.zoomedMin=a(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(e,
    g),0,p);this.range=this.zoomedMax-this.zoomedMin;p=Math.round(this.zoomedMax);e=Math.round(this.zoomedMin);q&&(this.navigatorGroup.attr({visibility:"inherit"}),w=w&&!this.hasDragged?"animate":"attr",this.drawMasks(e,p,r,w),this.drawOutline(e,p,r,w),this.navigatorOptions.handles.enabled&&(this.drawHandle(e,0,r,w),this.drawHandle(p,1,r,w)));this.scrollbar&&(r?(r=this.top-k,n=this.left-k+(q||!n.opposite?0:(n.titleOffset||0)+n.axisTitleMargin),k=h+2*k):(r=this.top+(q?this.height:-k),n=this.left-k),this.scrollbar.position(n,
    r,f,k),this.scrollbar.setRange(this.zoomedMin/(h||1),this.zoomedMax/(h||1)));this.rendered=!0;}};d.prototype.addMouseEvents=function(){var a=this,b=a.chart,c=b.container,d=[],g,h;a.mouseMoveHandler=g=function(b){a.onMouseMove(b);};a.mouseUpHandler=h=function(b){a.onMouseUp(b);};d=a.getPartsEvents("mousedown");d.push(e(b.renderTo,"mousemove",g),e(c.ownerDocument,"mouseup",h));A&&(d.push(e(b.renderTo,"touchmove",g),e(c.ownerDocument,"touchend",h)),d.concat(a.getPartsEvents("touchstart")));a.eventsToUnbind=
    d;a.series&&a.series[0]&&d.push(e(a.series[0].xAxis,"foundExtremes",function(){b.navigator.modifyNavigatorAxisExtremes();}));};d.prototype.getPartsEvents=function(a){var b=this,c=[];["shades","handles"].forEach(function(f){b[f].forEach(function(d,k){c.push(e(d.element,a,function(a){b[f+"Mousedown"](a,k);}));});});return c};d.prototype.shadesMousedown=function(a,b){a=this.chart.pointer.normalize(a);var c=this.chart,d=this.xAxis,f=this.zoomedMin,e=this.left,k=this.size,g=this.range,h=a.chartX;c.inverted&&
    (h=a.chartY,e=this.top);if(1===b)this.grabbedCenter=h,this.fixedWidth=g,this.dragOffset=h-f;else{a=h-e-g/2;if(0===b)a=Math.max(0,a);else if(2===b&&a+g>=k)if(a=k-g,this.reversedExtremes){a-=g;var m=this.getUnionExtremes().dataMin;}else var l=this.getUnionExtremes().dataMax;a!==f&&(this.fixedWidth=g,b=d.navigatorAxis.toFixedRange(a,a+g,m,l),u(b.min)&&c.xAxis[0].setExtremes(Math.min(b.min,b.max),Math.max(b.min,b.max),!0,null,{trigger:"navigator"}));}};d.prototype.handlesMousedown=function(a,b){this.chart.pointer.normalize(a);
    a=this.chart;var c=a.xAxis[0],d=this.reversedExtremes;0===b?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=d?c.min:c.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=d?c.max:c.min);a.fixedRange=null;};d.prototype.onMouseMove=function(a){var b=this,c=b.chart,d=b.left,f=b.navigatorSize,e=b.range,g=b.dragOffset,h=c.inverted;a.touches&&0===a.touches[0].pageX||(a=c.pointer.normalize(a),c=a.chartX,h&&(d=b.top,c=a.chartY),b.grabbedLeft?(b.hasDragged=
    !0,b.render(0,0,c-d,b.otherHandlePos)):b.grabbedRight?(b.hasDragged=!0,b.render(0,0,b.otherHandlePos,c-d)):b.grabbedCenter&&(b.hasDragged=!0,c<g?c=g:c>f+g-e&&(c=f+g-e),b.render(0,0,c-g,c-g+e)),b.hasDragged&&b.scrollbar&&K(b.scrollbar.options.liveRedraw,t.svg&&!B&&!this.chart.isBoosting)&&(a.DOMType=a.type,setTimeout(function(){b.onMouseUp(a);},0)));};d.prototype.onMouseUp=function(a){var b=this.chart,c=this.xAxis,d=this.scrollbar,f=a.DOMEvent||a,e=b.inverted,g=this.rendered&&!this.hasDragged?"animate":
    "attr";if(this.hasDragged&&(!d||!d.hasDragged)||"scrollbar"===a.trigger){d=this.getUnionExtremes();if(this.zoomedMin===this.otherHandlePos)var h=this.fixedExtreme;else if(this.zoomedMax===this.otherHandlePos)var m=this.fixedExtreme;this.zoomedMax===this.size&&(m=this.reversedExtremes?d.dataMin:d.dataMax);0===this.zoomedMin&&(h=this.reversedExtremes?d.dataMax:d.dataMin);c=c.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,h,m);u(c.min)&&b.xAxis[0].setExtremes(Math.min(c.min,c.max),Math.max(c.min,
    c.max),!0,this.hasDragged?!1:null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:f});}"mousemove"!==a.DOMType&&"touchmove"!==a.DOMType&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null);this.navigatorEnabled&&M(this.zoomedMin)&&M(this.zoomedMax)&&(b=Math.round(this.zoomedMin),a=Math.round(this.zoomedMax),this.shades&&this.drawMasks(b,a,e,g),this.outline&&this.drawOutline(b,a,e,g),this.navigatorOptions.handles.enabled&&
    Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(b,0,e,g),this.drawHandle(a,1,e,g)));};d.prototype.removeEvents=function(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(a){a();}),this.eventsToUnbind=void 0);this.removeBaseSeriesEvents();};d.prototype.removeBaseSeriesEvents=function(){var a=this.baseSeries||[];this.navigatorEnabled&&a[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&a.forEach(function(a){I(a,"updatedData",this.updatedDataHandler);},this),a[0].xAxis&&
    I(a[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes));};d.prototype.init=function(a){var c=a.options,d=c.navigator,f=d.enabled,g=c.scrollbar,h=g.enabled;c=f?d.height:0;var m=h?g.height:0;this.handles=[];this.shades=[];this.chart=a;this.setBaseSeries();this.height=c;this.scrollbarHeight=m;this.scrollbarEnabled=h;this.navigatorEnabled=f;this.navigatorOptions=d;this.scrollbarOptions=g;this.outlineHeight=c+m;this.opposite=K(d.opposite,!(f||!a.inverted));var l=this;f=l.baseSeries;g=a.xAxis.length;
    h=a.yAxis.length;var q=f&&f[0]&&f[0].xAxis||a.xAxis[0]||{options:{}};a.isDirtyBox=!0;l.navigatorEnabled?(l.xAxis=new b(a,F({breaks:q.options.breaks,ordinal:q.options.ordinal},d.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:g,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},a.inverted?{offsets:[m,0,-m,0],width:c}:{offsets:[0,-m,0,m],height:c})),l.yAxis=new b(a,F(d.yAxis,{id:"navigator-y-axis",alignTicks:!1,
    offset:0,index:h,isInternal:!0,reversed:K(d.yAxis&&d.yAxis.reversed,a.yAxis[0]&&a.yAxis[0].reversed,!1),zoomEnabled:!1},a.inverted?{width:c}:{height:c})),f||d.series.data?l.updateNavigatorSeries(!1):0===a.series.length&&(l.unbindRedraw=e(a,"beforeRedraw",function(){0<a.series.length&&!l.series&&(l.setBaseSeries(),l.unbindRedraw());})),l.reversedExtremes=a.inverted&&!l.xAxis.reversed||!a.inverted&&l.xAxis.reversed,l.renderElements(),l.addMouseEvents()):(l.xAxis={chart:a,navigatorAxis:{fake:!0},translate:function(b,
    c){var d=a.xAxis[0],f=d.getExtremes(),e=d.len-2*m,g=n("min",d.options.min,f.dataMin);d=n("max",d.options.max,f.dataMax)-g;return c?b*d/e+g:e*(b-g)/d},toPixels:function(a){return this.translate(a)},toValue:function(a){return this.translate(a,!0)}},l.xAxis.navigatorAxis.axis=l.xAxis,l.xAxis.navigatorAxis.toFixedRange=C.AdditionsClass.prototype.toFixedRange.bind(l.xAxis.navigatorAxis));a.options.scrollbar.enabled&&(a.scrollbar=l.scrollbar=new x(a.renderer,F(a.options.scrollbar,{margin:l.navigatorEnabled?
    0:10,vertical:a.inverted}),a),e(l.scrollbar,"changed",function(a){var b=l.size,c=b*this.to;b*=this.from;l.hasDragged=l.scrollbar.hasDragged;l.render(0,0,b,c);this.shouldUpdateExtremes(a.DOMType)&&setTimeout(function(){l.onMouseUp(a);});}));l.addBaseSeriesEvents();l.addChartEvents();};d.prototype.getUnionExtremes=function(a){var b=this.chart.xAxis[0],c=this.xAxis,d=c.options,f=b.options,e;a&&null===b.dataMin||(e={dataMin:K(d&&d.min,n("min",f.min,b.dataMin,c.dataMin,c.min)),dataMax:K(d&&d.max,n("max",
    f.max,b.dataMax,c.dataMax,c.max))});return e};d.prototype.setBaseSeries=function(a,b){var c=this.chart,d=this.baseSeries=[];a=a||c.options&&c.options.navigator.baseSeries||(c.series.length?D(c.series,function(a){return !a.options.isInternal}).index:0);(c.series||[]).forEach(function(b,c){b.options.isInternal||!b.options.showInNavigator&&(c!==a&&b.options.id!==a||!1===b.options.showInNavigator)||d.push(b);});this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,b);};d.prototype.updateNavigatorSeries=
    function(a,b){var c=this,d=c.chart,f=c.baseSeries,e,g,k=c.navigatorOptions.series,h,l={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},n=c.series=(c.series||[]).filter(function(a){var b=a.baseSeries;return 0>f.indexOf(b)?(b&&(I(b,"updatedData",c.updatedDataHandler),delete b.navigatorSeries),a.chart&&a.destroy(),!1):!0});f&&f.length&&f.forEach(function(a){var q=
    a.navigatorSeries,p=m({color:a.color,visible:a.visible},Q(k)?H.navigator.series:k);q&&!1===c.navigatorOptions.adaptToUpdatedData||(l.name="Navigator "+f.length,e=a.options||{},h=e.navigatorOptions||{},p.dataLabels=z(p.dataLabels),g=F(e,l,p,h),g.pointRange=K(p.pointRange,h.pointRange,H.plotOptions[g.type||"line"].pointRange),p=h.data||p.data,c.hasNavigatorData=c.hasNavigatorData||!!p,g.data=p||e.data&&e.data.slice(0),q&&q.options?q.update(g,b):(a.navigatorSeries=d.initSeries(g),a.navigatorSeries.baseSeries=
    a,n.push(a.navigatorSeries)));});if(k.data&&(!f||!f.length)||Q(k))c.hasNavigatorData=!1,k=z(k),k.forEach(function(a,b){l.name="Navigator "+(n.length+1);g=F(H.navigator.series,{color:d.series[b]&&!d.series[b].options.isInternal&&d.series[b].color||d.options.colors[b]||d.options.colors[0]},l,a);g.data=a.data;g.data&&(c.hasNavigatorData=!0,n.push(d.initSeries(g)));});a&&this.addBaseSeriesEvents();};d.prototype.addBaseSeriesEvents=function(){var a=this,b=a.baseSeries||[];b[0]&&b[0].xAxis&&b[0].eventsToUnbind.push(e(b[0].xAxis,
    "foundExtremes",this.modifyBaseAxisExtremes));b.forEach(function(b){b.eventsToUnbind.push(e(b,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1);}));b.eventsToUnbind.push(e(b,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1);}));!1!==this.navigatorOptions.adaptToUpdatedData&&b.xAxis&&b.eventsToUnbind.push(e(b,"updatedData",this.updatedDataHandler));b.eventsToUnbind.push(e(b,"remove",function(){this.navigatorSeries&&(G(a.series,this.navigatorSeries),
    u(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries);}));},this);};d.prototype.getBaseSeriesMin=function(a){return this.baseSeries.reduce(function(a,b){return Math.min(a,b.xData&&b.xData.length?b.xData[0]:a)},a)};d.prototype.modifyNavigatorAxisExtremes=function(){var a=this.xAxis,b;"undefined"!==typeof a.getExtremes&&(!(b=this.getUnionExtremes(!0))||b.dataMin===a.min&&b.dataMax===a.max||(a.min=b.dataMin,a.max=b.dataMax));};d.prototype.modifyBaseAxisExtremes=function(){var a=
    this.chart.navigator,b=this.getExtremes(),c=b.dataMin,d=b.dataMax;b=b.max-b.min;var e=a.stickToMin,g=a.stickToMax,h=K(this.options.overscroll,0),l=a.series&&a.series[0],m=!!this.setExtremes;if(!this.eventArgs||"rangeSelectorButton"!==this.eventArgs.trigger){if(e){var n=c;var q=n+b;}g&&(q=d+h,e||(n=Math.max(c,q-b,a.getBaseSeriesMin(l&&l.xData?l.xData[0]:-Number.MAX_VALUE))));m&&(e||g)&&M(n)&&(this.min=this.userMin=n,this.max=this.userMax=q);}a.stickToMin=a.stickToMax=null;};d.prototype.updatedDataHandler=
    function(){var a=this.chart.navigator,b=this.navigatorSeries;a.stickToMax=a.reversedExtremes?0===Math.round(a.zoomedMin):Math.round(a.zoomedMax)>=Math.round(a.size);a.stickToMin=a.shouldStickToMin(this,a);b&&!a.hasNavigatorData&&(b.options.pointStart=this.xData[0],b.setData(this.options.data,!1,null,!1));};d.prototype.shouldStickToMin=function(a,b){b=b.getBaseSeriesMin(a.xData[0]);var c=a.xAxis;a=c.max;var d=c.min;c=c.options.range;return M(a)&&M(d)?c&&0<a-b?a-b<c:d<=b:!1};d.prototype.addChartEvents=
    function(){this.eventsToUnbind||(this.eventsToUnbind=[]);this.eventsToUnbind.push(e(this.chart,"redraw",function(){var a=this.navigator,b=a&&(a.baseSeries&&a.baseSeries[0]&&a.baseSeries[0].xAxis||this.xAxis[0]);b&&a.render(b.min,b.max);}),e(this.chart,"getMargins",function(){var a=this.navigator,b=a.opposite?"plotTop":"marginBottom";this.inverted&&(b=a.opposite?"marginRight":"plotLeft");this[b]=(this[b]||0)+(a.navigatorEnabled||!this.inverted?a.outlineHeight:0)+a.navigatorOptions.margin;}));};d.prototype.destroy=
    function(){this.removeEvents();this.xAxis&&(G(this.chart.xAxis,this.xAxis),G(this.chart.axes,this.xAxis));this.yAxis&&(G(this.chart.yAxis,this.yAxis),G(this.chart.axes,this.yAxis));(this.series||[]).forEach(function(a){a.destroy&&a.destroy();});"series xAxis yAxis shades outline scrollbarTrack scrollbarRifles scrollbarGroup scrollbar navigatorGroup rendered".split(" ").forEach(function(a){this[a]&&this[a].destroy&&this[a].destroy();this[a]=null;},this);[this.handles].forEach(function(a){E(a);},this);};
    return d}();t.Navigator||(t.Navigator=y,C.compose(b),e(p,"beforeShowResetZoom",function(){var a=this.options,b=a.navigator,c=a.rangeSelector;if((b&&b.enabled||c&&c.enabled)&&(!B&&"x"===a.chart.zoomType||B&&"x"===a.chart.pinchType))return !1}),e(p,"beforeRender",function(){var a=this.options;if(a.navigator.enabled||a.scrollbar.enabled)this.scroller=this.navigator=new y(this);}),e(p,"afterSetChartSize",function(){var a=this.legend,b=this.navigator;if(b){var c=a&&a.options;var d=b.xAxis;var e=b.yAxis;
    var g=b.scrollbarHeight;this.inverted?(b.left=b.opposite?this.chartWidth-g-b.height:this.spacing[3]+g,b.top=this.plotTop+g):(b.left=K(d.left,this.plotLeft+g),b.top=b.navigatorOptions.top||this.chartHeight-b.height-g-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(c&&"bottom"===c.verticalAlign&&"proximate"!==c.layout&&c.enabled&&!c.floating?a.legendHeight+K(c.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0));d&&e&&(this.inverted?d.options.left=e.options.left=
    b.left:d.options.top=e.options.top=b.top,d.setAxisSize(),e.setAxisSize());}}),e(p,"update",function(a){var b=a.options.navigator||{},c=a.options.scrollbar||{};this.navigator||this.scroller||!b.enabled&&!c.enabled||(F(!0,this.options.navigator,b),F(!0,this.options.scrollbar,c),delete a.options.navigator,delete a.options.scrollbar);}),e(p,"afterUpdate",function(a){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new y(this),
    K(a.redraw,!0)&&this.redraw(a.animation));}),e(p,"afterAddSeries",function(){this.navigator&&this.navigator.setBaseSeries(null,!1);}),e(d,"afterUpdate",function(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1);}),p.prototype.callbacks.push(function(a){var b=a.navigator;b&&a.xAxis[0]&&(a=a.xAxis[0].getExtremes(),b.render(a.min,a.max));}));t.Navigator=y;return t.Navigator});H(b,"masters/modules/gantt.src.js",[b["Core/Globals.js"],b["Core/Chart/GanttChart.js"],
    b["Core/Scrollbar.js"]],function(b,p,v){b.Scrollbar=v;b.GanttChart=p;b.ganttChart=p.ganttChart;v.compose(b.Axis);});});

    });

    var heatmap = createCommonjsModule(function (module) {
    /*
     Highmaps JS v10.1.0 (2022-04-29)

     (c) 2009-2021 Torstein Honsi

     License: www.highcharts.com/license
    */
    (function(b){module.exports?(b["default"]=b,module.exports=b):b("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(b){function x(b,h,z,n){b.hasOwnProperty(h)||(b[h]=n.apply(null,z),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:h,module:b[h]}})));}b=b?b._modules:{};x(b,
    "Core/Axis/Color/ColorAxisComposition.js",[b["Core/Color/Color.js"],b["Core/Utilities.js"]],function(b,h){var r=b.parse,n=h.addEvent,y=h.extend,t=h.merge,A=h.pick,B=h.splat,m;(function(f){function b(){var a=this,d=this.options;this.colorAxis=[];d.colorAxis&&(d.colorAxis=B(d.colorAxis),d.colorAxis.forEach(function(d,c){d.index=c;new k(a,d);}));}function h(a){var d=this,c=function(c){c=a.allItems.indexOf(c);-1!==c&&(d.destroyItem(a.allItems[c]),a.allItems.splice(c,1));},e=[],p,k;(this.chart.colorAxis||
    []).forEach(function(a){(p=a.options)&&p.showInLegend&&(p.dataClasses&&p.visible?e=e.concat(a.getDataClassLegendSymbols()):p.visible&&e.push(a),a.series.forEach(function(a){if(!a.options.showInLegend||p.dataClasses)"point"===a.options.legendType?a.points.forEach(function(a){c(a);}):c(a);}));});for(k=e.length;k--;)a.allItems.unshift(e[k]);}function m(a){a.visible&&a.item.legendColor&&a.item.legendSymbol.attr({fill:a.item.legendColor});}function u(){var a=this.chart.colorAxis;a&&a.forEach(function(a,d,c){a.update({},
    c);});}function w(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors();}function q(){var a=this.axisTypes;a?-1===a.indexOf("colorAxis")&&a.push("colorAxis"):this.axisTypes=["colorAxis"];}function E(a){var d=this,c=a?"show":"hide";d.visible=d.options.visible=!!a;["graphic","dataLabel"].forEach(function(a){if(d[a])d[a][c]();});this.series.buildKDTree();}function g(){var a=this,d=this.options.nullColor,c=this.colorAxis,e=this.colorKey;(this.data.length?this.data:
    this.points).forEach(function(k){var l=k.getNestedProperty(e);(l=k.options.color||(k.isNull||null===k.value?d:c&&"undefined"!==typeof l?c.toColor(l,k):k.color||a.color))&&k.color!==l&&(k.color=l,"point"===a.options.legendType&&k.legendItem&&a.chart.legend.colorizeItem(k,k.visible));});}function e(a){var d=a.prototype.createAxis;a.prototype.createAxis=function(a,c){if("colorAxis"!==a)return d.apply(this,arguments);var e=new k(this,t(c.axis,{index:this[a].length,isX:!1}));this.isDirtyLegend=!0;this.axes.forEach(function(a){a.series=
    [];});this.series.forEach(function(a){a.bindAxes();a.isDirtyData=!0;});A(c.redraw,!0)&&this.redraw(c.animation);return e};}function c(){this.elem.attr("fill",r(this.start).tweenTo(r(this.end),this.pos),void 0,!0);}function a(){this.elem.attr("stroke",r(this.start).tweenTo(r(this.end),this.pos),void 0,!0);}var d=[],k;f.compose=function(p,l,C,f,v){k||(k=p);-1===d.indexOf(l)&&(d.push(l),p=l.prototype,p.collectionsWithUpdate.push("colorAxis"),p.collectionsWithInit.colorAxis=[p.addColorAxis],n(l,"afterGetAxes",
    b),e(l));-1===d.indexOf(C)&&(d.push(C),l=C.prototype,l.fillSetter=c,l.strokeSetter=a);-1===d.indexOf(f)&&(d.push(f),n(f,"afterGetAllItems",h),n(f,"afterColorizeItem",m),n(f,"afterUpdate",u));-1===d.indexOf(v)&&(d.push(v),y(v.prototype,{optionalAxis:"colorAxis",translateColors:g}),y(v.prototype.pointClass.prototype,{setVisible:E}),n(v,"afterTranslate",w),n(v,"bindAxes",q));};f.pointSetVisible=E;})(m||(m={}));return m});x(b,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return {lineWidth:0,minPadding:0,
    maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0}});x(b,"Core/Axis/Color/ColorAxis.js",[b["Core/Axis/Axis.js"],b["Core/Color/Color.js"],b["Core/Axis/Color/ColorAxisComposition.js"],b["Core/Axis/Color/ColorAxisDefaults.js"],b["Core/Globals.js"],b["Core/Legend/LegendSymbol.js"],b["Core/Series/SeriesRegistry.js"],
    b["Core/Utilities.js"]],function(b,h,z,n,y,t,A,B){var m=this&&this.__extends||function(){var f=function(g,e){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a;}||function(c,a){for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);};return f(g,e)};return function(g,e){function c(){this.constructor=g;}f(g,e);g.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c);}}(),f=h.parse,v=y.noop,r=A.series,D=B.extend,u=B.isNumber,w=B.merge,q=B.pick;h=function(b){function g(e,
    c){var a=b.call(this,e,c)||this;a.beforePadding=!1;a.chart=void 0;a.coll="colorAxis";a.dataClasses=void 0;a.legendItem=void 0;a.legendItems=void 0;a.name="";a.options=void 0;a.stops=void 0;a.visible=!0;a.init(e,c);return a}m(g,b);g.compose=function(e,c,a,d){z.compose(g,e,c,a,d);};g.prototype.init=function(e,c){var a=e.options.legend||{},d=c.layout?"vertical"!==c.layout:"vertical"!==a.layout,k=c.visible;a=w(g.defaultColorAxisOptions,c,{showEmpty:!1,title:null,visible:a.enabled&&!1!==k});this.coll="colorAxis";
    this.side=c.side||d?2:1;this.reversed=c.reversed||!d;this.opposite=!d;b.prototype.init.call(this,e,a);this.userOptions.visible=k;c.dataClasses&&this.initDataClasses(c);this.initStops();this.horiz=d;this.zoomEnabled=!1;};g.prototype.initDataClasses=function(e){var c=this.chart,a=this.options,d=e.dataClasses.length,k,b=0,l=c.options.chart.colorCount;this.dataClasses=k=[];this.legendItems=[];(e.dataClasses||[]).forEach(function(e,g){e=w(e);k.push(e);if(c.styledMode||!e.color)"category"===a.dataClassColor?
    (c.styledMode||(g=c.options.colors,l=g.length,e.color=g[b]),e.colorIndex=b,b++,b===l&&(b=0)):e.color=f(a.minColor).tweenTo(f(a.maxColor),2>d?.5:g/(d-1));});};g.prototype.hasData=function(){return !!(this.tickPositions||[]).length};g.prototype.setTickPositions=function(){if(!this.dataClasses)return b.prototype.setTickPositions.call(this)};g.prototype.initStops=function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]];this.stops.forEach(function(e){e.color=f(e[1]);});};
    g.prototype.setOptions=function(e){b.prototype.setOptions.call(this,e);this.options.crosshair=this.options.marker;};g.prototype.setAxisSize=function(){var e=this.legendSymbol,c=this.chart,a=c.options.legend||{},d,k;e?(this.left=a=e.attr("x"),this.top=d=e.attr("y"),this.width=k=e.attr("width"),this.height=e=e.attr("height"),this.right=c.chartWidth-a-k,this.bottom=c.chartHeight-d-e,this.len=this.horiz?k:e,this.pos=this.horiz?a:d):this.len=(this.horiz?a.symbolWidth:a.symbolHeight)||g.defaultLegendLength;};
    g.prototype.normalizedValue=function(e){this.logarithmic&&(e=this.logarithmic.log2lin(e));return 1-(this.max-e)/(this.max-this.min||1)};g.prototype.toColor=function(e,c){var a=this.dataClasses,d=this.stops,k;if(a)for(k=a.length;k--;){var b=a[k];var l=b.from;d=b.to;if(("undefined"===typeof l||e>=l)&&("undefined"===typeof d||e<=d)){var g=b.color;c&&(c.dataClass=k,c.colorIndex=b.colorIndex);break}}else{e=this.normalizedValue(e);for(k=d.length;k--&&!(e>d[k][0]););l=d[k]||d[k+1];d=d[k+1]||l;e=1-(d[0]-
    e)/(d[0]-l[0]||1);g=l.color.tweenTo(d.color,e);}return g};g.prototype.getOffset=function(){var e=this.legendGroup,c=this.chart.axisOffset[this.side];if(e){this.axisParent=e;b.prototype.getOffset.call(this);var a=this.chart.legend;a.allItems.forEach(function(d){d instanceof g&&d.drawLegendSymbol(a,d);});a.render();this.chart.getMargins(!0);this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width);this.chart.axisOffset[this.side]=c;}};g.prototype.setLegendColor=function(){var e=this.reversed,
    c=e?1:0;e=e?0:1;c=this.horiz?[c,0,e,0]:[0,e,0,c];this.legendColor={linearGradient:{x1:c[0],y1:c[1],x2:c[2],y2:c[3]},stops:this.stops};};g.prototype.drawLegendSymbol=function(e,c){var a=e.padding,d=e.options,k=this.horiz,b=q(d.symbolWidth,k?g.defaultLegendLength:12),l=q(d.symbolHeight,k?12:g.defaultLegendLength),f=q(d.labelPadding,k?16:30);d=q(d.itemDistance,10);this.setLegendColor();c.legendSymbol||(c.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,b,l).attr({zIndex:1}).add(c.legendGroup));this.legendItemWidth=
    b+a+(k?d:this.options.labels.x+this.maxLabelLength);this.legendItemHeight=l+a+(k?f:0);};g.prototype.setState=function(e){this.series.forEach(function(c){c.setState(e);});};g.prototype.setVisible=function(){};g.prototype.getSeriesExtremes=function(){var e=this.series,c=e.length,a;this.dataMin=Infinity;for(this.dataMax=-Infinity;c--;){var d=e[c];var k=d.colorKey=q(d.options.colorKey,d.colorKey,d.pointValKey,d.zoneAxis,"y");var b=d.pointArrayMap;var l=d[k+"Min"]&&d[k+"Max"];if(d[k+"Data"])var g=d[k+"Data"];
    else if(b){g=[];b=b.indexOf(k);var f=d.yData;if(0<=b&&f)for(a=0;a<f.length;a++)g.push(q(f[a][b],f[a]));}else g=d.yData;l?(d.minColorValue=d[k+"Min"],d.maxColorValue=d[k+"Max"]):(g=r.prototype.getExtremes.call(d,g),d.minColorValue=g.dataMin,d.maxColorValue=g.dataMax);"undefined"!==typeof d.minColorValue&&(this.dataMin=Math.min(this.dataMin,d.minColorValue),this.dataMax=Math.max(this.dataMax,d.maxColorValue));l||r.prototype.applyExtremes.call(d);}};g.prototype.drawCrosshair=function(e,c){var a=c&&c.plotX,
    d=c&&c.plotY,k=this.pos,g=this.len;if(c){var f=this.toPixels(c.getNestedProperty(c.series.colorKey));f<k?f=k-2:f>k+g&&(f=k+g+2);c.plotX=f;c.plotY=this.len-f;b.prototype.drawCrosshair.call(this,e,c);c.plotX=a;c.plotY=d;this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!==typeof this.crosshair||this.cross.attr({fill:this.crosshair.color}));}};g.prototype.getPlotLinePath=
    function(e){var c=this.left,a=e.translatedValue,d=this.top;return u(a)?this.horiz?[["M",a-4,d-6],["L",a+4,d-6],["L",a,d],["Z"]]:[["M",c,a],["L",c-6,a+6],["L",c-6,a-6],["Z"]]:b.prototype.getPlotLinePath.call(this,e)};g.prototype.update=function(e,c){var a=this.chart.legend;this.series.forEach(function(a){a.isDirtyData=!0;});(e.dataClasses&&a.allItems||this.dataClasses)&&this.destroyItems();b.prototype.update.call(this,e,c);this.legendItem&&(this.setLegendColor(),a.colorizeItem(this,!0));};g.prototype.destroyItems=
    function(){var e=this.chart;this.legendItem?e.legend.destroyItem(this):this.legendItems&&this.legendItems.forEach(function(c){e.legend.destroyItem(c);});e.isDirtyLegend=!0;};g.prototype.destroy=function(){this.chart.isDirtyLegend=!0;this.destroyItems();b.prototype.destroy.apply(this,[].slice.call(arguments));};g.prototype.remove=function(e){this.destroyItems();b.prototype.remove.call(this,e);};g.prototype.getDataClassLegendSymbols=function(){var e=this,c=e.chart,a=e.legendItems,d=c.options.legend,b=d.valueDecimals,
    g=d.valueSuffix||"",f;a.length||e.dataClasses.forEach(function(d,k){var l=d.from,h=d.to,C=c.numberFormatter,p=!0;f="";"undefined"===typeof l?f="< ":"undefined"===typeof h&&(f="> ");"undefined"!==typeof l&&(f+=C(l,b)+g);"undefined"!==typeof l&&"undefined"!==typeof h&&(f+=" - ");"undefined"!==typeof h&&(f+=C(h,b)+g);a.push(D({chart:c,name:f,options:{},drawLegendSymbol:t.drawRectangle,visible:!0,setState:v,isDataClass:!0,setVisible:function(){p=e.visible=!p;e.series.forEach(function(a){a.points.forEach(function(a){a.dataClass===
    k&&a.setVisible(p);});});c.legend.colorizeItem(this,p);}},d));});return a};g.defaultColorAxisOptions=n;g.defaultLegendLength=200;g.keepProps=["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"];return g}(b);Array.prototype.push.apply(b.keepProps,h.keepProps);return h});x(b,"Series/ColorMapMixin.js",[b["Core/Globals.js"],b["Core/Series/Point.js"],b["Core/Utilities.js"]],function(b,h,z){var r=b.noop;b=b.seriesTypes;var y=z.defined;z=z.addEvent;z(h,"afterSetState",function(b){this.moveToTopOnHover&&
    this.graphic&&this.graphic.attr({zIndex:b&&"hover"===b.state?1:0});});return {PointMixin:{dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value}},SeriesMixin:{pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:r,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:b.column.prototype.pointAttribs,colorAttribs:function(b){var h={};!y(b.color)||
    b.state&&"normal"!==b.state||(h[this.colorProp||"fill"]=b.color);return h}}}});x(b,"Series/Heatmap/HeatmapPoint.js",[b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,h){var r=this&&this.__extends||function(){var b=function(h,f){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,f){b.__proto__=f;}||function(b,f){for(var h in f)f.hasOwnProperty(h)&&(b[h]=f[h]);};return b(h,f)};return function(h,f){function v(){this.constructor=h;}b(h,f);h.prototype=null===f?Object.create(f):
    (v.prototype=f.prototype,new v);}}(),n=h.clamp,y=h.defined,t=h.extend,A=h.pick;b=function(b){function h(){var f=null!==b&&b.apply(this,arguments)||this;f.options=void 0;f.series=void 0;f.value=void 0;f.x=void 0;f.y=void 0;return f}r(h,b);h.prototype.applyOptions=function(f,h){f=b.prototype.applyOptions.call(this,f,h);f.formatPrefix=f.isNull||null===f.value?"null":"point";return f};h.prototype.getCellAttributes=function(){var b=this.series,h=b.options,r=(h.colsize||1)/2,m=(h.rowsize||1)/2,u=b.xAxis,
    w=b.yAxis,q=this.options.marker||b.options.marker;b=b.pointPlacementToXValue();var t=A(this.pointPadding,h.pointPadding,0),g={x1:n(Math.round(u.len-(u.translate(this.x-r,!1,!0,!1,!0,-b)||0)),-u.len,2*u.len),x2:n(Math.round(u.len-(u.translate(this.x+r,!1,!0,!1,!0,-b)||0)),-u.len,2*u.len),y1:n(Math.round(w.translate(this.y-m,!1,!0,!1,!0)||0),-w.len,2*w.len),y2:n(Math.round(w.translate(this.y+m,!1,!0,!1,!0)||0),-w.len,2*w.len)};[["width","x"],["height","y"]].forEach(function(b){var c=b[0];b=b[1];var a=
    b+"1",d=b+"2",e=Math.abs(g[a]-g[d]),f=q&&q.lineWidth||0,h=Math.abs(g[a]+g[d])/2;c=q&&q[c];y(c)&&c<e&&(c=c/2+f/2,g[a]=h-c,g[d]=h+c);t&&("y"===b&&(a=d,d=b+"1"),g[a]+=t,g[d]-=t);});return g};h.prototype.haloPath=function(b){if(!b)return [];var f=this.shapeArgs;return ["M",f.x-b,f.y-b,"L",f.x-b,f.y+f.height+b,f.x+f.width+b,f.y+f.height+b,f.x+f.width+b,f.y-b,"Z"]};h.prototype.isValid=function(){return Infinity!==this.value&&-Infinity!==this.value};return h}(b.seriesTypes.scatter.prototype.pointClass);t(b.prototype,
    {dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});return b});x(b,"Series/Heatmap/HeatmapSeries.js",[b["Core/Color/Color.js"],b["Series/ColorMapMixin.js"],b["Series/Heatmap/HeatmapPoint.js"],b["Core/Legend/LegendSymbol.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Renderer/SVG/SVGRenderer.js"],b["Core/Utilities.js"]],function(b,h,x,n,y,t,A){var r=this&&this.__extends||function(){var b=function(c,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b;}||function(a,
    b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);};return b(c,a)};return function(c,a){function d(){this.constructor=c;}b(c,a);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d);}}(),m=y.series,f=y.seriesTypes,v=f.column,z=f.scatter,D=t.prototype.symbols,u=A.extend,w=A.fireEvent,q=A.isNumber,E=A.merge,g=A.pick;t=function(e){function c(){var a=null!==e&&e.apply(this,arguments)||this;a.colorAxis=void 0;a.data=void 0;a.options=void 0;a.points=void 0;a.valueMax=NaN;a.valueMin=NaN;return a}
    r(c,e);c.prototype.drawPoints=function(){var a=this;if((this.options.marker||{}).enabled||this._hasPointMarkers)m.prototype.drawPoints.call(this),this.points.forEach(function(b){b.graphic&&(b.graphic[a.chart.styledMode?"css":"animate"](a.colorAttribs(b)),null===b.value&&b.graphic.addClass("highcharts-null-point"));});};c.prototype.getExtremes=function(){var a=m.prototype.getExtremes.call(this,this.valueData),b=a.dataMin;a=a.dataMax;q(b)&&(this.valueMin=b);q(a)&&(this.valueMax=a);return m.prototype.getExtremes.call(this)};
    c.prototype.getValidPoints=function(a,b){return m.prototype.getValidPoints.call(this,a,b,!0)};c.prototype.hasData=function(){return !!this.processedXData.length};c.prototype.init=function(){m.prototype.init.apply(this,arguments);var a=this.options;a.pointRange=g(a.pointRange,a.colsize||1);this.yAxis.axisPointRange=a.rowsize||1;D.ellipse=D.circle;a.marker&&(a.marker.r=a.borderRadius);};c.prototype.markerAttribs=function(a,b){var d=a.marker||{},c=this.options.marker||{},e=a.shapeArgs||{},f={};if(a.hasImage)return {x:a.plotX,
    y:a.plotY};if(b){var g=c.states[b]||{};var h=d.states&&d.states[b]||{};[["width","x"],["height","y"]].forEach(function(a){f[a[0]]=(h[a[0]]||g[a[0]]||e[a[0]])+(h[a[0]+"Plus"]||g[a[0]+"Plus"]||0);f[a[1]]=e[a[1]]+(e[a[0]]-f[a[0]])/2;});}return b?f:e};c.prototype.pointAttribs=function(a,d){var c=m.prototype.pointAttribs.call(this,a,d),e=this.options||{},f=this.chart.options.plotOptions||{},g=f.series||{},h=f.heatmap||{};f=a&&a.options.borderColor||e.borderColor||h.borderColor||g.borderColor;g=a&&a.options.borderWidth||
    e.borderWidth||h.borderWidth||g.borderWidth||c["stroke-width"];c.stroke=a&&a.marker&&a.marker.lineColor||e.marker&&e.marker.lineColor||f||this.color;c["stroke-width"]=g;d&&(a=E(e.states[d],e.marker&&e.marker.states[d],a&&a.options.states&&a.options.states[d]||{}),d=a.brightness,c.fill=a.color||b.parse(c.fill).brighten(d||0).get(),c.stroke=a.lineColor);return c};c.prototype.setClip=function(a){var b=this.chart;m.prototype.setClip.apply(this,arguments);(!1!==this.options.clip||a)&&this.markerGroup.clip((a||
    this.clipBox)&&this.sharedClipKey?b.sharedClips[this.sharedClipKey]:b.clipRect);};c.prototype.translate=function(){var a=this.options,b=a.marker&&a.marker.symbol||"rect",c=D[b]?b:"rect",e=-1!==["circle","square"].indexOf(c);this.generatePoints();this.points.forEach(function(d){var f=d.getCellAttributes(),g={};g.x=Math.min(f.x1,f.x2);g.y=Math.min(f.y1,f.y2);g.width=Math.max(Math.abs(f.x2-f.x1),0);g.height=Math.max(Math.abs(f.y2-f.y1),0);var h=d.hasImage=0===(d.marker&&d.marker.symbol||b||"").indexOf("url");
    if(e){var k=Math.abs(g.width-g.height);g.x=Math.min(f.x1,f.x2)+(g.width<g.height?0:k/2);g.y=Math.min(f.y1,f.y2)+(g.width<g.height?k/2:0);g.width=g.height=Math.min(g.width,g.height);}k={plotX:(f.x1+f.x2)/2,plotY:(f.y1+f.y2)/2,clientX:(f.x1+f.x2)/2,shapeType:"path",shapeArgs:E(!0,g,{d:D[c](g.x,g.y,g.width,g.height,{r:a.borderRadius})})};h&&(d.marker={width:g.width,height:g.height});u(d,k);});w(this,"afterTranslate");};c.defaultOptions=E(z.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,nullColor:"#f7f7f7",
    dataLabels:{formatter:function(){var a=this.series.chart.numberFormatter,b=this.point.value;return q(b)?a(b,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}});return c}(z);u(t.prototype,{alignDataLabel:v.prototype.alignDataLabel,axisTypes:h.SeriesMixin.axisTypes,
    colorAttribs:h.SeriesMixin.colorAttribs,colorKey:h.SeriesMixin.colorKey,directTouch:!0,drawLegendSymbol:n.drawRectangle,getExtremesFromAll:!0,getSymbol:m.prototype.getSymbol,parallelArrays:h.SeriesMixin.parallelArrays,pointArrayMap:["y","value"],pointClass:x,trackerGroups:h.SeriesMixin.trackerGroups});y.registerSeriesType("heatmap",t);return t});x(b,"masters/modules/heatmap.src.js",[b["Core/Globals.js"],b["Core/Axis/Color/ColorAxis.js"]],function(b,h){b.ColorAxis=h;h.compose(b.Chart,b.Fx,b.Legend,
    b.Series);});});

    });

    var patternFill = createCommonjsModule(function (module) {
    /*
     Highcharts JS v10.1.0 (2022-04-29)

     Module for adding patterns and images as point fills.

     (c) 2010-2021 Highsoft AS
     Author: Torstein Hnsi, ystein Moseng

     License: www.highcharts.com/license
    */
    (function(b){module.exports?(b["default"]=b,module.exports=b):b("undefined"!==typeof Highcharts?Highcharts:void 0);})(function(b){function f(b,g,f,p){b.hasOwnProperty(g)||(b[g]=p.apply(null,f),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:g,module:b[g]}})));}b=b?b._modules:{};
    f(b,"Extensions/PatternFill.js",[b["Core/Animation/AnimationUtilities.js"],b["Core/Chart/Chart.js"],b["Core/Globals.js"],b["Core/DefaultOptions.js"],b["Core/Series/Point.js"],b["Core/Series/Series.js"],b["Core/Renderer/SVG/SVGRenderer.js"],b["Core/Utilities.js"]],function(b,f,x,p,r,t,u,m){function g(a,c){a=JSON.stringify(a);var b=a.length||0,e=0,d=0;if(c){c=Math.max(Math.floor(b/500),1);for(var n=0;n<b;n+=c)e+=a.charCodeAt(n);e&=e;}for(;d<b;++d)c=a.charCodeAt(d),e=(e<<5)-e+c,e&=e;return e.toString(16).replace("-",
    "1")}var y=b.animObject,z=p.getOptions;b=m.addEvent;var A=m.erase,v=m.merge,q=m.pick,B=m.removeEvent;p=m.wrap;var w=x.patterns=function(){var a=[],c=z().colors;["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"].forEach(function(b,e){a.push({path:b,color:c[e],width:5,height:5,patternTransform:"scale(1.4 1.4)"});});["M 0 0 L 5 10 L 10 0",
    "M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"].forEach(function(b,e){a.push({path:b,color:c[e+5],width:10,height:10});});return a}();r.prototype.calculatePatternDimensions=function(a){if(!a.width||!a.height){var c=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},b=this.shapeArgs;b&&(c.width=b.width||c.width,c.height=
    b.height||c.height,c.x=b.x||c.x,c.y=b.y||c.y);if(a.image){if(!c.width||!c.height){a._width="defer";a._height="defer";return}a.aspectRatio&&(c.aspectRatio=c.width/c.height,a.aspectRatio>c.aspectRatio?c.aspectWidth=c.height*a.aspectRatio:c.aspectHeight=c.width/a.aspectRatio);a._width=a.width||Math.ceil(c.aspectWidth||c.width);a._height=a.height||Math.ceil(c.aspectHeight||c.height);}a.width||(a._x=a.x||0,a._x+=c.x-Math.round(c.aspectWidth?Math.abs(c.aspectWidth-c.width)/2:0));a.height||(a._y=a.y||0,a._y+=
    c.y-Math.round(c.aspectHeight?Math.abs(c.aspectHeight-c.height)/2:0));}};u.prototype.addPattern=function(a,c){c=q(c,!0);var b=y(c),e=a.width||a._width||32,d=a.height||a._height||32,n=a.color||"#343434",h=a.id,f=this,g=function(a){f.rect(0,0,e,d).attr({fill:a}).add(l);};h||(this.idCounter=this.idCounter||0,h="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter);this.forExport&&(h+="-export");this.defIds=this.defIds||[];if(!(-1<this.defIds.indexOf(h))){this.defIds.push(h);var k=
    {id:h,patternUnits:"userSpaceOnUse",patternContentUnits:a.patternContentUnits||"userSpaceOnUse",width:e,height:d,x:a._x||a.x||0,y:a._y||a.y||0};a.patternTransform&&(k.patternTransform=a.patternTransform);var l=this.createElement("pattern").attr(k).add(this.defs);l.id=h;a.path?(k=m.isObject(a.path)?a.path:{d:a.path},a.backgroundColor&&g(a.backgroundColor),g={d:k.d},this.styledMode||(g.stroke=k.stroke||n,g["stroke-width"]=q(k.strokeWidth,2),g.fill=k.fill||"none"),k.transform&&(g.transform=k.transform),
    this.createElement("path").attr(g).add(l),l.color=n):a.image&&(c?this.image(a.image,0,0,e,d,function(){this.animate({opacity:q(a.opacity,1)},b);B(this.element,"load");}).attr({opacity:0}).add(l):this.image(a.image,0,0,e,d).add(l));a.image&&c||"undefined"===typeof a.opacity||[].forEach.call(l.element.childNodes,function(c){c.setAttribute("opacity",a.opacity);});this.patternElements=this.patternElements||{};return this.patternElements[h]=l}};p(t.prototype,"getColor",function(a){var c=this.options.color;
    c&&c.pattern&&!c.pattern.color?(delete this.options.color,a.apply(this,Array.prototype.slice.call(arguments,1)),c.pattern.color=this.color,this.color=this.options.color=c):a.apply(this,Array.prototype.slice.call(arguments,1));});b(t,"render",function(){var a=this.chart.isResizing;(this.isDirtyData||a||!this.chart.hasRendered)&&(this.points||[]).forEach(function(c){var b=c.options&&c.options.color;b&&b.pattern&&(!a||c.shapeArgs&&c.shapeArgs.width&&c.shapeArgs.height?c.calculatePatternDimensions(b.pattern):
    (b.pattern._width="defer",b.pattern._height="defer"));});});b(r,"afterInit",function(){var a=this.options.color;a&&a.pattern&&("string"===typeof a.pattern.path&&(a.pattern.path={d:a.pattern.path}),this.color=this.options.color=v(this.series.options.color,a));});b(u,"complexColor",function(a){var c=a.args[0],b=a.args[1];a=a.args[2];var e=this.chartIndex||0,d=c.pattern,f="#343434";"undefined"!==typeof c.patternIndex&&w&&(d=w[c.patternIndex]);if(!d)return !0;if(d.image||"string"===typeof d.path||d.path&&
    d.path.d){var h=a.parentNode&&a.parentNode.getAttribute("class");h=h&&-1<h.indexOf("highcharts-legend");"defer"!==d._width&&"defer"!==d._height||r.prototype.calculatePatternDimensions.call({graphic:{element:a}},d);if(h||!d.id)d=v({},d),d.id="highcharts-pattern-"+e+"-"+g(d)+g(d,!0);this.addPattern(d,!this.forExport&&q(d.animation,this.globalAnimation,{duration:100}));f="url("+this.url+"#"+(d.id+(this.forExport?"-export":""))+")";}else f=d.color||f;a.setAttribute(b,f);c.toString=function(){return f};
    return !1});b(f,"endResize",function(){(this.renderer&&this.renderer.defIds||[]).filter(function(a){return a&&a.indexOf&&0===a.indexOf("highcharts-pattern-")}).length&&(this.series.forEach(function(a){a.points.forEach(function(a){(a=a.options&&a.options.color)&&a.pattern&&(a.pattern._width="defer",a.pattern._height="defer");});}),this.redraw(!1));});b(f,"redraw",function(){var a={},c=this.renderer,b=(c.defIds||[]).filter(function(a){return a.indexOf&&0===a.indexOf("highcharts-pattern-")});b.length&&([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),
    function(b){if(b=b.getAttribute("fill")||b.getAttribute("color")||b.getAttribute("stroke"))b=b.replace(c.url,"").replace("url(#","").replace(")",""),a[b]=!0;}),b.forEach(function(b){a[b]||(A(c.defIds,b),c.patternElements[b]&&(c.patternElements[b].destroy(),delete c.patternElements[b]));}));});});f(b,"masters/modules/pattern-fill.src.js",[],function(){});});

    });

    // Copyright (c) Microsoft Corporation.

    function loadModules(modules) {
      return __awaiter(this, void 0, void 0, function () {
        var modules_1, modules_1_1, m;

        var e_1, _a;

        return __generator(this, function (_b) {
          try {
            for (modules_1 = __values(modules), modules_1_1 = modules_1.next(); !modules_1_1.done; modules_1_1 = modules_1.next()) {
              m = modules_1_1.value;

              if (m === "heatmap") {
                heatmap(Highcharts$1);
              }

              if (m === "gantt") {
                gantt(Highcharts$1);
              }

              if (m === "pattern-fill") {
                patternFill(Highcharts$1);
              }
            }
          } catch (e_1_1) {
            e_1 = {
              error: e_1_1
            };
          } finally {
            try {
              if (modules_1_1 && !modules_1_1.done && (_a = modules_1["return"])) _a.call(modules_1);
            } finally {
              if (e_1) throw e_1.error;
            }
          }

          return [2
          /*return*/
          ];
        });
      });
    }

    // Copyright (c) Microsoft Corporation.
    // Other modules need to be loaded on demand using modules property of the chart component.

    accessibility(Highcharts$1);
    exporting(Highcharts$1);
    exportData(Highcharts$1); // init module

    highchartsMore(Highcharts$1);
    function HighchartReact(props) {
      var chartRef = React.useRef();
      var containerRef = /*#__PURE__*/React.createRef();

      var createChart = function createChart() {
        Highcharts$1.setOptions({
          lang: {
            downloadCSV: localization.localization.ChartContextMenu.downloadCSV,
            downloadJPEG: localization.localization.ChartContextMenu.downloadJPEG,
            downloadPDF: localization.localization.ChartContextMenu.downloadPDF,
            downloadPNG: localization.localization.ChartContextMenu.downloadPNG,
            downloadSVG: localization.localization.ChartContextMenu.downloadSVG,
            downloadXLS: localization.localization.ChartContextMenu.downloadXLS,
            hideData: localization.localization.ChartContextMenu.hideData,
            printChart: localization.localization.ChartContextMenu.printChart,
            viewData: localization.localization.ChartContextMenu.viewData,
            viewFullscreen: localization.localization.ChartContextMenu.viewInFullScreen
          }
        });
        var chart;

        try {
          chart = containerRef.current && Highcharts$1.chart(containerRef.current, __assign({}, props.chartOptions));
        } catch (error) {
          if (props.onError) {
            props.onError(error);
          }
        }

        return chart;
      };

      function loadChart() {
        var _a;

        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (_b) {
            switch (_b.label) {
              case 0:
                if (chartRef.current) {
                  if (!props.disableUpdate) {
                    // Update is requested and we let Highcharts to the update
                    chartRef.current.update(props.chartOptions, undefined, true); // See caller needs to do something after the update

                    if (props.onUpdate) {
                      props.onUpdate(chartRef.current);
                    }
                  } else {
                    // Update is not enabled although component is reloaded, recreating
                    // the chart in this case
                    chartRef.current.destroy();
                    chartRef.current = createChart();
                  }
                }

                if (!!chartRef.current) return [3
                /*break*/
                , 3];
                if (!((_a = props.modules) === null || _a === void 0 ? void 0 : _a.length)) return [3
                /*break*/
                , 2];
                return [4
                /*yield*/
                , loadModules(props.modules)];

              case 1:
                _b.sent();

                _b.label = 2;

              case 2:
                // If there is no chartRef around, this is the first load of the component,
                // we are creating the actual chart
                chartRef.current = createChart();
                _b.label = 3;

              case 3:
                return [2
                /*return*/
                ];
            }
          });
        });
      }

      React.useEffect(function () {
        loadChart();
      });
      React.useEffect(function () {
        // We need to have a separate hook since we want this to be executed
        // only when component is unloaded
        return function () {
          var _a;

          (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.destroy();
        };
      }, []);
      return /*#__PURE__*/React.createElement("div", {
        className: props.className,
        id: props.id,
        ref: containerRef
      });
    }

    // Copyright (c) Microsoft Corporation.

    var HighchartWrapper =
    /** @class */
    function (_super) {
      __extends(HighchartWrapper, _super);

      function HighchartWrapper() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      HighchartWrapper.prototype.render = function () {
        var _a, _b;

        var _c = this.props,
            _d = _c.chartOptions,
            chartOptions = _d === void 0 ? {} : _d,
            modules = _c.modules,
            plotClassName = _c.plotClassName,
            theme = _c.theme;
        var _e = chartOptions.custom,
            custom = _e === void 0 ? {} : _e;
        var fallback = this.props.fallback || /*#__PURE__*/React.createElement("div", null);
        var themeOptions = theme ? getHighchartsTheme(chartOptions, theme, custom.colorAxisMaxColor) : {}; // Theme options need to be applied on to everything to make sure we have the same look for all charts

        var mergedOptions = _.merge({}, getDefaultHighchartOptions(react.getTheme()), chartOptions, plotClassName && {
          chart: {
            className: plotClassName
          }
        }, themeOptions);

        if (mergedOptions === null || mergedOptions === void 0 ? void 0 : mergedOptions.chart) {
          // There is no way to override zoomType with undefined value, merge will just ignore this.
          // To be able to disable zooming, it needs to be specified explicitly.
          if (custom.disableZoom) {
            mergedOptions.chart.zoomType = undefined;
          } // We cannot allow consumers setting background color directly to protect our theme.
          // That's why we have a separate switch to make background transparent


          if (custom.transparentBackground) {
            mergedOptions.chart.backgroundColor = "rgb(0, 0, 0, 0)";
          }
        } // We need to set container width and height since loading chart is
        // asynchronous and can cause shifts in the content if chart container
        // does not occupy space initially


        var className = react.mergeStyles({
          height: ((_a = mergedOptions === null || mergedOptions === void 0 ? void 0 : mergedOptions.chart) === null || _a === void 0 ? void 0 : _a.height) || undefined,
          minHeight: (custom === null || custom === void 0 ? void 0 : custom.minHeight) || undefined,
          minWidth: (custom === null || custom === void 0 ? void 0 : custom.minWidth) || 210,
          width: ((_b = mergedOptions === null || mergedOptions === void 0 ? void 0 : mergedOptions.chart) === null || _b === void 0 ? void 0 : _b.width) || undefined
        }, this.props.className);
        return /*#__PURE__*/React.createElement(React.Suspense, {
          fallback: fallback
        }, /*#__PURE__*/React.createElement(HighchartReact, {
          className: className,
          id: this.props.id,
          chartOptions: mergedOptions,
          disableUpdate: custom.disableUpdate,
          modules: modules
        }));
      };

      return HighchartWrapper;
    }(React.Component);

    // Copyright (c) Microsoft Corporation.

    var BasicHighChart =
    /** @class */
    function (_super) {
      __extends(BasicHighChart, _super);

      function BasicHighChart() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      BasicHighChart.prototype.render = function () {
        var _a, _b;

        var defaultOptions = getDefaultHighchartOptions(react.getTheme());
        var _c = this.props,
            className = _c.className,
            id = _c.id,
            fallback = _c.fallback,
            _d = _c.configOverride,
            configOverride = _d === void 0 ? {} : _d,
            theme = _c.theme;

        var chartOptions = _.merge({}, defaultOptions, configOverride);

        return /*#__PURE__*/React__default.createElement(HighchartWrapper, {
          key: (_b = (_a = this.props.configOverride) === null || _a === void 0 ? void 0 : _a.chart) === null || _b === void 0 ? void 0 : _b.type,
          className: className,
          id: id,
          chartOptions: chartOptions,
          fallback: fallback,
          theme: theme
        });
      };

      return BasicHighChart;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    // instead of "minimum" and "maximum"

    var boxChartTooltipDefaultSetting = {
      pointFormat: '<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>' + (localization.localization.ModelAssessment.ModelOverview.BoxPlot.upperWhisker + ": {point.high}<br/>") + (localization.localization.ModelAssessment.ModelOverview.BoxPlot.upperQuartile + ": {point.q3}<br/>") + (localization.localization.ModelAssessment.ModelOverview.BoxPlot.median + ": {point.median}<br/>") + (localization.localization.ModelAssessment.ModelOverview.BoxPlot.lowerQuartile + ": {point.q1}<br/>") + (localization.localization.ModelAssessment.ModelOverview.BoxPlot.lowerWhisker + " {point.low}<br/>")
    };

    // Copyright (c) Microsoft Corporation.
    function getDependenceData(chartProps, jointData, cohort) {
      var _a, _b, _c;

      if (!chartProps) {
        return [];
      }

      if (chartProps.colorAxis && (chartProps.colorAxis.options.bin || ((_a = jointData.metaDict[chartProps.colorAxis.property]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical))) {
        cohort.sort(chartProps.colorAxis.property);
      }

      var xData = [];
      var yData = [];
      var customData = cohort.unwrap(JointDataset.IndexLabel).map(function (val) {
        var dict = {};
        dict[JointDataset.IndexLabel] = val;
        return dict;
      });

      if (chartProps.xAxis) {
        var rawX_1 = cohort.unwrap(chartProps.xAxis.property);
        var xLabel_1 = jointData.metaDict[chartProps.xAxis.property].label;

        if (chartProps.xAxis.options.dither) {
          var dithered = cohort.unwrap(JointDataset.DitherLabel);
          xData = dithered.map(function (dither, index) {
            return rawX_1[index] + dither;
          });
          rawX_1.forEach(function (val, index) {
            var _a, _b; // If categorical, show string value in tooltip


            if ((_a = jointData.metaDict[chartProps.xAxis.property]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical) {
              customData[index].X = (_b = jointData.metaDict[chartProps.xAxis.property].sortedCategoricalValues) === null || _b === void 0 ? void 0 : _b[val];
            } else {
              customData[index].X = val;
            }

            customData[index].template = xLabel_1 + ": " + customData[index].X + "<br>";
          });
        } else {
          xData = _.cloneDeep(rawX_1);
        }
      }

      if (chartProps.yAxis) {
        var yLabel_1 = localization.localization.Interpret.Charts.featureImportance;
        yData = cohort.unwrap(chartProps.yAxis.property);
        yData.forEach(function (val, index) {
          customData[index].Yformatted = val.toLocaleString(undefined, {
            maximumFractionDigits: 3
          });
          customData[index].template = customData[index].template ? "" + customData[index].template + yLabel_1 + ": " + customData[index].Yformatted + "<br>" : yLabel_1 + ": " + customData[index].Yformatted + "<br>";
        });
      }

      if ((_b = jointData.datasetMetaData) === null || _b === void 0 ? void 0 : _b.featureMetaData) {
        var identityFeatureName_1 = (_c = jointData.datasetMetaData.featureMetaData) === null || _c === void 0 ? void 0 : _c.identity_feature_name;

        if (identityFeatureName_1) {
          var jointDatasetFeatureName_1 = jointData.getJointDatasetFeatureName(identityFeatureName_1);

          if (jointDatasetFeatureName_1) {
            var rawIdentityFeatureData = cohort.unwrap(jointDatasetFeatureName_1);
            rawIdentityFeatureData.forEach(function (val, index) {
              var _a, _b; // If categorical, show string value in tooltip


              if ((_a = jointData.metaDict[jointDatasetFeatureName_1]) === null || _a === void 0 ? void 0 : _a.treatAsCategorical) {
                customData[index].ID = (_b = jointData.metaDict[jointDatasetFeatureName_1].sortedCategoricalValues) === null || _b === void 0 ? void 0 : _b[val];
              } else {
                customData[index].ID = val;
              }

              customData[index].template += localization.localization.Common.identityFeature + " (" + identityFeatureName_1 + "): " + customData[index].ID + "<br>";
            });
          }
        }
      }

      var indices = cohort.unwrap(JointDataset.IndexLabel, false);
      indices.forEach(function (absoluteIndex, i) {
        customData[i].AbsoluteIndex = absoluteIndex;
        customData[i].template += localization.localization.Interpret.Charts.rowIndex + ": " + absoluteIndex + "<br>";
        customData[i].template += "<extra></extra>";
      });
      var result = customData.map(function (d, index) {
        return {
          customData: d,
          x: xData[index],
          y: yData[index]
        };
      });
      return result;
    }

    // Copyright (c) Microsoft Corporation.
    var dependencePlotStyles = function dependencePlotStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        boldText: {
          fontWeight: "600"
        },
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          width: "95%"
        },
        chartWithAxes: {
          display: "flex",
          flex: "1",
          flexDirection: "column",
          padding: "5px 20px 0 20px"
        },
        chartWithVertical: {
          width: "100%"
        },
        DependencePlot: {
          width: "100%"
        },
        faintText: {
          fontWeight: "350"
        },
        horizontalAxis: {
          flex: 1,
          textAlign: "center"
        },
        horizontalAxisWithPadding: {
          display: "flex",
          flexDirection: "row"
        },
        paddingDiv: {
          width: "50px"
        },
        placeholder: {
          maxWidth: "70%"
        },
        placeholderWrapper: {
          margin: "100px auto 0 auto"
        },
        rotatedVerticalBox: {
          marginLeft: "15px",
          position: "absolute",
          textAlign: "center",
          top: "50%",
          transform: "translateX(-50%) translateY(-50%) rotate(270deg)",
          width: "max-content"
        },
        secondaryChartPlaceholderBox: {
          flex: 1,
          height: "400px"
        },
        secondaryChartPlaceholderSpacer: {
          boxShadow: "0px 0px 6px rgba(0, 0, 0, 0.2)",
          margin: "25px auto 0 auto",
          padding: "23px",
          width: "fit-content"
        },
        verticalAxis: {
          height: "auto",
          position: "relative",
          top: "0px",
          width: "50px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var FeatureImportanceDependence =
    /** @class */
    function (_super) {
      __extends(FeatureImportanceDependence, _super);

      function FeatureImportanceDependence() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      FeatureImportanceDependence.prototype.render = function () {
        var classNames = dependencePlotStyles();

        if (this.props.chartProps === undefined) {
          return /*#__PURE__*/React__default.createElement("div", {
            className: classNames.secondaryChartPlaceholderBox
          }, /*#__PURE__*/React__default.createElement("div", {
            className: classNames.secondaryChartPlaceholderSpacer
          }, /*#__PURE__*/React__default.createElement(react.Text, {
            variant: "large",
            className: classNames.faintText
          }, localization.localization.Interpret.DependencePlot.placeholder)));
        }

        var yAxisLabel = this.props.metadata.modelType === exports.ModelTypes.Regression ? this.props.jointDataset.metaDict[this.props.chartProps.xAxis.property].label : this.props.jointDataset.metaDict[this.props.chartProps.xAxis.property].label + " : " + this.props.selectedWeightLabel;
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: false,
          className: classNames.DependencePlot
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: classNames.chartWithVertical
        }, /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          className: classNames.chartWithVertical
        }, /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: classNames.verticalAxis
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.rotatedVerticalBox
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "medium",
          block: true,
          className: classNames.boldText
        }, localization.localization.Interpret.DependencePlot.featureImportanceOf), /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "medium"
        }, yAxisLabel))), /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: classNames.chart
        }, /*#__PURE__*/React__default.createElement(BasicHighChart, {
          configOverride: getDependencyChartOptions(getDependenceData(this.props.chartProps, this.props.jointDataset, this.props.cohort), this.props.jointDataset.metaDict[this.props.chartProps.xAxis.property].sortedCategoricalValues, FluentUIStyles.fluentUIColorPalette[this.props.cohortIndex], this.props.logarithmicScaling, react.getTheme())
        })))), /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: classNames.horizontalAxisWithPadding
        }, /*#__PURE__*/React__default.createElement("div", {
          className: classNames.paddingDiv
        }), /*#__PURE__*/React__default.createElement("div", {
          className: classNames.horizontalAxis
        }, /*#__PURE__*/React__default.createElement(react.Text, {
          variant: "medium"
        }, this.props.jointDataset.metaDict[this.props.chartProps.xAxis.property].label))));
      };

      return FeatureImportanceDependence;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    var loadingSpinnerStyles = react.mergeStyleSets({
      explanationSpinner: {
        margin: "auto",
        padding: "40px"
      }
    });

    // Copyright (c) Microsoft Corporation.

    var LoadingSpinner =
    /** @class */
    function (_super) {
      __extends(LoadingSpinner, _super);

      function LoadingSpinner() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      LoadingSpinner.prototype.render = function () {
        var _a;

        return /*#__PURE__*/React__default.createElement(react.Spinner, {
          className: loadingSpinnerStyles.explanationSpinner,
          size: react.SpinnerSize.large,
          label: (_a = this.props.label) !== null && _a !== void 0 ? _a : localization.localization.Interpret.BarChart.calculatingExplanation
        });
      };

      return LoadingSpinner;
    }(React__default.PureComponent);

    // Copyright (c) Microsoft Corporation.
    function getFeatureImportanceBarOptions(sortArray, unsortedX, unsortedSeries, topK, theme, originX, onFeatureSelection) {
      var colorTheme = {
        axisColor: theme.palette.neutralPrimary,
        axisGridColor: theme.palette.neutralLight,
        backgroundColor: theme === null || theme === void 0 ? void 0 : theme.semanticColors.bodyBackground,
        fontColor: theme.semanticColors.bodyText
      };
      var sortedIndexVector = sortArray;
      var xText = sortedIndexVector.map(function (i) {
        return unsortedX[i];
      });
      var xOriginText = sortedIndexVector.map(function (i) {
        if (originX) {
          return originX[i];
        }

        return unsortedX[i];
      });
      var x = sortedIndexVector.map(function (_, index) {
        return index;
      });
      var allData = [];
      unsortedSeries.forEach(function (series) {
        var chartColors = getChartColors(theme);
        allData.push({
          color: chartColors[series.colorIndex],
          customdata: sortedIndexVector.map(function (value, index) {
            var _a;

            return {
              HoverText: xOriginText[index],
              Name: series.name,
              Yformatted: (_a = series.unsortedAggregateY[value]) === null || _a === void 0 ? void 0 : _a.toLocaleString(undefined, {
                maximumFractionDigits: 3
              }),
              Yvalue: series.unsortedFeatureValues ? series.unsortedFeatureValues[value] : undefined
            };
          }),
          name: series.name,
          orientation: "v",
          text: xText,
          x: x,
          y: sortedIndexVector.map(function (index) {
            return series.unsortedAggregateY[index];
          })
        });
      });
      var seriesData = allData.map(function (d) {
        return {
          color: d.color,
          data: d.y,
          dataLabels: {
            color: colorTheme.fontColor
          },
          name: d.name
        };
      });
      return {
        chart: {
          backgroundColor: colorTheme.backgroundColor,
          type: "column"
        },
        legend: {
          enabled: true
        },
        plotOptions: {
          series: {
            cursor: "pointer",
            point: {
              events: {
                click: function click() {
                  if (onFeatureSelection === undefined) {
                    return;
                  }

                  var featureNumber = sortArray[this.x];
                  onFeatureSelection(this.series.index, featureNumber);
                }
              }
            }
          }
        },
        series: seriesData,
        title: {
          text: ""
        },
        xAxis: {
          categories: xText,
          max: topK - 1
        }
      };
    }

    // Copyright (c) Microsoft Corporation.
    function getFeatureImportanceBoxOptions(sortArray, unsortedX, unsortedSeries, topK, theme, onFeatureSelection) {
      var chartColors = getChartColors(theme);
      var xText = sortArray.map(function (i) {
        return unsortedX[i];
      });
      var boxTempData = [];
      var yAxisMin = Infinity;
      unsortedSeries.forEach(function (series) {
        var base = [];
        var x = base.concat.apply(base, __spreadArray([], __read(sortArray.map(function (sortIndex, xIndex) {
          var _a;

          return ((_a = series.unsortedIndividualY) === null || _a === void 0 ? void 0 : _a[sortIndex].map(function () {
            return xIndex;
          })) || [];
        }))));
        var y = base.concat.apply(base, __spreadArray([], __read(sortArray.map(function (index) {
          var _a;

          return ((_a = series.unsortedIndividualY) === null || _a === void 0 ? void 0 : _a[index]) || [];
        }))));
        var curMin = _.min(y) || 0;
        yAxisMin = Math.min(yAxisMin, curMin);
        boxTempData.push({
          color: chartColors[series.colorIndex],
          name: series.name,
          x: x,
          y: y
        });
      });
      var boxGroupData = [];
      boxTempData.forEach(function (data) {
        var boxData = getBoxData(data.x, data.y);
        boxGroupData.push({
          color: data.color,
          data: boxData.box,
          name: data.name,
          tooltip: boxChartTooltipDefaultSetting,
          type: "boxplot"
        });
      });
      return {
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          type: "boxplot"
        },
        legend: {
          enabled: true
        },
        plotOptions: {
          boxplot: {
            point: {
              events: {
                click: function click() {
                  if (onFeatureSelection === undefined) {
                    return;
                  }

                  var featureNumber = sortArray[this.x];
                  onFeatureSelection(this.series.index, featureNumber);
                }
              }
            }
          }
        },
        series: boxGroupData,
        xAxis: {
          categories: xText,
          max: topK - 1
        },
        yAxis: {
          min: yAxisMin,
          title: {
            align: "high"
          }
        }
      };
    }

    // Copyright (c) Microsoft Corporation.
    var getFeatureImportanceBarStyles = function getFeatureImportanceBarStyles() {
      var theme = react.getTheme();
      return react.mergeStyleSets({
        boldText: {
          fontWeight: "600"
        },
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          width: "95%"
        },
        chartWithVertical: __assign({
          width: "100%"
        }, fullLgDown),
        noData: {
          flex: "1",
          margin: "100px auto 0 auto"
        },
        rotatedVerticalBox: {
          marginLeft: "28px",
          position: "absolute",
          textAlign: "center",
          top: "50%",
          transform: "translateX(-50%) translateY(-50%) rotate(270deg)",
          width: "max-content"
        },
        verticalAxis: {
          height: "auto",
          position: "relative",
          top: "0px",
          width: "64px"
        }
      });
    };

    // Copyright (c) Microsoft Corporation.

    var FeatureImportanceBar =
    /** @class */
    function (_super) {
      __extends(FeatureImportanceBar, _super);

      function FeatureImportanceBar(props) {
        var _this = _super.call(this, props) || this;

        _this.state = {
          highchartOption: _this.getHighchartOption()
        };
        return _this;
      }

      FeatureImportanceBar.prototype.componentDidUpdate = function (prevProps) {
        if (this.props.unsortedSeries !== prevProps.unsortedSeries || this.props.sortArray !== prevProps.sortArray || this.props.topK !== prevProps.topK || this.props.chartType !== prevProps.chartType) {
          this.setState({
            highchartOption: this.getHighchartOption()
          });
        }
      };

      FeatureImportanceBar.prototype.render = function () {
        var featureImportanceBarStyles = getFeatureImportanceBarStyles();
        return /*#__PURE__*/React__default.createElement(react.Stack, {
          horizontal: true,
          id: "FeatureImportanceBar",
          className: featureImportanceBarStyles.chartWithVertical
        }, !this.props.loading && /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: featureImportanceBarStyles.verticalAxis
        }, /*#__PURE__*/React__default.createElement("div", {
          className: featureImportanceBarStyles.rotatedVerticalBox
        }, /*#__PURE__*/React__default.createElement("div", null, this.props.yAxisLabels.map(function (label, i) {
          return /*#__PURE__*/React__default.createElement(react.Text, {
            block: true,
            variant: "medium",
            className: featureImportanceBarStyles.boldText,
            key: i
          }, label);
        })))), /*#__PURE__*/React__default.createElement(react.Stack.Item, {
          className: featureImportanceBarStyles.chart
        }, this.props.loading ? /*#__PURE__*/React__default.createElement(LoadingSpinner, {
          label: localization.localization.Counterfactuals.loading
        }) : /*#__PURE__*/React__default.createElement(BasicHighChart, {
          configOverride: this.state.highchartOption
        })));
      };

      FeatureImportanceBar.prototype.getHighchartOption = function () {
        return this.props.chartType === exports.ChartTypes.Bar ? getFeatureImportanceBarOptions(this.props.sortArray, this.props.unsortedX, this.props.unsortedSeries, this.props.topK, react.getTheme(), this.props.originX, this.props.onFeatureSelection) : getFeatureImportanceBoxOptions(this.props.sortArray, this.props.unsortedX, this.props.unsortedSeries, this.props.topK, react.getTheme(), this.props.onFeatureSelection);
      };

      return FeatureImportanceBar;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.

    var HeatmapHighChart =
    /** @class */
    function (_super) {
      __extends(HeatmapHighChart, _super);

      function HeatmapHighChart() {
        return _super !== null && _super.apply(this, arguments) || this;
      }

      HeatmapHighChart.prototype.render = function () {
        var defaultOptions = getDefaultHighchartOptions(react.getTheme());
        var _a = this.props,
            className = _a.className,
            id = _a.id,
            fallback = _a.fallback,
            _b = _a.configOverride,
            configOverride = _b === void 0 ? {} : _b,
            theme = _a.theme;

        var chartOptions = _.merge({}, defaultOptions, configOverride);

        return /*#__PURE__*/React__default.createElement(HighchartWrapper, {
          className: className,
          id: id,
          chartOptions: chartOptions,
          fallback: fallback,
          theme: theme,
          modules: ["heatmap", "gantt", "pattern-fill"]
        });
      };

      return HeatmapHighChart;
    }(React__default.Component);

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    // null is a special value in highcharts for heatmaps.
    // However, eslint does not allow us to use null.
    // Making an exception for this file only works around that problem
    // while keeping the eslint rules active for all other files.
    var HighchartsNull = null;

    // Copyright (c) Microsoft Corporation.
    function buildScatterTemplate(jointData, chartProps, x, y, index, absoluteIndex, showColorAxis, xMap, yMap, xOfCluster, yOfCluster) {
      var hovertemplate = "";
      var customData = {};
      var xName = jointData.metaDict[chartProps.xAxis.property].label;
      var yName = jointData.metaDict[chartProps.yAxis.property].label;
      var isXCategorical = jointData.metaDict[chartProps.xAxis.property].isCategorical || jointData.metaDict[chartProps.xAxis.property].treatAsCategorical;
      var isYCategorical = jointData.metaDict[chartProps.yAxis.property].isCategorical || jointData.metaDict[chartProps.yAxis.property].treatAsCategorical;
      var xValue = getAxisValueMapping(chartProps.xAxis.property, x, isXCategorical, xMap, xOfCluster);
      var yValue = getAxisValueMapping(chartProps.yAxis.property, y, isYCategorical, yMap, yOfCluster);

      if (chartProps.xAxis) {
        hovertemplate += xName + ": " + xValue + "<br>";
      }

      if (chartProps.yAxis) {
        hovertemplate += yName + ": " + yValue + "<br>";
      }

      if (showColorAxis && chartProps.colorAxis) {
        hovertemplate += jointData.metaDict[chartProps.colorAxis.property].label + ": " + customData.Color + "<br>";
      }

      hovertemplate += localization.localization.Interpret.Charts.rowIndex + ": " + index + "<br>";
      hovertemplate += localization.localization.Interpret.Charts.absoluteIndex + ": " + absoluteIndex + "<br>";
      customData.template = hovertemplate;
      customData.AbsoluteIndex = absoluteIndex;
      customData.Index = index;
      return customData;
    }

    function getAxisValueMapping(axisProperty, axisValue, axisIsCategorical, axisMap, axisOfCluster) {
      if (axisMap && (axisProperty === JointDataset.ClassificationError || axisIsCategorical)) {
        return axisOfCluster !== undefined ? axisMap[axisOfCluster] : axisValue;
      }

      return axisValue;
    }

    // Copyright (c) Microsoft Corporation.
    var maxSelection = 2;
    function getScatterPlot(clusterData, jointDataset, selectedPointsIndexes, chartProps, customPoints, showColorAxis, useDifferentColorForScatterPoints) {
      var xSeries = clusterData.xSeries,
          ySeries = clusterData.ySeries,
          xOfCluster = clusterData.x,
          yOfCluster = clusterData.y,
          indexSeries = clusterData.indexSeries,
          xMap = clusterData.xMap,
          yMap = clusterData.yMap;
      var dataSeries = [];
      var result = [];
      var color = useDifferentColorForScatterPoints ? FluentUIStyles.scatterFluentUIColorPalette[5] : undefined;

      if (ySeries) {
        ySeries.forEach(function (data, index) {
          dataSeries.push({
            customData: chartProps && buildScatterTemplate(jointDataset, chartProps, xSeries === null || xSeries === void 0 ? void 0 : xSeries[index], data, index, indexSeries[index], showColorAxis, xMap, yMap, xOfCluster, yOfCluster),
            marker: getMarker(selectedPointsIndexes, index, color),
            x: xSeries === null || xSeries === void 0 ? void 0 : xSeries[index],
            y: data
          });
        });
      }

      dataSeries.map(function (d) {
        var marker = getMarker(selectedPointsIndexes, d.customData.Index, color);
        return d.marker = marker;
      });

      if (customPoints) {
        var customPointsCustomData_1 = getCustomPointCustomData(customPoints, jointDataset, chartProps);
        customPoints.forEach(function (_cp, index) {
          dataSeries.push({
            customData: customPointsCustomData_1[index],
            marker: getCustomPointMarker(customPoints, index),
            x: customPointsCustomData_1[index].rawXValue,
            y: customPointsCustomData_1[index].rawYValue
          });
        });
      }

      result.push({
        data: dataSeries
      });
      return result;
    }

    function getMarker(selectedPointsIndexes, index, colorToUse) {
      var selectionIndex = selectedPointsIndexes.indexOf(index);
      var color = getColor(selectionIndex, colorToUse);
      var marker = {
        fillColor: color,
        radius: 4,
        symbol: selectionIndex === -1 ? "circle" : "square"
      };
      return marker;
    }

    function getColor(selectionIndex, colorToUse) {
      var color;

      if (colorToUse) {
        color = colorToUse;
      } else if (selectionIndex === -1) {
        color = FluentUIStyles.fabricColorInactiveSeries;
      } else {
        color = FluentUIStyles.fluentUIColorPalette[selectionIndex];
      }

      return color;
    }

    function getCustomPointMarker(customPoints, index) {
      return {
        fillColor: customPoints.map(function (_, i) {
          return FluentUIStyles.fluentUIColorPalette[maxSelection + 1 + i];
        })[index],
        radius: 4,
        symbol: "triangle"
      };
    }

    function getCustomPointCustomData(customPoints, jointDataset, chartProps) {
      var customdata = JointDataset.unwrap(customPoints, JointDataset.IndexLabel).map(function (val) {
        var dict = {};
        dict[JointDataset.IndexLabel] = val;
        return dict;
      });
      customPoints.forEach(function (val, index) {
        customdata[index].Name = val.Name ? val.Name : val.Index;
        customdata[index].AbsoluteIndex = val.AbsoluteIndex;
      });

      if (chartProps && chartProps.xAxis && chartProps.yAxis) {
        var metaX_1 = jointDataset.metaDict[chartProps.xAxis.property];
        var metaY_1 = jointDataset.metaDict[chartProps.yAxis.property];
        var rawX = JointDataset.unwrap(customPoints, chartProps.xAxis.property);
        var rawY_1 = JointDataset.unwrap(customPoints, chartProps.yAxis.property);
        rawX.forEach(function (val, index) {
          var _a, _b, _c, _d;

          if (metaX_1 === null || metaX_1 === void 0 ? void 0 : metaX_1.treatAsCategorical) {
            customdata[index].X = (_a = metaX_1.sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a[val];
          } else {
            customdata[index].X = val.toLocaleString(undefined, {
              maximumSignificantDigits: 5
            });
          }

          customdata[index].rawXValue = val;

          if (metaY_1 === null || metaY_1 === void 0 ? void 0 : metaY_1.treatAsCategorical) {
            customdata[index].Y = (_b = metaY_1.sortedCategoricalValues) === null || _b === void 0 ? void 0 : _b[rawY_1[index]];
          } else {
            customdata[index].Y = rawY_1[index].toLocaleString(undefined, {
              maximumSignificantDigits: 5
            });
          }

          var hovertemplate = "";
          hovertemplate += customdata[index].Name + "<br>";
          hovertemplate += metaX_1.label + ": " + customdata[index].X + "<br>";
          hovertemplate += metaY_1.label + ": " + customdata[index].Y + "<br>";
          customdata[index].rawYValue = rawY_1[index];

          if (((_c = jointDataset.datasetMetaData) === null || _c === void 0 ? void 0 : _c.featureMetaData) !== undefined) {
            var identityFeatureName = (_d = jointDataset.datasetMetaData.featureMetaData) === null || _d === void 0 ? void 0 : _d.identity_feature_name;

            if (identityFeatureName !== undefined) {
              var jointDatasetFeatureName = jointDataset.getJointDatasetFeatureName(identityFeatureName);

              if (jointDatasetFeatureName !== undefined) {
                var metaIdentityFeature_1 = jointDataset.metaDict[jointDatasetFeatureName];
                var rawIdentityFeature = JointDataset.unwrap(customPoints, jointDatasetFeatureName);
                rawIdentityFeature.forEach(function (val, index) {
                  var _a;

                  if (metaIdentityFeature_1 === null || metaIdentityFeature_1 === void 0 ? void 0 : metaIdentityFeature_1.treatAsCategorical) {
                    customdata[index].ID = (_a = metaIdentityFeature_1.sortedCategoricalValues) === null || _a === void 0 ? void 0 : _a[val];
                  } else {
                    customdata[index].ID = val.toLocaleString(undefined, {
                      maximumSignificantDigits: 5
                    });
                  }
                });
                hovertemplate += localization.localization.Common.identityFeature + " (" + metaIdentityFeature_1.label + "): " + customdata[index].ID + "<br>";
              }
            }
          }

          hovertemplate += localization.localization.Interpret.Charts.rowIndex + ": " + customdata[index].Index + "<br>";
          hovertemplate += localization.localization.Interpret.Charts.absoluteIndex + ": " + customdata[index].AbsoluteIndex + "<br>";
          hovertemplate += "<extra></extra>";
          customdata[index].template = hovertemplate;
        });
      }

      return customdata;
    }

    // Copyright (c) Microsoft Corporation.
    function getScatterOption(clusterData, chartProps, jointData, selectedPointsIndexes, customPoints, isScatterPlotDataLoading, showColorAxis, useDifferentColorForScatterPoints, selectPointFromChartLargeData) {
      var dataSeries = getScatterPlot(clusterData, jointData, selectedPointsIndexes, chartProps, customPoints, showColorAxis, useDifferentColorForScatterPoints);
      var theme = react.getTheme();
      return {
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          type: "scatter",
          zoomType: "xy"
        },
        plotOptions: {
          scatter: {
            tooltip: {
              headerFormat: "",
              pointFormat: "{point.customData.template}"
            }
          },
          series: {
            cursor: isScatterPlotDataLoading ? "wait" : "pointer",
            lineWidth: 0,
            point: {
              events: {
                click: function click() {
                  if (!isScatterPlotDataLoading) {
                    if (selectPointFromChartLargeData === undefined) {
                      return;
                    }

                    selectPointFromChartLargeData(this);
                  }
                }
              }
            },
            states: {
              hover: {
                lineWidthPlus: 0
              }
            },
            turboThreshold: 0
          }
        },
        series: dataSeries,
        tooltip: {
          shared: true
        },
        xAxis: {
          type: chartProps === null || chartProps === void 0 ? void 0 : chartProps.xAxis.type
        },
        yAxis: {
          type: chartProps === null || chartProps === void 0 ? void 0 : chartProps.yAxis.type
        }
      };
    }

    // Copyright (c) Microsoft Corporation.
    function getBubbleChartOptions(data, xAxisLabel, yAxisLabel, chartProps, jointData, selectedPointsIndexes, customPoints, isScatterPlotDataLoading, showColorAxis, useDifferentColorForScatterPoints, onBubbleClick, selectPointFromChartLargeData, onIndexSeriesUpdated) {
      var bubbleData = convertSDKObjectToBubbleData(data);
      var theme = react.getTheme();
      return {
        chart: {
          backgroundColor: theme.semanticColors.bodyBackground,
          plotBorderWidth: 1,
          type: "bubble",
          zoomType: "xy"
        },
        custom: {
          disableUpdate: true
        },
        legend: {
          enabled: false
        },
        plotOptions: {
          series: {
            cursor: "pointer",
            dataLabels: {
              enabled: true,
              format: "{point.name}"
            },
            point: {
              events: {
                click: function click() {
                  var clusterData = {
                    indexSeries: this["indexSeries"],
                    x: this["x"],
                    xMap: this["xMap"],
                    xSeries: this["xSeries"],
                    y: this["y"],
                    yMap: this["yMap"],
                    ySeries: this["ySeries"]
                  };
                  var scatterPlotData = getScatterOption(clusterData, chartProps, jointData, selectedPointsIndexes, customPoints, isScatterPlotDataLoading, showColorAxis, useDifferentColorForScatterPoints, selectPointFromChartLargeData);
                  onBubbleClick && onBubbleClick(scatterPlotData, clusterData);
                  onIndexSeriesUpdated && onIndexSeriesUpdated(this["indexSeries"]);
                }
              }
            }
          }
        },
        series: [{
          data: bubbleData,
          type: "bubble"
        }],
        tooltip: {
          followPointer: true,
          footerFormat: "</table>",
          headerFormat: "<table>",
          pointFormat: xAxisLabel + ": {point.x}<br>" + (yAxisLabel + ": {point.y}<br>") + (localization.localization.Counterfactuals.Size + ": {point.z}<br>"),
          useHTML: true
        },
        xAxis: {
          gridLineWidth: 1,
          labels: {
            format: "{value}"
          },
          plotLines: [{
            color: theme.palette.black,
            dashStyle: "Dot",
            value: 65,
            width: 2,
            zIndex: 3
          }]
        },
        yAxis: {
          endOnTick: false,
          labels: {
            format: "{value}"
          },
          maxPadding: 0.2,
          plotLines: [{
            color: theme.palette.black,
            dashStyle: "Dot",
            value: 50,
            width: 2,
            zIndex: 3
          }],
          startOnTick: false
        }
      };
    }

    function convertSDKObjectToBubbleData(data) {
      var bubData = Object.values(data).map(function (d) {
        return {
          id: d.id,
          indexSeries: d.index_series,
          name: undefined,
          testData: d.test_data,
          x: d.x,
          xMap: d.x_map,
          xSeries: d.x_series,
          y: d.y,
          yMap: d.y_map,
          ySeries: d.y_series,
          z: d.size
        };
      });
      return bubData;
    }

    // Copyright (c) Microsoft Corporation.
    function calculateBubblePlotDataFromErrorCohort(errorCohort, chartProps, customPoints, jointDataset, dataset, isScatterPlotDataLoading, showColorAxis, useDifferentColorForScatterPoints, eventName, requestBubblePlotData, selectPointFromChartLargeData, onBubbleClick, onIndexSeriesUpdated, telemetryHook) {
      return __awaiter(this, void 0, void 0, function () {
        var selectedPointsIndexes, bubbleChartData, error_1;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!(ifEnableLargeData(dataset) && requestBubblePlotData)) return [3
              /*break*/
              , 4];
              _a.label = 1;

            case 1:
              _a.trys.push([1, 3,, 4]);

              selectedPointsIndexes = [];
              return [4
              /*yield*/
              , calculateBubblePlotDataFromSDK(errorCohort, jointDataset, requestBubblePlotData, jointDataset.metaDict[chartProps === null || chartProps === void 0 ? void 0 : chartProps.xAxis.property].label, jointDataset.metaDict[chartProps === null || chartProps === void 0 ? void 0 : chartProps.yAxis.property].label)];

            case 2:
              bubbleChartData = _a.sent();
              telemetryHook === null || telemetryHook === void 0 ? void 0 : telemetryHook({
                level: exports.TelemetryLevels.Trace,
                message: eventName,
                type: exports.TelemetryEventName.BubblePlotDataFetchSuccess
              });
              return [2
              /*return*/
              , getBubbleChartOptions(bubbleChartData.clusters, jointDataset.metaDict[chartProps === null || chartProps === void 0 ? void 0 : chartProps.xAxis.property].label, jointDataset.metaDict[chartProps === null || chartProps === void 0 ? void 0 : chartProps.yAxis.property].label, chartProps, jointDataset, selectedPointsIndexes, customPoints, isScatterPlotDataLoading, showColorAxis, useDifferentColorForScatterPoints, onBubbleClick, selectPointFromChartLargeData, onIndexSeriesUpdated)];

            case 3:
              error_1 = _a.sent();

              if (error_1) {
                telemetryHook === null || telemetryHook === void 0 ? void 0 : telemetryHook({
                  context: error_1,
                  level: exports.TelemetryLevels.Error,
                  message: eventName,
                  type: exports.TelemetryEventName.BubblePlotDataFetchError
                });
                return [2
                /*return*/
                , error_1];
              }

              return [3
              /*break*/
              , 4];

            case 4:
              return [2
              /*return*/
              , undefined];
          }
        });
      });
    }
    function calculateBubblePlotDataFromSDK(errorCohort, jointDataset, requestBubblePlotData, xAxis, yAxis) {
      return __awaiter(this, void 0, void 0, function () {
        var filtersRelabeled, compositeFiltersRelabeled, result;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              filtersRelabeled = Cohort.getLabeledFilters(errorCohort.filters, jointDataset);
              compositeFiltersRelabeled = Cohort.getLabeledCompositeFilters(errorCohort.compositeFilters, jointDataset);
              return [4
              /*yield*/
              , requestBubblePlotData === null || requestBubblePlotData === void 0 ? void 0 : requestBubblePlotData(filtersRelabeled, compositeFiltersRelabeled, xAxis, yAxis, new AbortController().signal)];

            case 1:
              result = _a.sent();
              return [2
              /*return*/
              , result];
          }
        });
      });
    }
    function instanceOfHighChart(object) {
      return "chart" in object;
    }

    // Copyright (c) Microsoft Corporation.
    // Licensed under the MIT License.
    var FieldChangeUpdate;

    (function (FieldChangeUpdate) {
      FieldChangeUpdate["Dither"] = "dither";
      FieldChangeUpdate["Property"] = "property";
      FieldChangeUpdate["Type"] = "type";
    })(FieldChangeUpdate || (FieldChangeUpdate = {}));

    function getInitialClusterState() {
      return {
        indexSeries: [],
        x: undefined,
        xSeries: [],
        y: undefined,
        ySeries: []
      };
    }
    function hasAxisTypeChanged(changedKeys) {
      // return true only if type of the axis has changed in panel
      var changedKeysTemp = removeParentKeys(changedKeys);
      return changedKeysTemp.length === 1 && changedKeysTemp.includes(FieldChangeUpdate.Type);
    }

    function removeParentKeys(changedKeys) {
      var valuesToRemove = new Set(["options", "xAxis", "yAxis", "colorAxis"]); // Since chartProps is a nested object, these are parent keys which are usually changed if inner keys are changed.

      return changedKeys.filter(function (item) {
        return !valuesToRemove.has(item);
      });
    }

    function compareChartProps(newProps, oldProps, changedKeys) {
      for (var key in newProps) {
        if (typeof newProps[key] === "object") {
          compareChartProps(newProps[key], oldProps[key], changedKeys);
        }

        if (newProps[key] !== oldProps[key]) {
          changedKeys.push(key);
        }
      }
    }
    function hasAxisTypeUpdated(changedKeys, prevChartProps, currentChartProps) {
      if (currentChartProps && prevChartProps) {
        changedKeys = [];
        compareChartProps(prevChartProps, currentChartProps, changedKeys);
        return hasAxisTypeChanged(changedKeys);
      }

      return false;
    }

    exports.AccessibleDetailsList = AccessibleDetailsList;
    exports.Announce = Announce;
    exports.AxisConfig = AxisConfig;
    exports.AxisConfigDialog = AxisConfigDialog;
    exports.AxisConfigDialogSpinButton = AxisConfigDialogSpinButton;
    exports.BaseCohortStats = BaseCohortStats;
    exports.BasicHighChart = BasicHighChart;
    exports.Cohort = Cohort;
    exports.CohortBar = CohortBar;
    exports.CohortBasedComponent = CohortBasedComponent;
    exports.CohortEditor = CohortEditor;
    exports.CohortEditorFilterList = CohortEditorFilterList;
    exports.CohortInfo = CohortInfo;
    exports.CohortInfoPanel = CohortInfoPanel;
    exports.CohortInfoSection = CohortInfoSection;
    exports.CohortList = CohortList;
    exports.CohortListPanel = CohortListPanel;
    exports.CohortNameColumn = CohortNameColumn;
    exports.ConfirmationDialog = ConfirmationDialog;
    exports.DatasetCohort = DatasetCohort;
    exports.EditCohort = EditCohort;
    exports.ErrorCohort = ErrorCohort;
    exports.ErrorCohortStats = ErrorCohortStats;
    exports.ErrorDialog = ErrorDialog;
    exports.ExpandableText = ExpandableText;
    exports.FeatureImportanceBar = FeatureImportanceBar;
    exports.FeatureImportanceDependence = FeatureImportanceDependence;
    exports.FluentUIStyles = FluentUIStyles;
    exports.HeaderWithInfo = HeaderWithInfo;
    exports.HeatmapHighChart = HeatmapHighChart;
    exports.HighchartsNull = HighchartsNull;
    exports.InteractiveLegend = InteractiveLegend;
    exports.IsBinary = IsBinary;
    exports.IsClassifier = IsClassifier;
    exports.IsMulticlass = IsMulticlass;
    exports.IsMultilabel = IsMultilabel;
    exports.IsObjectDetection = IsObjectDetection;
    exports.JointDataset = JointDataset;
    exports.LabelWithCallout = LabelWithCallout;
    exports.LoadingSpinner = LoadingSpinner;
    exports.MetricCohortStats = MetricCohortStats;
    exports.Metrics = Metrics;
    exports.MissingParametersPlaceholder = MissingParametersPlaceholder;
    exports.ModelAssessmentContext = modelAssessmentContext;
    exports.ModelExplanationUtils = ModelExplanationUtils;
    exports.NoData = NoData;
    exports.NoLabel = NoLabel;
    exports.OverallMetricChart = OverallMetricChart;
    exports.PredictionPath = PredictionPath;
    exports.SVGToolTip = SVGToolTip;
    exports.SaveCohort = SaveCohort;
    exports.ShiftCohort = ShiftCohort;
    exports.SpinButtonStyles = SpinButtonStyles;
    exports.TotalCohortSamples = TotalCohortSamples;
    exports.areRowPredTrueLabelsEqual = areRowPredTrueLabelsEqual;
    exports.boxChartTooltipDefaultSetting = boxChartTooltipDefaultSetting;
    exports.buildGlobalProperties = buildGlobalProperties;
    exports.buildIndexedNames = buildIndexedNames;
    exports.buildScatterTemplate = buildScatterTemplate;
    exports.calculateBoxPlotData = calculateBoxPlotData;
    exports.calculateBoxPlotDataFromErrorCohort = calculateBoxPlotDataFromErrorCohort;
    exports.calculateBoxPlotDataFromSDK = calculateBoxPlotDataFromSDK;
    exports.calculateBubblePlotDataFromErrorCohort = calculateBubblePlotDataFromErrorCohort;
    exports.calculateBubblePlotDataFromSDK = calculateBubblePlotDataFromSDK;
    exports.calculateConfusionMatrixData = calculateConfusionMatrixData;
    exports.calculateLinePlotData = calculateLinePlotData;
    exports.calculateSplinePlotDataFromErrorCohort = calculateSplinePlotDataFromErrorCohort;
    exports.cohortKey = cohortKey;
    exports.compareChartProps = compareChartProps;
    exports.constructCols = constructCols;
    exports.constructRows = constructRows;
    exports.dataBalanceExperienceFlight = dataBalanceExperienceFlight;
    exports.defaultModelAssessmentContext = defaultModelAssessmentContext;
    exports.defaultTheme = defaultTheme;
    exports.descriptionMaxWidth = descriptionMaxWidth;
    exports.featureColumnsExist = featureColumnsExist;
    exports.featureFlightSeparator = featureFlightSeparator;
    exports.featureFlights = featureFlights;
    exports.flexLgDown = flexLgDown;
    exports.flexMdDown = flexMdDown;
    exports.flexSmDown = flexSmDown;
    exports.flexXlDown = flexXlDown;
    exports.flipComparisonType = flipComparisonType;
    exports.fullLgDown = fullLgDown;
    exports.fullXlDown = fullXlDown;
    exports.generateDefaultChartAxes = generateDefaultChartAxes;
    exports.generateDefaultYAxis = generateDefaultYAxis;
    exports.generateGenerativeTextStats = generateGenerativeTextStats;
    exports.generateMetrics = generateMetrics;
    exports.generateMicroMacroMetrics = generateMicroMacroMetrics;
    exports.generateMulticlassStats = generateMulticlassStats;
    exports.generateMultilabelStats = generateMultilabelStats;
    exports.generateObjectDetectionStats = generateObjectDetectionStats;
    exports.generateQuestionAnsweringStats = generateQuestionAnsweringStats;
    exports.generateRoute = generateRoute;
    exports.getBasicFilterString = getBasicFilterString;
    exports.getBoxData = getBoxData;
    exports.getBubbleChartOptions = getBubbleChartOptions;
    exports.getChartColors = getChartColors;
    exports.getChartColorsMap = getChartColorsMap;
    exports.getClassLength = getClassLength;
    exports.getClassLengthFromProbabilityY = getClassLengthFromProbabilityY;
    exports.getClassLengthFromTextImportances = getClassLengthFromTextImportances;
    exports.getCohortFilterCount = getCohortFilterCount;
    exports.getColumnRanges = getColumnRanges;
    exports.getCompositeFilterString = getCompositeFilterString;
    exports.getDependencyChartOptions = getDependencyChartOptions;
    exports.getFeatureNamesAfterDrop = getFeatureNamesAfterDrop;
    exports.getFeatureOptions = getFeatureOptions;
    exports.getFilterBoundsArgs = getFilterBoundsArgs;
    exports.getFilters = getFilters;
    exports.getInitialClusterState = getInitialClusterState;
    exports.getModelType = getModelType;
    exports.getModelTypeFromExplanation = getModelTypeFromExplanation;
    exports.getModelTypeFromTextExplanation = getModelTypeFromTextExplanation;
    exports.getPercentile = getPercentile;
    exports.getPrimaryBackgroundChartColor = getPrimaryBackgroundChartColor;
    exports.getPrimaryChartColor = getPrimaryChartColor;
    exports.getRandomId = getRandomId;
    exports.getScatterOption = getScatterOption;
    exports.getScatterPlot = getScatterPlot;
    exports.hasAxisTypeChanged = hasAxisTypeChanged;
    exports.hasAxisTypeUpdated = hasAxisTypeUpdated;
    exports.hideLgDown = hideLgDown;
    exports.hideXlDown = hideXlDown;
    exports.hideXxlUp = hideXxlUp;
    exports.ifEnableLargeData = ifEnableLargeData;
    exports.initializeOfficeFabric = initializeOfficeFabric;
    exports.instanceOfHighChart = instanceOfHighChart;
    exports.isFlightActive = isFlightActive;
    exports.isNumber = isNumber;
    exports.isThreeDimArray = isThreeDimArray;
    exports.isTimeOrTimeSeriesIDColumn = isTimeOrTimeSeriesIDColumn;
    exports.isTwoDimArray = isTwoDimArray;
    exports.limitStringLength = limitStringLength;
    exports.mayBecomeNumber = mayBecomeNumber;
    exports.nameof = nameof;
    exports.noPaddingMdDown = noPaddingMdDown;
    exports.orderByTime = orderByTime;
    exports.parseFeatureFlights = parseFeatureFlights;
    exports.rowErrorSize = rowErrorSize;
    exports.rowsFromCustomPoints = rowsFromCustomPoints;
    exports.setOutlierDataIfChanged = setOutlierDataIfChanged;
    exports.stringFormat = stringFormat;
    exports.tableStyles = tableStyles;
    exports.toScientific = toScientific;
    exports.translateToLegacyFilterColumn = translateToLegacyFilterColumn;
    exports.translateToLegacyFilters = translateToLegacyFilters;
    exports.translateToNewFilter = translateToNewFilter;
    exports.translateToNewFilters = translateToNewFilters;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
